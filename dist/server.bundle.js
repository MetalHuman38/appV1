(()=>{"use strict";var e,r,o,t,s,n={9469:(e,r,o)=>{o.d(r,{_:()=>s});var t=o(2613);const s=(0,o(7546).load)({PORT:Number,NODE_ENV:["production","development"],MORGAN:["combined","dev","tiny"],APP_NAME:String,BASE_URL:String,BASE64_ENCODED:Buffer,TRACING:Boolean,EXTRA:String,RARE_LIMIT_TIME:Number,RARE_LIMIT_WINDOW_MS:Number,MAX:Number,RARE_LIMIT_MESSAGE:String,RARE_LIMIT_CODE:Number,TRUST_PROXY:Boolean,NUMBER_OF_PROXIES:Number,IDLE_TIMEOUT:Number,COMPRESSION_LEVEL:Number,COMPRESSION_THRESHOLD:Number,ERROR_TIMEOUT:Number,RESPONSE_STATUS:String,RESPONSE_MESSAGE:String,RESPONSE_CODE:Number,RESPONSE_ERROR_CODE:Number,RESPONSE_ERROR_MESSAGE:String,RESPONSE_SERVER_ERROR:String,RESPONSE_ERROR_STATUS:String,RESPONSE_ERROR_DATA:String,RESPONSE_ERROR_STACK:String,RESPONSE_ERROR_NAME:String}),{APP_NAME:n,TRACING:i,PORT:u,MORGAN:a,NODE_ENV:c,BASE_URL:l,BASE64_ENCODED:E,EXTRA:d,RARE_LIMIT_TIME:R,RARE_LIMIT_WINDOW_MS:p,RESPONSE_ERROR_CODE:_,MAX:S,RARE_LIMIT_MESSAGE:m,RARE_LIMIT_CODE:O,TRUST_PROXY:b,NUMBER_OF_PROXIES:h,IDLE_TIMEOUT:f,COMPRESSION_LEVEL:g,COMPRESSION_THRESHOLD:k,ERROR_TIMEOUT:N}=s;if(500===_)throw new Error("Internal Server Error! No env file found!");if(t.strict.ok(i,"Tracing should be true"),t.strict.ok(8081===u,"Port should be 8081"),t.strict.ok("production"===c,"Node environment should be production"),t.strict.ok("http://localhost:8081"===l,"Base URL should be correct"),t.strict.ok(E.equals(Buffer.from("ðŸš€")),"Base64 encoded value should match"),t.strict.ok("true"===d,"Extra should be true"),t.strict.ok(9e5===R,"Rate limit time should be 15m"),t.strict.ok(9e5===p,"Rate limit window should be 15m"),t.strict.ok(100===S,"Max should be 100"),t.strict.ok(m,"Too many requests, please try again later"),t.strict.ok(429===O,"Rate limit code should be 429"),t.strict.ok(b,"Trust proxy should be true initially"),t.strict.ok(1===h,"Number of proxies should be 1"),t.strict.ok(48e4===f,"Idle timeout should be 8m"),t.strict.ok(9===g,"Compression level should be 9"),t.strict.ok(1024===k,"Compression threshold should be 1024"),t.strict.ok(5e3===N,"Error timeout should be 5s"),!/^[a-zA-Z0-9-.]+$/.test(n))throw new Error(`Invalid APP_NAME: ${n}`)},423:e=>{e.exports=require("@sequelize/core")},5520:e=>{e.exports=require("@sequelize/mariadb")},5486:e=>{e.exports=require("bcrypt")},3268:e=>{e.exports=require("body-parser")},6898:e=>{e.exports=require("cookie-parser")},8577:e=>{e.exports=require("cors")},818:e=>{e.exports=require("dotenv")},4469:e=>{e.exports=require("dotenv/config")},7252:e=>{e.exports=require("express")},1763:e=>{e.exports=require("express-rate-limit")},2525:e=>{e.exports=require("helmet")},829:e=>{e.exports=require("jsonwebtoken")},2096:e=>{e.exports=require("morgan")},8461:e=>{e.exports=require("multer")},2011:e=>{e.exports=require("node-cache")},9031:e=>{e.exports=require("sequelize")},7546:e=>{e.exports=require("ts-dotenv")},7189:e=>{e.exports=require("validate-image-type")},2613:e=>{e.exports=require("assert")},6982:e=>{e.exports=require("crypto")},9896:e=>{e.exports=require("fs")},3024:e=>{e.exports=require("node:fs")},6760:e=>{e.exports=require("node:path")},643:e=>{e.exports=require("node:perf_hooks")},1708:e=>{e.exports=require("node:process")},3136:e=>{e.exports=require("node:url")},6928:e=>{e.exports=require("path")}},i={};function u(e){var r=i[e];if(void 0!==r)return r.exports;var o=i[e]={exports:{}};return n[e](o,o.exports,u),o.exports}u.m=n,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",r="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",t=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},u.a=(s,n,i)=>{var u;i&&((u=[]).d=-1);var a,c,l,E=new Set,d=s.exports,R=new Promise(((e,r)=>{l=r,c=e}));R[r]=d,R[e]=e=>(u&&e(u),E.forEach(e),R.catch((e=>{}))),s.exports=R,n((s=>{var n;a=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[e])return s;if(s.then){var n=[];n.d=0,s.then((e=>{i[r]=e,t(n)}),(e=>{i[o]=e,t(n)}));var i={};return i[e]=e=>e(n),i}}var u={};return u[e]=e=>{},u[r]=s,u})))(s);var i=()=>a.map((e=>{if(e[o])throw e[o];return e[r]})),c=new Promise((r=>{(n=()=>r(i)).r=0;var o=e=>e!==u&&!E.has(e)&&(E.add(e),e&&!e.d&&(n.r++,e.push(n)));a.map((r=>r[e](o)))}));return n.r?c:i()}),(e=>(e?l(R[o]=e):c(d),t(u)))),u&&u.d<0&&(u.d=0)},u.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return u.d(r,{a:r}),r},u.d=(e,r)=>{for(var o in r)u.o(r,o)&&!u.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},u.f={},u.e=e=>Promise.all(Object.keys(u.f).reduce(((r,o)=>(u.f[o](e,r),r)),[])),u.u=e=>e+".bundle.js",u.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s={750:1},u.f.require=(e,r)=>{s[e]||(e=>{var r=e.modules,o=e.ids,t=e.runtime;for(var n in r)u.o(r,n)&&(u.m[n]=r[n]);t&&t(u);for(var i=0;i<o.length;i++)s[o[i]]=1})(require("./"+u.u(e)))};const a=require("compression");var c=u.n(a),l=u(8577),E=u.n(l),d=u(7252),R=u.n(d);const p=require("node:async_hooks"),_=require("node:http");var S=u.n(_),m=u(1708),O=u.n(m);const b=require("worker_threads");var h=u(9469);u(818).config(),async function(){const e=R()();async function r(){const e=new b.Worker("./four-worker.config.js",{workerData:{thread_count:4}});return new Promise(((r,o)=>{e.on("message",(e=>{r(e)})),e.on("error",(e=>{o(`Worker error: ${e}`)})),e.on("exit",(e=>{0!==e&&o(`Worker stopped with exit code ${e}`)}))}))}e.use(E()({origin:"http://localhost:8080",credentials:!0})),(await u.e(545).then(u.bind(u,1545))).default({app:e}),e.use("/heavy",((e,r)=>{const o=Array.from({length:1e6},(()=>Math.random()));let t=0;for(let e=0;e<o.length;e++)t+=o[e];r.send(`The result of the CPU = ${o} and total operation is: ${t}`)})),e.get("/non-blocking/",((e,r)=>{r.status(200).send("Non-blocking request")})),e.get("/blocking-worker",(async(e,o)=>{const t=Date.now();try{const e=await r();console.log(`Worker took ${Date.now()-t}ms to complete`),o.status(200).send(`Blocking worker: ${e}`)}catch(e){console.log(`Error in worker: ${e}`),o.status(500).send(`Blocking worker failed: ${e}`)}})),e.get("/blocking",(async(e,o)=>{const t=Date.now(),s=[];for(let e=0;e<4;e++)s.push(r());try{const e=await Promise.all(s),r=e[0]+e[1]+e[2]+e[3];console.log(`Workers took ${Date.now()-t}ms to complete`),o.status(200).send(`Blocking workers: ${r}`)}catch(e){console.log(`Error in worker: ${e}`),o.status(500).send(`Blocking workers failed: ${e}`)}}));const o=S().createServer(e),t=new p.AsyncLocalStorage;function s(e){const r=t.getStore();console.log(`${void 0!==r?r:"-"} ${e}`)}let n=0;o.on("connection",(e=>{const r=n++;t.run(r,(()=>{s("Client connected to server!!!"),e.on("close",(()=>{s("Client disconnected from server!!!")}))}))})),o.listen(h._.PORT,(()=>{console.log(`Server listening on port ${h._.PORT}`)})),e.use(c()({filter:(e,r)=>!e.headers["x-no-compression"]&&c().filter(e,r),level:h._.COMPRESSION_LEVEL||9,threshold:h._.COMPRESSION_THRESHOLD||1024}));const i=h._.IDLE_TIMEOUT||48e4;let a=setTimeout((()=>{o.close((()=>{console.log("Server closed due to idle time out! Restarting...."),O().exit(0)}))}),i);e.use(((e,r,t)=>{clearTimeout(a),a=setTimeout((()=>{o.close((()=>{console.log("Cleared Time out! Restarting...."),O().exit(0)}))}),i),t()})),O().on("uncaughtExceptionMonitor",((e,r)=>{console.log("Uncaught Exception:",e,"Origin:",r),O().exit(1)})),o.on("error",(e=>{console.error(e),O().exit(1)}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixPQUFNLEtBQ1R4QixRQUFRQyxJQUFJLG9DQUNaLFNBQWEsRUFBRSxHQUNqQixHQUNIb0IsR0FDSEssR0FBTSxJQUVWLE9BQVcsNEJBQTRCLENBQUN2RixFQUFLNkMsS0FDekNnQixRQUFRQyxJQUFJLHNCQUF1QjlELEVBQUssVUFBVzZDLEdBQ25ELFNBQWEsRUFBRSxJQUVuQnFCLEVBQU8xQixHQUFHLFNBQVNFLElBQ2ZtQixRQUFRbkIsTUFBTUEsR0FDZCxTQUFhLEVBQUUsR0FFdkIsQ0FDQStDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcHB2LTEvd2VicGFjay9ydW50aW1lL2FzeW5jIG1vZHVsZSIsIndlYnBhY2s6Ly9hcHB2LTEvd2VicGFjay9ydW50aW1lL3JlcXVpcmUgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbmZpZy9pbmRleC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJAc2VxdWVsaXplL2NvcmVcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJAc2VxdWVsaXplL21hcmlhZGJcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJiY3J5cHRcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJib2R5LXBhcnNlclwiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBjb21tb25qcyBcImNvb2tpZS1wYXJzZXJcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJjb3JzXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIGNvbW1vbmpzIFwiZG90ZW52XCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIGNvbW1vbmpzIFwiZG90ZW52L2NvbmZpZ1wiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBjb21tb25qcyBcImV4cHJlc3NcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJleHByZXNzLXJhdGUtbGltaXRcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJoZWxtZXRcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJqc29ud2VidG9rZW5cIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJtb3JnYW5cIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJtdWx0ZXJcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJub2RlLWNhY2hlXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIGNvbW1vbmpzIFwic2VxdWVsaXplXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIGNvbW1vbmpzIFwidHMtZG90ZW52XCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIGNvbW1vbmpzIFwidmFsaWRhdGUtaW1hZ2UtdHlwZVwiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwiYXNzZXJ0XCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJjcnlwdG9cIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcImZzXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJub2RlOmZzXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJub2RlOnBhdGhcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcIm5vZGU6cGVyZl9ob29rc1wiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwibm9kZTpwcm9jZXNzXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJub2RlOnVybFwiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwicGF0aFwiIiwid2VicGFjazovL2FwcHYtMS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9hcHB2LTEvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vYXBwdi0xL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9hcHB2LTEvd2VicGFjay9ydW50aW1lL2Vuc3VyZSBjaHVuayIsIndlYnBhY2s6Ly9hcHB2LTEvd2VicGFjay9ydW50aW1lL2dldCBqYXZhc2NyaXB0IGNodW5rIGZpbGVuYW1lIiwid2VicGFjazovL2FwcHYtMS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2FwcHYtMS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBjb21tb25qcyBcImNvbXByZXNzaW9uXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJub2RlOmFzeW5jX2hvb2tzXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJub2RlOmh0dHBcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcIndvcmtlcl90aHJlYWRzXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9zZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHdlYnBhY2tRdWV1ZXMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2woXCJ3ZWJwYWNrIHF1ZXVlc1wiKSA6IFwiX193ZWJwYWNrX3F1ZXVlc19fXCI7XG52YXIgd2VicGFja0V4cG9ydHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2woXCJ3ZWJwYWNrIGV4cG9ydHNcIikgOiBcIl9fd2VicGFja19leHBvcnRzX19cIjtcbnZhciB3ZWJwYWNrRXJyb3IgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2woXCJ3ZWJwYWNrIGVycm9yXCIpIDogXCJfX3dlYnBhY2tfZXJyb3JfX1wiO1xudmFyIHJlc29sdmVRdWV1ZSA9IChxdWV1ZSkgPT4ge1xuXHRpZihxdWV1ZSAmJiBxdWV1ZS5kIDwgMSkge1xuXHRcdHF1ZXVlLmQgPSAxO1xuXHRcdHF1ZXVlLmZvckVhY2goKGZuKSA9PiAoZm4uci0tKSk7XG5cdFx0cXVldWUuZm9yRWFjaCgoZm4pID0+IChmbi5yLS0gPyBmbi5yKysgOiBmbigpKSk7XG5cdH1cbn1cbnZhciB3cmFwRGVwcyA9IChkZXBzKSA9PiAoZGVwcy5tYXAoKGRlcCkgPT4ge1xuXHRpZihkZXAgIT09IG51bGwgJiYgdHlwZW9mIGRlcCA9PT0gXCJvYmplY3RcIikge1xuXHRcdGlmKGRlcFt3ZWJwYWNrUXVldWVzXSkgcmV0dXJuIGRlcDtcblx0XHRpZihkZXAudGhlbikge1xuXHRcdFx0dmFyIHF1ZXVlID0gW107XG5cdFx0XHRxdWV1ZS5kID0gMDtcblx0XHRcdGRlcC50aGVuKChyKSA9PiB7XG5cdFx0XHRcdG9ialt3ZWJwYWNrRXhwb3J0c10gPSByO1xuXHRcdFx0XHRyZXNvbHZlUXVldWUocXVldWUpO1xuXHRcdFx0fSwgKGUpID0+IHtcblx0XHRcdFx0b2JqW3dlYnBhY2tFcnJvcl0gPSBlO1xuXHRcdFx0XHRyZXNvbHZlUXVldWUocXVldWUpO1xuXHRcdFx0fSk7XG5cdFx0XHR2YXIgb2JqID0ge307XG5cdFx0XHRvYmpbd2VicGFja1F1ZXVlc10gPSAoZm4pID0+IChmbihxdWV1ZSkpO1xuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9XG5cdH1cblx0dmFyIHJldCA9IHt9O1xuXHRyZXRbd2VicGFja1F1ZXVlc10gPSB4ID0+IHt9O1xuXHRyZXRbd2VicGFja0V4cG9ydHNdID0gZGVwO1xuXHRyZXR1cm4gcmV0O1xufSkpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5hID0gKG1vZHVsZSwgYm9keSwgaGFzQXdhaXQpID0+IHtcblx0dmFyIHF1ZXVlO1xuXHRoYXNBd2FpdCAmJiAoKHF1ZXVlID0gW10pLmQgPSAtMSk7XG5cdHZhciBkZXBRdWV1ZXMgPSBuZXcgU2V0KCk7XG5cdHZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHM7XG5cdHZhciBjdXJyZW50RGVwcztcblx0dmFyIG91dGVyUmVzb2x2ZTtcblx0dmFyIHJlamVjdDtcblx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqKSA9PiB7XG5cdFx0cmVqZWN0ID0gcmVqO1xuXHRcdG91dGVyUmVzb2x2ZSA9IHJlc29sdmU7XG5cdH0pO1xuXHRwcm9taXNlW3dlYnBhY2tFeHBvcnRzXSA9IGV4cG9ydHM7XG5cdHByb21pc2Vbd2VicGFja1F1ZXVlc10gPSAoZm4pID0+IChxdWV1ZSAmJiBmbihxdWV1ZSksIGRlcFF1ZXVlcy5mb3JFYWNoKGZuKSwgcHJvbWlzZVtcImNhdGNoXCJdKHggPT4ge30pKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwcm9taXNlO1xuXHRib2R5KChkZXBzKSA9PiB7XG5cdFx0Y3VycmVudERlcHMgPSB3cmFwRGVwcyhkZXBzKTtcblx0XHR2YXIgZm47XG5cdFx0dmFyIGdldFJlc3VsdCA9ICgpID0+IChjdXJyZW50RGVwcy5tYXAoKGQpID0+IHtcblx0XHRcdGlmKGRbd2VicGFja0Vycm9yXSkgdGhyb3cgZFt3ZWJwYWNrRXJyb3JdO1xuXHRcdFx0cmV0dXJuIGRbd2VicGFja0V4cG9ydHNdO1xuXHRcdH0pKVxuXHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGZuID0gKCkgPT4gKHJlc29sdmUoZ2V0UmVzdWx0KSk7XG5cdFx0XHRmbi5yID0gMDtcblx0XHRcdHZhciBmblF1ZXVlID0gKHEpID0+IChxICE9PSBxdWV1ZSAmJiAhZGVwUXVldWVzLmhhcyhxKSAmJiAoZGVwUXVldWVzLmFkZChxKSwgcSAmJiAhcS5kICYmIChmbi5yKyssIHEucHVzaChmbikpKSk7XG5cdFx0XHRjdXJyZW50RGVwcy5tYXAoKGRlcCkgPT4gKGRlcFt3ZWJwYWNrUXVldWVzXShmblF1ZXVlKSkpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBmbi5yID8gcHJvbWlzZSA6IGdldFJlc3VsdCgpO1xuXHR9LCAoZXJyKSA9PiAoKGVyciA/IHJlamVjdChwcm9taXNlW3dlYnBhY2tFcnJvcl0gPSBlcnIpIDogb3V0ZXJSZXNvbHZlKGV4cG9ydHMpKSwgcmVzb2x2ZVF1ZXVlKHF1ZXVlKSkpO1xuXHRxdWV1ZSAmJiBxdWV1ZS5kIDwgMCAmJiAocXVldWUuZCA9IDApO1xufTsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgY2h1bmtzXG4vLyBcIjFcIiBtZWFucyBcImxvYWRlZFwiLCBvdGhlcndpc2Ugbm90IGxvYWRlZCB5ZXRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDc1MDogMVxufTtcblxuLy8gbm8gb24gY2h1bmtzIGxvYWRlZFxuXG52YXIgaW5zdGFsbENodW5rID0gKGNodW5rKSA9PiB7XG5cdHZhciBtb3JlTW9kdWxlcyA9IGNodW5rLm1vZHVsZXMsIGNodW5rSWRzID0gY2h1bmsuaWRzLCBydW50aW1lID0gY2h1bmsucnVudGltZTtcblx0Zm9yKHZhciBtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdH1cblx0fVxuXHRpZihydW50aW1lKSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspXG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRzW2ldXSA9IDE7XG5cbn07XG5cbi8vIHJlcXVpcmUoKSBjaHVuayBsb2FkaW5nIGZvciBqYXZhc2NyaXB0XG5fX3dlYnBhY2tfcmVxdWlyZV9fLmYucmVxdWlyZSA9IChjaHVua0lkLCBwcm9taXNlcykgPT4ge1xuXHQvLyBcIjFcIiBpcyB0aGUgc2lnbmFsIGZvciBcImFscmVhZHkgbG9hZGVkXCJcblx0aWYoIWluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdGlmKHRydWUpIHsgLy8gYWxsIGNodW5rcyBoYXZlIEpTXG5cdFx0XHRpbnN0YWxsQ2h1bmsocmVxdWlyZShcIi4vXCIgKyBfX3dlYnBhY2tfcmVxdWlyZV9fLnUoY2h1bmtJZCkpKTtcblx0XHR9IGVsc2UgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMTtcblx0fVxufTtcblxuLy8gbm8gZXh0ZXJuYWwgaW5zdGFsbCBjaHVua1xuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0IiwiaW1wb3J0IHsgc3RyaWN0IGFzIGFzc2VydCB9IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgeyBsb2FkIH0gZnJvbSAndHMtZG90ZW52JztcbmNvbnN0IGVudiA9IGxvYWQoe1xuICAgIFBPUlQ6IE51bWJlcixcbiAgICBOT0RFX0VOVjogWydwcm9kdWN0aW9uJywgJ2RldmVsb3BtZW50J10sXG4gICAgTU9SR0FOOiBbJ2NvbWJpbmVkJywgJ2RldicsICd0aW55J10sXG4gICAgQVBQX05BTUU6IFN0cmluZyxcbiAgICBCQVNFX1VSTDogU3RyaW5nLFxuICAgIEJBU0U2NF9FTkNPREVEOiBCdWZmZXIsXG4gICAgVFJBQ0lORzogQm9vbGVhbixcbiAgICBFWFRSQTogU3RyaW5nLFxuICAgIFJBUkVfTElNSVRfVElNRTogTnVtYmVyLFxuICAgIFJBUkVfTElNSVRfV0lORE9XX01TOiBOdW1iZXIsXG4gICAgTUFYOiBOdW1iZXIsXG4gICAgUkFSRV9MSU1JVF9NRVNTQUdFOiBTdHJpbmcsXG4gICAgUkFSRV9MSU1JVF9DT0RFOiBOdW1iZXIsXG4gICAgVFJVU1RfUFJPWFk6IEJvb2xlYW4sXG4gICAgTlVNQkVSX09GX1BST1hJRVM6IE51bWJlcixcbiAgICBJRExFX1RJTUVPVVQ6IE51bWJlcixcbiAgICBDT01QUkVTU0lPTl9MRVZFTDogTnVtYmVyLFxuICAgIENPTVBSRVNTSU9OX1RIUkVTSE9MRDogTnVtYmVyLFxuICAgIEVSUk9SX1RJTUVPVVQ6IE51bWJlcixcbiAgICAvKiBSb3V0ZXIgUmVzcG9uc2UgKi9cbiAgICBSRVNQT05TRV9TVEFUVVM6IFN0cmluZyxcbiAgICBSRVNQT05TRV9NRVNTQUdFOiBTdHJpbmcsXG4gICAgUkVTUE9OU0VfQ09ERTogTnVtYmVyLFxuICAgIFJFU1BPTlNFX0VSUk9SX0NPREU6IE51bWJlcixcbiAgICBSRVNQT05TRV9FUlJPUl9NRVNTQUdFOiBTdHJpbmcsXG4gICAgUkVTUE9OU0VfU0VSVkVSX0VSUk9SOiBTdHJpbmcsXG4gICAgUkVTUE9OU0VfRVJST1JfU1RBVFVTOiBTdHJpbmcsXG4gICAgUkVTUE9OU0VfRVJST1JfREFUQTogU3RyaW5nLFxuICAgIFJFU1BPTlNFX0VSUk9SX1NUQUNLOiBTdHJpbmcsXG4gICAgUkVTUE9OU0VfRVJST1JfTkFNRTogU3RyaW5nLFxufSk7XG5jb25zdCB7IEFQUF9OQU1FLCBUUkFDSU5HLCBQT1JULCBNT1JHQU4sIE5PREVfRU5WLCBCQVNFX1VSTCwgQkFTRTY0X0VOQ09ERUQsIEVYVFJBLCBSQVJFX0xJTUlUX1RJTUUsIFJBUkVfTElNSVRfV0lORE9XX01TLCBSRVNQT05TRV9FUlJPUl9DT0RFLCBNQVgsIFJBUkVfTElNSVRfTUVTU0FHRSwgUkFSRV9MSU1JVF9DT0RFLCBUUlVTVF9QUk9YWSwgTlVNQkVSX09GX1BST1hJRVMsIElETEVfVElNRU9VVCwgQ09NUFJFU1NJT05fTEVWRUwsIENPTVBSRVNTSU9OX1RIUkVTSE9MRCwgRVJST1JfVElNRU9VVCwgfSA9IGVudjtcbmlmIChSRVNQT05TRV9FUlJPUl9DT0RFID09PSA1MDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludGVybmFsIFNlcnZlciBFcnJvciEgTm8gZW52IGZpbGUgZm91bmQhJyk7XG59XG5hc3NlcnQub2soVFJBQ0lORywgJ1RyYWNpbmcgc2hvdWxkIGJlIHRydWUnKTtcbmFzc2VydC5vayhQT1JUID09PSA4MDgxLCAnUG9ydCBzaG91bGQgYmUgODA4MScpO1xuYXNzZXJ0Lm9rKE5PREVfRU5WID09PSAncHJvZHVjdGlvbicsICdOb2RlIGVudmlyb25tZW50IHNob3VsZCBiZSBwcm9kdWN0aW9uJyk7XG5hc3NlcnQub2soQkFTRV9VUkwgPT09ICdodHRwOi8vbG9jYWxob3N0OjgwODEnLCAnQmFzZSBVUkwgc2hvdWxkIGJlIGNvcnJlY3QnKTtcbmFzc2VydC5vayhCQVNFNjRfRU5DT0RFRC5lcXVhbHMoQnVmZmVyLmZyb20oJ/CfmoAnKSksICdCYXNlNjQgZW5jb2RlZCB2YWx1ZSBzaG91bGQgbWF0Y2gnKTtcbmFzc2VydC5vayhFWFRSQSA9PT0gJ3RydWUnLCAnRXh0cmEgc2hvdWxkIGJlIHRydWUnKTtcbmFzc2VydC5vayhSQVJFX0xJTUlUX1RJTUUgPT09IDkwMDAwMCwgJ1JhdGUgbGltaXQgdGltZSBzaG91bGQgYmUgMTVtJyk7XG5hc3NlcnQub2soUkFSRV9MSU1JVF9XSU5ET1dfTVMgPT09IDkwMDAwMCwgJ1JhdGUgbGltaXQgd2luZG93IHNob3VsZCBiZSAxNW0nKTtcbmFzc2VydC5vayhNQVggPT09IDEwMCwgJ01heCBzaG91bGQgYmUgMTAwJyk7XG5hc3NlcnQub2soUkFSRV9MSU1JVF9NRVNTQUdFLCAnVG9vIG1hbnkgcmVxdWVzdHMsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXInKTtcbmFzc2VydC5vayhSQVJFX0xJTUlUX0NPREUgPT09IDQyOSwgJ1JhdGUgbGltaXQgY29kZSBzaG91bGQgYmUgNDI5Jyk7XG5hc3NlcnQub2soVFJVU1RfUFJPWFksICdUcnVzdCBwcm94eSBzaG91bGQgYmUgdHJ1ZSBpbml0aWFsbHknKTtcbmFzc2VydC5vayhOVU1CRVJfT0ZfUFJPWElFUyA9PT0gMSwgJ051bWJlciBvZiBwcm94aWVzIHNob3VsZCBiZSAxJyk7XG5hc3NlcnQub2soSURMRV9USU1FT1VUID09PSA0ODAwMDAsICdJZGxlIHRpbWVvdXQgc2hvdWxkIGJlIDhtJyk7XG5hc3NlcnQub2soQ09NUFJFU1NJT05fTEVWRUwgPT09IDksICdDb21wcmVzc2lvbiBsZXZlbCBzaG91bGQgYmUgOScpO1xuYXNzZXJ0Lm9rKENPTVBSRVNTSU9OX1RIUkVTSE9MRCA9PT0gMTAyNCwgJ0NvbXByZXNzaW9uIHRocmVzaG9sZCBzaG91bGQgYmUgMTAyNCcpO1xuYXNzZXJ0Lm9rKEVSUk9SX1RJTUVPVVQgPT09IDUwMDAsICdFcnJvciB0aW1lb3V0IHNob3VsZCBiZSA1cycpO1xuaWYgKCEvXlthLXpBLVowLTktLl0rJC8udGVzdChBUFBfTkFNRSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgQVBQX05BTUU6ICR7QVBQX05BTUV9YCk7XG59XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgcG9ydDogUE9SVCxcbiAgICBhcHBOYW1lOiBBUFBfTkFNRSxcbiAgICBiYXNlVXJsOiBCQVNFX1VSTCxcbiAgICBiYXNlNjRFbmNvZGVkOiBCQVNFNjRfRU5DT0RFRCxcbiAgICB0cmFjaW5nOiBUUkFDSU5HLFxuICAgIGV4dHJhOiBFWFRSQSxcbiAgICByYXRlTGltaXRUaW1lOiBSQVJFX0xJTUlUX1RJTUUsXG4gICAgcmF0ZUxpbWl0V2luZG93TXM6IFJBUkVfTElNSVRfV0lORE9XX01TLFxuICAgIG1heDogTUFYLFxuICAgIG1lc3NhZ2U6IFJBUkVfTElNSVRfTUVTU0FHRSxcbiAgICByYXRlTGltaXRDb2RlOiBSQVJFX0xJTUlUX0NPREUsXG4gICAgdHJ1c3RQcm94eTogVFJVU1RfUFJPWFksXG4gICAgbnVtYmVyT2ZQcm94aWVzOiBOVU1CRVJfT0ZfUFJPWElFUyxcbiAgICBpZGxlVGltZW91dDogSURMRV9USU1FT1VULFxuICAgIGNvbXByZXNzaW9uTGV2ZWw6IENPTVBSRVNTSU9OX0xFVkVMLFxuICAgIGVycm9yVGltZW91dDogRVJST1JfVElNRU9VVCxcbiAgICBsb2dzOiB7XG4gICAgICAgIG1vcmdhbjogTU9SR0FOLFxuICAgIH0sXG59O1xuZXhwb3J0IHsgZW52IH07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAc2VxdWVsaXplL2NvcmVcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQHNlcXVlbGl6ZS9tYXJpYWRiXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJjcnlwdFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJib2R5LXBhcnNlclwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJjb29raWUtcGFyc2VyXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNvcnNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZG90ZW52XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImRvdGVudi9jb25maWdcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJleHByZXNzLXJhdGUtbGltaXRcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiaGVsbWV0XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImpzb253ZWJ0b2tlblwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJtb3JnYW5cIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibXVsdGVyXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm5vZGUtY2FjaGVcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwic2VxdWVsaXplXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInRzLWRvdGVudlwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ2YWxpZGF0ZS1pbWFnZS10eXBlXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImFzc2VydFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJjcnlwdG9cIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZnNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibm9kZTpmc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJub2RlOnBhdGhcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibm9kZTpwZXJmX2hvb2tzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm5vZGU6cHJvY2Vzc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJub2RlOnVybFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwYXRoXCIpOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmYgPSB7fTtcbi8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbi8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5lID0gKGNodW5rSWQpID0+IHtcblx0cmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uZikucmVkdWNlKChwcm9taXNlcywga2V5KSA9PiB7XG5cdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5mW2tleV0oY2h1bmtJZCwgcHJvbWlzZXMpO1xuXHRcdHJldHVybiBwcm9taXNlcztcblx0fSwgW10pKTtcbn07IiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYXN5bmMgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIFwiXCIgKyBjaHVua0lkICsgXCIuYnVuZGxlLmpzXCI7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcImNvbXByZXNzaW9uXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwibm9kZTphc3luY19ob29rc1wiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIm5vZGU6aHR0cFwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIndvcmtlcl90aHJlYWRzXCIpOyIsInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuaW1wb3J0IGNvbXByZXNzaW9uIGZyb20gJ2NvbXByZXNzaW9uJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZSB9IGZyb20gJ25vZGU6YXN5bmNfaG9va3MnO1xuaW1wb3J0IGh0dHAgZnJvbSAnbm9kZTpodHRwJzsgLy8gQ29ycmVjdGx5IGltcG9ydCB0aGUgJ2h0dHAnIG1vZHVsZVxuaW1wb3J0IHByb2Nlc3MgZnJvbSAnbm9kZTpwcm9jZXNzJztcbmltcG9ydCB7IFdvcmtlciB9IGZyb20gJ3dvcmtlcl90aHJlYWRzJztcbmltcG9ydCB7IGVudiB9IGZyb20gJy4vY29uZmlnL2luZGV4JztcbmNvbnN0IFRIUkVBRF9DT1VOVCA9IDQ7XG5jb25zdCBXb3JrZXJGaWxlUGF0aCA9ICcuL2ZvdXItd29ya2VyLmNvbmZpZy5qcyc7XG5hc3luYyBmdW5jdGlvbiBTdGFydFNlcnZlcigpIHtcbiAgICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG4gICAgYXBwLnVzZShjb3JzKHtcbiAgICAgICAgb3JpZ2luOiAnaHR0cDovL2xvY2FsaG9zdDo4MDgwJyxcbiAgICAgICAgY3JlZGVudGlhbHM6IHRydWUsXG4gICAgfSkpO1xuICAgIChhd2FpdCBpbXBvcnQoJy4vbG9hZGVycy9pbmRleC5qcycpKS5kZWZhdWx0KHsgYXBwIH0pO1xuICAgIGFwcC51c2UoJy9oZWF2eScsIChfcmVxLCByZXMpID0+IHtcbiAgICAgICAgY29uc3QgaGVhdnkgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxZTYgfSwgKCkgPT4gTWF0aC5yYW5kb20oKSk7XG4gICAgICAgIGxldCB0b3RhbCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVhdnkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRvdGFsICs9IGhlYXZ5W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJlcy5zZW5kKGBUaGUgcmVzdWx0IG9mIHRoZSBDUFUgPSAke2hlYXZ5fSBhbmQgdG90YWwgb3BlcmF0aW9uIGlzOiAke3RvdGFsfWApO1xuICAgIH0pO1xuICAgIGFwcC5nZXQoJy9ub24tYmxvY2tpbmcvJywgKF9yZXEsIHJlcykgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCgnTm9uLWJsb2NraW5nIHJlcXVlc3QnKTtcbiAgICB9KTtcbiAgICBhc3luYyBmdW5jdGlvbiBydW5Xb3JrZXIoKSB7XG4gICAgICAgIGNvbnN0IHdvcmtlciA9IG5ldyBXb3JrZXIoV29ya2VyRmlsZVBhdGgsIHtcbiAgICAgICAgICAgIHdvcmtlckRhdGE6IHsgdGhyZWFkX2NvdW50OiBUSFJFQURfQ09VTlQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB3b3JrZXIub24oJ21lc3NhZ2UnLCBkYXRhID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB3b3JrZXIub24oJ2Vycm9yJywgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdChgV29ya2VyIGVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB3b3JrZXIub24oJ2V4aXQnLCBjb2RlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29kZSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoYFdvcmtlciBzdG9wcGVkIHdpdGggZXhpdCBjb2RlICR7Y29kZX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFwcC5nZXQoJy9ibG9ja2luZy13b3JrZXInLCBhc3luYyAoX3JlcSwgcmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHdvcmtlclJlc3VsdCA9IGF3YWl0IHJ1bldvcmtlcigpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFdvcmtlciB0b29rICR7RGF0ZS5ub3coKSAtIHN0YXJ0fW1zIHRvIGNvbXBsZXRlYCk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChgQmxvY2tpbmcgd29ya2VyOiAke3dvcmtlclJlc3VsdH1gKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBpbiB3b3JrZXI6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChgQmxvY2tpbmcgd29ya2VyIGZhaWxlZDogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGFwcC5nZXQoJy9ibG9ja2luZycsIGFzeW5jIChfcmVxLCByZXMpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCB3b3JrZXJQcm9taXNlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IFRIUkVBRF9DT1VOVDsgaSsrKSB7XG4gICAgICAgICAgICB3b3JrZXJQcm9taXNlcy5wdXNoKHJ1bldvcmtlcigpKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGhyZWFkUmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHdvcmtlclByb21pc2VzKTtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsX3Jlc3VsdHMgPSB0aHJlYWRSZXN1bHRzWzBdICtcbiAgICAgICAgICAgICAgICB0aHJlYWRSZXN1bHRzWzFdICtcbiAgICAgICAgICAgICAgICB0aHJlYWRSZXN1bHRzWzJdICtcbiAgICAgICAgICAgICAgICB0aHJlYWRSZXN1bHRzWzNdO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFdvcmtlcnMgdG9vayAke0RhdGUubm93KCkgLSBzdGFydH1tcyB0byBjb21wbGV0ZWApO1xuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoYEJsb2NraW5nIHdvcmtlcnM6ICR7dG90YWxfcmVzdWx0c31gKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBpbiB3b3JrZXI6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChgQmxvY2tpbmcgd29ya2VycyBmYWlsZWQ6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBzZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xuICAgIGNvbnN0IGFzeW5jTG9jYWxTdG9yYWdlID0gbmV3IEFzeW5jTG9jYWxTdG9yYWdlKCk7XG4gICAgZnVuY3Rpb24gbG9nV2l0aElkKG1zZykge1xuICAgICAgICBjb25zdCBpZCA9IGFzeW5jTG9jYWxTdG9yYWdlLmdldFN0b3JlKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2lkICE9PSB1bmRlZmluZWQgPyBpZCA6ICctJ30gJHttc2d9YCk7XG4gICAgfVxuICAgIGxldCBpZFNlcSA9IDA7XG4gICAgc2VydmVyLm9uKCdjb25uZWN0aW9uJywgc29ja2V0ID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBpZFNlcSsrO1xuICAgICAgICBhc3luY0xvY2FsU3RvcmFnZS5ydW4oaWQsICgpID0+IHtcbiAgICAgICAgICAgIGxvZ1dpdGhJZCgnQ2xpZW50IGNvbm5lY3RlZCB0byBzZXJ2ZXIhISEnKTtcbiAgICAgICAgICAgIHNvY2tldC5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nV2l0aElkKCdDbGllbnQgZGlzY29ubmVjdGVkIGZyb20gc2VydmVyISEhJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgc2VydmVyLmxpc3RlbihlbnYuUE9SVCwgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgU2VydmVyIGxpc3RlbmluZyBvbiBwb3J0ICR7ZW52LlBPUlR9YCk7XG4gICAgfSk7XG4gICAgYXBwLnVzZShjb21wcmVzc2lvbih7XG4gICAgICAgIGZpbHRlcjogKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVxLmhlYWRlcnNbJ3gtbm8tY29tcHJlc3Npb24nXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb21wcmVzc2lvbi5maWx0ZXIocmVxLCByZXMpO1xuICAgICAgICB9LFxuICAgICAgICBsZXZlbDogZW52LkNPTVBSRVNTSU9OX0xFVkVMIHx8IDksXG4gICAgICAgIHRocmVzaG9sZDogZW52LkNPTVBSRVNTSU9OX1RIUkVTSE9MRCB8fCAxMDI0LFxuICAgIH0pKTtcbiAgICBjb25zdCBpZGxlVGltZW91dCA9IGVudi5JRExFX1RJTUVPVVQgfHwgNDgwMDAwO1xuICAgIGxldCBpZGxlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc2VydmVyLmNsb3NlKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXIgY2xvc2VkIGR1ZSB0byBpZGxlIHRpbWUgb3V0ISBSZXN0YXJ0aW5nLi4uLicpO1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgICAgICB9KTtcbiAgICB9LCBpZGxlVGltZW91dCk7XG4gICAgYXBwLnVzZSgoX3JlcSwgX3JlcywgbmV4dCkgPT4ge1xuICAgICAgICBjbGVhclRpbWVvdXQoaWRsZVRpbWVyKTtcbiAgICAgICAgaWRsZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXJ2ZXIuY2xvc2UoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDbGVhcmVkIFRpbWUgb3V0ISBSZXN0YXJ0aW5nLi4uLicpO1xuICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBpZGxlVGltZW91dCk7XG4gICAgICAgIG5leHQoKTtcbiAgICB9KTtcbiAgICBwcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbk1vbml0b3InLCAoZXJyLCBvcmlnaW4pID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VuY2F1Z2h0IEV4Y2VwdGlvbjonLCBlcnIsICdPcmlnaW46Jywgb3JpZ2luKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH0pO1xuICAgIHNlcnZlci5vbignZXJyb3InLCBlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG59XG5TdGFydFNlcnZlcigpO1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFN0YXJ0U2VydmVyLFxufTtcbiJdLCJuYW1lcyI6WyJ3ZWJwYWNrUXVldWVzIiwid2VicGFja0V4cG9ydHMiLCJ3ZWJwYWNrRXJyb3IiLCJyZXNvbHZlUXVldWUiLCJpbnN0YWxsZWRDaHVua3MiLCJlbnYiLCJsb2FkIiwiUE9SVCIsIk51bWJlciIsIk5PREVfRU5WIiwiTU9SR0FOIiwiQVBQX05BTUUiLCJTdHJpbmciLCJCQVNFX1VSTCIsIkJBU0U2NF9FTkNPREVEIiwiQnVmZmVyIiwiVFJBQ0lORyIsIkJvb2xlYW4iLCJFWFRSQSIsIlJBUkVfTElNSVRfVElNRSIsIlJBUkVfTElNSVRfV0lORE9XX01TIiwiTUFYIiwiUkFSRV9MSU1JVF9NRVNTQUdFIiwiUkFSRV9MSU1JVF9DT0RFIiwiVFJVU1RfUFJPWFkiLCJOVU1CRVJfT0ZfUFJPWElFUyIsIklETEVfVElNRU9VVCIsIkNPTVBSRVNTSU9OX0xFVkVMIiwiQ09NUFJFU1NJT05fVEhSRVNIT0xEIiwiRVJST1JfVElNRU9VVCIsIlJFU1BPTlNFX1NUQVRVUyIsIlJFU1BPTlNFX01FU1NBR0UiLCJSRVNQT05TRV9DT0RFIiwiUkVTUE9OU0VfRVJST1JfQ09ERSIsIlJFU1BPTlNFX0VSUk9SX01FU1NBR0UiLCJSRVNQT05TRV9TRVJWRVJfRVJST1IiLCJSRVNQT05TRV9FUlJPUl9TVEFUVVMiLCJSRVNQT05TRV9FUlJPUl9EQVRBIiwiUkVTUE9OU0VfRVJST1JfU1RBQ0siLCJSRVNQT05TRV9FUlJPUl9OQU1FIiwiRXJyb3IiLCJvayIsImVxdWFscyIsImZyb20iLCJ0ZXN0IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIlN5bWJvbCIsInF1ZXVlIiwiZCIsImZvckVhY2giLCJmbiIsInIiLCJhIiwiYm9keSIsImhhc0F3YWl0IiwiY3VycmVudERlcHMiLCJvdXRlclJlc29sdmUiLCJyZWplY3QiLCJkZXBRdWV1ZXMiLCJTZXQiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWoiLCJ4IiwiZGVwcyIsIm1hcCIsImRlcCIsInRoZW4iLCJvYmoiLCJlIiwicmV0Iiwid3JhcERlcHMiLCJnZXRSZXN1bHQiLCJmblF1ZXVlIiwicSIsImhhcyIsImFkZCIsInB1c2giLCJlcnIiLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZiIsImNodW5rSWQiLCJhbGwiLCJrZXlzIiwicmVkdWNlIiwicHJvbWlzZXMiLCJ1IiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJjaHVuayIsIm1vcmVNb2R1bGVzIiwibW9kdWxlcyIsImNodW5rSWRzIiwiaWRzIiwicnVudGltZSIsImkiLCJsZW5ndGgiLCJpbnN0YWxsQ2h1bmsiLCJhc3luYyIsImFwcCIsInJ1bldvcmtlciIsIndvcmtlciIsIldvcmtlciIsIndvcmtlckRhdGEiLCJ0aHJlYWRfY291bnQiLCJvbiIsImRhdGEiLCJlcnJvciIsImNvZGUiLCJ1c2UiLCJvcmlnaW4iLCJjcmVkZW50aWFscyIsImRlZmF1bHQiLCJfcmVxIiwicmVzIiwiaGVhdnkiLCJBcnJheSIsIk1hdGgiLCJyYW5kb20iLCJ0b3RhbCIsInNlbmQiLCJzdGF0dXMiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJ3b3JrZXJSZXN1bHQiLCJjb25zb2xlIiwibG9nIiwid29ya2VyUHJvbWlzZXMiLCJ0aHJlYWRSZXN1bHRzIiwidG90YWxfcmVzdWx0cyIsInNlcnZlciIsImFzeW5jTG9jYWxTdG9yYWdlIiwiQXN5bmNMb2NhbFN0b3JhZ2UiLCJsb2dXaXRoSWQiLCJtc2ciLCJpZCIsImdldFN0b3JlIiwiaWRTZXEiLCJzb2NrZXQiLCJydW4iLCJsaXN0ZW4iLCJmaWx0ZXIiLCJyZXEiLCJoZWFkZXJzIiwibGV2ZWwiLCJ0aHJlc2hvbGQiLCJpZGxlVGltZW91dCIsImlkbGVUaW1lciIsInNldFRpbWVvdXQiLCJjbG9zZSIsIl9yZXMiLCJuZXh0IiwiY2xlYXJUaW1lb3V0IiwiU3RhcnRTZXJ2ZXIiXSwic291cmNlUm9vdCI6IiJ9