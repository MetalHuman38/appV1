(()=>{"use strict";var e,r,o,t,s,n={9469:(e,r,o)=>{o.d(r,{_:()=>s});var t=o(2613);const s=(0,o(7546).load)({PORT:Number,NODE_ENV:["production","development"],MORGAN:["combined","dev","tiny"],LOGGER:["winston","pino"],APP_NAME:String,BASE_URL:String,BASE64_ENCODED:Buffer,TRACING:Boolean,EXTRA:String,RARE_LIMIT_TIME:Number,RARE_LIMIT_WINDOW_MS:Number,MAX:Number,RARE_LIMIT_MESSAGE:String,RARE_LIMIT_CODE:Number,TRUST_PROXY:Boolean,NUMBER_OF_PROXIES:Number,IDLE_TIMEOUT:Number,COMPRESSION_LEVEL:Number,COMPRESSION_THRESHOLD:Number,ERROR_TIMEOUT:Number,RESPONSE_STATUS:String,RESPONSE_MESSAGE:String,RESPONSE_CODE:Number,RESPONSE_ERROR_CODE:Number,RESPONSE_ERROR_MESSAGE:String,RESPONSE_SERVER_ERROR:String,RESPONSE_ERROR_STATUS:String,RESPONSE_ERROR_DATA:String,RESPONSE_ERROR_STACK:String,RESPONSE_ERROR_NAME:String}),{APP_NAME:n,TRACING:i,PORT:u,MORGAN:a,LOGGER:c,NODE_ENV:l,BASE_URL:E,BASE64_ENCODED:d,EXTRA:R,RARE_LIMIT_TIME:_,RARE_LIMIT_WINDOW_MS:p,RESPONSE_ERROR_CODE:S,MAX:O,RARE_LIMIT_MESSAGE:m,RARE_LIMIT_CODE:h,TRUST_PROXY:b,NUMBER_OF_PROXIES:f,IDLE_TIMEOUT:g,COMPRESSION_LEVEL:k,COMPRESSION_THRESHOLD:N,ERROR_TIMEOUT:T}=s;if(500===S)throw new Error("Internal Server Error! No env file found!");if(t.strict.ok(i,"Tracing should be true"),t.strict.ok(8081===u,"Port should be 8081"),t.strict.ok("production"===l,"Node environment should be production"),t.strict.ok("http://localhost:8081"===E,"Base URL should be correct"),t.strict.ok(d.equals(Buffer.from("ðŸš€")),"Base64 encoded value should match"),t.strict.ok("true"===R,"Extra should be true"),t.strict.ok(9e5===_,"Rate limit time should be 15m"),t.strict.ok(9e5===p,"Rate limit window should be 15m"),t.strict.ok(100===O,"Max should be 100"),t.strict.ok(m,"Too many requests, please try again later"),t.strict.ok(429===h,"Rate limit code should be 429"),t.strict.ok(b,"Trust proxy should be true initially"),t.strict.ok(1===f,"Number of proxies should be 1"),t.strict.ok(48e4===g,"Idle timeout should be 8m"),t.strict.ok(9===k,"Compression level should be 9"),t.strict.ok(1024===N,"Compression threshold should be 1024"),t.strict.ok(5e3===T,"Error timeout should be 5s"),!/^[a-zA-Z0-9-.]+$/.test(n))throw new Error(`Invalid APP_NAME: ${n}`)},423:e=>{e.exports=require("@sequelize/core")},5520:e=>{e.exports=require("@sequelize/mariadb")},5486:e=>{e.exports=require("bcrypt")},3268:e=>{e.exports=require("body-parser")},6898:e=>{e.exports=require("cookie-parser")},8577:e=>{e.exports=require("cors")},818:e=>{e.exports=require("dotenv")},4469:e=>{e.exports=require("dotenv/config")},7252:e=>{e.exports=require("express")},1763:e=>{e.exports=require("express-rate-limit")},2525:e=>{e.exports=require("helmet")},829:e=>{e.exports=require("jsonwebtoken")},8461:e=>{e.exports=require("multer")},2011:e=>{e.exports=require("node-cache")},9031:e=>{e.exports=require("sequelize")},7546:e=>{e.exports=require("ts-dotenv")},7189:e=>{e.exports=require("validate-image-type")},2613:e=>{e.exports=require("assert")},290:e=>{e.exports=require("async_hooks")},6982:e=>{e.exports=require("crypto")},9896:e=>{e.exports=require("fs")},3024:e=>{e.exports=require("node:fs")},6760:e=>{e.exports=require("node:path")},643:e=>{e.exports=require("node:perf_hooks")},1708:e=>{e.exports=require("node:process")},3136:e=>{e.exports=require("node:url")},6928:e=>{e.exports=require("path")}},i={};function u(e){var r=i[e];if(void 0!==r)return r.exports;var o=i[e]={exports:{}};return n[e](o,o.exports,u),o.exports}u.m=n,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",r="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",t=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},u.a=(s,n,i)=>{var u;i&&((u=[]).d=-1);var a,c,l,E=new Set,d=s.exports,R=new Promise(((e,r)=>{l=r,c=e}));R[r]=d,R[e]=e=>(u&&e(u),E.forEach(e),R.catch((e=>{}))),s.exports=R,n((s=>{var n;a=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[e])return s;if(s.then){var n=[];n.d=0,s.then((e=>{i[r]=e,t(n)}),(e=>{i[o]=e,t(n)}));var i={};return i[e]=e=>e(n),i}}var u={};return u[e]=e=>{},u[r]=s,u})))(s);var i=()=>a.map((e=>{if(e[o])throw e[o];return e[r]})),c=new Promise((r=>{(n=()=>r(i)).r=0;var o=e=>e!==u&&!E.has(e)&&(E.add(e),e&&!e.d&&(n.r++,e.push(n)));a.map((r=>r[e](o)))}));return n.r?c:i()}),(e=>(e?l(R[o]=e):c(d),t(u)))),u&&u.d<0&&(u.d=0)},u.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return u.d(r,{a:r}),r},u.d=(e,r)=>{for(var o in r)u.o(r,o)&&!u.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},u.f={},u.e=e=>Promise.all(Object.keys(u.f).reduce(((r,o)=>(u.f[o](e,r),r)),[])),u.u=e=>e+".bundle.js",u.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s={750:1},u.f.require=(e,r)=>{s[e]||(e=>{var r=e.modules,o=e.ids,t=e.runtime;for(var n in r)u.o(r,n)&&(u.m[n]=r[n]);t&&t(u);for(var i=0;i<o.length;i++)s[o[i]]=1})(require("./"+u.u(e)))};const a=require("compression");var c=u.n(a),l=u(8577),E=u.n(l),d=u(7252),R=u.n(d);const _=require("morgan");var p=u.n(_);const S=require("node:async_hooks"),O=require("node:http");var m=u.n(O),h=u(1708),b=u.n(h);const f=require("worker_threads");var g=u(9469);u(818).config(),async function(){const e=R()();async function r(){const e=new f.Worker("./four-worker.config.js",{workerData:{thread_count:4}});return new Promise(((r,o)=>{e.on("message",(e=>{r(e)})),e.on("error",(e=>{o(`Worker error: ${e}`)})),e.on("exit",(e=>{0!==e&&o(`Worker stopped with exit code ${e}`)}))}))}e.use(E()({origin:"http://localhost:8080",credentials:!0})),(await u.e(545).then(u.bind(u,1545))).default({app:e}),e.use(p()(g._.MORGAN)),e.use("/heavy",((e,r)=>{const o=Array.from({length:1e6},(()=>Math.random()));let t=0;for(let e=0;e<o.length;e++)t+=o[e];r.send(`The result of the CPU = ${o} and total operation is: ${t}`)})),e.get("/non-blocking/",((e,r)=>{r.status(200).send("Non-blocking request")})),e.get("/blocking-worker",(async(e,o)=>{const t=Date.now();try{const e=await r();console.log(`Worker took ${Date.now()-t}ms to complete`),o.status(200).send(`Blocking worker: ${e}`)}catch(e){console.log(`Error in worker: ${e}`),o.status(500).send(`Blocking worker failed: ${e}`)}})),e.get("/blocking",(async(e,o)=>{const t=Date.now(),s=[];for(let e=0;e<4;e++)s.push(r());try{const e=await Promise.all(s),r=e[0]+e[1]+e[2]+e[3];console.log(`Workers took ${Date.now()-t}ms to complete`),o.status(200).send(`Blocking workers: ${r}`)}catch(e){console.log(`Error in worker: ${e}`),o.status(500).send(`Blocking workers failed: ${e}`)}}));const o=m().createServer(e),t=new S.AsyncLocalStorage;function s(e){const r=t.getStore();console.log(`${void 0!==r?r:"-"} ${e}`)}let n=0;o.on("connection",(e=>{const r=n++;t.run(r,(()=>{s("Client connected to server!!!"),e.on("close",(()=>{s("Client disconnected from server!!!")}))}))})),o.listen(g._.PORT,(()=>{console.log(`Server listening on port ${g._.PORT}`)})),e.use(c()({filter:(e,r)=>!e.headers["x-no-compression"]&&c().filter(e,r),level:g._.COMPRESSION_LEVEL||9,threshold:g._.COMPRESSION_THRESHOLD||1024}));const i=g._.IDLE_TIMEOUT||48e4;let a=setTimeout((()=>{o.close((()=>{console.log("Server closed due to idle time out! Restarting...."),b().exit(0)}))}),i);e.use(((e,r,t)=>{clearTimeout(a),a=setTimeout((()=>{o.close((()=>{console.log("Cleared Time out! Restarting...."),b().exit(0)}))}),i),t()})),b().on("uncaughtExceptionMonitor",((e,r)=>{console.log("Uncaught Exception:",e,"Origin:",r),b().exit(1)})),o.on("error",(e=>{console.error(e),b().exit(1)}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akIsR0FDSG9CLEdBQ0hoRCxFQUFJVSxLQUFJLENBQUNJLEVBQU1zQyxFQUFNQyxLQUNqQkMsYUFBYUwsR0FDYkEsRUFBWUMsWUFBVyxLQUNuQmxCLEVBQU9tQixPQUFNLEtBQ1R4QixRQUFRQyxJQUFJLG9DQUNaLFNBQWEsRUFBRSxHQUNqQixHQUNIb0IsR0FDSEssR0FBTSxJQUVWLE9BQVcsNEJBQTRCLENBQUN2RixFQUFLNkMsS0FDekNnQixRQUFRQyxJQUFJLHNCQUF1QjlELEVBQUssVUFBVzZDLEdBQ25ELFNBQWEsRUFBRSxJQUVuQnFCLEVBQU8xQixHQUFHLFNBQVNFLElBQ2ZtQixRQUFRbkIsTUFBTUEsR0FDZCxTQUFhLEVBQUUsR0FFdkIsQ0FDQStDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcHB2LTEvd2VicGFjay9ydW50aW1lL2FzeW5jIG1vZHVsZSIsIndlYnBhY2s6Ly9hcHB2LTEvd2VicGFjay9ydW50aW1lL3JlcXVpcmUgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbmZpZy9pbmRleC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJAc2VxdWVsaXplL2NvcmVcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJAc2VxdWVsaXplL21hcmlhZGJcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJiY3J5cHRcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJib2R5LXBhcnNlclwiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBjb21tb25qcyBcImNvb2tpZS1wYXJzZXJcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJjb3JzXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIGNvbW1vbmpzIFwiZG90ZW52XCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIGNvbW1vbmpzIFwiZG90ZW52L2NvbmZpZ1wiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBjb21tb25qcyBcImV4cHJlc3NcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJleHByZXNzLXJhdGUtbGltaXRcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJoZWxtZXRcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJqc29ud2VidG9rZW5cIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJtdWx0ZXJcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJub2RlLWNhY2hlXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIGNvbW1vbmpzIFwic2VxdWVsaXplXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIGNvbW1vbmpzIFwidHMtZG90ZW52XCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIGNvbW1vbmpzIFwidmFsaWRhdGUtaW1hZ2UtdHlwZVwiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwiYXNzZXJ0XCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJhc3luY19ob29rc1wiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwiY3J5cHRvXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJmc1wiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwibm9kZTpmc1wiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwibm9kZTpwYXRoXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJub2RlOnBlcmZfaG9va3NcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcIm5vZGU6cHJvY2Vzc1wiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwibm9kZTp1cmxcIiIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcInBhdGhcIiIsIndlYnBhY2s6Ly9hcHB2LTEvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYXBwdi0xL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2FwcHYtMS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYXBwdi0xL3dlYnBhY2svcnVudGltZS9lbnN1cmUgY2h1bmsiLCJ3ZWJwYWNrOi8vYXBwdi0xL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly9hcHB2LTEvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9hcHB2LTEvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9hcHB2LTEvZXh0ZXJuYWwgY29tbW9uanMgXCJjb21wcmVzc2lvblwiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBjb21tb25qcyBcIm1vcmdhblwiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwibm9kZTphc3luY19ob29rc1wiIiwid2VicGFjazovL2FwcHYtMS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwibm9kZTpodHRwXCIiLCJ3ZWJwYWNrOi8vYXBwdi0xL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJ3b3JrZXJfdGhyZWFkc1wiIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvc2VydmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB3ZWJwYWNrUXVldWVzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sKFwid2VicGFjayBxdWV1ZXNcIikgOiBcIl9fd2VicGFja19xdWV1ZXNfX1wiO1xudmFyIHdlYnBhY2tFeHBvcnRzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sKFwid2VicGFjayBleHBvcnRzXCIpIDogXCJfX3dlYnBhY2tfZXhwb3J0c19fXCI7XG52YXIgd2VicGFja0Vycm9yID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sKFwid2VicGFjayBlcnJvclwiKSA6IFwiX193ZWJwYWNrX2Vycm9yX19cIjtcbnZhciByZXNvbHZlUXVldWUgPSAocXVldWUpID0+IHtcblx0aWYocXVldWUgJiYgcXVldWUuZCA8IDEpIHtcblx0XHRxdWV1ZS5kID0gMTtcblx0XHRxdWV1ZS5mb3JFYWNoKChmbikgPT4gKGZuLnItLSkpO1xuXHRcdHF1ZXVlLmZvckVhY2goKGZuKSA9PiAoZm4uci0tID8gZm4ucisrIDogZm4oKSkpO1xuXHR9XG59XG52YXIgd3JhcERlcHMgPSAoZGVwcykgPT4gKGRlcHMubWFwKChkZXApID0+IHtcblx0aWYoZGVwICE9PSBudWxsICYmIHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpIHtcblx0XHRpZihkZXBbd2VicGFja1F1ZXVlc10pIHJldHVybiBkZXA7XG5cdFx0aWYoZGVwLnRoZW4pIHtcblx0XHRcdHZhciBxdWV1ZSA9IFtdO1xuXHRcdFx0cXVldWUuZCA9IDA7XG5cdFx0XHRkZXAudGhlbigocikgPT4ge1xuXHRcdFx0XHRvYmpbd2VicGFja0V4cG9ydHNdID0gcjtcblx0XHRcdFx0cmVzb2x2ZVF1ZXVlKHF1ZXVlKTtcblx0XHRcdH0sIChlKSA9PiB7XG5cdFx0XHRcdG9ialt3ZWJwYWNrRXJyb3JdID0gZTtcblx0XHRcdFx0cmVzb2x2ZVF1ZXVlKHF1ZXVlKTtcblx0XHRcdH0pO1xuXHRcdFx0dmFyIG9iaiA9IHt9O1xuXHRcdFx0b2JqW3dlYnBhY2tRdWV1ZXNdID0gKGZuKSA9PiAoZm4ocXVldWUpKTtcblx0XHRcdHJldHVybiBvYmo7XG5cdFx0fVxuXHR9XG5cdHZhciByZXQgPSB7fTtcblx0cmV0W3dlYnBhY2tRdWV1ZXNdID0geCA9PiB7fTtcblx0cmV0W3dlYnBhY2tFeHBvcnRzXSA9IGRlcDtcblx0cmV0dXJuIHJldDtcbn0pKTtcbl9fd2VicGFja19yZXF1aXJlX18uYSA9IChtb2R1bGUsIGJvZHksIGhhc0F3YWl0KSA9PiB7XG5cdHZhciBxdWV1ZTtcblx0aGFzQXdhaXQgJiYgKChxdWV1ZSA9IFtdKS5kID0gLTEpO1xuXHR2YXIgZGVwUXVldWVzID0gbmV3IFNldCgpO1xuXHR2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzO1xuXHR2YXIgY3VycmVudERlcHM7XG5cdHZhciBvdXRlclJlc29sdmU7XG5cdHZhciByZWplY3Q7XG5cdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlaikgPT4ge1xuXHRcdHJlamVjdCA9IHJlajtcblx0XHRvdXRlclJlc29sdmUgPSByZXNvbHZlO1xuXHR9KTtcblx0cHJvbWlzZVt3ZWJwYWNrRXhwb3J0c10gPSBleHBvcnRzO1xuXHRwcm9taXNlW3dlYnBhY2tRdWV1ZXNdID0gKGZuKSA9PiAocXVldWUgJiYgZm4ocXVldWUpLCBkZXBRdWV1ZXMuZm9yRWFjaChmbiksIHByb21pc2VbXCJjYXRjaFwiXSh4ID0+IHt9KSk7XG5cdG1vZHVsZS5leHBvcnRzID0gcHJvbWlzZTtcblx0Ym9keSgoZGVwcykgPT4ge1xuXHRcdGN1cnJlbnREZXBzID0gd3JhcERlcHMoZGVwcyk7XG5cdFx0dmFyIGZuO1xuXHRcdHZhciBnZXRSZXN1bHQgPSAoKSA9PiAoY3VycmVudERlcHMubWFwKChkKSA9PiB7XG5cdFx0XHRpZihkW3dlYnBhY2tFcnJvcl0pIHRocm93IGRbd2VicGFja0Vycm9yXTtcblx0XHRcdHJldHVybiBkW3dlYnBhY2tFeHBvcnRzXTtcblx0XHR9KSlcblx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRmbiA9ICgpID0+IChyZXNvbHZlKGdldFJlc3VsdCkpO1xuXHRcdFx0Zm4uciA9IDA7XG5cdFx0XHR2YXIgZm5RdWV1ZSA9IChxKSA9PiAocSAhPT0gcXVldWUgJiYgIWRlcFF1ZXVlcy5oYXMocSkgJiYgKGRlcFF1ZXVlcy5hZGQocSksIHEgJiYgIXEuZCAmJiAoZm4ucisrLCBxLnB1c2goZm4pKSkpO1xuXHRcdFx0Y3VycmVudERlcHMubWFwKChkZXApID0+IChkZXBbd2VicGFja1F1ZXVlc10oZm5RdWV1ZSkpKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZm4uciA/IHByb21pc2UgOiBnZXRSZXN1bHQoKTtcblx0fSwgKGVycikgPT4gKChlcnIgPyByZWplY3QocHJvbWlzZVt3ZWJwYWNrRXJyb3JdID0gZXJyKSA6IG91dGVyUmVzb2x2ZShleHBvcnRzKSksIHJlc29sdmVRdWV1ZShxdWV1ZSkpKTtcblx0cXVldWUgJiYgcXVldWUuZCA8IDAgJiYgKHF1ZXVlLmQgPSAwKTtcbn07IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGNodW5rc1xuLy8gXCIxXCIgbWVhbnMgXCJsb2FkZWRcIiwgb3RoZXJ3aXNlIG5vdCBsb2FkZWQgeWV0XG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQ3NTA6IDFcbn07XG5cbi8vIG5vIG9uIGNodW5rcyBsb2FkZWRcblxudmFyIGluc3RhbGxDaHVuayA9IChjaHVuaykgPT4ge1xuXHR2YXIgbW9yZU1vZHVsZXMgPSBjaHVuay5tb2R1bGVzLCBjaHVua0lkcyA9IGNodW5rLmlkcywgcnVudGltZSA9IGNodW5rLnJ1bnRpbWU7XG5cdGZvcih2YXIgbW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHR9XG5cdH1cblx0aWYocnVudGltZSkgcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkc1tpXV0gPSAxO1xuXG59O1xuXG4vLyByZXF1aXJlKCkgY2h1bmsgbG9hZGluZyBmb3IgamF2YXNjcmlwdFxuX193ZWJwYWNrX3JlcXVpcmVfXy5mLnJlcXVpcmUgPSAoY2h1bmtJZCwgcHJvbWlzZXMpID0+IHtcblx0Ly8gXCIxXCIgaXMgdGhlIHNpZ25hbCBmb3IgXCJhbHJlYWR5IGxvYWRlZFwiXG5cdGlmKCFpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRpZih0cnVlKSB7IC8vIGFsbCBjaHVua3MgaGF2ZSBKU1xuXHRcdFx0aW5zdGFsbENodW5rKHJlcXVpcmUoXCIuL1wiICsgX193ZWJwYWNrX3JlcXVpcmVfXy51KGNodW5rSWQpKSk7XG5cdFx0fSBlbHNlIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDE7XG5cdH1cbn07XG5cbi8vIG5vIGV4dGVybmFsIGluc3RhbGwgY2h1bmtcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdCIsImltcG9ydCB7IHN0cmljdCBhcyBhc3NlcnQgfSBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHsgbG9hZCB9IGZyb20gJ3RzLWRvdGVudic7XG5jb25zdCBlbnYgPSBsb2FkKHtcbiAgICBQT1JUOiBOdW1iZXIsXG4gICAgTk9ERV9FTlY6IFsncHJvZHVjdGlvbicsICdkZXZlbG9wbWVudCddLFxuICAgIE1PUkdBTjogWydjb21iaW5lZCcsICdkZXYnLCAndGlueSddLFxuICAgIExPR0dFUjogWyd3aW5zdG9uJywgJ3Bpbm8nXSxcbiAgICBBUFBfTkFNRTogU3RyaW5nLFxuICAgIEJBU0VfVVJMOiBTdHJpbmcsXG4gICAgQkFTRTY0X0VOQ09ERUQ6IEJ1ZmZlcixcbiAgICBUUkFDSU5HOiBCb29sZWFuLFxuICAgIEVYVFJBOiBTdHJpbmcsXG4gICAgUkFSRV9MSU1JVF9USU1FOiBOdW1iZXIsXG4gICAgUkFSRV9MSU1JVF9XSU5ET1dfTVM6IE51bWJlcixcbiAgICBNQVg6IE51bWJlcixcbiAgICBSQVJFX0xJTUlUX01FU1NBR0U6IFN0cmluZyxcbiAgICBSQVJFX0xJTUlUX0NPREU6IE51bWJlcixcbiAgICBUUlVTVF9QUk9YWTogQm9vbGVhbixcbiAgICBOVU1CRVJfT0ZfUFJPWElFUzogTnVtYmVyLFxuICAgIElETEVfVElNRU9VVDogTnVtYmVyLFxuICAgIENPTVBSRVNTSU9OX0xFVkVMOiBOdW1iZXIsXG4gICAgQ09NUFJFU1NJT05fVEhSRVNIT0xEOiBOdW1iZXIsXG4gICAgRVJST1JfVElNRU9VVDogTnVtYmVyLFxuICAgIC8qIFJvdXRlciBSZXNwb25zZSAqL1xuICAgIFJFU1BPTlNFX1NUQVRVUzogU3RyaW5nLFxuICAgIFJFU1BPTlNFX01FU1NBR0U6IFN0cmluZyxcbiAgICBSRVNQT05TRV9DT0RFOiBOdW1iZXIsXG4gICAgUkVTUE9OU0VfRVJST1JfQ09ERTogTnVtYmVyLFxuICAgIFJFU1BPTlNFX0VSUk9SX01FU1NBR0U6IFN0cmluZyxcbiAgICBSRVNQT05TRV9TRVJWRVJfRVJST1I6IFN0cmluZyxcbiAgICBSRVNQT05TRV9FUlJPUl9TVEFUVVM6IFN0cmluZyxcbiAgICBSRVNQT05TRV9FUlJPUl9EQVRBOiBTdHJpbmcsXG4gICAgUkVTUE9OU0VfRVJST1JfU1RBQ0s6IFN0cmluZyxcbiAgICBSRVNQT05TRV9FUlJPUl9OQU1FOiBTdHJpbmcsXG59KTtcbmNvbnN0IHsgQVBQX05BTUUsIFRSQUNJTkcsIFBPUlQsIE1PUkdBTiwgTE9HR0VSLCBOT0RFX0VOViwgQkFTRV9VUkwsIEJBU0U2NF9FTkNPREVELCBFWFRSQSwgUkFSRV9MSU1JVF9USU1FLCBSQVJFX0xJTUlUX1dJTkRPV19NUywgUkVTUE9OU0VfRVJST1JfQ09ERSwgTUFYLCBSQVJFX0xJTUlUX01FU1NBR0UsIFJBUkVfTElNSVRfQ09ERSwgVFJVU1RfUFJPWFksIE5VTUJFUl9PRl9QUk9YSUVTLCBJRExFX1RJTUVPVVQsIENPTVBSRVNTSU9OX0xFVkVMLCBDT01QUkVTU0lPTl9USFJFU0hPTEQsIEVSUk9SX1RJTUVPVVQsIH0gPSBlbnY7XG5pZiAoUkVTUE9OU0VfRVJST1JfQ09ERSA9PT0gNTAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IhIE5vIGVudiBmaWxlIGZvdW5kIScpO1xufVxuYXNzZXJ0Lm9rKFRSQUNJTkcsICdUcmFjaW5nIHNob3VsZCBiZSB0cnVlJyk7XG5hc3NlcnQub2soUE9SVCA9PT0gODA4MSwgJ1BvcnQgc2hvdWxkIGJlIDgwODEnKTtcbmFzc2VydC5vayhOT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLCAnTm9kZSBlbnZpcm9ubWVudCBzaG91bGQgYmUgcHJvZHVjdGlvbicpO1xuYXNzZXJ0Lm9rKEJBU0VfVVJMID09PSAnaHR0cDovL2xvY2FsaG9zdDo4MDgxJywgJ0Jhc2UgVVJMIHNob3VsZCBiZSBjb3JyZWN0Jyk7XG5hc3NlcnQub2soQkFTRTY0X0VOQ09ERUQuZXF1YWxzKEJ1ZmZlci5mcm9tKCfwn5qAJykpLCAnQmFzZTY0IGVuY29kZWQgdmFsdWUgc2hvdWxkIG1hdGNoJyk7XG5hc3NlcnQub2soRVhUUkEgPT09ICd0cnVlJywgJ0V4dHJhIHNob3VsZCBiZSB0cnVlJyk7XG5hc3NlcnQub2soUkFSRV9MSU1JVF9USU1FID09PSA5MDAwMDAsICdSYXRlIGxpbWl0IHRpbWUgc2hvdWxkIGJlIDE1bScpO1xuYXNzZXJ0Lm9rKFJBUkVfTElNSVRfV0lORE9XX01TID09PSA5MDAwMDAsICdSYXRlIGxpbWl0IHdpbmRvdyBzaG91bGQgYmUgMTVtJyk7XG5hc3NlcnQub2soTUFYID09PSAxMDAsICdNYXggc2hvdWxkIGJlIDEwMCcpO1xuYXNzZXJ0Lm9rKFJBUkVfTElNSVRfTUVTU0FHRSwgJ1RvbyBtYW55IHJlcXVlc3RzLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyJyk7XG5hc3NlcnQub2soUkFSRV9MSU1JVF9DT0RFID09PSA0MjksICdSYXRlIGxpbWl0IGNvZGUgc2hvdWxkIGJlIDQyOScpO1xuYXNzZXJ0Lm9rKFRSVVNUX1BST1hZLCAnVHJ1c3QgcHJveHkgc2hvdWxkIGJlIHRydWUgaW5pdGlhbGx5Jyk7XG5hc3NlcnQub2soTlVNQkVSX09GX1BST1hJRVMgPT09IDEsICdOdW1iZXIgb2YgcHJveGllcyBzaG91bGQgYmUgMScpO1xuYXNzZXJ0Lm9rKElETEVfVElNRU9VVCA9PT0gNDgwMDAwLCAnSWRsZSB0aW1lb3V0IHNob3VsZCBiZSA4bScpO1xuYXNzZXJ0Lm9rKENPTVBSRVNTSU9OX0xFVkVMID09PSA5LCAnQ29tcHJlc3Npb24gbGV2ZWwgc2hvdWxkIGJlIDknKTtcbmFzc2VydC5vayhDT01QUkVTU0lPTl9USFJFU0hPTEQgPT09IDEwMjQsICdDb21wcmVzc2lvbiB0aHJlc2hvbGQgc2hvdWxkIGJlIDEwMjQnKTtcbmFzc2VydC5vayhFUlJPUl9USU1FT1VUID09PSA1MDAwLCAnRXJyb3IgdGltZW91dCBzaG91bGQgYmUgNXMnKTtcbmlmICghL15bYS16QS1aMC05LS5dKyQvLnRlc3QoQVBQX05BTUUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIEFQUF9OQU1FOiAke0FQUF9OQU1FfWApO1xufVxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHBvcnQ6IFBPUlQsXG4gICAgYXBwTmFtZTogQVBQX05BTUUsXG4gICAgYmFzZVVybDogQkFTRV9VUkwsXG4gICAgYmFzZTY0RW5jb2RlZDogQkFTRTY0X0VOQ09ERUQsXG4gICAgdHJhY2luZzogVFJBQ0lORyxcbiAgICBleHRyYTogRVhUUkEsXG4gICAgcmF0ZUxpbWl0VGltZTogUkFSRV9MSU1JVF9USU1FLFxuICAgIHJhdGVMaW1pdFdpbmRvd01zOiBSQVJFX0xJTUlUX1dJTkRPV19NUyxcbiAgICBtYXg6IE1BWCxcbiAgICBtZXNzYWdlOiBSQVJFX0xJTUlUX01FU1NBR0UsXG4gICAgcmF0ZUxpbWl0Q29kZTogUkFSRV9MSU1JVF9DT0RFLFxuICAgIHRydXN0UHJveHk6IFRSVVNUX1BST1hZLFxuICAgIG51bWJlck9mUHJveGllczogTlVNQkVSX09GX1BST1hJRVMsXG4gICAgaWRsZVRpbWVvdXQ6IElETEVfVElNRU9VVCxcbiAgICBjb21wcmVzc2lvbkxldmVsOiBDT01QUkVTU0lPTl9MRVZFTCxcbiAgICBlcnJvclRpbWVvdXQ6IEVSUk9SX1RJTUVPVVQsXG4gICAgbG9nczoge1xuICAgICAgICBtb3JnYW46IE1PUkdBTixcbiAgICAgICAgbG9nZ2VyOiBMT0dHRVIsXG4gICAgfSxcbn07XG5leHBvcnQgeyBlbnYgfTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBzZXF1ZWxpemUvY29yZVwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAc2VxdWVsaXplL21hcmlhZGJcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYmNyeXB0XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJvZHktcGFyc2VyXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNvb2tpZS1wYXJzZXJcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY29yc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJkb3RlbnZcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZG90ZW52L2NvbmZpZ1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJleHByZXNzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV4cHJlc3MtcmF0ZS1saW1pdFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJoZWxtZXRcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm11bHRlclwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJub2RlLWNhY2hlXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInNlcXVlbGl6ZVwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ0cy1kb3RlbnZcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidmFsaWRhdGUtaW1hZ2UtdHlwZVwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJhc3NlcnRcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYXN5bmNfaG9va3NcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY3J5cHRvXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm5vZGU6ZnNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibm9kZTpwYXRoXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm5vZGU6cGVyZl9ob29rc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJub2RlOnByb2Nlc3NcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibm9kZTp1cmxcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGF0aFwiKTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5mID0ge307XG4vLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4vLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3Ncbl9fd2VicGFja19yZXF1aXJlX18uZSA9IChjaHVua0lkKSA9PiB7XG5cdHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLmYpLnJlZHVjZSgocHJvbWlzZXMsIGtleSkgPT4ge1xuXHRcdF9fd2VicGFja19yZXF1aXJlX18uZltrZXldKGNodW5rSWQsIHByb21pc2VzKTtcblx0XHRyZXR1cm4gcHJvbWlzZXM7XG5cdH0sIFtdKSk7XG59OyIsIi8vIFRoaXMgZnVuY3Rpb24gYWxsb3cgdG8gcmVmZXJlbmNlIGFzeW5jIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy51ID0gKGNodW5rSWQpID0+IHtcblx0Ly8gcmV0dXJuIHVybCBmb3IgZmlsZW5hbWVzIGJhc2VkIG9uIHRlbXBsYXRlXG5cdHJldHVybiBcIlwiICsgY2h1bmtJZCArIFwiLmJ1bmRsZS5qc1wiO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJjb21wcmVzc2lvblwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIm1vcmdhblwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIm5vZGU6YXN5bmNfaG9va3NcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJub2RlOmh0dHBcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJ3b3JrZXJfdGhyZWFkc1wiKTsiLCJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcbmltcG9ydCBjb21wcmVzc2lvbiBmcm9tICdjb21wcmVzc2lvbic7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IG1vcmdhbiBmcm9tICdtb3JnYW4nO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2UgfSBmcm9tICdub2RlOmFzeW5jX2hvb2tzJztcbmltcG9ydCBodHRwIGZyb20gJ25vZGU6aHR0cCc7IC8vIENvcnJlY3RseSBpbXBvcnQgdGhlICdodHRwJyBtb2R1bGVcbmltcG9ydCBwcm9jZXNzIGZyb20gJ25vZGU6cHJvY2Vzcyc7XG5pbXBvcnQgeyBXb3JrZXIgfSBmcm9tICd3b3JrZXJfdGhyZWFkcyc7XG5pbXBvcnQgeyBlbnYgfSBmcm9tICcuL2NvbmZpZy9pbmRleCc7XG5jb25zdCBUSFJFQURfQ09VTlQgPSA0O1xuY29uc3QgV29ya2VyRmlsZVBhdGggPSAnLi9mb3VyLXdvcmtlci5jb25maWcuanMnO1xuYXN5bmMgZnVuY3Rpb24gU3RhcnRTZXJ2ZXIoKSB7XG4gICAgY29uc3QgYXBwID0gZXhwcmVzcygpO1xuICAgIGFwcC51c2UoY29ycyh7XG4gICAgICAgIG9yaWdpbjogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcsXG4gICAgICAgIGNyZWRlbnRpYWxzOiB0cnVlLFxuICAgIH0pKTtcbiAgICAoYXdhaXQgaW1wb3J0KCcuL2xvYWRlcnMvaW5kZXguanMnKSkuZGVmYXVsdCh7IGFwcCB9KTtcbiAgICBhcHAudXNlKG1vcmdhbihlbnYuTU9SR0FOKSk7XG4gICAgYXBwLnVzZSgnL2hlYXZ5JywgKF9yZXEsIHJlcykgPT4ge1xuICAgICAgICBjb25zdCBoZWF2eSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDFlNiB9LCAoKSA9PiBNYXRoLnJhbmRvbSgpKTtcbiAgICAgICAgbGV0IHRvdGFsID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWF2eS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdG90YWwgKz0gaGVhdnlbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmVzLnNlbmQoYFRoZSByZXN1bHQgb2YgdGhlIENQVSA9ICR7aGVhdnl9IGFuZCB0b3RhbCBvcGVyYXRpb24gaXM6ICR7dG90YWx9YCk7XG4gICAgfSk7XG4gICAgYXBwLmdldCgnL25vbi1ibG9ja2luZy8nLCAoX3JlcSwgcmVzKSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKCdOb24tYmxvY2tpbmcgcmVxdWVzdCcpO1xuICAgIH0pO1xuICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bldvcmtlcigpIHtcbiAgICAgICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcihXb3JrZXJGaWxlUGF0aCwge1xuICAgICAgICAgICAgd29ya2VyRGF0YTogeyB0aHJlYWRfY291bnQ6IFRIUkVBRF9DT1VOVCB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHdvcmtlci5vbignbWVzc2FnZScsIGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHdvcmtlci5vbignZXJyb3InLCBlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGBXb3JrZXIgZXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHdvcmtlci5vbignZXhpdCcsIGNvZGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb2RlICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChgV29ya2VyIHN0b3BwZWQgd2l0aCBleGl0IGNvZGUgJHtjb2RlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXBwLmdldCgnL2Jsb2NraW5nLXdvcmtlcicsIGFzeW5jIChfcmVxLCByZXMpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgd29ya2VyUmVzdWx0ID0gYXdhaXQgcnVuV29ya2VyKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgV29ya2VyIHRvb2sgJHtEYXRlLm5vdygpIC0gc3RhcnR9bXMgdG8gY29tcGxldGVgKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGBCbG9ja2luZyB3b3JrZXI6ICR7d29ya2VyUmVzdWx0fWApO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGluIHdvcmtlcjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGBCbG9ja2luZyB3b3JrZXIgZmFpbGVkOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgYXBwLmdldCgnL2Jsb2NraW5nJywgYXN5bmMgKF9yZXEsIHJlcykgPT4ge1xuICAgICAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHdvcmtlclByb21pc2VzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgVEhSRUFEX0NPVU5UOyBpKyspIHtcbiAgICAgICAgICAgIHdvcmtlclByb21pc2VzLnB1c2gocnVuV29ya2VyKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0aHJlYWRSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwod29ya2VyUHJvbWlzZXMpO1xuICAgICAgICAgICAgY29uc3QgdG90YWxfcmVzdWx0cyA9IHRocmVhZFJlc3VsdHNbMF0gK1xuICAgICAgICAgICAgICAgIHRocmVhZFJlc3VsdHNbMV0gK1xuICAgICAgICAgICAgICAgIHRocmVhZFJlc3VsdHNbMl0gK1xuICAgICAgICAgICAgICAgIHRocmVhZFJlc3VsdHNbM107XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgV29ya2VycyB0b29rICR7RGF0ZS5ub3coKSAtIHN0YXJ0fW1zIHRvIGNvbXBsZXRlYCk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChgQmxvY2tpbmcgd29ya2VyczogJHt0b3RhbF9yZXN1bHRzfWApO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGluIHdvcmtlcjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGBCbG9ja2luZyB3b3JrZXJzIGZhaWxlZDogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcCk7XG4gICAgY29uc3QgYXN5bmNMb2NhbFN0b3JhZ2UgPSBuZXcgQXN5bmNMb2NhbFN0b3JhZ2UoKTtcbiAgICBmdW5jdGlvbiBsb2dXaXRoSWQobXNnKSB7XG4gICAgICAgIGNvbnN0IGlkID0gYXN5bmNMb2NhbFN0b3JhZ2UuZ2V0U3RvcmUoKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7aWQgIT09IHVuZGVmaW5lZCA/IGlkIDogJy0nfSAke21zZ31gKTtcbiAgICB9XG4gICAgbGV0IGlkU2VxID0gMDtcbiAgICBzZXJ2ZXIub24oJ2Nvbm5lY3Rpb24nLCBzb2NrZXQgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IGlkU2VxKys7XG4gICAgICAgIGFzeW5jTG9jYWxTdG9yYWdlLnJ1bihpZCwgKCkgPT4ge1xuICAgICAgICAgICAgbG9nV2l0aElkKCdDbGllbnQgY29ubmVjdGVkIHRvIHNlcnZlciEhIScpO1xuICAgICAgICAgICAgc29ja2V0Lm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBsb2dXaXRoSWQoJ0NsaWVudCBkaXNjb25uZWN0ZWQgZnJvbSBzZXJ2ZXIhISEnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBzZXJ2ZXIubGlzdGVuKGVudi5QT1JULCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBTZXJ2ZXIgbGlzdGVuaW5nIG9uIHBvcnQgJHtlbnYuUE9SVH1gKTtcbiAgICB9KTtcbiAgICBhcHAudXNlKGNvbXByZXNzaW9uKHtcbiAgICAgICAgZmlsdGVyOiAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXEuaGVhZGVyc1sneC1uby1jb21wcmVzc2lvbiddKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbXByZXNzaW9uLmZpbHRlcihyZXEsIHJlcyk7XG4gICAgICAgIH0sXG4gICAgICAgIGxldmVsOiBlbnYuQ09NUFJFU1NJT05fTEVWRUwgfHwgOSxcbiAgICAgICAgdGhyZXNob2xkOiBlbnYuQ09NUFJFU1NJT05fVEhSRVNIT0xEIHx8IDEwMjQsXG4gICAgfSkpO1xuICAgIGNvbnN0IGlkbGVUaW1lb3V0ID0gZW52LklETEVfVElNRU9VVCB8fCA0ODAwMDA7XG4gICAgbGV0IGlkbGVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzZXJ2ZXIuY2xvc2UoKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlciBjbG9zZWQgZHVlIHRvIGlkbGUgdGltZSBvdXQhIFJlc3RhcnRpbmcuLi4uJyk7XG4gICAgICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICAgIH0pO1xuICAgIH0sIGlkbGVUaW1lb3V0KTtcbiAgICBhcHAudXNlKChfcmVxLCBfcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIGNsZWFyVGltZW91dChpZGxlVGltZXIpO1xuICAgICAgICBpZGxlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNlcnZlci5jbG9zZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NsZWFyZWQgVGltZSBvdXQhIFJlc3RhcnRpbmcuLi4uJyk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIGlkbGVUaW1lb3V0KTtcbiAgICAgICAgbmV4dCgpO1xuICAgIH0pO1xuICAgIHByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uTW9uaXRvcicsIChlcnIsIG9yaWdpbikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnVW5jYXVnaHQgRXhjZXB0aW9uOicsIGVyciwgJ09yaWdpbjonLCBvcmlnaW4pO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG4gICAgc2VydmVyLm9uKCdlcnJvcicsIGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KTtcbn1cblN0YXJ0U2VydmVyKCk7XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgU3RhcnRTZXJ2ZXIsXG59O1xuIl0sIm5hbWVzIjpbIndlYnBhY2tRdWV1ZXMiLCJ3ZWJwYWNrRXhwb3J0cyIsIndlYnBhY2tFcnJvciIsInJlc29sdmVRdWV1ZSIsImluc3RhbGxlZENodW5rcyIsImVudiIsImxvYWQiLCJQT1JUIiwiTnVtYmVyIiwiTk9ERV9FTlYiLCJNT1JHQU4iLCJMT0dHRVIiLCJBUFBfTkFNRSIsIlN0cmluZyIsIkJBU0VfVVJMIiwiQkFTRTY0X0VOQ09ERUQiLCJCdWZmZXIiLCJUUkFDSU5HIiwiQm9vbGVhbiIsIkVYVFJBIiwiUkFSRV9MSU1JVF9USU1FIiwiUkFSRV9MSU1JVF9XSU5ET1dfTVMiLCJNQVgiLCJSQVJFX0xJTUlUX01FU1NBR0UiLCJSQVJFX0xJTUlUX0NPREUiLCJUUlVTVF9QUk9YWSIsIk5VTUJFUl9PRl9QUk9YSUVTIiwiSURMRV9USU1FT1VUIiwiQ09NUFJFU1NJT05fTEVWRUwiLCJDT01QUkVTU0lPTl9USFJFU0hPTEQiLCJFUlJPUl9USU1FT1VUIiwiUkVTUE9OU0VfU1RBVFVTIiwiUkVTUE9OU0VfTUVTU0FHRSIsIlJFU1BPTlNFX0NPREUiLCJSRVNQT05TRV9FUlJPUl9DT0RFIiwiUkVTUE9OU0VfRVJST1JfTUVTU0FHRSIsIlJFU1BPTlNFX1NFUlZFUl9FUlJPUiIsIlJFU1BPTlNFX0VSUk9SX1NUQVRVUyIsIlJFU1BPTlNFX0VSUk9SX0RBVEEiLCJSRVNQT05TRV9FUlJPUl9TVEFDSyIsIlJFU1BPTlNFX0VSUk9SX05BTUUiLCJFcnJvciIsIm9rIiwiZXF1YWxzIiwiZnJvbSIsInRlc3QiLCJtb2R1bGUiLCJleHBvcnRzIiwicmVxdWlyZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwiU3ltYm9sIiwicXVldWUiLCJkIiwiZm9yRWFjaCIsImZuIiwiciIsImEiLCJib2R5IiwiaGFzQXdhaXQiLCJjdXJyZW50RGVwcyIsIm91dGVyUmVzb2x2ZSIsInJlamVjdCIsImRlcFF1ZXVlcyIsIlNldCIsInByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlaiIsIngiLCJkZXBzIiwibWFwIiwiZGVwIiwidGhlbiIsIm9iaiIsImUiLCJyZXQiLCJ3cmFwRGVwcyIsImdldFJlc3VsdCIsImZuUXVldWUiLCJxIiwiaGFzIiwiYWRkIiwicHVzaCIsImVyciIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJmIiwiY2h1bmtJZCIsImFsbCIsImtleXMiLCJyZWR1Y2UiLCJwcm9taXNlcyIsInUiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsImNodW5rIiwibW9yZU1vZHVsZXMiLCJtb2R1bGVzIiwiY2h1bmtJZHMiLCJpZHMiLCJydW50aW1lIiwiaSIsImxlbmd0aCIsImluc3RhbGxDaHVuayIsImFzeW5jIiwiYXBwIiwicnVuV29ya2VyIiwid29ya2VyIiwiV29ya2VyIiwid29ya2VyRGF0YSIsInRocmVhZF9jb3VudCIsIm9uIiwiZGF0YSIsImVycm9yIiwiY29kZSIsInVzZSIsIm9yaWdpbiIsImNyZWRlbnRpYWxzIiwiZGVmYXVsdCIsIl9yZXEiLCJyZXMiLCJoZWF2eSIsIkFycmF5IiwiTWF0aCIsInJhbmRvbSIsInRvdGFsIiwic2VuZCIsInN0YXR1cyIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsIndvcmtlclJlc3VsdCIsImNvbnNvbGUiLCJsb2ciLCJ3b3JrZXJQcm9taXNlcyIsInRocmVhZFJlc3VsdHMiLCJ0b3RhbF9yZXN1bHRzIiwic2VydmVyIiwiYXN5bmNMb2NhbFN0b3JhZ2UiLCJBc3luY0xvY2FsU3RvcmFnZSIsImxvZ1dpdGhJZCIsIm1zZyIsImlkIiwiZ2V0U3RvcmUiLCJpZFNlcSIsInNvY2tldCIsInJ1biIsImxpc3RlbiIsImZpbHRlciIsInJlcSIsImhlYWRlcnMiLCJsZXZlbCIsInRocmVzaG9sZCIsImlkbGVUaW1lb3V0IiwiaWRsZVRpbWVyIiwic2V0VGltZW91dCIsImNsb3NlIiwiX3JlcyIsIm5leHQiLCJjbGVhclRpbWVvdXQiLCJTdGFydFNlcnZlciJdLCJzb3VyY2VSb290IjoiIn0=