"use strict";exports.id=545,exports.ids=[545],exports.modules={1976:(e,s,t)=>{t.d(s,{v:()=>d});var a=t(2613);const r=(0,t(7546).load)({CORS_ORIGIN:String,CORS_OPTIONS_SUCCESS_STATUS:Number,CORS_CREDENTIALS:Boolean,CORS_METHODS:String}),{CORS_ORIGIN:o,CORS_OPTIONS_SUCCESS_STATUS:n,CORS_CREDENTIALS:i,CORS_METHODS:c}=r;a.strict.ok(o,"CORS origin should be present"),a.strict.ok(n,"CORS options success status should be present"),a.strict.ok(i,"CORS credentials should be present"),a.strict.ok(c,"CORS methods should be present");const l={CORS_ORIGIN:o,CORS_OPTIONS_SUCCESS_STATUS:n,CORS_CREDENTIALS:i,CORS_METHODS:c};t(818).config();const d={origin:l.CORS_ORIGIN,methods:l.CORS_METHODS,credentials:l.CORS_CREDENTIALS,optionsSuccessStatus:l.CORS_OPTIONS_SUCCESS_STATUS}},3085:(e,s,t)=>{t.d(s,{L:()=>A});var a=t(2613);const r=(0,t(7546).load)({DB_HOST:String,DB_PORT:Number,DB_USER:String,DB_PASS:String,DB_NAME:String,DB_SOCKET_PATH:String,DB_SOCKET_TIMEOUT:Number,DB_COMPRESS:Boolean,DB_DEBUG:Boolean,DB_PERMIT_LOCAL_INFILE:Boolean,DB_TRACE:Boolean,DB_CHECK_DUPLICATE:Boolean,DB_SSL:Boolean,DB_SSL_CA:String,DB_SSL_KEY:String,DB_SSL_CERT:String,DB_CONNECTION_ATTRIBUTES:String,DB_CONNECTION_TIMEOUT:Number}),{DB_HOST:o,DB_PORT:n,DB_USER:i,DB_PASS:c,DB_NAME:l,DB_SOCKET_PATH:d,DB_SOCKET_TIMEOUT:u,DB_COMPRESS:y,DB_DEBUG:g,DB_PERMIT_LOCAL_INFILE:T,DB_TRACE:p,DB_CHECK_DUPLICATE:E,DB_SSL:m,DB_SSL_CA:_,DB_SSL_KEY:h,DB_SSL_CERT:f,DB_CONNECTION_ATTRIBUTES:w,DB_CONNECTION_TIMEOUT:S}=r;a.strict.ok(o,"Database host should be present"),a.strict.ok(n,"Database port should be present"),a.strict.ok(i,"Database user should be present"),a.strict.ok(c,"Database password should be present"),a.strict.ok(l,"Database name should be present");const A={DB_HOST:o,DB_PORT:n,DB_USER:i,DB_PASS:c,DB_NAME:l,DB_SOCKET_PATH:d,DB_SOCKET_TIMEOUT:u,DB_COMPRESS:y,DB_DEBUG:g,DB_PERMIT_LOCAL_INFILE:T,DB_TRACE:p,DB_CHECK_DUPLICATE:E,DB_CONNECTION_ATTRIBUTES:w,DB_CONNECTION_TIMEOUT:S,DB_SSL:m,DB_SSL_CA:_,DB_SSL_KEY:h,DB_SSL_CERT:f}},3101:(e,s,t)=>{t.d(s,{n:()=>m});var a=t(2613);const r=(0,t(7546).load)({JWT_SECRET:String,JWT_EXPIRES_IN:String,JWT_REFRESH_SECRET:String,JWT_REFRESH_EXPIRES_IN:String,JWT_REFRESH_MAX_AGE:Number,JWT_ALGORITHM:String,JWT_ISSUER:String,JWT_MAX_AGE:Number,JWT_HTTP_ONLY:Boolean,JWT_SAME_SITE:String,JWT_COOKIE_NAME:String,JWT_SECURE:Boolean}),{JWT_SECRET:o,JWT_EXPIRES_IN:n,JWT_REFRESH_SECRET:i,JWT_REFRESH_EXPIRES_IN:c,JWT_REFRESH_MAX_AGE:l,JWT_ALGORITHM:d,JWT_ISSUER:u,JWT_MAX_AGE:y,JWT_HTTP_ONLY:g,JWT_SAME_SITE:T,JWT_COOKIE_NAME:p,JWT_SECURE:E}=r;a.strict.ok(o,"JWT secret should be present"),a.strict.ok(n,"JWT expires in should be present"),a.strict.ok(i,"JWT refresh secret should be present"),a.strict.ok(c,"JWT refresh expires in should be present"),a.strict.ok(d,"JWT algorithm should be present"),a.strict.ok(u,"JWT issuer should be present"),a.strict.ok(y,"JWT max age should be present"),a.strict.ok(g,"JWT http only should be present"),a.strict.ok(T,"JWT same site should be present"),a.strict.ok(p,"JWT cookie name should be present"),a.strict.ok(E,"JWT secure should be present"),a.strict.ok(l,"JWT refresh max age should be present");const m={JWT_SECRET:o,JWT_EXPIRES_IN:n,JWT_REFRESH_SECRET:i,JWT_REFRESH_EXPIRES_IN:c,JWT_REFRESH_MAX_AGE:l,JWT_ALGORITHM:d,JWT_ISSUER:u,JWT_MAX_AGE:y,JWT_HTTP_ONLY:g,JWT_SAME_SITE:T,JWT_COOKIE_NAME:p,JWT_SECURE:E}},6184:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{CI:()=>v,E0:()=>I,Eu:()=>C,Zv:()=>D,gg:()=>h,kL:()=>w,pD:()=>m,tY:()=>S,ys:()=>R,zX:()=>f,zh:()=>A});var r=t(818),o=t.n(r),n=t(829),i=t.n(n),c=t(5595),l=t(6153),d=t(3101),u=t(452),y=t(2993),g=t(8995),T=t(581),p=t(9031),E=e([c,l,u,y,g,T]);[c,l,u,y,g,T]=E.then?(await E)():E,o().config();const m=async(e,s)=>{try{const{caption:t,location:a,tags:r}=e.body,o=e.cookies.jwt;if(!o)return void s.status(401).json({message:"Unauthorized"});i().verify(o,d.n.JWT_SECRET,(async(e,o)=>{if(e)return console.log(e.message),void s.status(401).json({message:"Unauthorized"});const n=o.id,i=await l.A.findByPk(n);if(!i)return void s.status(404).json({message:"User not found"});const d=await c.A.findImageByReferenceKey("user_id",n);if(!d)return s.status(404).json({message:"Image not found"});const y=await u.A.create({caption:t,imageURL:d.imageUrl,location:a,tags:r||"",created_At:new Date,creator_Id:i.id});if(y)return s.status(201).json({message:"Post created successfully",newPost:y}),y;s.status(400).json({message:"Error creating new post."})}))}catch(e){console.error("Error creating post:",e),s.status(500).json({message:"Internal server error"})}},_=async(e,s,t)=>{try{const e=await c.A.findOne({where:{imageUrl:t}});if(!e)return void s.status(404).json({message:"Image not found"});await e.destroy(),s.status(200).json({message:"Image deleted successfully"})}catch(e){console.error("Error deleting image:",e),s.status(500).json({message:"Internal server error"})}},h=async(e,s)=>{try{const{caption:t,location:a,tags:r,imageUrl:o}=e.body,n=parseInt(e.query.post_id,10);if(!n)return void s.status(400).json({message:"Post ID is required"});const c=e.cookies.jwt;if(!c)return void s.status(401).json({message:"Unauthorized"});i().verify(c,d.n.JWT_SECRET,(async(i,c)=>{if(i)return console.log(i.message),void s.status(401).json({message:"Unauthorized"});const d=c.id,g=await l.A.findByPk(d);if(!g)return void s.status(404).json({message:"User not found"});const T=await u.A.findOne({where:{id:n,creator_Id:d}});if(!T)return void s.status(404).json({message:"Post not found"});if(T.creator_Id!==g.id)return void s.status(403).json({message:"Unauthorized attempt!"});let p=T?.imageURL;if(o)try{const t=await(0,y.A)(e,s);if(!t)return void s.status(404).json({message:"Image not found"});p=t}catch(e){return void s.status(401).json({message:"Unauthorized"})}const E=await T.update({id:T.id,caption:t,imageURL:p,location:a,tags:r,created_At:new Date});return E?(s.status(200).json({message:"Post updated successfully",post:E}),E):(o&&await _(e,s,o),void s.status(400).json({message:"Error updating post"}))}))}catch(e){console.error("Error updating post:",e),s.status(500).json({message:"Internal server error"})}},f=async(e,s)=>{try{const e=await u.A.findAll();s.status(200).json({posts:e})}catch(e){console.error("Error getting posts:",e),s.status(500).json({message:"Internal server error"})}},w=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,a)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const r=a.id,o=parseInt(e.body.post_id,10);if(isNaN(o))return void s.status(400).json({message:"Invalid post ID"});if(!await l.A.findByPk(r))return void s.status(404).json({message:"User not found"});const n=await u.A.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});if(await g.A.findOne({where:{post_id:o,user_id:r}}))return void s.status(400).json({message:"Post already liked"});const i=await g.A.createLike({user_id:r,post_id:o,created_At:new Date});n.likes_Count||(n.likes_Count=0);const c=n.likes_Count+1;await n.update({likes_Count:c})?s.status(201).json({message:"Post liked successfully",like:i}):s.status(400).json({message:"Error liking post."})}))}catch(e){console.error("Error liking post:",e),s.status(500).json({message:"Internal server error"})}},S=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,a)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const r=a.id;if(!r)return void s.status(400).json({message:"User ID is required"});const o=e.query.post_id;if(!o)return void s.status(400).json({message:"Post ID is required"});const n=await u.A.findOne({where:{id:o,creator_Id:r}});n?s.status(200).json({post:n}):s.status(404).json({message:"Post not found"})}))}catch(e){console.error("Error getting post:",e),s.status(500).json({message:"Internal server error"})}},A=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,a)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const r=a.id;if(!r)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.body.post_id,10);if(!await l.A.findByPk(r))return void s.status(404).json({message:"User not found"});const n=await u.A.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});const i=await g.A.findOne({where:{post_id:o,user_id:r}});i&&await i.destroy();let c=n.likes_Count||0;c>0&&(c-=1),await n.update({likes_Count:c}),await n.save(),s.status(200).json({message:i?"Like removed successfully":"Post liked successfully",post:n})}))}catch(e){console.error("Error toggling like:",e),s.status(500).json({message:"Internal server error"})}},I=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,a)=>{if(t)return console.log("JWT verification error",t.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const r=a.id;if(!r)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.body.post_id,10);if(!o)return void s.status(400).json({message:"Post ID is required"});if(!await l.A.findByPk(r))return void s.status(404).json({message:"User not found"});if(!await u.A.findByPk(o))return void s.status(404).json({message:"Post not found"});if(await T.A.findOne({where:{post_id:o,user_id:r}}))return void s.status(400).json({message:"Post already saved"});const n=await T.A.createSave({id:r,user_id:r,post_id:o,saveDate:new Date});n?s.status(201).json({message:"Post saved successfully",save:n}):s.status(400).json({message:"Error saving post."})}))}catch(e){console.error("Error saving post:",e),s.status(500).json({message:"Internal server error"})}},D=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,a)=>{if(t)return console.log("JWT verification error",t.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const r=a.id;if(!r)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.body.post_id,10);if(!o)return void s.status(400).json({message:"Post ID is required"});if(!await l.A.findByPk(r))return void s.status(404).json({message:"User not found"});if(!await u.A.findByPk(o))return void s.status(404).json({message:"Post not found"});const n=await T.A.findOne({where:{post_id:o,user_id:r}});n&&await n.destroy(),s.status(200).json({message:n?"Post unsaved successfully":"Post not saved"})}))}catch(e){console.error("Error deleting saved post:",e),s.status(500).json({message:"Internal server error"})}},R=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,a)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const r=a.id;if(!r)return void s.status(400).json({message:"User ID is required"});if(!await l.A.findByPk(r))return void s.status(404).json({message:"User not found"});const o=parseInt(e.body.post_id,10);if(!o)return void s.status(400).json({message:"Post ID is required from server"});const n=await u.A.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});const i=await T.A.findOne({where:{post_id:o,user_id:r}});if(i&&await i.destroy(),n.imageURL){const e=await c.A.findOne({where:{imageUrl:n.imageURL}});e&&await e.destroy()}await n.destroy(),s.status(200).json({message:"Post deleted successfully"})}))}catch(e){console.error("Error deleting post:",e),s.status(500).json({message:"Internal server error"})}},C=async(e,s)=>{try{const{page:t=0,limit:a=10}=e.query,r=t?parseInt(t,10)*parseInt(a,10):0,o=await u.A.findAndCountAll({limit:parseInt(a,10),offset:r,order:[["created_At","DESC"]]});s.status(200).json({posts:o,page:parseInt(t,10),totalPages:Math.ceil(o.count/parseInt(a,10)),totalCount:o.count})}catch(e){console.error("Error getting posts:",e),s.status(500).json({message:"Internal server error"})}},v=async(e,s)=>{try{const{searchValue:t}=e.body;if(!t)return void s.status(400).json({message:"Search value is required"});const a=await u.A.findAll({where:{caption:{[p.Op.like]:`%${t}%`}}});s.status(200).json({posts:a})}catch(e){console.error("Error searching posts:",e),s.status(500).json({message:"Internal server error"})}};a()}catch(e){a(e)}}))},9024:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{Be:()=>E,TU:()=>g,Ub:()=>p,oC:()=>m,pH:()=>T});var r=t(818),o=t.n(r),n=t(829),i=t.n(n),c=t(3101),l=t(16),d=t(80),u=t(2300),y=e([d]);d=(y.then?(await y)():y)[0],o().config();const g=async(e,s)=>{try{const{name:t,username:a,email:r,password:o}=e.body;if(!(t&&a&&r&&o))return(0,u.H4)(new Error("New User validation error"),s);if(await d.A.findOne({where:{email:r}}))return(0,u.H4)(new Error("UserRegistrations.email: User already exists "),s);const n=await d.A.create({newUser:t,username:a,email:r,hashedpassword:o,createdAt:new Date}),i=(0,l.Jj)({id:n.id});s.cookie("jwt",i,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.status(201).json({id:n.id,name:n.newUser,username:n.username,email:n.email,token:i})}catch(e){(0,u.H4)(e,s)}},T=async(e,s)=>{try{const{email:t,password:a}=e.body;if(!t||!a)return(0,u.H4)(new Error("Login Validation Error!"),s);const r=await d.A.loginUser(t,a);if(!r)throw new Error("User not found");const o=(0,l.Jj)({id:r.id}),n=(0,l.v3)({id:r.id});console.log("User logged in:",n),s.cookie("jwt",o,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.cookie("refreshToken",n,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_REFRESH_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.setHeader("Authorization",`Bearer ${o}`),s.locals.user=r,s.json({token:o,refreshToken:n,user:r.id})}catch(e){(0,u.H4)(e,s)}},p=async(e,s)=>{try{const t=e.cookies.jwt,a=e.cookies.refreshToken;if(!t&&!a)return void s.status(400).json({message:"No tokens provided!"});s.cookie("jwt","",{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:1}),s.cookie("refreshToken","",{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:1}),s.status(200).json({message:"User logged out"})}catch(e){(0,u.H4)(e,s)}},E=async(e,s)=>{const t=e.cookies.refreshToken;t?i().verify(t,c.n.JWT_REFRESH_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});try{const e=t.id;if(console.log("User ID:",e),!e)return void s.status(400).json({message:"User ID is required"});const a=await d.A.findByPk(e);if(!a)return s.status(404).json({message:"User not found"});const r=i().sign({id:a.id},c.n.JWT_SECRET,{expiresIn:c.n.JWT_EXPIRES_IN,algorithm:c.n.JWT_ALGORITHM,issuer:c.n.JWT_ISSUER});s.cookie("jwt",r,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_REFRESH_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.status(200).json({token:r,user:a.id})}catch(e){console.error("Error getting current user:",e),s.status(500).json({message:"Error getting current user"})}})):s.status(401).json({message:"Unauthorized"})},m=(e,s,t)=>{const a=e.cookies.jwt;a?(i().verify(a,c.n.JWT_SECRET,(async(e,a)=>{if(e)return console.log(e.message),s.status(401).json({message:"Unauthorized"});const r=a.id,o=await d.A.findByPk(r);return o?(s.locals.user=o,t()):s.status(404).json({message:"User not found"})})),t()):s.status(401).json({message:"Unauthorized"})};a()}catch(e){a(e)}}))},2993:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>l});var r=t(5595),o=t(829),n=t.n(o),i=(t(4469),t(6153)),c=e([r,i]);[r,i]=c.then?(await c)():c;const l=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});n().verify(t,process.env.JWT_SECRET,(async(e,t)=>{if(e)return void s.status(401).json({message:"Unauthorized"});const a=t.id;if(!a)return void s.status(401).json({message:"Unauthorized"});if(!await i.A.findByPk(a))return void s.status(401).json({message:"Unauthorized"});const o=await r.A.findImageByReferenceKey("user_id",a);o?s.status(200).json({imageUrl:o.imageUrl}):s.status(200).json({message:"No image found"})}))}catch(e){throw console.error("Error getting image preview:",e),new Error("Failed to get image preview")}};a()}catch(e){a(e)}}))},2785:(e,s,t)=>{t.d(s,{TA:()=>n});var a=t(1763),r=t.n(a),o=t(9469);const n=r()({windowMs:o._.RARE_LIMIT_WINDOW_MS,max:o._.MAX,message:o._.RARE_LIMIT_MESSAGE,statusCode:o._.RARE_LIMIT_CODE,handler:(e,s)=>{s.status(o._.RARE_LIMIT_CODE).json({message:o._.RARE_LIMIT_MESSAGE})},keyGenerator:async(e,s)=>e.ip?e.ip.replace(/:\d+[^:]*$/,""):(s.status(500).send({message:"Warning: request.ip is missing!"}),e.socket.remoteAddress)})},16:(e,s,t)=>{t.d(s,{Jj:()=>c,v3:()=>l});var a=t(818),r=t.n(a),o=t(829),n=t.n(o),i=t(3101);r().config();const c=e=>{try{return n().sign(e,i.n.JWT_SECRET,{algorithm:i.n.JWT_ALGORITHM,expiresIn:i.n.JWT_EXPIRES_IN,issuer:i.n.JWT_ISSUER})}catch(e){throw new Error("Error generating JWT")}},l=e=>{try{return n().sign(e,i.n.JWT_REFRESH_SECRET,{algorithm:i.n.JWT_ALGORITHM,expiresIn:i.n.JWT_REFRESH_EXPIRES_IN,issuer:i.n.JWT_ISSUER})}catch(e){throw new Error("Error generating JWT")}}},2051:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{FH:()=>y,oC:()=>u});var r=t(818),o=t.n(r),n=t(829),i=t.n(n),c=t(3101),l=t(6153),d=e([l]);l=(d.then?(await d)():d)[0],o().config();const u=async(e,s,t)=>{try{const a=e.cookies.jwt;a?i().verify(a,c.n.JWT_SECRET,(async(e,a)=>{if(e)console.log(e.message),s.locals.user=null;else try{const e=await l.A.findByPk(a.id);s.locals.user=e}catch(e){console.error("Error retrieving user:",e),s.locals.user=null}t()})):(s.locals.user=null,t())}catch(e){console.error("Error checking user:",e),s.locals.user=null,t()}},y=async(e,s,t)=>{try{const a=e.cookies.jwt;if(!a)return s.locals.user=null,t();i().verify(a,c.n.JWT_SECRET,(async(e,a)=>{if(e)return console.error("JWT verification error:",e.message),s.locals.user=null,t();try{const e=await l.A.findByPk(a.id);console.log("decodedToken:",a),s.locals.user=e||null}catch(e){console.error("Error retrieving user:",e),s.locals.user=null}t()}))}catch(e){console.error("Error verifying user:",e),s.locals.user=null,t()}};a()}catch(e){a(e)}}))},1125:(e,s,t)=>{t.d(s,{r:()=>r});var a=t(128);async function r(){const e=(0,a.J)();let s=0;for(;s<10;)try{return await e.authenticate(),console.log("Database connection established, Starting Server....."),await e.sync({force:!0}),console.log("Drop and re-sync db."),e}catch(e){console.error("Database connection failed:",e),s++,await new Promise((e=>setTimeout(e,1e3)))}throw console.error("Max attempts reached, database connection failed"),new Error("Database connection failed")}},128:(e,s,t)=>{t.d(s,{J:()=>c});var a=t(9031),r=t(3085),o=t(3024),n=t.n(o);const i={Dialect:"mariadb",host:r.L.DB_HOST||"localhost",username:r.L.DB_USER||"metalbrain",password:r.L.DB_PASS||"password",database:r.L.DB_NAME||"FindSomeOne",socketPath:r.L.DB_SOCKET_PATH||"/var/run/mysqld/mysqld.sock",socketTimeout:r.L.DB_SOCKET_TIMEOUT||1e3,compress:r.L.DB_COMPRESS||!1,debug:r.L.DB_DEBUG||!1,permitLocalInfile:r.L.DB_PERMIT_LOCAL_INFILE||!1,trace:r.L.DB_TRACE||!0,checkDuplicate:r.L.DB_CHECK_DUPLICATE||!1,connectAttributes:JSON.parse(r.L.DB_CONNECTION_ATTRIBUTES||"{}"),connectionTimeout:r.L.DB_CONNECTION_TIMEOUT||1e3,port:r.L.DB_PORT||3306,ssl:r.L.DB_SSL||!1,dialectOptions:{ssl:{ca:r.L.DB_SSL_CA?n().readFileSync(r.L.DB_SSL_CA).toString():"",key:r.L.DB_SSL_KEY?n().readFileSync(r.L.DB_SSL_KEY).toString():"",cert:r.L.DB_SSL_CERT?n().readFileSync(r.L.DB_SSL_CERT).toString():""}}};function c(){return new a.Sequelize(i.database,i.username,i.password,{host:i.host,dialect:i.Dialect,port:i.port,ssl:i.ssl,dialectOptions:i.dialectOptions})}},3121:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>l});var r=t(423),o=t(5520),n=t(3136),i=t(6760),c=t(3085);const e=(0,i.dirname)((0,n.fileURLToPath)("file:///home/babsdevsys/appV-1/src/server/loaders/dataLoader/sequlize.ts")),l=new r.Sequelize({dialect:o.MariaDbDialect,host:c.L.DB_HOST,user:c.L.DB_USER,password:c.L.DB_PASS,database:c.L.DB_NAME,port:c.L.DB_PORT,ssl:c.L.DB_SSL,models:await(0,r.importModels)(e+"/src/server/models/**/*.model.{ts,js}")});a()}catch(e){a(e)}}),1)},6633:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>w});var r=t(7252),o=t.n(r),n=t(6898),i=t.n(n),c=t(3268),l=t.n(c),d=t(2525),u=t.n(d),y=t(2096),g=t.n(y),T=t(9469),p=t(4388),E=t(2785),m=t(2300),_=t(6928),h=t.n(_),f=e([p]);async function w({app:e}){e.get("/status",((e,s)=>s.sendStatus(200).end())),e.use(((e,s,t)=>(s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),"OPTIONS"===e.method?s.sendStatus(204):t()))),e.use(l().urlencoded({extended:!0})),e.use(o().json()),e.use(o().urlencoded({extended:!0})),e.use(i()()),e.use(l().json()),e.use(o().static(h().join(__dirname,"dist")));const s=T._.TRUST_PROXY||"false",t=T._.NUMBER_OF_PROXIES||1;return s?e.set("trust proxy",!0):"false"===s?e.set("trust proxy",!1):(e.set("trust proxy",s),e.set("trust proxy",t)),e.set("trust proxy",t),e.get("/ip",((e,s)=>s.send(e.ip))),e.use(u()({contentSecurityPolicy:!1})),e.use(g()(T._.MORGAN)),e.use(E.TA),e.use(p.Q),e.use(m.sh),e}p=(f.then?(await f)():f)[0],a()}catch(S){a(S)}}))},1545:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.r(s),t.d(s,{default:()=>d});var r=t(6633),o=t(3121),n=t(1125),i=t(2541),c=t(2273),l=e([r,o,i]);async function d({app:e}){await(0,i.K)(),await(0,n.r)(),o.A,await(0,r.A)({app:e}),(0,c.A)(),console.log("Express Server Intialized!")}[r,o,i]=l.then?(await l)():l,a()}catch(u){a(u)}}))},5595:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>u});var r=t(9031),o=t(128),n=t(6153),i=t(452),c=e([n,i]);[n,i]=c.then?(await c)():c;const l=(0,o.J)();class d extends r.Model{static async findImageById(e){return await this.findByPk(e)}static async findImageByReferenceKey(e,s){try{return await this.findOne({where:{[e]:s},order:[["created_At","DESC"]]})}catch(t){throw console.error(`Error finding image by reference key: ${e}, value: ${s}`,t),t}}}d.init({id:{type:r.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},imageUrl:{type:r.DataTypes.STRING,allowNull:!0},user_id:{type:r.DataTypes.INTEGER,references:{model:"Users",key:"id"}},post_id:{type:r.DataTypes.INTEGER,references:{model:"Posts",key:"id"}},created_At:{type:r.DataTypes.DATE,allowNull:!1,defaultValue:r.DataTypes.NOW}},{sequelize:l,modelName:"ImageStorages",timestamps:!1}),d.init({id:{type:r.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},imageUrl:{type:r.DataTypes.STRING,allowNull:!0},user_id:{type:r.DataTypes.INTEGER,references:{model:"Users",key:"id"}},post_id:{type:r.DataTypes.INTEGER,references:{model:"Posts",key:"id"},allowNull:!0},created_At:{type:r.DataTypes.DATE,allowNull:!1,defaultValue:r.DataTypes.NOW}},{sequelize:l,modelName:"ImageStorages",timestamps:!1}),d.afterCreate((async e=>{const s=await n.A.findByPk(e.user_id);s&&(s.imageURL=e.imageUrl,await s.save())})),n.A.hasMany(d,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),i.A.hasMany(d,{foreignKey:"post_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),d.belongsTo(n.A,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),d.belongsTo(i.A,{foreignKey:"post_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),await l.sync({force:!1}).then((()=>{console.log("New Image synced successfully")})).catch((e=>{console.error("Error syncing new image:",e)}));const u=d;a()}catch(e){a(e)}}),1)},8995:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>u});var r=t(9031),o=t(128),n=t(6153),i=t(452),c=e([n,i]);[n,i]=c.then?(await c)():c;const l=(0,o.J)();class d extends r.Model{static async createLike(e){return await this.create(e)}static async findLikeById(e){return await this.findByPk(e)}static async findLikeByReferenceKey(e,s){return await this.findOne({where:{[e]:s}})}static async findAllLikesByReferenceKey(e,s){return await this.findAll({where:{[e]:s}})}static async deleteLikeByReferenceKey(e,s){await this.destroy({where:{[e]:s}})}}d.init({id:{type:r.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},user_id:{type:r.DataTypes.INTEGER,allowNull:!1,references:{model:"Users",key:"id"}},post_id:{type:r.DataTypes.INTEGER,allowNull:!1,references:{model:"Posts",key:"id"}},created_At:{type:r.DataTypes.DATE,allowNull:!0}},{sequelize:l,modelName:"Likes",timestamps:!1,freezeTableName:!0}),n.A.hasMany(d,{foreignKey:"user_id",onDelete:"CASCADE"}),d.belongsTo(n.A,{foreignKey:"user_id"}),i.A.hasMany(d,{foreignKey:"post_id",onDelete:"CASCADE"}),d.belongsTo(i.A,{foreignKey:"post_id"}),d.sync({force:!1}).then((()=>{console.log("Like synced successfully")})).catch((e=>{console.error("Error syncing like:",e)}));const u=d;a()}catch(e){a(e)}}))},452:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>d});var r=t(9031),o=t(128),n=t(6153),i=e([n]);n=(i.then?(await i)():i)[0];const c=(0,o.J)();class l extends r.Model{static async createPost(e){return await this.create(e)}static async updatePost(e,s){const[t,a]=await this.update(s,{where:{id:e},returning:!0});return[t,a]}static async deletePost(e){const s=await this.findOne({where:{id:e}});s&&await s.destroy()}static async getAllPosts(){return await this.findAll()}static async getInfinitePosts(e,s){return await this.findAll({offset:e,limit:s})}static async getPostByID(e){return await this.findOne({where:{id:e}})}}l.init({id:{type:r.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},caption:{type:r.DataTypes.STRING,allowNull:!1},imageURL:{type:r.DataTypes.STRING,allowNull:!0},location:{type:r.DataTypes.STRING,allowNull:!0},tags:{type:r.DataTypes.STRING,allowNull:!1},likes_Count:{type:r.DataTypes.INTEGER,allowNull:!0},created_At:{type:r.DataTypes.DATE,allowNull:!0},creator_Id:{type:r.DataTypes.INTEGER,allowNull:!1,references:{model:"Users",key:"id"}}},{sequelize:c,modelName:"Posts",timestamps:!1}),l.createPost=async function(e){try{return await this.create(e)}catch(e){throw console.error("Error creating new post:",e),e}},l.updatePost=async function(e,s){try{const[t,a]=await this.update(s,{where:{id:e},returning:!0});return[t,a]}catch(e){throw console.error("Error updating post:",e),e}},l.getInfinitePosts=async function(e,s){try{return await this.findAll({offset:e,limit:s})}catch(e){throw console.error("Error getting infinite posts:",e),e}},l.getPostByID=async function(e){try{return await this.findOne({where:{id:e}})}catch(e){throw console.error("Error getting post by ID:",e),e}},n.A.hasMany(l,{foreignKey:"creator_Id",onDelete:"CASCADE",onUpdate:"CASCADE"}),l.belongsTo(n.A,{foreignKey:"creator_Id",onDelete:"CASCADE",onUpdate:"CASCADE"}),await c.sync({force:!1}).then((()=>{console.log("Post synced successfully")})).catch((e=>{console.error("Error syncing Post:",e)}));const d=l;a()}catch(e){a(e)}}),1)},581:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>u});var r=t(9031),o=t(128),n=t(6153),i=t(452),c=e([n,i]);[n,i]=c.then?(await c)():c;const l=(0,o.J)();class d extends r.Model{static async createSave(e){return await this.create(e)}static async checkIfSaved(e,s){return!!await this.findOne({where:{user_id:e,post_id:s}})}static async deleteSavedPost(e){const s=await this.findOne({where:{post_id:e}});s&&await s.destroy()}}d.init({id:{type:r.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},user_id:{type:r.DataTypes.INTEGER,references:{model:"Users",key:"id"}},post_id:{type:r.DataTypes.INTEGER,references:{model:"Posts",key:"id"}},saveDate:{type:r.DataTypes.DATE,allowNull:!0,defaultValue:r.DataTypes.NOW}},{sequelize:l,tableName:"Saves",timestamps:!1,freezeTableName:!0}),d.deleteSavedPost=async function(e){const s=await this.findOne({where:{post_id:e}});s&&await s.destroy()},d.belongsTo(n.A,{foreignKey:"user_id",targetKey:"id"}),d.belongsTo(i.A,{foreignKey:"post_id",targetKey:"id"}),d.sync({force:!1}).then((()=>{console.log("Save Post synced successfully")})).catch((e=>{console.error("Error syncing Save post:",e)}));const u=d;a()}catch(e){a(e)}}))},6153:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>n});var r=t(9031);const e=(0,t(128).J)();class o extends r.Model{static async getUserByID(e){return await this.findOne({where:{id:e}})}}o.init({id:{type:r.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},firstName:{type:r.DataTypes.STRING,allowNull:!1,validate:{notEmpty:!0}},lastName:{type:r.DataTypes.STRING,allowNull:!1,validate:{notEmpty:!0}},username:{type:r.DataTypes.STRING,allowNull:!1,unique:!0,validate:{is:/^[a-zA-Z0-9_]*$/,len:[3,20]}},email:{type:r.DataTypes.STRING,unique:!0,allowNull:!1,validate:{isEmail:!0,len:[5,50],notEmpty:!0}},hashedpassword:{type:r.DataTypes.STRING(64)},status:{type:r.DataTypes.STRING,allowNull:!1,defaultValue:"unverified"},bio:{type:r.DataTypes.STRING,defaultValue:"This is a new user."},join:{type:r.DataTypes.DATE,defaultValue:r.DataTypes.NOW},avatarUrl:{type:r.DataTypes.STRING},imageURL:{type:r.DataTypes.STRING},profilePic:{type:r.DataTypes.STRING},label:{type:r.DataTypes.STRING,defaultValue:"New User"},last_activity:{type:r.DataTypes.DATE,defaultValue:r.DataTypes.NOW},updated_at:{type:r.DataTypes.DATE,defaultValue:r.DataTypes.NOW},UserRegistrationID:{type:r.DataTypes.UUID,allowNull:!0,references:{model:"UserRegistration",key:"id"}}},{sequelize:e,modelName:"Users",timestamps:!1,updatedAt:"updated_at"}),await e.sync({force:!1}).then((()=>{console.log("New User synced successfully")})).catch((e=>{console.error("Error syncing new user:",e)}));const n=o;a()}catch(e){a(e)}}),1)},80:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>g});var r=t(9031),o=t(128),n=t(5486),i=t.n(n),c=t(8635),l=t(6153),d=e([l]);l=(d.then?(await d)():d)[0];const u=(0,o.J)();class y extends r.Model{static async loginUser(e,s){return await this.findOne({where:{email:e,hashedpassword:s}})}static async logoutUser(e){return await this.findOne({where:{email:e}})}static async resetPassword(e,s){return await this.findOne({where:{email:e,hashedpassword:s}})}}y.init({id:{type:r.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},newUser:{type:r.DataTypes.STRING,allowNull:!1},username:{type:r.DataTypes.STRING,allowNull:!1},email:{type:r.DataTypes.STRING,allowNull:!1},hashedpassword:{type:r.DataTypes.STRING,allowNull:!1},createdAt:{type:r.DataTypes.DATE,allowNull:!1,defaultValue:r.DataTypes.NOW}},{sequelize:u,modelName:"UserRegistration",createdAt:"createdAt",timestamps:!1,freezeTableName:!0}),y.beforeCreate((async e=>{try{if(e){const s=i().genSaltSync(10),t=await i().hash(String(e.hashedpassword),s);e.hashedpassword=t}}catch(e){throw console.error("Error hashing password:",e),new Error("Error hashing password")}})),y.afterCreate((async e=>{try{if(e){const s=e.newUser?.lastIndexOf(" "),t=-1!==s?e.newUser?.slice(0,s):e.newUser,a=-1!==s?e.newUser?.slice(s??1):"",r=(0,c.q)(e.username);await l.A.upsert({firstName:t,lastName:a,username:e.username,email:e.email,hashedpassword:e.hashedpassword,status:"unverified",bio:"I am a new user.",join:new Date,avatarUrl:r,imageURL:null,profilePic:null,label:"New User",last_activity:new Date,updated_at:new Date,UserRegistrationID:e.id})}}catch(e){throw console.error("Error registering new user:",e),new Error("Error registering new user")}})),y.loginUser=async function(e,s){try{const t=await this.findOne({where:{email:e}});if(t){if(await i().compare(s,t.hashedpassword))return t;throw new Error("Incorrect password")}throw new Error("Incorrect email")}catch(e){throw console.error("Error logging in user:",e),new Error("User not found")}},y.logoutUser=async function(e){try{return await this.findOne({where:{email:e}})}catch(e){throw console.error("Error logging out user:",e),new Error("User not found")}},await u.sync({force:!1}).then((()=>{console.log("New User Registered synced successfully")})).catch((e=>{console.error("Error syncing new user:",e)}));const g=y;a()}catch(e){a(e)}}),1)},2317:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>E});var r=t(7252),o=t.n(r),n=t(8577),i=t.n(n),c=t(1976),l=t(9024),d=t(3268),u=t.n(d),y=t(6898),g=t.n(y),T=e([l]);l=(T.then?(await T)():T)[0];const p=o().Router();p.use(i()(c.v)),p.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),p.use(u().urlencoded({extended:!0})),p.use(g()()),p.use(o().json()),p.use(u().json()),p.post("/api/register",l.TU),p.post("/api/login",l.pH),p.get("/api/logout",l.Ub),p.post("/api/refresh-token",l.Be),p.get("/api/currentUser",l.oC);const E=p;a()}catch(e){a(e)}}))},6010:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>w});var r=t(818),o=t.n(r),n=t(7252),i=t.n(n),c=t(8577),l=t.n(c),d=t(6153),u=t(3268),y=t.n(u),g=t(6898),T=t.n(g),p=t(2051),E=t(829),m=t.n(E),_=t(3101),h=e([d,p]);[d,p]=h.then?(await h)():h;const f=i().Router();o().config(),f.use(l()()),f.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),f.use(y().urlencoded({extended:!0})),f.use(T()()),f.use(i().json()),f.use(y().json()),f.get("/api/getUser",p.FH,(async(e,s,t)=>{const a=e.cookies.jwt;a?m().verify(a,_.n.JWT_SECRET,(async(e,a)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});try{const e=await d.A.findByPk(a.id);if(!e)return void s.status(400).json({message:"User ID is required"});s.status(200).json({user:e})}catch(e){console.error("Error getting current user:",e),s.status(500).json({message:"Error getting current user"})}return t()})):s.status(401).json({message:"Unauthorized"})}));const w=f;a()}catch(e){a(e)}}))},8358:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>I});var r=t(818),o=t.n(r),n=t(7252),i=t.n(n),c=t(8577),l=t.n(c),d=t(1976),u=t(3268),y=t.n(u),g=t(6898),T=t.n(g),p=t(6020),E=t(2993),m=t(5595),_=t(829),h=t.n(_),f=t(6153),w=t(3101),S=e([E,m,f]);[E,m,f]=S.then?(await S)():S,o().config();const A=i().Router();A.use(l()(d.v)),A.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),s.header("encoding","multipart/form-data"),t()})),A.use(y().urlencoded({extended:!0})),A.use(T()()),A.use(i().json()),A.use(y().json()),A.post("/api/uploadImage",p.A.single("image"),(async(e,s)=>{try{console.log("File uploaded:",e.file);const t=`assets/images/${e.file?.filename}`,a=e.cookies.jwt,r=parseInt(e.body.postId,10);if(!a)return void s.status(401).json({message:"Unauthorized"});h().verify(a,w.n.JWT_SECRET,(async(e,a)=>{if(e)return void s.status(401).json({message:"Unauthorized"});const o=a.id;o&&await f.A.findByPk(o)?await m.A.create({imageUrl:t,user_id:o||null,post_id:r||null,created_At:new Date})?s.status(200).json({message:"Image uploaded successfully",imageUrl:t}):s.status(500).send({error:"Error creating image record"}):s.status(401).json({message:"Unauthorized"})}))}catch(e){console.error("Error uploading image:",e),s.status(500).json({message:"Internal server error"})}})),A.get("/api/sendImageUrl",E.A);const I=A;a()}catch(e){a(e)}}))},9785:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>E});var r=t(7252),o=t.n(r),n=t(8577),i=t.n(n),c=t(6898),l=t.n(c),d=t(3268),u=t.n(d),y=t(6184),g=t(2051),T=e([y,g]);[y,g]=T.then?(await T)():T;const p=o().Router();p.use(i()()),p.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),p.use(u().urlencoded({extended:!0})),p.use(l()()),p.use(o().json()),p.use(u().json()),p.post("/api/createPost",y.pD),p.put("/api/updatePost",y.gg),p.delete("/api/deletePost",y.ys),p.get("/api/getAllPosts",y.zX),p.get("/api/getPostById",y.tY),p.post("/api/likePost",y.kL),p.post("/api/savePost",g.FH,y.E0),p.delete("/api/deleteSavedPost",y.Zv),p.delete("/api/deleteLikePost",y.zh),p.get("/api/getInfinitePosts",y.Eu),p.post("/api/searchPosts",y.CI);const E=p;a()}catch(e){a(e)}}))},4388:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{Q:()=>m});var r=t(7252),o=t.n(r),n=t(9469),i=t(2317),c=t(6010),l=t(4704),d=t(3268),u=t.n(d),y=t(6898),g=t.n(y),T=t(9785),p=t(8358),E=e([i,c,l,T,p]);[i,c,l,T,p]=E.then?(await E)():E;const m=o().Router();m.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),m.use(u().urlencoded({extended:!0})),m.use(g()()),m.use(o().json()),m.use(u().json()),m.get("/",((e,s)=>{s.send({status:`${n._.NODE_ENV}`,message:`${n._.RESPONSE_STATUS}`,name:`${n._.APP_NAME}`})})),m.use(i.A),m.use(l.A),m.use(T.A),m.use(p.A),m.use(c.A),a()}catch(e){a(e)}}))},4704:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{A:()=>h});var r=t(7252),o=t.n(r),n=t(8577),i=t.n(n),c=t(3268),l=t.n(c),d=t(6898),u=t.n(d),y=t(829),g=t.n(y),T=t(6153),p=t(3101),E=t(2051),m=e([T,E]);[T,E]=m.then?(await m)():m;const _=o().Router();_.use(i()()),_.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),_.use(l().urlencoded({extended:!0})),_.use(u()()),_.use(o().json()),_.use(l().json()),_.get("/api/getCurrentUser",E.oC,(async(e,s,t)=>{const a=e.cookies.jwt;a?g().verify(a,p.n.JWT_SECRET,(async(e,a)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});try{const e=a.id;if(!e)return void s.status(400).json({message:"User ID is required"});if(!await T.A.findByPk(e))return s.status(404).json({message:"User not found"})}catch(e){console.error("Error getting current user:",e),s.status(500).json({message:"Internal server error"})}return t()})):s.status(401).json({message:"Unauthorized"})}));const h=_;a()}catch(e){a(e)}}))},6020:(e,s,t)=>{t.d(s,{A:()=>y});var a=t(8461),r=t.n(a),o=t(6928),n=t.n(o),i=t(7189),c=t(9896),l=t.n(c);const d="/home/babsdevsys/appV-1/public/assets/images";l().existsSync(d)||l().mkdirSync(d,{recursive:!0});const u=r().diskStorage({destination:function(e,s,t){t(null,d)},filename:function(e,s,t){const a=Date.now()+"-"+Math.round(1e9*Math.random());t(null,s.fieldname+"-"+a+n().extname(s.originalname))}}),y=r()({storage:u,limits:{fileSize:1e7},fileFilter:function(e,s,t){const a=/jpeg|jpg|png|svg/,r=a.test(s.mimetype),o=a.test(n().extname(s.originalname).toLowerCase());if(r&&o)return t(null,!0);(async(e,s)=>{try{if(!(await(0,i.validateMIMEType)(e.path,{originalFilename:e.originalname,allowMimeTypes:["image/jpeg","image/png","image/svg+xml"]})).ok)return s(new Error("Invalid file type"));s(null,!0)}catch(e){console.error("Error validating file type:",e),s(new Error("Error validating file type"))}})(s.path,t)}})},2273:(e,s,t)=>{t.d(s,{A:()=>o});var a=t(643);function r(){return new Promise((e=>{setTimeout((()=>{e()}),1e3)}))}new a.PerformanceObserver((e=>{e.getEntries().forEach((e=>{console.log(`${e.name}: ${e.duration}ms`)})),a.performance.clearMarks()})).observe({type:"measure"});const o=async function(){try{a.performance.mark("Loader Start",{detail:"Loader started"}),await r(),a.performance.mark("Task 1 End",{detail:"Task 1 completed"}),await r(),a.performance.mark("Task 2 End",{detail:"Task 2 completed"});const e=a.performance.measure("Task 2 Duration","Task 1 End","Task 2 End");console.log(e.duration),a.performance.mark("Loader End"),a.performance.measure("Total Loader Duration","Loader Start","Loader End")}catch(e){console.error("Error in loader:",e)}}},2541:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.d(s,{K:()=>c});var r=t(128),o=t(5595),n=e([o]);o=(n.then?(await n)():n)[0];const i=(0,r.J)();async function c(){const e=await i.transaction();try{await o.A.truncate({transaction:e}),await e.commit(),console.log("Tables have been truncated...")}catch(s){await e.rollback(),console.error("Error truncating tables:",s)}}a()}catch(l){a(l)}}))},8635:(e,s,t)=>{function a(e){const s=e.split(" ").map((e=>e.charAt(0).toUpperCase())).join("");return`https://ui-avatars.com/api/?name=${encodeURIComponent(s)}&size=200&background=random&color=fff`}t.d(s,{q:()=>a}),t(6982)},2300:(e,s,t)=>{t.d(s,{H4:()=>c,sh:()=>u});var a=t(1708),r=t.n(a),o=t(9896),n=t.n(o),i=t(9469);const c=(e,s)=>{console.error(e.message);let t={};e.message.includes("New User validation error")&&(t={name:"Name is required",username:"username is required",email:"email is required",password:"password is required"}),e.message.includes("UserRegistrations.email")&&(t.email="Email is already registered"),e.message.includes("incorrect email")&&(t.email="email is not registered"),e.message.includes("Incorrect password")&&(t.password="password is incorrect"),"SequelizeValidationError"===e.name&&e.error&&(t=e.error.reduce(((e,s)=>(e[s.path]=s.message,e)),{})),s.status(e.code||500).json({errors:t})};function l(e){const s=`${(new Date).toISOString()} - ${e.message}\n${e.stack}\n`;n().appendFileSync("error.log",s)}const d=new Map;function u(e,s,t,a){l(e),t.status(500).json({message:"An unexpected error occurred"}),a(e)}r().on("unhandledRejection",((e,s)=>{console.error("Unhandled Rejection at:",s,"reason:",e),d.set(s,e)})),r().on("rejectionHandled",(e=>{d.delete(e)})),r().on("unhandledRejection",((e,s)=>{l(e),console.error("Unhandled Rejection at:",s,"reason:",e),r().exit(1)})),r().on("uncaughtException",(e=>{l(e),console.error("Uncaught Exception:",e),r().exit(1)})),r().on("uncaughtException",(e=>{n().writeSync(r().stderr.fd,`Caught exception: ${e}\nException Origin: ${origin}\n`)})),setTimeout((()=>{console.log("This will still run.")}),i._.ERROR_TIMEOUT)}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L1MsS0FDNUIrUyxFQUFJL1MsRUFBTTZRLE1BQVE3USxFQUFNbEIsUUFDakJpVSxJQUNSLENBQUMsSUFFUjNVLEVBQUlRLE9BQU9HLEVBQUlpVSxNQUFRLEtBQUtuVSxLQUFLLENBQUUrVCxVQUFTLEVBR2hELFNBQVNLLEVBQWVsVSxHQUNwQixNQUFNRyxFQUFNLElBQUcsSUFBSVksTUFBT29ULG1CQUFtQm5VLEVBQUlELFlBQVlDLEVBQUlvVSxVQUNqRSxtQkFBa0IsWUFBYWpVLEVBQ25DLENBQ0EsTUFBTWtVLEVBQXNCLElBQUlDLElBU3pCLFNBQVNDLEVBQW1CdlUsRUFBS21CLEVBQU05QixFQUFLOEcsR0FDL0MrTixFQUFlbFUsR0FFZlgsRUFBSVEsT0FBTyxLQUFLQyxLQUFLLENBQ2pCQyxRQUFTLGlDQUVib0csRUFBS25HLEVBQ1QsQ0FmQSxPQUFXLHNCQUFzQixDQUFDd1UsRUFBUUMsS0FDdEN2VSxRQUFRZSxNQUFNLDBCQUEyQndULEVBQVMsVUFBV0QsR0FDN0RILEVBQW9CeEosSUFBSTRKLEVBQVNELEVBQU8sSUFFNUMsT0FBVyxvQkFBb0JDLElBQzNCSixFQUFvQmhFLE9BQU9vRSxFQUFRLElBWXZDLE9BQVcsc0JBQXNCLENBQUNELEVBQVFDLEtBQ3RDUCxFQUFlTSxHQUNmdFUsUUFBUWUsTUFBTSwwQkFBMkJ3VCxFQUFTLFVBQVdELEdBQzdELFNBQWEsRUFBRSxJQUduQixPQUFXLHFCQUFzQnhVLElBQzdCa1UsRUFBZWxVLEdBQ2ZFLFFBQVFlLE1BQU0sc0JBQXVCakIsR0FDckMsU0FBYSxFQUFFLElBRW5CLE9BQVcscUJBQXNCQSxJQUM3QixjQUFhLFdBQWUwVSxHQUFJLHFCQUFxQjFVLHdCQUErQnBELFdBQVcsSUFFbkdxTCxZQUFXLEtBQ1AvSCxRQUFRQyxJQUFJLHVCQUF1QixHQUNwQyxJQUFJd1UsYyIsInNvdXJjZXMiOlsid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvY29uZmlnL2NvcnNFVk4udHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9jb25maWcvY29yT3B0aW9ucy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbmZpZy9kYXRhYmFzZUVOVi50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbmZpZy9qd3RFTlYudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9jb250cm9sbGVycy9Qb3N0Q29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL2F1dGhDb250cm9sbGVyLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvY29udHJvbGxlcnMvaW1hZ2VDb250cm9sbGVyLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9hdXRoL2lwQ29uZmlnLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9hdXRoL2p3dEdlbmVyYXRvci50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2xvYWRlcnMvYXV0aC91c2VyQXV0aC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2xvYWRlcnMvZGF0YUxvYWRlci9tYXJpYWRiLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVpbGl6ZUNvbi50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1bGl6ZS50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2xvYWRlcnMvZXhwcmVzcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2xvYWRlcnMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9tb2RlbHMvaW1hZ2UubW9kZWwudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9tb2RlbHMvbGlrZVBvc3QubW9kZWwudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9tb2RlbHMvcG9zdC5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy9zYXZlUG9zdC5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy91c2VyLm1vZGVsLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbW9kZWxzL3VzZXJSZWdpc3Rlci5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy9hdXRoUm91dGVzLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvcm91dGVzL2N1cnJlbnRVc2VyUm91dGUudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9yb3V0ZXMvaW1hZ2VSb3V0ZXMudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9yb3V0ZXMvcG9zdFJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy9yb3V0ZXIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9yb3V0ZXMvdXNlclJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3NlcnZpY2VzL211bHRlci5jb25maWcudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9zZXJ2aWNlcy9wZXJmb3JtYW5jZS50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3NlcnZpY2VzL3RydW5jYXRlLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvdXRpbHMvYXZhdGFyLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvdXRpbHMvZXJyb3JIYW5kbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0cmljdCBhcyBhc3NlcnQgfSBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHsgbG9hZCB9IGZyb20gJ3RzLWRvdGVudic7XG5jb25zdCBjb3JzU2NoZW1hRU5WID0gbG9hZCh7XG4gICAgLyogTG9hZCBDT1JTICovXG4gICAgQ09SU19PUklHSU46IFN0cmluZyxcbiAgICBDT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVM6IE51bWJlcixcbiAgICBDT1JTX0NSRURFTlRJQUxTOiBCb29sZWFuLFxuICAgIENPUlNfTUVUSE9EUzogU3RyaW5nLFxufSk7XG4vLyBkZXN0cnVjdHVyZSB0aGUgQ09SUyBzY2hlbWFcbmNvbnN0IHsgQ09SU19PUklHSU4sIENPUlNfT1BUSU9OU19TVUNDRVNTX1NUQVRVUywgQ09SU19DUkVERU5USUFMUywgQ09SU19NRVRIT0RTLCB9ID0gY29yc1NjaGVtYUVOVjtcbi8vIGFzc2VydCB0aGF0IHRoZSBDT1JTIHNjaGVtYSBpcyBwcmVzZW50XG5hc3NlcnQub2soQ09SU19PUklHSU4sICdDT1JTIG9yaWdpbiBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKENPUlNfT1BUSU9OU19TVUNDRVNTX1NUQVRVUywgJ0NPUlMgb3B0aW9ucyBzdWNjZXNzIHN0YXR1cyBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKENPUlNfQ1JFREVOVElBTFMsICdDT1JTIGNyZWRlbnRpYWxzIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soQ09SU19NRVRIT0RTLCAnQ09SUyBtZXRob2RzIHNob3VsZCBiZSBwcmVzZW50Jyk7XG4vLyBleHBvcnQgdGhlIENPUlMgc2NoZW1hXG5leHBvcnQgY29uc3QgY29yc0VOViA9IHtcbiAgICBDT1JTX09SSUdJTixcbiAgICBDT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVMsXG4gICAgQ09SU19DUkVERU5USUFMUyxcbiAgICBDT1JTX01FVEhPRFMsXG59O1xuLy8gZXhwb3J0IHRoZSBDT1JTIHNjaGVtYVxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNvcnNFTlYsXG59O1xuIiwiLy8gRXhwb3J0IGNvck9wdGlvbnMgb2JqZWN0IHdpdGggb3JpZ2luIGFuZCBvcHRpb25zU3VjY2Vzc1N0YXR1cyBwcm9wZXJ0aWVzXG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcbmltcG9ydCB7IGNvcnNFTlYgfSBmcm9tICcuL2NvcnNFVk4nO1xuY29uc3QgY29yT3B0aW9ucyA9IHtcbiAgICBvcmlnaW46IGNvcnNFTlYuQ09SU19PUklHSU4sXG4gICAgbWV0aG9kczogY29yc0VOVi5DT1JTX01FVEhPRFMsXG4gICAgY3JlZGVudGlhbHM6IGNvcnNFTlYuQ09SU19DUkVERU5USUFMUyxcbiAgICBvcHRpb25zU3VjY2Vzc1N0YXR1czogY29yc0VOVi5DT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVMsXG59O1xuZXhwb3J0IHsgY29yT3B0aW9ucyB9O1xuIiwiaW1wb3J0IHsgc3RyaWN0IGFzIGFzc2VydCB9IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgeyBsb2FkIH0gZnJvbSAndHMtZG90ZW52JztcbmNvbnN0IGRhdGFTY2hlbWFFTlYgPSBsb2FkKHtcbiAgICAvKiBMb2FkIERhdGFiYXNlICovXG4gICAgREJfSE9TVDogU3RyaW5nLFxuICAgIERCX1BPUlQ6IE51bWJlcixcbiAgICBEQl9VU0VSOiBTdHJpbmcsXG4gICAgREJfUEFTUzogU3RyaW5nLFxuICAgIERCX05BTUU6IFN0cmluZyxcbiAgICBEQl9TT0NLRVRfUEFUSDogU3RyaW5nLFxuICAgIERCX1NPQ0tFVF9USU1FT1VUOiBOdW1iZXIsXG4gICAgREJfQ09NUFJFU1M6IEJvb2xlYW4sXG4gICAgREJfREVCVUc6IEJvb2xlYW4sXG4gICAgREJfUEVSTUlUX0xPQ0FMX0lORklMRTogQm9vbGVhbixcbiAgICBEQl9UUkFDRTogQm9vbGVhbixcbiAgICBEQl9DSEVDS19EVVBMSUNBVEU6IEJvb2xlYW4sXG4gICAgREJfU1NMOiBCb29sZWFuLFxuICAgIERCX1NTTF9DQTogU3RyaW5nLFxuICAgIERCX1NTTF9LRVk6IFN0cmluZyxcbiAgICBEQl9TU0xfQ0VSVDogU3RyaW5nLFxuICAgIERCX0NPTk5FQ1RJT05fQVRUUklCVVRFUzogU3RyaW5nLFxuICAgIERCX0NPTk5FQ1RJT05fVElNRU9VVDogTnVtYmVyLFxufSk7XG5jb25zdCB7IERCX0hPU1QsIERCX1BPUlQsIERCX1VTRVIsIERCX1BBU1MsIERCX05BTUUsIERCX1NPQ0tFVF9QQVRILCBEQl9TT0NLRVRfVElNRU9VVCwgREJfQ09NUFJFU1MsIERCX0RFQlVHLCBEQl9QRVJNSVRfTE9DQUxfSU5GSUxFLCBEQl9UUkFDRSwgREJfQ0hFQ0tfRFVQTElDQVRFLCBEQl9TU0wsIERCX1NTTF9DQSwgREJfU1NMX0tFWSwgREJfU1NMX0NFUlQsIERCX0NPTk5FQ1RJT05fQVRUUklCVVRFUywgREJfQ09OTkVDVElPTl9USU1FT1VULCB9ID0gZGF0YVNjaGVtYUVOVjtcbmFzc2VydC5vayhEQl9IT1NULCAnRGF0YWJhc2UgaG9zdCBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKERCX1BPUlQsICdEYXRhYmFzZSBwb3J0IHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soREJfVVNFUiwgJ0RhdGFiYXNlIHVzZXIgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhEQl9QQVNTLCAnRGF0YWJhc2UgcGFzc3dvcmQgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhEQl9OQU1FLCAnRGF0YWJhc2UgbmFtZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuZXhwb3J0IGNvbnN0IGRhdGFiYXNlRU5WID0ge1xuICAgIERCX0hPU1QsXG4gICAgREJfUE9SVCxcbiAgICBEQl9VU0VSLFxuICAgIERCX1BBU1MsXG4gICAgREJfTkFNRSxcbiAgICBEQl9TT0NLRVRfUEFUSCxcbiAgICBEQl9TT0NLRVRfVElNRU9VVCxcbiAgICBEQl9DT01QUkVTUyxcbiAgICBEQl9ERUJVRyxcbiAgICBEQl9QRVJNSVRfTE9DQUxfSU5GSUxFLFxuICAgIERCX1RSQUNFLFxuICAgIERCX0NIRUNLX0RVUExJQ0FURSxcbiAgICBEQl9DT05ORUNUSU9OX0FUVFJJQlVURVMsXG4gICAgREJfQ09OTkVDVElPTl9USU1FT1VULFxuICAgIERCX1NTTCxcbiAgICBEQl9TU0xfQ0EsXG4gICAgREJfU1NMX0tFWSxcbiAgICBEQl9TU0xfQ0VSVCxcbn07XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgZGF0YWJhc2VFTlYsXG4gICAgbWFyaWFkYjoge1xuICAgICAgICBzc2w6IERCX1NTTCxcbiAgICAgICAgc3NsT3B0aW9uczoge1xuICAgICAgICAgICAgY2E6IERCX1NTTF9DQSxcbiAgICAgICAgICAgIGtleTogREJfU1NMX0tFWSxcbiAgICAgICAgICAgIGNlcnQ6IERCX1NTTF9DRVJULFxuICAgICAgICB9LFxuICAgIH0sXG59O1xuIiwiaW1wb3J0IHsgc3RyaWN0IGFzIGFzc2VydCB9IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgeyBsb2FkIH0gZnJvbSAndHMtZG90ZW52JztcbmNvbnN0IGp3dFNjaGVtYUVOViA9IGxvYWQoe1xuICAgIC8qIExvYWQgSldUICovXG4gICAgSldUX1NFQ1JFVDogU3RyaW5nLFxuICAgIEpXVF9FWFBJUkVTX0lOOiBTdHJpbmcsXG4gICAgSldUX1JFRlJFU0hfU0VDUkVUOiBTdHJpbmcsXG4gICAgSldUX1JFRlJFU0hfRVhQSVJFU19JTjogU3RyaW5nLFxuICAgIEpXVF9SRUZSRVNIX01BWF9BR0U6IE51bWJlcixcbiAgICBKV1RfQUxHT1JJVEhNOiBTdHJpbmcsXG4gICAgSldUX0lTU1VFUjogU3RyaW5nLFxuICAgIEpXVF9NQVhfQUdFOiBOdW1iZXIsXG4gICAgSldUX0hUVFBfT05MWTogQm9vbGVhbixcbiAgICBKV1RfU0FNRV9TSVRFOiBTdHJpbmcsXG4gICAgSldUX0NPT0tJRV9OQU1FOiBTdHJpbmcsXG4gICAgSldUX1NFQ1VSRTogQm9vbGVhbixcbn0pO1xuLy8gZGVzdHJ1Y3R1cmUgdGhlIEpXVCBzY2hlbWFcbmNvbnN0IHsgSldUX1NFQ1JFVCwgSldUX0VYUElSRVNfSU4sIEpXVF9SRUZSRVNIX1NFQ1JFVCwgSldUX1JFRlJFU0hfRVhQSVJFU19JTiwgSldUX1JFRlJFU0hfTUFYX0FHRSwgSldUX0FMR09SSVRITSwgSldUX0lTU1VFUiwgSldUX01BWF9BR0UsIEpXVF9IVFRQX09OTFksIEpXVF9TQU1FX1NJVEUsIEpXVF9DT09LSUVfTkFNRSwgSldUX1NFQ1VSRSwgfSA9IGp3dFNjaGVtYUVOVjtcbi8vIGFzc2VydCB0aGF0IHRoZSBKV1Qgc2NoZW1hIGlzIHByZXNlbnRcbmFzc2VydC5vayhKV1RfU0VDUkVULCAnSldUIHNlY3JldCBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9FWFBJUkVTX0lOLCAnSldUIGV4cGlyZXMgaW4gc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfUkVGUkVTSF9TRUNSRVQsICdKV1QgcmVmcmVzaCBzZWNyZXQgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfUkVGUkVTSF9FWFBJUkVTX0lOLCAnSldUIHJlZnJlc2ggZXhwaXJlcyBpbiBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9BTEdPUklUSE0sICdKV1QgYWxnb3JpdGhtIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX0lTU1VFUiwgJ0pXVCBpc3N1ZXIgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfTUFYX0FHRSwgJ0pXVCBtYXggYWdlIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX0hUVFBfT05MWSwgJ0pXVCBodHRwIG9ubHkgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfU0FNRV9TSVRFLCAnSldUIHNhbWUgc2l0ZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9DT09LSUVfTkFNRSwgJ0pXVCBjb29raWUgbmFtZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9TRUNVUkUsICdKV1Qgc2VjdXJlIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX1JFRlJFU0hfTUFYX0FHRSwgJ0pXVCByZWZyZXNoIG1heCBhZ2Ugc2hvdWxkIGJlIHByZXNlbnQnKTtcbi8vIGV4cG9ydCB0aGUgSldUIHNjaGVtYVxuZXhwb3J0IGNvbnN0IGp3dEVOViA9IHtcbiAgICBKV1RfU0VDUkVULFxuICAgIEpXVF9FWFBJUkVTX0lOLFxuICAgIEpXVF9SRUZSRVNIX1NFQ1JFVCxcbiAgICBKV1RfUkVGUkVTSF9FWFBJUkVTX0lOLFxuICAgIEpXVF9SRUZSRVNIX01BWF9BR0UsXG4gICAgSldUX0FMR09SSVRITSxcbiAgICBKV1RfSVNTVUVSLFxuICAgIEpXVF9NQVhfQUdFLFxuICAgIEpXVF9IVFRQX09OTFksXG4gICAgSldUX1NBTUVfU0lURSxcbiAgICBKV1RfQ09PS0lFX05BTUUsXG4gICAgSldUX1NFQ1VSRSxcbn07XG4vLyBleHBvcnQgdGhlIEpXVCBzY2hlbWFcbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBqd3RFTlYsXG59O1xuIiwiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IEltYWdlU3RvcmFnZSBmcm9tICcuLi9tb2RlbHMvaW1hZ2UubW9kZWwnO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4uL21vZGVscy91c2VyLm1vZGVsJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IFBvc3RzIGZyb20gJy4uL21vZGVscy9wb3N0Lm1vZGVsJztcbmltcG9ydCBnZXRJbWFnZVByZXZpZXdVcmwgZnJvbSAnLi9pbWFnZUNvbnRyb2xsZXInO1xuaW1wb3J0IExpa2VzIGZyb20gJy4uL21vZGVscy9saWtlUG9zdC5tb2RlbCc7XG5pbXBvcnQgU2F2ZXMgZnJvbSAnLi4vbW9kZWxzL3NhdmVQb3N0Lm1vZGVsJztcbmltcG9ydCB7IE9wIH0gZnJvbSAnc2VxdWVsaXplJztcbmRvdGVudi5jb25maWcoKTtcbi8vIENyZWF0ZSBQb3N0IE1ldGhvZCAtIENyZWF0ZSBhIG5ldyBwb3N0XG5leHBvcnQgY29uc3QgY3JlYXRlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgY2FwdGlvbiwgbG9jYXRpb24sIHRhZ3MgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDsgLy8gRW5zdXJlIHRoYXQgdGhlIHRva2VuIGNvbnRhaW5zIHRoZSB1c2VyIElEXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmV0cmlldmUgdGhlIGltYWdlIFVSTCBmcm9tIHRoZSBJbWFnZVN0b3JhZ2UgdGFibGUgdXNpbmcgdGhlIHN0YXRpYyBtZXRob2RcbiAgICAgICAgICAgIGNvbnN0IGltYWdlUmVjb3JkID0gYXdhaXQgSW1hZ2VTdG9yYWdlLmZpbmRJbWFnZUJ5UmVmZXJlbmNlS2V5KCd1c2VyX2lkJywgdXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIWltYWdlUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0ltYWdlIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXdQb3N0ID0gYXdhaXQgUG9zdHMuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBjYXB0aW9uOiBjYXB0aW9uLFxuICAgICAgICAgICAgICAgIGltYWdlVVJMOiBpbWFnZVJlY29yZC5pbWFnZVVybCxcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgdGFnczogdGFncyB8fCAnJyxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX0F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIGNyZWF0b3JfSWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghbmV3UG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGNyZWF0aW5nIG5ldyBwb3N0LicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzXG4gICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoMjAxKVxuICAgICAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdQb3N0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgbmV3UG9zdCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdQb3N0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHBvc3Q6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgZGVsZXRlRmlsZSA9IGFzeW5jIChfcmVxLCByZXMsIGltYWdlVXJsKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBJbWFnZVN0b3JhZ2UuZmluZE9uZSh7IHdoZXJlOiB7IGltYWdlVXJsOiBpbWFnZVVybCB9IH0pO1xuICAgICAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdJbWFnZSBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGltYWdlLmRlc3Ryb3koKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSW1hZ2UgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgaW1hZ2U6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBVcGRhdGUgUG9zdCBNZXRob2QgLSBVcGRhdGUgYSBwb3N0XG5leHBvcnQgY29uc3QgdXBkYXRlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgY2FwdGlvbiwgbG9jYXRpb24sIHRhZ3MsIGltYWdlVXJsOiBuZXdJbWFnZVVybCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IHBvc3RfaWQgPSBwYXJzZUludChyZXEucXVlcnkucG9zdF9pZCwgMTApO1xuICAgICAgICBpZiAoIXBvc3RfaWQpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkOyAvLyBFbnN1cmUgdGhhdCB0aGUgdG9rZW4gY29udGFpbnMgdGhlIHVzZXIgSURcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHBvc3RfaWQsIGNyZWF0b3JfSWQ6IHVzZXJfaWQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwb3N0LmNyZWF0b3JfSWQgIT09IHVzZXIuaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgYXR0ZW1wdCEnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpbWFnZVVybCA9IHBvc3Q/LmltYWdlVVJMO1xuICAgICAgICAgICAgaWYgKG5ld0ltYWdlVXJsKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlld0ltYWdlVXJsID0gYXdhaXQgZ2V0SW1hZ2VQcmV2aWV3VXJsKHJlcSwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2aWV3SW1hZ2VVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0ltYWdlIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBwcmV2aWV3SW1hZ2VVcmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBvc3QgPSBhd2FpdCBwb3N0LnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgaWQ6IHBvc3QuaWQsXG4gICAgICAgICAgICAgICAgY2FwdGlvbjogY2FwdGlvbixcbiAgICAgICAgICAgICAgICBpbWFnZVVSTDogaW1hZ2VVcmwsXG4gICAgICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgIHRhZ3M6IHRhZ3MsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9BdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF1cGRhdGVkUG9zdCkge1xuICAgICAgICAgICAgICAgIGlmIChuZXdJbWFnZVVybCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBkZWxldGVGaWxlKHJlcSwgcmVzLCBuZXdJbWFnZVVybCk7IC8vIEVuc3VyZSBkZWxldGVGaWxlIGlzIGRlZmluZWQgZWxzZXdoZXJlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIHVwZGF0aW5nIHBvc3QnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgdXBkYXRlZCBzdWNjZXNzZnVsbHknLCBwb3N0OiB1cGRhdGVkUG9zdCB9KTtcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkUG9zdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gR2V0IGFsbCBwb3N0c1xuZXhwb3J0IGNvbnN0IGdldEFsbFBvc3RzID0gYXN5bmMgKF9yZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdHMuZmluZEFsbCgpO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHBvc3RzOiBwb3N0cyB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcG9zdHM6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBGdW5jdGlvbiB0byBsaWtlIGEgcG9zdCBieSB1c2VyXG5leHBvcnQgY29uc3QgbGlrZVBvc3QgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGNvbnN0IHBvc3RfaWQgPSBwYXJzZUludChyZXEuYm9keS5wb3N0X2lkLCAxMCk7XG4gICAgICAgICAgICBpZiAoaXNOYU4ocG9zdF9pZCkpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnZhbGlkIHBvc3QgSUQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZEJ5UGsocG9zdF9pZCk7XG4gICAgICAgICAgICBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdMaWtlID0gYXdhaXQgTGlrZXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgcG9zdF9pZCwgdXNlcl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdMaWtlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBhbHJlYWR5IGxpa2VkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXdMaWtlID0gYXdhaXQgTGlrZXMuY3JlYXRlTGlrZSh7XG4gICAgICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgICAgICBwb3N0X2lkLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghcG9zdC5saWtlc19Db3VudCkge1xuICAgICAgICAgICAgICAgIHBvc3QubGlrZXNfQ291bnQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGlrZXNDb3VudCA9IHBvc3QubGlrZXNfQ291bnQgKyAxO1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBvc3QgPSBhd2FpdCBwb3N0LnVwZGF0ZSh7IGxpa2VzX0NvdW50OiBsaWtlc0NvdW50IH0pO1xuICAgICAgICAgICAgaWYgKCF1cGRhdGVkUG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGxpa2luZyBwb3N0LicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzXG4gICAgICAgICAgICAgICAgLnN0YXR1cygyMDEpXG4gICAgICAgICAgICAgICAgLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBsaWtlZCBzdWNjZXNzZnVsbHknLCBsaWtlOiBuZXdMaWtlIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxpa2luZyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gR2V0IHBvc3QgYnkgSURcbmV4cG9ydCBjb25zdCBnZXRQb3N0QnlJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdF9pZCA9IHJlcS5xdWVyeS5wb3N0X2lkO1xuICAgICAgICAgICAgaWYgKCFwb3N0X2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBwb3N0X2lkLCBjcmVhdG9yX0lkOiB1c2VyX2lkIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHBvc3QgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gdG9nZ2xlIGxpa2VzXG5leHBvcnQgY29uc3QgZGVsZXRlTGlrZWRQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0X2lkID0gcGFyc2VJbnQocmVxLmJvZHkucG9zdF9pZCwgMTApO1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0cy5maW5kQnlQayhwb3N0X2lkKTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0xpa2UgPSBhd2FpdCBMaWtlcy5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBwb3N0X2lkOiBwb3N0X2lkLCB1c2VyX2lkOiB1c2VyX2lkIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0xpa2UpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBleGlzdGluZ0xpa2UuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGN1cnJlbnRMaWtlcyA9IHBvc3QubGlrZXNfQ291bnQgfHwgMDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50TGlrZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudExpa2VzIC09IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBwb3N0LnVwZGF0ZSh7IGxpa2VzX0NvdW50OiBjdXJyZW50TGlrZXMgfSk7XG4gICAgICAgICAgICBhd2FpdCBwb3N0LnNhdmUoKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBleGlzdGluZ0xpa2VcbiAgICAgICAgICAgICAgICAgICAgPyAnTGlrZSByZW1vdmVkIHN1Y2Nlc3NmdWxseSdcbiAgICAgICAgICAgICAgICAgICAgOiAnUG9zdCBsaWtlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgICAgICAgIHBvc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB0b2dnbGluZyBsaWtlOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gRnVuY3Rpb24gdG8gc2F2ZSBhIHBvc3QgYnkgdXNlclxuZXhwb3J0IGNvbnN0IHNhdmVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3QgfHwgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbj8uc3BsaXQoJyAnKVsxXTtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3InLCBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkIEludmFsaWQgVG9rZW4nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0X2lkID0gcGFyc2VJbnQocmVxLmJvZHkucG9zdF9pZCwgMTApO1xuICAgICAgICAgICAgaWYgKCFwb3N0X2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0cy5maW5kQnlQayhwb3N0X2lkKTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1NhdmUgPSBhd2FpdCBTYXZlcy5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBwb3N0X2lkLCB1c2VyX2lkIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1NhdmUpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IGFscmVhZHkgc2F2ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5ld1NhdmUgPSBhd2FpdCBTYXZlcy5jcmVhdGVTYXZlKHtcbiAgICAgICAgICAgICAgICBpZDogdXNlcl9pZCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgICAgIHBvc3RfaWQsXG4gICAgICAgICAgICAgICAgc2F2ZURhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghbmV3U2F2ZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIHNhdmluZyBwb3N0LicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzXG4gICAgICAgICAgICAgICAgLnN0YXR1cygyMDEpXG4gICAgICAgICAgICAgICAgLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBzYXZlZCBzdWNjZXNzZnVsbHknLCBzYXZlOiBuZXdTYXZlIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gRnVuY3Rpb24gdG8gZGVsZXRlIGEgc2F2ZWQgcG9zdCBieSB1c2VyXG5leHBvcnQgY29uc3QgZGVsZXRlU2F2ZWRQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3QgfHwgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbj8uc3BsaXQoJyAnKVsxXTtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3InLCBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkIEludmFsaWQgVG9rZW4nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0X2lkID0gcGFyc2VJbnQocmVxLmJvZHkucG9zdF9pZCwgMTApO1xuICAgICAgICAgICAgaWYgKCFwb3N0X2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0cy5maW5kQnlQayhwb3N0X2lkKTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1NhdmUgPSBhd2FpdCBTYXZlcy5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBwb3N0X2lkLCB1c2VyX2lkIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1NhdmUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBleGlzdGluZ1NhdmUuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGV4aXN0aW5nU2F2ZVxuICAgICAgICAgICAgICAgICAgICA/ICdQb3N0IHVuc2F2ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgICAgICAgICAgICAgICA6ICdQb3N0IG5vdCBzYXZlZCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBzYXZlZCBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gR2V0IGFsbCBzYXZlZCBwb3N0cyBieSB1c2VyXG5leHBvcnQgY29uc3QgZ2V0U2F2ZWRQb3N0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0IHx8IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnNwbGl0KCcgJylbMV07XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3InLCBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkIEludmFsaWQgVG9rZW4nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2F2ZWRQb3N0cyA9IGF3YWl0IFNhdmVzLmZpbmRBbGwoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHVzZXJfaWQgfSxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBbeyBtb2RlbDogUG9zdHMgfV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc2F2ZWRQb3N0cyB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHNhdmVkIHBvc3RzOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gRGVsZXRlIGEgcG9zdCAtXG5leHBvcnQgY29uc3QgZGVsZXRlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0IHx8IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnNwbGl0KCcgJylbMV07XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdF9pZCA9IHBhcnNlSW50KHJlcS5ib2R5LnBvc3RfaWQsIDEwKTtcbiAgICAgICAgICAgIGlmICghcG9zdF9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgSUQgaXMgcmVxdWlyZWQgZnJvbSBzZXJ2ZXInIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0cy5maW5kQnlQayhwb3N0X2lkKTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1NhdmUgPSBhd2FpdCBTYXZlcy5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBwb3N0X2lkLCB1c2VyX2lkIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1NhdmUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBleGlzdGluZ1NhdmUuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluZCBhc3NvY2lhdGVkIGltYWdlcyBhbmQgZGVsZXRlIHRoZW1cbiAgICAgICAgICAgIGlmIChwb3N0LmltYWdlVVJMKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBJbWFnZVN0b3JhZ2UuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGltYWdlVXJsOiBwb3N0LmltYWdlVVJMIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGltYWdlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBwb3N0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHBvc3Q6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBHZXQgYWxsIGluZmluaXRlIHBvc3RzXG5leHBvcnQgY29uc3QgZ2V0SW5maW5pdGVQb3N0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgcGFnZSA9IDAsIGxpbWl0ID0gMTAgfSA9IHJlcS5xdWVyeTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gcGFnZVxuICAgICAgICAgICAgPyBwYXJzZUludChwYWdlLCAxMCkgKiBwYXJzZUludChsaW1pdCwgMTApXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdHMuZmluZEFuZENvdW50QWxsKHtcbiAgICAgICAgICAgIGxpbWl0OiBwYXJzZUludChsaW1pdCwgMTApLFxuICAgICAgICAgICAgb2Zmc2V0LFxuICAgICAgICAgICAgb3JkZXI6IFtbJ2NyZWF0ZWRfQXQnLCAnREVTQyddXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgIHBvc3RzLFxuICAgICAgICAgICAgcGFnZTogcGFyc2VJbnQocGFnZSwgMTApLFxuICAgICAgICAgICAgdG90YWxQYWdlczogTWF0aC5jZWlsKHBvc3RzLmNvdW50IC8gcGFyc2VJbnQobGltaXQsIDEwKSksXG4gICAgICAgICAgICB0b3RhbENvdW50OiBwb3N0cy5jb3VudCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHBvc3RzOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gU2VhcmNoIHBvc3RzXG5leHBvcnQgY29uc3Qgc2VhcmNoUG9zdHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHNlYXJjaFZhbHVlIH0gPSByZXEuYm9keTtcbiAgICAgICAgaWYgKCFzZWFyY2hWYWx1ZSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnU2VhcmNoIHZhbHVlIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwb3N0cyA9IGF3YWl0IFBvc3RzLmZpbmRBbGwoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICBjYXB0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIFtPcC5saWtlXTogYCUke3NlYXJjaFZhbHVlfSVgLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgcG9zdHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIHBvc3RzOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuIiwiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgand0RU5WIH0gZnJvbSAnLi4vY29uZmlnL2p3dEVOVic7XG5pbXBvcnQgeyBqd3RHZW5lcmF0b3IsIGp3dFJlZnJlc2ggfSBmcm9tICcuLi9sb2FkZXJzL2F1dGgvand0R2VuZXJhdG9yJztcbmltcG9ydCBVc2VyUmVnaXN0cmF0aW9uIGZyb20gJy4uL21vZGVscy91c2VyUmVnaXN0ZXIubW9kZWwnO1xuaW1wb3J0IHsgaGFuZGxlRXJyb3IgfSBmcm9tICcuLi91dGlscy9lcnJvckhhbmRsZXInO1xuZG90ZW52LmNvbmZpZygpO1xuZXhwb3J0IGNvbnN0IHVzZXJSZWdpc3RlciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgdXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGlmICghbmFtZSB8fCAhdXNlcm5hbWUgfHwgIWVtYWlsIHx8ICFwYXNzd29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUVycm9yKG5ldyBFcnJvcignTmV3IFVzZXIgdmFsaWRhdGlvbiBlcnJvcicpLCByZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgY29uc3QgdXNlckV4aXN0cyA9IGF3YWl0IFVzZXJSZWdpc3RyYXRpb24uZmluZE9uZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogZW1haWwgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh1c2VyRXhpc3RzKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlRXJyb3IobmV3IEVycm9yKCdVc2VyUmVnaXN0cmF0aW9ucy5lbWFpbDogVXNlciBhbHJlYWR5IGV4aXN0cyAnKSwgcmVzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlclJlZ2lzdHJhdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgbmV3VXNlcjogbmFtZSxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgIGhhc2hlZHBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRva2VuID0gand0R2VuZXJhdG9yKHsgaWQ6IHVzZXIuaWQgfSk7XG4gICAgICAgIHJlcy5jb29raWUoJ2p3dCcsIHRva2VuLCB7XG4gICAgICAgICAgICBodHRwT25seTogand0RU5WLkpXVF9IVFRQX09OTFksXG4gICAgICAgICAgICBtYXhBZ2U6IGp3dEVOVi5KV1RfTUFYX0FHRSAqIDEwMDAsXG4gICAgICAgICAgICBzZWN1cmU6IGp3dEVOVi5KV1RfU0VDVVJFLFxuICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICBuYW1lOiB1c2VyLm5ld1VzZXIsXG4gICAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgdG9rZW46IHRva2VuLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKGVycm9yLCByZXMpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgdXNlckxvZ2luID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgICAgICBpZiAoIWVtYWlsIHx8ICFwYXNzd29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUVycm9yKG5ldyBFcnJvcignTG9naW4gVmFsaWRhdGlvbiBFcnJvciEnKSwgcmVzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlclJlZ2lzdHJhdGlvbi5sb2dpblVzZXIoZW1haWwsIHBhc3N3b3JkKTtcbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9rZW4gPSBqd3RHZW5lcmF0b3IoeyBpZDogdXNlci5pZCB9KTtcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gand0UmVmcmVzaCh7IGlkOiB1c2VyLmlkIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBsb2dnZWQgaW46JywgcmVmcmVzaFRva2VuKTtcbiAgICAgICAgLy8gU2V0dGluZyB0aGUgYWNjZXNzIHRva2VuIGNvb2tpZVxuICAgICAgICByZXMuY29va2llKCdqd3QnLCB0b2tlbiwge1xuICAgICAgICAgICAgaHR0cE9ubHk6IGp3dEVOVi5KV1RfSFRUUF9PTkxZLFxuICAgICAgICAgICAgbWF4QWdlOiBqd3RFTlYuSldUX01BWF9BR0UgKiAxMDAwLCAvLyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgIHNlY3VyZTogand0RU5WLkpXVF9TRUNVUkUsXG4gICAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTZXR0aW5nIHRoZSByZWZyZXNoIHRva2VuIGNvb2tpZVxuICAgICAgICByZXMuY29va2llKCdyZWZyZXNoVG9rZW4nLCByZWZyZXNoVG9rZW4sIHtcbiAgICAgICAgICAgIGh0dHBPbmx5OiBqd3RFTlYuSldUX0hUVFBfT05MWSxcbiAgICAgICAgICAgIG1heEFnZTogand0RU5WLkpXVF9SRUZSRVNIX01BWF9BR0UgKiAxMDAwLCAvLyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgIHNlY3VyZTogand0RU5WLkpXVF9TRUNVUkUsXG4gICAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc2V0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3Rva2VufWApO1xuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSB1c2VyO1xuICAgICAgICByZXMuanNvbih7IHRva2VuLCByZWZyZXNoVG9rZW4sIHVzZXI6IHVzZXIuaWQgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBoYW5kbGVFcnJvcihlcnJvciwgcmVzKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHVzZXJMb2dvdXQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gcmVxLmNvb2tpZXMucmVmcmVzaFRva2VuO1xuICAgICAgICBpZiAoIWFjY2Vzc1Rva2VuICYmICFyZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ05vIHRva2VucyBwcm92aWRlZCEnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFyIHRoZSBhY2Nlc3MgdG9rZW5cbiAgICAgICAgcmVzLmNvb2tpZSgnand0JywgJycsIHtcbiAgICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICAgICAgbWF4QWdlOiAxLCAvLyAxIG1pbGxpc2Vjb25kIHRvIGVmZmVjdGl2ZWx5IGV4cGlyZSB0aGUgY29va2llXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDbGVhciB0aGUgcmVmcmVzaCB0b2tlblxuICAgICAgICByZXMuY29va2llKCdyZWZyZXNoVG9rZW4nLCAnJywge1xuICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgICBtYXhBZ2U6IDEsIC8vIDEgbWlsbGlzZWNvbmQgdG8gZWZmZWN0aXZlbHkgZXhwaXJlIHRoZSBjb29raWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbG9nZ2VkIG91dCcgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBoYW5kbGVFcnJvcihlcnJvciwgcmVzKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHJlZnJlc2hUb2tlbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IHJlcS5jb29raWVzLnJlZnJlc2hUb2tlbjtcbiAgICBpZiAoIXJlZnJlc2hUb2tlbikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGp3dC52ZXJpZnkocmVmcmVzaFRva2VuLCBqd3RFTlYuSldUX1JFRlJFU0hfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3InLCBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIElEOicsIHVzZXJJZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyUmVnaXN0cmF0aW9uLmZpbmRCeVBrKHVzZXJJZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgdG9rZW5cbiAgICAgICAgICAgIGNvbnN0IG5ld1Rva2VuID0gand0LnNpZ24oeyBpZDogdXNlci5pZCB9LCBqd3RFTlYuSldUX1NFQ1JFVCwge1xuICAgICAgICAgICAgICAgIGV4cGlyZXNJbjogand0RU5WLkpXVF9FWFBJUkVTX0lOLFxuICAgICAgICAgICAgICAgIGFsZ29yaXRobTogand0RU5WLkpXVF9BTEdPUklUSE0sXG4gICAgICAgICAgICAgICAgaXNzdWVyOiBqd3RFTlYuSldUX0lTU1VFUixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzLmNvb2tpZSgnand0JywgbmV3VG9rZW4sIHtcbiAgICAgICAgICAgICAgICBodHRwT25seTogand0RU5WLkpXVF9IVFRQX09OTFksXG4gICAgICAgICAgICAgICAgbWF4QWdlOiBqd3RFTlYuSldUX1JFRlJFU0hfTUFYX0FHRSAqIDEwMDAsXG4gICAgICAgICAgICAgICAgc2VjdXJlOiBqd3RFTlYuSldUX1NFQ1VSRSxcbiAgICAgICAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdG9rZW46IG5ld1Rva2VuLCB1c2VyOiB1c2VyLmlkIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBjdXJyZW50IHVzZXI6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgZ2V0dGluZyBjdXJyZW50IHVzZXInIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9KTtcbn07XG4vLyByZXF1aXJlIGF1dGhlbnRpY2F0aW9uXG5leHBvcnQgY29uc3QgcmVxdWlyZUF1dGggPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2VySWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyUmVnaXN0cmF0aW9uLmZpbmRCeVBrKHVzZXJJZCk7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSB1c2VyO1xuICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgIH0pO1xuICAgIG5leHQoKTtcbn07XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgdXNlclJlZ2lzdGVyLFxuICAgIHVzZXJMb2dpbixcbiAgICB1c2VyTG9nb3V0LFxuICAgIHJlZnJlc2hUb2tlbixcbiAgICByZXF1aXJlQXV0aCxcbn07XG4iLCJpbXBvcnQgSW1hZ2VTdG9yYWdlcyBmcm9tICcuLi9tb2RlbHMvaW1hZ2UubW9kZWwnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0ICdkb3RlbnYvY29uZmlnJztcbmltcG9ydCBVc2VycyBmcm9tICcuLi9tb2RlbHMvdXNlci5tb2RlbCc7XG4vLyBSZWZhY3RvcmVkIGZ1bmN0aW9uIHRvIHJldHVybiBpbWFnZSBVUkxcbmV4cG9ydCBjb25zdCBnZXRJbWFnZVByZXZpZXdVcmwgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBJbWFnZVN0b3JhZ2VzLmZpbmRJbWFnZUJ5UmVmZXJlbmNlS2V5KCd1c2VyX2lkJywgdXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnTm8gaW1hZ2UgZm91bmQnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBpbWFnZVVybDogaW1hZ2UuaW1hZ2VVcmwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBpbWFnZSBwcmV2aWV3OicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2V0IGltYWdlIHByZXZpZXcnKTtcbiAgICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgZ2V0SW1hZ2VQcmV2aWV3VXJsO1xuIiwiaW1wb3J0IHJhdGVMaW1pdCBmcm9tICdleHByZXNzLXJhdGUtbGltaXQnO1xuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vLi4vY29uZmlnL2luZGV4JztcbmV4cG9ydCBjb25zdCBrZXlHZW5lcmF0b3IgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBpZiAoIXJlcS5pcCkge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6ICdXYXJuaW5nOiByZXF1ZXN0LmlwIGlzIG1pc3NpbmchJyB9KTtcbiAgICAgICAgcmV0dXJuIHJlcS5zb2NrZXQucmVtb3RlQWRkcmVzcztcbiAgICB9XG4gICAgcmV0dXJuIHJlcS5pcC5yZXBsYWNlKC86XFxkK1teOl0qJC8sICcnKTtcbn07XG5leHBvcnQgY29uc3QgbGltaXRlciA9IHJhdGVMaW1pdCh7XG4gICAgd2luZG93TXM6IGVudi5SQVJFX0xJTUlUX1dJTkRPV19NUyxcbiAgICBtYXg6IGVudi5NQVgsXG4gICAgbWVzc2FnZTogZW52LlJBUkVfTElNSVRfTUVTU0FHRSxcbiAgICBzdGF0dXNDb2RlOiBlbnYuUkFSRV9MSU1JVF9DT0RFLFxuICAgIGhhbmRsZXI6IChfcmVxLCByZXMpID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyhlbnYuUkFSRV9MSU1JVF9DT0RFKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVudi5SQVJFX0xJTUlUX01FU1NBR0UsXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAga2V5R2VuZXJhdG9yLFxufSk7XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgbGltaXRlcixcbiAgICBrZXlHZW5lcmF0b3IsXG59O1xuIiwiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgand0RU5WIH0gZnJvbSAnLi4vLi4vY29uZmlnL2p3dEVOVic7XG5kb3RlbnYuY29uZmlnKCk7XG5leHBvcnQgY29uc3Qgand0R2VuZXJhdG9yID0gKHBheWxvYWQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgand0RU5WLkpXVF9TRUNSRVQsIHtcbiAgICAgICAgICAgIGFsZ29yaXRobTogand0RU5WLkpXVF9BTEdPUklUSE0sXG4gICAgICAgICAgICBleHBpcmVzSW46IGp3dEVOVi5KV1RfRVhQSVJFU19JTixcbiAgICAgICAgICAgIGlzc3Vlcjogand0RU5WLkpXVF9JU1NVRVIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBnZW5lcmF0aW5nIEpXVCcpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3Qgand0VmVyaWZpZXIgPSAodG9rZW4pID0+IHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciB2ZXJpZnlpbmcgSldUJyk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBqd3RSZWZyZXNoID0gKHBheWxvYWQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgand0RU5WLkpXVF9SRUZSRVNIX1NFQ1JFVCwge1xuICAgICAgICAgICAgYWxnb3JpdGhtOiBqd3RFTlYuSldUX0FMR09SSVRITSxcbiAgICAgICAgICAgIGV4cGlyZXNJbjogand0RU5WLkpXVF9SRUZSRVNIX0VYUElSRVNfSU4sXG4gICAgICAgICAgICBpc3N1ZXI6IGp3dEVOVi5KV1RfSVNTVUVSLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgZ2VuZXJhdGluZyBKV1QnKTtcbiAgICB9XG59O1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIGp3dEdlbmVyYXRvcixcbiAgICBqd3RWZXJpZmllcixcbiAgICBqd3RSZWZyZXNoLFxufTtcbiIsImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uLy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4uLy4uL21vZGVscy91c2VyLm1vZGVsJztcbmRvdGVudi5jb25maWcoKTtcbmV4cG9ydCBjb25zdCByZXF1aXJlQXV0aCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsoZGVjb2RlZFRva2VuLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IHVzZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXRyaWV2aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICBuZXh0KCk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB2ZXJpZnlVc2VyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdKV1QgdmVyaWZpY2F0aW9uIGVycm9yOicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayhkZWNvZGVkVG9rZW4uaWQpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWNvZGVkVG9rZW46JywgZGVjb2RlZFRva2VuKTtcbiAgICAgICAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgICAgICAgICByZXMubG9jYWxzLnVzZXIgPSB1c2VyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXRyaWV2aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdmVyaWZ5aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICBuZXh0KCk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IHsgdmVyaWZ5VXNlciwgcmVxdWlyZUF1dGggfTtcbiIsImltcG9ydCB7IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIH0gZnJvbSAnLi9zZXF1aWxpemVDb24nO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JEQigpIHtcbiAgICBjb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuICAgIGNvbnN0IG1heEF0dGVtcHRzID0gMTA7IC8vIDEwIGF0dGVtcHRzXG4gICAgY29uc3QgZGVsYXkgPSAxMDAwOyAvLyAxIHNlY29uZFxuICAgIGxldCBhdHRlbXB0cyA9IDA7XG4gICAgd2hpbGUgKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRlc3QgdGhlIGNvbm5lY3Rpb25cbiAgICAgICAgICAgIGF3YWl0IHNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkLCBTdGFydGluZyBTZXJ2ZXIuLi4uLicpO1xuICAgICAgICAgICAgLy8gU3luYyB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgIGF3YWl0IHNlcXVlbGl6ZS5zeW5jKHsgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRHJvcCBhbmQgcmUtc3luYyBkYi4nKTtcbiAgICAgICAgICAgIHJldHVybiBzZXF1ZWxpemU7IC8vIFJldHVybiB0aGUgU2VxdWVsaXplIGluc3RhbmNlXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgICBhdHRlbXB0cysrO1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5lcnJvcignTWF4IGF0dGVtcHRzIHJlYWNoZWQsIGRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xufVxuZXhwb3J0IGRlZmF1bHQgeyB3YWl0Rm9yREIgfTtcbiIsImltcG9ydCB7IFNlcXVlbGl6ZSB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBkYXRhYmFzZUVOViB9IGZyb20gJy4uLy4uL2NvbmZpZy9kYXRhYmFzZUVOVic7XG5pbXBvcnQgZnMgZnJvbSAnbm9kZTpmcyc7XG5jb25zdCBkYkNvbmZpZyA9IHtcbiAgICBEaWFsZWN0OiAnbWFyaWFkYicsXG4gICAgaG9zdDogZGF0YWJhc2VFTlYuREJfSE9TVCB8fCAnbG9jYWxob3N0JyxcbiAgICB1c2VybmFtZTogZGF0YWJhc2VFTlYuREJfVVNFUiB8fCAnbWV0YWxicmFpbicsXG4gICAgcGFzc3dvcmQ6IGRhdGFiYXNlRU5WLkRCX1BBU1MgfHwgJ3Bhc3N3b3JkJyxcbiAgICBkYXRhYmFzZTogZGF0YWJhc2VFTlYuREJfTkFNRSB8fCAnRmluZFNvbWVPbmUnLFxuICAgIHNvY2tldFBhdGg6IGRhdGFiYXNlRU5WLkRCX1NPQ0tFVF9QQVRIIHx8ICcvdmFyL3J1bi9teXNxbGQvbXlzcWxkLnNvY2snLFxuICAgIHNvY2tldFRpbWVvdXQ6IGRhdGFiYXNlRU5WLkRCX1NPQ0tFVF9USU1FT1VUIHx8IDEwMDAsXG4gICAgY29tcHJlc3M6IGRhdGFiYXNlRU5WLkRCX0NPTVBSRVNTIHx8IGZhbHNlLFxuICAgIGRlYnVnOiBkYXRhYmFzZUVOVi5EQl9ERUJVRyB8fCBmYWxzZSxcbiAgICBwZXJtaXRMb2NhbEluZmlsZTogZGF0YWJhc2VFTlYuREJfUEVSTUlUX0xPQ0FMX0lORklMRSB8fCBmYWxzZSxcbiAgICB0cmFjZTogZGF0YWJhc2VFTlYuREJfVFJBQ0UgfHwgdHJ1ZSxcbiAgICBjaGVja0R1cGxpY2F0ZTogZGF0YWJhc2VFTlYuREJfQ0hFQ0tfRFVQTElDQVRFIHx8IGZhbHNlLFxuICAgIGNvbm5lY3RBdHRyaWJ1dGVzOiBKU09OLnBhcnNlKGRhdGFiYXNlRU5WLkRCX0NPTk5FQ1RJT05fQVRUUklCVVRFUyB8fCAne30nKSxcbiAgICBjb25uZWN0aW9uVGltZW91dDogZGF0YWJhc2VFTlYuREJfQ09OTkVDVElPTl9USU1FT1VUIHx8IDEwMDAsXG4gICAgcG9ydDogZGF0YWJhc2VFTlYuREJfUE9SVCB8fCAzMzA2LFxuICAgIHNzbDogZGF0YWJhc2VFTlYuREJfU1NMIHx8IGZhbHNlLFxuICAgIGRpYWxlY3RPcHRpb25zOiB7XG4gICAgICAgIHNzbDoge1xuICAgICAgICAgICAgY2E6IGRhdGFiYXNlRU5WLkRCX1NTTF9DQVxuICAgICAgICAgICAgICAgID8gZnMucmVhZEZpbGVTeW5jKGRhdGFiYXNlRU5WLkRCX1NTTF9DQSkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIDogJycsXG4gICAgICAgICAgICBrZXk6IGRhdGFiYXNlRU5WLkRCX1NTTF9LRVlcbiAgICAgICAgICAgICAgICA/IGZzLnJlYWRGaWxlU3luYyhkYXRhYmFzZUVOVi5EQl9TU0xfS0VZKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgOiAnJyxcbiAgICAgICAgICAgIGNlcnQ6IGRhdGFiYXNlRU5WLkRCX1NTTF9DRVJUXG4gICAgICAgICAgICAgICAgPyBmcy5yZWFkRmlsZVN5bmMoZGF0YWJhc2VFTlYuREJfU1NMX0NFUlQpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICA6ICcnLFxuICAgICAgICB9LFxuICAgIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCkge1xuICAgIC8vIENyZWF0ZSBhIG5ldyBTZXF1ZWxpemUgaW5zdGFuY2VcbiAgICBjb25zdCBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKGRiQ29uZmlnLmRhdGFiYXNlLCBkYkNvbmZpZy51c2VybmFtZSwgZGJDb25maWcucGFzc3dvcmQsIHtcbiAgICAgICAgaG9zdDogZGJDb25maWcuaG9zdCxcbiAgICAgICAgZGlhbGVjdDogZGJDb25maWcuRGlhbGVjdCxcbiAgICAgICAgcG9ydDogZGJDb25maWcucG9ydCxcbiAgICAgICAgc3NsOiBkYkNvbmZpZy5zc2wsXG4gICAgICAgIGRpYWxlY3RPcHRpb25zOiBkYkNvbmZpZy5kaWFsZWN0T3B0aW9ucyxcbiAgICB9KTtcbiAgICByZXR1cm4gc2VxdWVsaXplO1xufVxuZXhwb3J0IGRlZmF1bHQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9O1xuIiwiLy8gdGhpcyB3aWxsIGxvYWQgYWxsIG1vZGVsIGNsYXNzZXMgZm91bmQgaW4gZmlsZXMgbWF0Y2hpbmcgdGhpcyBnbG9iIHBhdHRlcm4uXG5pbXBvcnQgeyBTZXF1ZWxpemUsIGltcG9ydE1vZGVscyB9IGZyb20gJ0BzZXF1ZWxpemUvY29yZSc7XG5pbXBvcnQgeyBNYXJpYURiRGlhbGVjdCB9IGZyb20gJ0BzZXF1ZWxpemUvbWFyaWFkYic7XG5pbXBvcnQgeyBmaWxlVVJMVG9QYXRoIH0gZnJvbSAnbm9kZTp1cmwnO1xuaW1wb3J0IHsgZGlybmFtZSB9IGZyb20gJ25vZGU6cGF0aCc7XG5pbXBvcnQgeyBkYXRhYmFzZUVOViB9IGZyb20gJy4uLy4uL2NvbmZpZy9kYXRhYmFzZUVOVic7XG5jb25zdCBfX2Rpcm5hbWUgPSBkaXJuYW1lKGZpbGVVUkxUb1BhdGgoaW1wb3J0Lm1ldGEudXJsKSk7XG5leHBvcnQgY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZSh7XG4gICAgZGlhbGVjdDogTWFyaWFEYkRpYWxlY3QsXG4gICAgaG9zdDogZGF0YWJhc2VFTlYuREJfSE9TVCxcbiAgICB1c2VyOiBkYXRhYmFzZUVOVi5EQl9VU0VSLFxuICAgIHBhc3N3b3JkOiBkYXRhYmFzZUVOVi5EQl9QQVNTLFxuICAgIGRhdGFiYXNlOiBkYXRhYmFzZUVOVi5EQl9OQU1FLFxuICAgIHBvcnQ6IGRhdGFiYXNlRU5WLkRCX1BPUlQsXG4gICAgc3NsOiBkYXRhYmFzZUVOVi5EQl9TU0wsXG4gICAgbW9kZWxzOiBhd2FpdCBpbXBvcnRNb2RlbHMoX19kaXJuYW1lICsgJy9zcmMvc2VydmVyL21vZGVscy8qKi8qLm1vZGVsLnt0cyxqc30nKSxcbn0pO1xuZXhwb3J0IGRlZmF1bHQgc2VxdWVsaXplO1xuIiwiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGhlbG1ldCBmcm9tICdoZWxtZXQnO1xuaW1wb3J0IG1vcmdhbiBmcm9tICdtb3JnYW4nO1xuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vY29uZmlnL2luZGV4JztcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gJy4uL3JvdXRlcy9yb3V0ZXInO1xuaW1wb3J0IHsgbGltaXRlciB9IGZyb20gJy4vYXV0aC9pcENvbmZpZyc7XG5pbXBvcnQgeyBnbG9iYWxFcnJvckhhbmRsZXIgfSBmcm9tICcuLi91dGlscy9lcnJvckhhbmRsZXInO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiAoeyBhcHAgfSkge1xuICAgIGFwcC5nZXQoJy9zdGF0dXMnLCAoX3JlcSwgcmVzKSA9PiByZXMuc2VuZFN0YXR1cygyMDApLmVuZCgpKTtcbiAgICBhcHAudXNlKChfcmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgICAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICAgICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gICAgICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICAgICAgaWYgKF9yZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfSk7XG4gICAgYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG4gICAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gICAgYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG4gICAgYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG4gICAgYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG4gICAgLy8gU2VydmUgc3RhdGljIGZpbGVzIGZyb20gJ2Rpc3QnIGRpcmVjdG9yeVxuICAgIGFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJ2Rpc3QnKSkpO1xuICAgIGNvbnN0IFRydXN0X1Byb3h5ID0gZW52LlRSVVNUX1BST1hZIHx8ICdmYWxzZSc7XG4gICAgY29uc3QgbnVtYmVyT2ZQcm94aWVzID0gZW52Lk5VTUJFUl9PRl9QUk9YSUVTIHx8IDE7XG4gICAgaWYgKFRydXN0X1Byb3h5KSB7XG4gICAgICAgIGFwcC5zZXQoJ3RydXN0IHByb3h5JywgdHJ1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKFRydXN0X1Byb3h5ID09PSAnZmFsc2UnKSB7XG4gICAgICAgIGFwcC5zZXQoJ3RydXN0IHByb3h5JywgZmFsc2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXBwLnNldCgndHJ1c3QgcHJveHknLCBUcnVzdF9Qcm94eSk7XG4gICAgICAgIGFwcC5zZXQoJ3RydXN0IHByb3h5JywgbnVtYmVyT2ZQcm94aWVzKTtcbiAgICB9XG4gICAgYXBwLnNldCgndHJ1c3QgcHJveHknLCBudW1iZXJPZlByb3hpZXMpO1xuICAgIGFwcC5nZXQoJy9pcCcsIChyZXF1ZXN0LCByZXNwb25zZSkgPT4gcmVzcG9uc2Uuc2VuZChyZXF1ZXN0LmlwKSk7XG4gICAgYXBwLnVzZShoZWxtZXQoe1xuICAgICAgICBjb250ZW50U2VjdXJpdHlQb2xpY3k6IGZhbHNlLFxuICAgIH0pKTtcbiAgICBhcHAudXNlKG1vcmdhbihlbnYuTU9SR0FOKSk7XG4gICAgYXBwLnVzZShsaW1pdGVyKTtcbiAgICBhcHAudXNlKHJvdXRlcik7XG4gICAgYXBwLnVzZShnbG9iYWxFcnJvckhhbmRsZXIpO1xuICAgIHJldHVybiBhcHA7XG59XG4iLCJpbXBvcnQgZXhwcmVzc0xvYWRlciBmcm9tICcuL2V4cHJlc3MnO1xuaW1wb3J0IHNlcXVpbGl6ZUxvYWRlciBmcm9tICcuL2RhdGFMb2FkZXIvc2VxdWxpemUnO1xuaW1wb3J0IHsgd2FpdEZvckRCIH0gZnJvbSAnLi9kYXRhTG9hZGVyL21hcmlhZGInO1xuaW1wb3J0IHsgdHJ1bmNhdGVUYWJsZXMgfSBmcm9tICcuLi9zZXJ2aWNlcy90cnVuY2F0ZSc7XG5pbXBvcnQgbG9hZGVyIGZyb20gJy4uL3NlcnZpY2VzL3BlcmZvcm1hbmNlJztcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uICh7IGFwcCB9KSB7XG4gICAgYXdhaXQgdHJ1bmNhdGVUYWJsZXMoKTtcbiAgICBhd2FpdCB3YWl0Rm9yREIoKTtcbiAgICBzZXF1aWxpemVMb2FkZXI7XG4gICAgYXdhaXQgZXhwcmVzc0xvYWRlcih7IGFwcCB9KTtcbiAgICBsb2FkZXIoKTtcbiAgICBjb25zb2xlLmxvZygnRXhwcmVzcyBTZXJ2ZXIgSW50aWFsaXplZCEnKTtcbn1cbiIsImltcG9ydCB7IERhdGFUeXBlcywgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfSBmcm9tICcuLi9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uLmpzJztcbmltcG9ydCBVc2VycyBmcm9tICcuL3VzZXIubW9kZWwuanMnO1xuaW1wb3J0IFBvc3RzIGZyb20gJy4vcG9zdC5tb2RlbC5qcyc7XG4vLyBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuY2xhc3MgSW1hZ2VTdG9yYWdlcyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGZpbmQgYW4gaW1hZ2UgYnkgSURcbiAgICBzdGF0aWMgYXN5bmMgZmluZEltYWdlQnlJZChpZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQnlQayhpZCk7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBmaW5kSW1hZ2VCeVJlZmVyZW5jZUtleShrZXksIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IHRoaXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgW2tleV06IHZhbHVlIH0sXG4gICAgICAgICAgICAgICAgb3JkZXI6IFtbJ2NyZWF0ZWRfQXQnLCAnREVTQyddXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGltYWdlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmluZGluZyBpbWFnZSBieSByZWZlcmVuY2Uga2V5OiAke2tleX0sIHZhbHVlOiAke3ZhbHVlfWAsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yOyAvLyBSZS10aHJvdyB0aGUgZXJyb3IgYWZ0ZXIgbG9nZ2luZyBpdFxuICAgICAgICB9XG4gICAgfVxufVxuLy8gRGVmaW5lIHRoZSBJbWFnZVN0b3JhZ2UgbW9kZWxcbkltYWdlU3RvcmFnZXMuaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICBpbWFnZVVybDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbiAgICB1c2VyX2lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1VzZXJzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHBvc3RfaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnUG9zdHMnLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgY3JlYXRlZF9BdDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG59LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ0ltYWdlU3RvcmFnZXMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxufSk7XG4vLyBEZWZpbmUgdGhlIFVzZXIgbW9kZWxcbkltYWdlU3RvcmFnZXMuaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICBpbWFnZVVybDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbiAgICB1c2VyX2lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1VzZXJzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHBvc3RfaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnUG9zdHMnLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbiAgICBjcmVhdGVkX0F0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5OT1csXG4gICAgfSxcbn0sIHtcbiAgICBzZXF1ZWxpemUsXG4gICAgbW9kZWxOYW1lOiAnSW1hZ2VTdG9yYWdlcycsXG4gICAgdGltZXN0YW1wczogZmFsc2UsXG59KTtcbi8vIGNyZWF0ZSBhIGhvb2sgdGhhdCBzYXZlcyB1cGxvYWRlZCBpbWFnZSB0byB0aGUgdXNlcidzIGNvbHVtbnMgaW4gdGhlIGRhdGFiYXNlXG5JbWFnZVN0b3JhZ2VzLmFmdGVyQ3JlYXRlKGFzeW5jIChpbWFnZSkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayhpbWFnZS51c2VyX2lkKTtcbiAgICBpZiAodXNlcikge1xuICAgICAgICB1c2VyLmltYWdlVVJMID0gaW1hZ2UuaW1hZ2VVcmw7XG4gICAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgIH1cbn0pO1xuLy8gQWZ0ZXIgVXBsb2FkaW5nIGFuIGltYWdlLCBzYXZlIHRvIHVzZXIncyB0YWJsZVxuVXNlcnMuaGFzTWFueShJbWFnZVN0b3JhZ2VzLCB7XG4gICAgZm9yZWlnbktleTogJ3VzZXJfaWQnLFxuICAgIG9uRGVsZXRlOiAnQ0FTQ0FERScsXG4gICAgb25VcGRhdGU6ICdDQVNDQURFJyxcbn0pO1xuUG9zdHMuaGFzTWFueShJbWFnZVN0b3JhZ2VzLCB7XG4gICAgZm9yZWlnbktleTogJ3Bvc3RfaWQnLFxuICAgIG9uRGVsZXRlOiAnQ0FTQ0FERScsXG4gICAgb25VcGRhdGU6ICdDQVNDQURFJyxcbn0pO1xuLy8gRGVmaW5lIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgVXNlciwgTmV3UG9zdCwgYW5kIEltYWdlU3RvcmFnZSBtb2RlbHNcbkltYWdlU3RvcmFnZXMuYmVsb25nc1RvKFVzZXJzLCB7XG4gICAgZm9yZWlnbktleTogJ3VzZXJfaWQnLFxuICAgIG9uRGVsZXRlOiAnQ0FTQ0FERScsXG4gICAgb25VcGRhdGU6ICdDQVNDQURFJyxcbn0pO1xuSW1hZ2VTdG9yYWdlcy5iZWxvbmdzVG8oUG9zdHMsIHtcbiAgICBmb3JlaWduS2V5OiAncG9zdF9pZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG4vLyBzeW5jIHRoZSBJbWFnZVN0b3JhZ2UgbW9kZWwgd2l0aCB0aGUgZGF0YWJhc2VcbmF3YWl0IHNlcXVlbGl6ZVxuICAgIC5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdOZXcgSW1hZ2Ugc3luY2VkIHN1Y2Nlc3NmdWxseScpO1xufSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIG5ldyBpbWFnZTonLCBlcnIpO1xufSk7XG4vLyBJbWFnZVN0b3JhZ2Uuc3luYyh7IGZvcmNlOiB0cnVlIH0pXG4vLyAgIC50aGVuKCgpID0+IHtcbi8vICAgICBjb25zb2xlLmxvZygnSW1hZ2VTdG9yYWdlIHN5bmNlZCBzdWNjZXNzZnVsbHknKTtcbi8vICAgfSlcbi8vICAgLmNhdGNoKGVyciA9PiB7XG4vLyAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2luZyBJbWFnZVN0b3JhZ2U6JywgZXJyKTtcbi8vICAgfSk7XG5leHBvcnQgZGVmYXVsdCBJbWFnZVN0b3JhZ2VzO1xuIiwiaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24nO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi91c2VyLm1vZGVsLmpzJztcbmltcG9ydCBQb3N0IGZyb20gJy4vcG9zdC5tb2RlbC5qcyc7XG4vLyBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuY2xhc3MgTGlrZXMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gY3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBjcmVhdGUgYSBuZXcgbGlrZVxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGVMaWtlKGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlKGF0dHJpYnV0ZXMpO1xuICAgIH1cbiAgICAvLyBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGZpbmQgYSBsaWtlIGJ5IElEXG4gICAgc3RhdGljIGFzeW5jIGZpbmRMaWtlQnlJZChpZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQnlQayhpZCk7XG4gICAgfVxuICAgIC8vIGNyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gZmluZCBhIGxpa2UgYnkgcmVmZXJlbmNlIGtleSAodXNlcklkIG9yIHBvc3RJZClcbiAgICBzdGF0aWMgYXN5bmMgZmluZExpa2VCeVJlZmVyZW5jZUtleShrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBba2V5XTogdmFsdWUgfSB9KTtcbiAgICB9XG4gICAgLy8gY3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBmaW5kIGFsbCBsaWtlcyBieSByZWZlcmVuY2Uga2V5ICh1c2VySWQgb3IgcG9zdElkKVxuICAgIHN0YXRpYyBhc3luYyBmaW5kQWxsTGlrZXNCeVJlZmVyZW5jZUtleShrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRBbGwoeyB3aGVyZTogeyBba2V5XTogdmFsdWUgfSB9KTtcbiAgICB9XG4gICAgLy8gY3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBmaW5kIGFsbCBsaWtlcyBieSByZWZlcmVuY2Uga2V5ICh1c2VySWQgb3IgcG9zdElkKVxuICAgIHN0YXRpYyBhc3luYyBkZWxldGVMaWtlQnlSZWZlcmVuY2VLZXkoa2V5LCB2YWx1ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmRlc3Ryb3koeyB3aGVyZTogeyBba2V5XTogdmFsdWUgfSB9KTtcbiAgICB9XG59XG4vLyBEZWZpbmUgdGhlIFVzZXIgbW9kZWxcbkxpa2VzLmluaXQoe1xuICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgdXNlcl9pZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdVc2VycycsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBwb3N0X2lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1Bvc3RzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGNyZWF0ZWRfQXQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxufSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdMaWtlcycsXG4gICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgZnJlZXplVGFibGVOYW1lOiB0cnVlLFxufSk7XG4vLyBEZWZpbmUgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIFVzZXIgYW5kIExpa2VcblVzZXIuaGFzTWFueShMaWtlcywge1xuICAgIGZvcmVpZ25LZXk6ICd1c2VyX2lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxufSk7XG5MaWtlcy5iZWxvbmdzVG8oVXNlciwge1xuICAgIGZvcmVpZ25LZXk6ICd1c2VyX2lkJyxcbn0pO1xuLy8gRGVmaW5lIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBQb3N0IGFuZCBMaWtlXG5Qb3N0Lmhhc01hbnkoTGlrZXMsIHtcbiAgICBmb3JlaWduS2V5OiAncG9zdF9pZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbn0pO1xuTGlrZXMuYmVsb25nc1RvKFBvc3QsIHtcbiAgICBmb3JlaWduS2V5OiAncG9zdF9pZCcsXG59KTtcbi8vIFN5bmMgdGhlIExpa2UgbW9kZWwgd2l0aCB0aGUgZGF0YWJhc2Vcbkxpa2VzLnN5bmMoeyBmb3JjZTogZmFsc2UgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0xpa2Ugc3luY2VkIHN1Y2Nlc3NmdWxseScpO1xufSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIGxpa2U6JywgZXJyKTtcbn0pO1xuZXhwb3J0IGRlZmF1bHQgTGlrZXM7XG4iLCJpbXBvcnQgeyBEYXRhVHlwZXMsIE1vZGVsIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCB7IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIH0gZnJvbSAnLi4vbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVpbGl6ZUNvbic7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi91c2VyLm1vZGVsLmpzJztcbi8vIERlZmluZSBJbnN0YW5jZSBvZiBTZXF1ZWxpemVcbmNvbnN0IHNlcXVlbGl6ZSA9IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCk7XG5jbGFzcyBQb3N0cyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGNyZWF0ZSBhIG5ldyBwb3N0XG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZVBvc3QoYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGUoYXR0cmlidXRlcyk7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyB1cGRhdGVQb3N0KGlkLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGNvbnN0IFthZmZlY3RlZENvdW50LCB1cGRhdGVkUG9zdHNdID0gYXdhaXQgdGhpcy51cGRhdGUoYXR0cmlidXRlcywge1xuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgICAgIHJldHVybmluZzogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbYWZmZWN0ZWRDb3VudCwgdXBkYXRlZFBvc3RzXTtcbiAgICB9XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBkZWxldGUgYSBQb3N0IGJ5IElEXG4gICAgc3RhdGljIGFzeW5jIGRlbGV0ZVBvc3QoaWQpIHtcbiAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IGlkIH0gfSk7XG4gICAgICAgIGlmIChwb3N0KSB7XG4gICAgICAgICAgICBhd2FpdCBwb3N0LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBkZWNsYXJlIHN0YXRpYyBtZXRob2RzIHRvIGdldCBhbGwgcG9zdHNcbiAgICBzdGF0aWMgYXN5bmMgZ2V0QWxsUG9zdHMoKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcbiAgICB9XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBnZXQgaW5maW5pdGUgcG9zdHNcbiAgICBzdGF0aWMgYXN5bmMgZ2V0SW5maW5pdGVQb3N0cyhvZmZzZXQsIGxpbWl0KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRBbGwoeyBvZmZzZXQsIGxpbWl0IH0pO1xuICAgIH1cbiAgICAvLyBkZWNsYXJlIHN0YXRpYyBtZXRob2RzIHRvIGdldCBwb3N0IGJ5IElEXG4gICAgc3RhdGljIGFzeW5jIGdldFBvc3RCeUlEKGlkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogaWQgfSB9KTtcbiAgICB9XG59XG4vLyBTeW5jIHRoZSBtb2RlbCB3aXRoIHRoZSBkYXRhYmFzZVxuUG9zdHMuaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgfSxcbiAgICBjYXB0aW9uOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICBpbWFnZVVSTDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbiAgICBsb2NhdGlvbjoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbiAgICB0YWdzOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICBsaWtlc19Db3VudDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgIH0sXG4gICAgY3JlYXRlZF9BdDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgIH0sXG4gICAgY3JlYXRvcl9JZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdVc2VycycsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbn0sIHtcbiAgICBzZXF1ZWxpemUsXG4gICAgbW9kZWxOYW1lOiAnUG9zdHMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxufSk7XG4vLyBDcmVhdGUgbmV3IHBvc3RcblBvc3RzLmNyZWF0ZVBvc3QgPSBhc3luYyBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ld1Bvc3QgPSBhd2FpdCB0aGlzLmNyZWF0ZShhdHRyaWJ1dGVzKTtcbiAgICAgICAgcmV0dXJuIG5ld1Bvc3Q7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBuZXcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn07XG4vLyBVcGRhdGUgcG9zdCBieSBJRFxuUG9zdHMudXBkYXRlUG9zdCA9IGFzeW5jIGZ1bmN0aW9uIChpZCwgYXR0cmlidXRlcykge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFthZmZlY3RlZENvdW50LCB1cGRhdGVkUG9zdHNdID0gYXdhaXQgdGhpcy51cGRhdGUoYXR0cmlidXRlcywge1xuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgICAgIHJldHVybmluZzogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbYWZmZWN0ZWRDb3VudCwgdXBkYXRlZFBvc3RzXTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHBvc3Q6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59O1xuLy8gaW5maW5pdGUgcG9zdHNcblBvc3RzLmdldEluZmluaXRlUG9zdHMgPSBhc3luYyBmdW5jdGlvbiAob2Zmc2V0LCBsaW1pdCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgdGhpcy5maW5kQWxsKHsgb2Zmc2V0LCBsaW1pdCB9KTtcbiAgICAgICAgcmV0dXJuIHBvc3RzO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBpbmZpbml0ZSBwb3N0czonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn07XG4vLyBHZXQgc2VhcmNoIHJlc3VsdHMgLSBwb3N0c1xuUG9zdHMuZ2V0UG9zdEJ5SUQgPSBhc3luYyBmdW5jdGlvbiAoaWQpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgaWQgfSB9KTtcbiAgICAgICAgcmV0dXJuIHBvc3Q7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHBvc3QgYnkgSUQ6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59O1xuLy8gRGVmaW5lIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgVXNlciBhbmQgUG9zdCBtb2RlbHNcblVzZXJzLmhhc01hbnkoUG9zdHMsIHtcbiAgICBmb3JlaWduS2V5OiAnY3JlYXRvcl9JZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG5Qb3N0cy5iZWxvbmdzVG8oVXNlcnMsIHtcbiAgICBmb3JlaWduS2V5OiAnY3JlYXRvcl9JZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG5hd2FpdCBzZXF1ZWxpemVcbiAgICAuc3luYyh7IGZvcmNlOiBmYWxzZSB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnUG9zdCBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgUG9zdDonLCBlcnIpO1xufSk7XG5leHBvcnQgZGVmYXVsdCBQb3N0cztcbiIsImltcG9ydCB7IERhdGFUeXBlcywgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfSBmcm9tICcuLi9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uJztcbmltcG9ydCBVc2VycyBmcm9tICcuL3VzZXIubW9kZWwuanMnO1xuaW1wb3J0IFBvc3RzIGZyb20gJy4vcG9zdC5tb2RlbC5qcyc7XG4vLyBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuY2xhc3MgU2F2ZXMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gQ3JlYXRlIGN1c3RvbSBjbGFzcyBtZXRob2RzIHRvIGNyZWF0ZSBhIG5ldyBwb3N0XG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZVNhdmUoYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGUoYXR0cmlidXRlcyk7XG4gICAgfVxuICAgIC8vIGNyZWF0ZSBjdXN0b20gbWV0aG9kIHRvIGNoZWNrIGlmIHBvc3QgaXMgc2F2ZWRcbiAgICBzdGF0aWMgYXN5bmMgY2hlY2tJZlNhdmVkKHVzZXJfaWQsIHBvc3RfaWQpIHtcbiAgICAgICAgY29uc3Qgc2F2ZSA9IGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IHVzZXJfaWQsIHBvc3RfaWQgfSB9KTtcbiAgICAgICAgcmV0dXJuICEhc2F2ZTtcbiAgICB9XG4gICAgLy8gY3JlYXRlIGN1c3RvbSBtZXRob2QgdG8gZGVsZXRlIGEgc2F2ZWQgcG9zdFxuICAgIHN0YXRpYyBhc3luYyBkZWxldGVTYXZlZFBvc3QocG9zdF9pZCkge1xuICAgICAgICBjb25zdCBzYXZlID0gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgcG9zdF9pZCB9IH0pO1xuICAgICAgICBpZiAoc2F2ZSkge1xuICAgICAgICAgICAgYXdhaXQgc2F2ZS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBEZWZpbmUgdGhlIFNhdmVzIG1vZGVsXG5TYXZlcy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnVXNlcnMnLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgcG9zdF9pZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdQb3N0cycsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBzYXZlRGF0ZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5OT1csXG4gICAgfSxcbn0sIHtcbiAgICBzZXF1ZWxpemUsXG4gICAgdGFibGVOYW1lOiAnU2F2ZXMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGZyZWV6ZVRhYmxlTmFtZTogdHJ1ZSxcbn0pO1xuLy8gQ3JlYXRlIGEgZnVuY3Rpb24gdG8gZGVsZXRlIHNhdmVkIFBvc3QgdXNpbmcgdGhlIHN0YXRpYyBtZXRob2RcblNhdmVzLmRlbGV0ZVNhdmVkUG9zdCA9IGFzeW5jIGZ1bmN0aW9uIChwb3N0X2lkKSB7XG4gICAgY29uc3Qgc2F2ZSA9IGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IHBvc3RfaWQgfSB9KTtcbiAgICBpZiAoc2F2ZSkge1xuICAgICAgICBhd2FpdCBzYXZlLmRlc3Ryb3koKTtcbiAgICB9XG59O1xuLy8gQ3JlYXRlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIFNhdmVzIGFuZCBVc2Vyc1xuU2F2ZXMuYmVsb25nc1RvKFVzZXJzLCB7XG4gICAgZm9yZWlnbktleTogJ3VzZXJfaWQnLFxuICAgIHRhcmdldEtleTogJ2lkJyxcbn0pO1xuLy8gQ3JlYXRlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIFNhdmVzIGFuZCBQb3N0c1xuU2F2ZXMuYmVsb25nc1RvKFBvc3RzLCB7XG4gICAgZm9yZWlnbktleTogJ3Bvc3RfaWQnLFxuICAgIHRhcmdldEtleTogJ2lkJyxcbn0pO1xuU2F2ZXMuc3luYyh7IGZvcmNlOiBmYWxzZSB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnU2F2ZSBQb3N0IHN5bmNlZCBzdWNjZXNzZnVsbHknKTtcbn0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2luZyBTYXZlIHBvc3Q6JywgZXJyKTtcbn0pO1xuZXhwb3J0IGRlZmF1bHQgU2F2ZXM7XG4iLCJpbXBvcnQgeyBEYXRhVHlwZXMsIE1vZGVsIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCB7IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIH0gZnJvbSAnLi4vbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVpbGl6ZUNvbic7XG4vLyBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuY2xhc3MgVXNlcnMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBnZXQgdXNlciBieSBJRFxuICAgIHN0YXRpYyBhc3luYyBnZXRVc2VyQnlJRChpZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IGlkIH0gfSk7XG4gICAgfVxufVxuLy8gU3luYyB0aGUgbW9kZWwgd2l0aCB0aGUgZGF0YWJhc2VcblVzZXJzLmluaXQoe1xuICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgIH0sXG4gICAgZmlyc3ROYW1lOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBub3RFbXB0eTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGxhc3ROYW1lOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBub3RFbXB0eTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHVzZXJuYW1lOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGlzOiAvXlthLXpBLVowLTlfXSokLyxcbiAgICAgICAgICAgIGxlbjogWzMsIDIwXSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGVtYWlsOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGlzRW1haWw6IHRydWUsXG4gICAgICAgICAgICBsZW46IFs1LCA1MF0sXG4gICAgICAgICAgICBub3RFbXB0eTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGhhc2hlZHBhc3N3b3JkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcoNjQpLFxuICAgIH0sXG4gICAgc3RhdHVzOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogJ3VudmVyaWZpZWQnLFxuICAgIH0sXG4gICAgYmlvOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogJ1RoaXMgaXMgYSBuZXcgdXNlci4nLFxuICAgIH0sXG4gICAgam9pbjoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG4gICAgYXZhdGFyVXJsOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgfSxcbiAgICBpbWFnZVVSTDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgIH0sXG4gICAgcHJvZmlsZVBpYzoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgIH0sXG4gICAgbGFiZWw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiAnTmV3IFVzZXInLFxuICAgIH0sXG4gICAgbGFzdF9hY3Rpdml0eToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG4gICAgdXBkYXRlZF9hdDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG4gICAgVXNlclJlZ2lzdHJhdGlvbklEOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnVXNlclJlZ2lzdHJhdGlvbicsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbn0sIHtcbiAgICBzZXF1ZWxpemUsXG4gICAgbW9kZWxOYW1lOiAnVXNlcnMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIHVwZGF0ZWRBdDogJ3VwZGF0ZWRfYXQnLFxufSk7XG4vLyBTeW5jIFVzZXIgbW9kZWwgd2l0aCB0aGUgZGF0YWJhc2VcbmF3YWl0IHNlcXVlbGl6ZVxuICAgIC5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdOZXcgVXNlciBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgbmV3IHVzZXI6JywgZXJyKTtcbn0pO1xuZXhwb3J0IGRlZmF1bHQgVXNlcnM7XG4iLCJpbXBvcnQgeyBEYXRhVHlwZXMsIE1vZGVsIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCB7IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIH0gZnJvbSAnLi4vbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVpbGl6ZUNvbic7XG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5pbXBvcnQgeyBnZW5lcmF0ZUF2YXRhclVybCB9IGZyb20gJy4uL3V0aWxzL2F2YXRhcic7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi91c2VyLm1vZGVsJztcbi8vIERlZmluZSBJbnN0YW5jZSBvZiBTZXF1ZWxpemVcbmNvbnN0IHNlcXVlbGl6ZSA9IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCk7XG5jbGFzcyBVc2VyUmVnaXN0cmF0aW9uIGV4dGVuZHMgTW9kZWwge1xuICAgIC8vIENyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gbG9nIGluIHVzZXIgdXBvbiBzdWNjZXNzZnVsIHJlZ2lzdHJhdGlvblxuICAgIHN0YXRpYyBhc3luYyBsb2dpblVzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGVtYWlsLCBoYXNoZWRwYXNzd29yZDogcGFzc3dvcmQgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gbG9nIG91dCB1c2VyXG4gICAgc3RhdGljIGFzeW5jIGxvZ291dFVzZXIoZW1haWwpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogZW1haWwgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gcmVzZXQgdGhlIHBhc3N3b3JkLCBjb21wYXJlIHRoZSBoYXNoZWQgcGFzc3dvcmRcbiAgICBzdGF0aWMgYXN5bmMgcmVzZXRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogZW1haWwsIGhhc2hlZHBhc3N3b3JkOiBwYXNzd29yZCB9LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5Vc2VyUmVnaXN0cmF0aW9uLmluaXQoe1xuICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgIH0sXG4gICAgbmV3VXNlcjoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgdXNlcm5hbWU6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGVtYWlsOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICBoYXNoZWRwYXNzd29yZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgY3JlYXRlZEF0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5OT1csXG4gICAgfSxcbn0sIHtcbiAgICBzZXF1ZWxpemU6IHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdVc2VyUmVnaXN0cmF0aW9uJyxcbiAgICBjcmVhdGVkQXQ6ICdjcmVhdGVkQXQnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGZyZWV6ZVRhYmxlTmFtZTogdHJ1ZSxcbn0pO1xuLy8gSGFzaCB0aGUgcGFzc3dvcmQgYmVmb3JlIHNhdmluZ1xuVXNlclJlZ2lzdHJhdGlvbi5iZWZvcmVDcmVhdGUoYXN5bmMgKHVzZXIpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgY29uc3Qgc2FsdCA9IGJjcnlwdC5nZW5TYWx0U3luYygxMCk7XG4gICAgICAgICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKFN0cmluZyh1c2VyLmhhc2hlZHBhc3N3b3JkKSwgc2FsdCk7XG4gICAgICAgICAgICB1c2VyLmhhc2hlZHBhc3N3b3JkID0gaGFzaGVkUGFzc3dvcmQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGhhc2hpbmcgcGFzc3dvcmQ6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGhhc2hpbmcgcGFzc3dvcmQnKTtcbiAgICB9XG59KTtcblVzZXJSZWdpc3RyYXRpb24uYWZ0ZXJDcmVhdGUoYXN5bmMgKHVzZXIpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgY29uc3Qgc3BhY2VJbmRleCA9IHVzZXIubmV3VXNlcj8ubGFzdEluZGV4T2YoJyAnKTtcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIGZpcnN0IG5hbWUgYW5kIGxhc3QgbmFtZSBiYXNlZCBvbiB0aGUgbGFzdCBzcGFjZVxuICAgICAgICAgICAgY29uc3QgZmlyc3RfTmFtZSA9IHNwYWNlSW5kZXggIT09IC0xID8gdXNlci5uZXdVc2VyPy5zbGljZSgwLCBzcGFjZUluZGV4KSA6IHVzZXIubmV3VXNlcjtcbiAgICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID0gc3BhY2VJbmRleCAhPT0gLTEgPyB1c2VyLm5ld1VzZXI/LnNsaWNlKHNwYWNlSW5kZXggPz8gKzEpIDogbnVsbCA/PyAnJztcbiAgICAgICAgICAgIGNvbnN0IGF2YXRhciA9IGdlbmVyYXRlQXZhdGFyVXJsKHVzZXIudXNlcm5hbWUpO1xuICAgICAgICAgICAgLy8gQ3JlYXRlIG9yIHVwZGF0ZSB0aGUgdXNlciByZWNvcmQgaW4gdGhlIFVzZXJzIHRhYmxlXG4gICAgICAgICAgICBhd2FpdCBVc2Vycy51cHNlcnQoe1xuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogZmlyc3RfTmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogbGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgaGFzaGVkcGFzc3dvcmQ6IHVzZXIuaGFzaGVkcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAndW52ZXJpZmllZCcsXG4gICAgICAgICAgICAgICAgYmlvOiAnSSBhbSBhIG5ldyB1c2VyLicsXG4gICAgICAgICAgICAgICAgam9pbjogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICBhdmF0YXJVcmw6IGF2YXRhcixcbiAgICAgICAgICAgICAgICBpbWFnZVVSTDogbnVsbCxcbiAgICAgICAgICAgICAgICBwcm9maWxlUGljOiBudWxsLFxuICAgICAgICAgICAgICAgIGxhYmVsOiAnTmV3IFVzZXInLFxuICAgICAgICAgICAgICAgIGxhc3RfYWN0aXZpdHk6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICBVc2VyUmVnaXN0cmF0aW9uSUQ6IHVzZXIuaWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVnaXN0ZXJpbmcgbmV3IHVzZXI6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIHJlZ2lzdGVyaW5nIG5ldyB1c2VyJyk7XG4gICAgfVxufSk7XG4vLyBEZWZpbmUgYSBjdXN0b20gbWV0aG9kIHRvIGxvZ2luIHVzZXIgd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmQgYW5kIGNvbXBhcmUgdGhlIGhhc2hlZCBwYXNzd29yZFxuVXNlclJlZ2lzdHJhdGlvbi5sb2dpblVzZXIgPSBhc3luYyBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsOiBlbWFpbCB9IH0pO1xuICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgY29uc3QgYXV0aCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLmhhc2hlZHBhc3N3b3JkKTtcbiAgICAgICAgICAgIGlmIChhdXRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29ycmVjdCBwYXNzd29yZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmNvcnJlY3QgZW1haWwnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBpbiB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgIH1cbn07XG4vLyBEZWZpbmUgYSBjdXN0b20gbWV0aG9kIHRvIGxvZ291dCB1c2VyXG5Vc2VyUmVnaXN0cmF0aW9uLmxvZ291dFVzZXIgPSBhc3luYyBmdW5jdGlvbiAoZW1haWwpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgZW1haWw6IGVtYWlsIH0gfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2dnaW5nIG91dCB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgIH1cbn07XG5hd2FpdCBzZXF1ZWxpemVcbiAgICAuc3luYyh7IGZvcmNlOiBmYWxzZSB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnTmV3IFVzZXIgUmVnaXN0ZXJlZCBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgbmV3IHVzZXI6JywgZXJyKTtcbn0pO1xuZXhwb3J0IGRlZmF1bHQgVXNlclJlZ2lzdHJhdGlvbjtcbiIsImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgeyBjb3JPcHRpb25zIH0gZnJvbSAnLi4vY29uZmlnL2Nvck9wdGlvbnMnO1xuaW1wb3J0ICogYXMgYXV0aENvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlcnMvYXV0aENvbnRyb2xsZXInO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5yb3V0ZXIudXNlKGNvcnMoY29yT3B0aW9ucykpO1xucm91dGVyLnVzZSgoX3JlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICBuZXh0KCk7XG59KTtcbi8vIGFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xucm91dGVyLnVzZShjb29raWVQYXJzZXIoKSk7XG5yb3V0ZXIudXNlKGV4cHJlc3MuanNvbigpKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci5qc29uKCkpO1xucm91dGVyLnBvc3QoJy9hcGkvcmVnaXN0ZXInLCBhdXRoQ29udHJvbGxlci51c2VyUmVnaXN0ZXIpO1xucm91dGVyLnBvc3QoJy9hcGkvbG9naW4nLCBhdXRoQ29udHJvbGxlci51c2VyTG9naW4pO1xucm91dGVyLmdldCgnL2FwaS9sb2dvdXQnLCBhdXRoQ29udHJvbGxlci51c2VyTG9nb3V0KTtcbnJvdXRlci5wb3N0KCcvYXBpL3JlZnJlc2gtdG9rZW4nLCBhdXRoQ29udHJvbGxlci5yZWZyZXNoVG9rZW4pO1xucm91dGVyLmdldCgnL2FwaS9jdXJyZW50VXNlcicsIGF1dGhDb250cm9sbGVyLnJlcXVpcmVBdXRoKTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi4vbW9kZWxzL3VzZXIubW9kZWwnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCB7IHZlcmlmeVVzZXIgfSBmcm9tICcuLi9sb2FkZXJzL2F1dGgvdXNlckF1dGgnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgand0RU5WIH0gZnJvbSAnLi4vY29uZmlnL2p3dEVOVic7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuZG90ZW52LmNvbmZpZygpO1xucm91dGVyLnVzZShjb3JzKCkpO1xucm91dGVyLnVzZSgoX3JlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICBuZXh0KCk7XG59KTtcbnJvdXRlci51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xucm91dGVyLnVzZShjb29raWVQYXJzZXIoKSk7XG5yb3V0ZXIudXNlKGV4cHJlc3MuanNvbigpKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci5qc29uKCkpO1xucm91dGVyLmdldCgnL2FwaS9nZXRVc2VyJywgdmVyaWZ5VXNlciwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3InLCBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayhkZWNvZGVkVG9rZW4uaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VyIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBjdXJyZW50IHVzZXI6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgZ2V0dGluZyBjdXJyZW50IHVzZXInIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfSk7XG59KTtcbi8vIHJvdXRlci5nZXQoXG4vLyAgICcvYXBpL2dldFVzZXInLFxuLy8gICB2ZXJpZnlVc2VyLFxuLy8gICBhc3luYyAoX3JlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSA9PiB7XG4vLyAgICAgaWYgKCFyZXMubG9jYWxzLnVzZXIpIHtcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuLy8gICAgIH1cbi8vICAgICB0cnkge1xuLy8gICAgICAgY29uc3QgdXNlciA9IHJlcy5sb2NhbHMudXNlciBhcyBVc2VyO1xuLy8gICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VyIH0pO1xuLy8gICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4vLyAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGN1cnJlbnQgdXNlcjonLCBlcnJvcik7XG4vLyAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBnZXR0aW5nIGN1cnJlbnQgdXNlcicgfSk7XG4vLyAgICAgfVxuLy8gICAgIHJldHVybiBuZXh0KCk7XG4vLyAgIH0sXG4vLyApO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIiwiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCB7IGNvck9wdGlvbnMgfSBmcm9tICcuLi9jb25maWcvY29yT3B0aW9ucyc7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IHVwbG9hZCBmcm9tICcuLi9zZXJ2aWNlcy9tdWx0ZXIuY29uZmlnJztcbmltcG9ydCBnZXRJbWFnZVByZXZpZXdVcmwgZnJvbSAnLi4vY29udHJvbGxlcnMvaW1hZ2VDb250cm9sbGVyJztcbmltcG9ydCBJbWFnZVN0b3JhZ2VzIGZyb20gJy4uL21vZGVscy9pbWFnZS5tb2RlbCc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi4vbW9kZWxzL3VzZXIubW9kZWwnO1xuaW1wb3J0IHsgand0RU5WIH0gZnJvbSAnLi4vY29uZmlnL2p3dEVOVic7XG5kb3RlbnYuY29uZmlnKCk7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuLy8gRW5hYmxlIENPUlMgZm9yIGFsbCByb3V0ZXNcbnJvdXRlci51c2UoY29ycyhjb3JPcHRpb25zKSk7XG5yb3V0ZXIudXNlKChfcmVxLCByZXMsIG5leHQpID0+IHtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnaHR0cDovL2xvY2FsaG9zdDo4MDgwJyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdPcmlnaW4sIFgtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQWNjZXB0Jyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xuICAgIHJlcy5oZWFkZXIoJ2VuY29kaW5nJywgJ211bHRpcGFydC9mb3JtLWRhdGEnKTtcbiAgICBuZXh0KCk7XG59KTtcbnJvdXRlci51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xucm91dGVyLnVzZShjb29raWVQYXJzZXIoKSk7XG5yb3V0ZXIudXNlKGV4cHJlc3MuanNvbigpKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci5qc29uKCkpO1xucm91dGVyLnBvc3QoJy9hcGkvdXBsb2FkSW1hZ2UnLCB1cGxvYWQuc2luZ2xlKCdpbWFnZScpLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnRmlsZSB1cGxvYWRlZDonLCByZXEuZmlsZSk7XG4gICAgICAgIC8vIE1vZGlmeSB0aGUgZmlsZSBwYXRoIHRvIHRoZSByZXF1aXJlZCBmb3JtYXRcbiAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gYGFzc2V0cy9pbWFnZXMvJHtyZXEuZmlsZT8uZmlsZW5hbWV9YDtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGNvbnN0IHBvc3RfaWQgPSBwYXJzZUludChyZXEuYm9keS5wb3N0SWQsIDEwKTtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGltYWdlUmVjb3JkID0gYXdhaXQgSW1hZ2VTdG9yYWdlcy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIGltYWdlVXJsOiByZWxhdGl2ZVBhdGgsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdXNlcl9pZCB8fCBudWxsLFxuICAgICAgICAgICAgICAgIHBvc3RfaWQ6IHBvc3RfaWQgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX0F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWltYWdlUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBlcnJvcjogJ0Vycm9yIGNyZWF0aW5nIGltYWdlIHJlY29yZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbWFnZSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgICAgICAgIGltYWdlVXJsOiByZWxhdGl2ZVBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGxvYWRpbmcgaW1hZ2U6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn0pO1xucm91dGVyLmdldCgnL2FwaS9zZW5kSW1hZ2VVcmwnLCBnZXRJbWFnZVByZXZpZXdVcmwpO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIiwiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgeyBjcmVhdGVQb3N0LCBkZWxldGVMaWtlZFBvc3QsIGRlbGV0ZVBvc3QsIGRlbGV0ZVNhdmVkUG9zdCwgZ2V0QWxsUG9zdHMsIGdldFBvc3RCeUlkLCBsaWtlUG9zdCwgc2F2ZVBvc3QsIHVwZGF0ZVBvc3QsIGdldEluZmluaXRlUG9zdHMsIHNlYXJjaFBvc3RzLCB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL1Bvc3RDb250cm9sbGVyJztcbmltcG9ydCB7IHZlcmlmeVVzZXIgfSBmcm9tICcuLi9sb2FkZXJzL2F1dGgvdXNlckF1dGgnO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbnJvdXRlci51c2UoY29ycygpKTtcbnJvdXRlci51c2UoKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgbmV4dCgpO1xufSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbi8vIENyZWF0ZSBhIG5ldyBwb3N0XG5yb3V0ZXIucG9zdCgnL2FwaS9jcmVhdGVQb3N0JywgY3JlYXRlUG9zdCk7XG4vLyBVcGRhdGUgYSBwb3N0XG5yb3V0ZXIucHV0KCcvYXBpL3VwZGF0ZVBvc3QnLCB1cGRhdGVQb3N0KTtcbi8vIGRlbGV0ZSBhIHBvc3RcbnJvdXRlci5kZWxldGUoJy9hcGkvZGVsZXRlUG9zdCcsIGRlbGV0ZVBvc3QpO1xuLy8gR2V0IFJlY2VudCBQb3N0c1xucm91dGVyLmdldCgnL2FwaS9nZXRBbGxQb3N0cycsIGdldEFsbFBvc3RzKTtcbi8vIEdldCBwb3N0IGJ5IElEXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFBvc3RCeUlkJywgZ2V0UG9zdEJ5SWQpO1xuLy8gTGlrZSBhIFBvc3RcbnJvdXRlci5wb3N0KCcvYXBpL2xpa2VQb3N0JywgbGlrZVBvc3QpO1xuLy8gU2F2ZSBhIFBvc3RcbnJvdXRlci5wb3N0KCcvYXBpL3NhdmVQb3N0JywgdmVyaWZ5VXNlciwgc2F2ZVBvc3QpO1xuLy8gRGVsZXRlIGEgUG9zdFxucm91dGVyLmRlbGV0ZSgnL2FwaS9kZWxldGVTYXZlZFBvc3QnLCBkZWxldGVTYXZlZFBvc3QpO1xuLy8gRGVsZXRlIGEgbGlrZVxucm91dGVyLmRlbGV0ZSgnL2FwaS9kZWxldGVMaWtlUG9zdCcsIGRlbGV0ZUxpa2VkUG9zdCk7XG4vLyBHZXQgSW5maW5pdGUgUG9zdHNcbnJvdXRlci5nZXQoJy9hcGkvZ2V0SW5maW5pdGVQb3N0cycsIGdldEluZmluaXRlUG9zdHMpO1xuLy8gU2VhcmNoIFBvc3RzXG5yb3V0ZXIucG9zdCgnL2FwaS9zZWFyY2hQb3N0cycsIHNlYXJjaFBvc3RzKTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vY29uZmlnL2luZGV4JztcbmltcG9ydCBhdXRoUm91dGVzIGZyb20gJy4vYXV0aFJvdXRlcyc7XG5pbXBvcnQgY3VycmVudFVzZXJSb3V0ZSBmcm9tICcuL2N1cnJlbnRVc2VyUm91dGUnO1xuaW1wb3J0IHVzZXJSb3V0ZXMgZnJvbSAnLi91c2VyUm91dGVzJztcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgcG9zdFJvdXRlcyBmcm9tICcuL3Bvc3RSb3V0ZXMnO1xuaW1wb3J0IGltYWdlUm91dGVzIGZyb20gJy4vaW1hZ2VSb3V0ZXMnO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbnJvdXRlci51c2UoKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgbmV4dCgpO1xufSk7XG4vLyBhcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiBmYWxzZSB9KSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbnJvdXRlci5nZXQoJy8nLCAoX3JlcSwgcmVzKSA9PiB7XG4gICAgcmVzLnNlbmQoe1xuICAgICAgICBzdGF0dXM6IGAke2Vudi5OT0RFX0VOVn1gLFxuICAgICAgICBtZXNzYWdlOiBgJHtlbnYuUkVTUE9OU0VfU1RBVFVTfWAsXG4gICAgICAgIG5hbWU6IGAke2Vudi5BUFBfTkFNRX1gLFxuICAgIH0pO1xufSk7XG5yb3V0ZXIudXNlKGF1dGhSb3V0ZXMpO1xucm91dGVyLnVzZSh1c2VyUm91dGVzKTtcbnJvdXRlci51c2UocG9zdFJvdXRlcyk7XG5yb3V0ZXIudXNlKGltYWdlUm91dGVzKTtcbnJvdXRlci51c2UoY3VycmVudFVzZXJSb3V0ZSk7XG5leHBvcnQgeyByb3V0ZXIgfTtcbiIsImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4uL21vZGVscy91c2VyLm1vZGVsJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IHsgcmVxdWlyZUF1dGggfSBmcm9tICcuLi9sb2FkZXJzL2F1dGgvdXNlckF1dGgnO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbnJvdXRlci51c2UoY29ycygpKTtcbnJvdXRlci51c2UoKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgbmV4dCgpO1xufSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbnJvdXRlci5nZXQoJy9hcGkvZ2V0Q3VycmVudFVzZXInLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3InLCBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBjdXJyZW50IHVzZXI6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgIH0pO1xufSk7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iLCJpbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IHZhbGlkYXRlTUlNRVR5cGUgfSBmcm9tICd2YWxpZGF0ZS1pbWFnZS10eXBlJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG4vLyBEZWZpbmUgY3VzdG9tIGRlc3RpbmF0aW9uIGRpcmVjdG9yeVxuY29uc3QgdXBsb2FkRGlyID0gJy9ob21lL2JhYnNkZXZzeXMvYXBwVi0xL3B1YmxpYy9hc3NldHMvaW1hZ2VzJztcbi8vIEVuc3VyZSB0aGUgZGlyZWN0b3J5IGV4aXN0c1xuaWYgKCFmcy5leGlzdHNTeW5jKHVwbG9hZERpcikpIHtcbiAgICBmcy5ta2RpclN5bmModXBsb2FkRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbn1cbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xuICAgIGRlc3RpbmF0aW9uOiBmdW5jdGlvbiAoX3JlcSwgX2ZpbGUsIGNiKSB7XG4gICAgICAgIGNiKG51bGwsIHVwbG9hZERpcik7XG4gICAgfSxcbiAgICBmaWxlbmFtZTogZnVuY3Rpb24gKF9yZXEsIGZpbGUsIGNiKSB7XG4gICAgICAgIGNvbnN0IHVuaXF1ZVN1ZmZpeCA9IERhdGUubm93KCkgKyAnLScgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxZTkpO1xuICAgICAgICBjYihudWxsLCBmaWxlLmZpZWxkbmFtZSArICctJyArIHVuaXF1ZVN1ZmZpeCArIHBhdGguZXh0bmFtZShmaWxlLm9yaWdpbmFsbmFtZSkpO1xuICAgIH0sXG59KTtcbi8vIENoZWNrIGZpbGUgdHlwZVxuY29uc3QgdmFsaWRhdGVNaW1lVHlwZSA9IGFzeW5jIChmaWxlLCBjYikgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBhd2FpdCB2YWxpZGF0ZU1JTUVUeXBlKGZpbGUucGF0aCwge1xuICAgICAgICAgICAgb3JpZ2luYWxGaWxlbmFtZTogZmlsZS5vcmlnaW5hbG5hbWUsXG4gICAgICAgICAgICBhbGxvd01pbWVUeXBlczogWydpbWFnZS9qcGVnJywgJ2ltYWdlL3BuZycsICdpbWFnZS9zdmcreG1sJ10sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXZhbGlkYXRpb25SZXN1bHQub2spIHtcbiAgICAgICAgICAgIHJldHVybiBjYihuZXcgRXJyb3IoJ0ludmFsaWQgZmlsZSB0eXBlJykpO1xuICAgICAgICB9XG4gICAgICAgIGNiKG51bGwsIHRydWUpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdmFsaWRhdGluZyBmaWxlIHR5cGU6JywgZXJyb3IpO1xuICAgICAgICBjYihuZXcgRXJyb3IoJ0Vycm9yIHZhbGlkYXRpbmcgZmlsZSB0eXBlJykpO1xuICAgIH1cbn07XG5jb25zdCB1cGxvYWQgPSBtdWx0ZXIoe1xuICAgIHN0b3JhZ2U6IHN0b3JhZ2UsXG4gICAgbGltaXRzOiB7IGZpbGVTaXplOiAxMDAwMDAwMCB9LFxuICAgIGZpbGVGaWx0ZXI6IGZ1bmN0aW9uIChfcmVxLCBmaWxlLCBjYikge1xuICAgICAgICBjb25zdCBmaWxldHlwZXMgPSAvanBlZ3xqcGd8cG5nfHN2Zy87XG4gICAgICAgIGNvbnN0IG1pbWV0eXBlID0gZmlsZXR5cGVzLnRlc3QoZmlsZS5taW1ldHlwZSk7XG4gICAgICAgIGNvbnN0IGV4dG5hbWUgPSBmaWxldHlwZXMudGVzdChwYXRoLmV4dG5hbWUoZmlsZS5vcmlnaW5hbG5hbWUpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICBpZiAobWltZXR5cGUgJiYgZXh0bmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhbGlkYXRlTWltZVR5cGUoZmlsZS5wYXRoLCBjYik7XG4gICAgfSxcbn0pO1xuZXhwb3J0IGRlZmF1bHQgdXBsb2FkO1xuIiwiaW1wb3J0IHsgUGVyZm9ybWFuY2VPYnNlcnZlciwgcGVyZm9ybWFuY2UgfSBmcm9tICdub2RlOnBlcmZfaG9va3MnO1xuLy8gU2V0IHVwIHRoZSBQZXJmb3JtYW5jZU9ic2VydmVyXG5jb25zdCBvYnMgPSBuZXcgUGVyZm9ybWFuY2VPYnNlcnZlcihpdGVtcyA9PiB7XG4gICAgaXRlbXMuZ2V0RW50cmllcygpLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtlbnRyeS5uYW1lfTogJHtlbnRyeS5kdXJhdGlvbn1tc2ApO1xuICAgIH0pO1xuICAgIHBlcmZvcm1hbmNlLmNsZWFyTWFya3MoKTtcbn0pO1xub2JzLm9ic2VydmUoeyB0eXBlOiAnbWVhc3VyZScgfSk7XG4vLyBTaW11bGF0ZSB0aGUgbG9hZGVyIGZ1bmN0aW9uXG5hc3luYyBmdW5jdGlvbiBsb2FkZXIoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gTWFyayB0aGUgc3RhcnQgb2YgdGhlIGxvYWRlclxuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdMb2FkZXIgU3RhcnQnLCB7XG4gICAgICAgICAgICBkZXRhaWw6ICdMb2FkZXIgc3RhcnRlZCcsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBQZXJmb3JtIFRhc2sgMVxuICAgICAgICBhd2FpdCBkb1NvbWVMb25nUnVubmluZ1Byb2Nlc3MoKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnVGFzayAxIEVuZCcsIHtcbiAgICAgICAgICAgIGRldGFpbDogJ1Rhc2sgMSBjb21wbGV0ZWQnLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUGVyZm9ybSBUYXNrIDJcbiAgICAgICAgYXdhaXQgZG9Tb21lTG9uZ1J1bm5pbmdQcm9jZXNzKCk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ1Rhc2sgMiBFbmQnLCB7XG4gICAgICAgICAgICBkZXRhaWw6ICdUYXNrIDIgY29tcGxldGVkJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxvZ2luTWVhc3VyZSA9IHBlcmZvcm1hbmNlLm1lYXN1cmUoJ1Rhc2sgMiBEdXJhdGlvbicsICdUYXNrIDEgRW5kJywgJ1Rhc2sgMiBFbmQnKTtcbiAgICAgICAgY29uc29sZS5sb2cobG9naW5NZWFzdXJlLmR1cmF0aW9uKTtcbiAgICAgICAgLy8gRW5kIG9mIHRoZSBsb2FkZXJcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnTG9hZGVyIEVuZCcpO1xuICAgICAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKCdUb3RhbCBMb2FkZXIgRHVyYXRpb24nLCAnTG9hZGVyIFN0YXJ0JywgJ0xvYWRlciBFbmQnKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGxvYWRlcjonLCBlcnJvcik7XG4gICAgfVxufVxuZnVuY3Rpb24gZG9Tb21lTG9uZ1J1bm5pbmdQcm9jZXNzKCkge1xuICAgIC8vIFJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBhIHRpbWVvdXQgdG8gc2ltdWxhdGUgYSBsb25nLXJ1bm5pbmcgcHJvY2Vzc1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0sIDEwMDApOyAvLyAxIHNlY29uZCB0aW1lb3V0IHRvIHNpbXVsYXRlIHRoZSBwcm9jZXNzIGR1cmF0aW9uXG4gICAgfSk7XG59XG5leHBvcnQgZGVmYXVsdCBsb2FkZXI7XG4iLCJpbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24uanMnO1xuaW1wb3J0IEltYWdlU3RvcmFnZXMgZnJvbSAnLi4vbW9kZWxzL2ltYWdlLm1vZGVsLmpzJztcbi8vIERlZmluZSBJbnN0YW5jZSBvZiBTZXF1ZWxpemVcbmNvbnN0IHNlcXVlbGl6ZSA9IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdHJ1bmNhdGVUYWJsZXMoKSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBzZXF1ZWxpemUudHJhbnNhY3Rpb24oKTtcbiAgICB0cnkge1xuICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cnVuY2F0ZSBvcGVyYXRpb24gd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICAgICAgICBhd2FpdCBJbWFnZVN0b3JhZ2VzLnRydW5jYXRlKHsgdHJhbnNhY3Rpb24gfSk7XG4gICAgICAgIC8vIElmIGV2ZXJ5dGhpbmcgaXMgc3VjY2Vzc2Z1bCwgY29tbWl0IHRoZSB0cmFuc2FjdGlvblxuICAgICAgICBhd2FpdCB0cmFuc2FjdGlvbi5jb21taXQoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1RhYmxlcyBoYXZlIGJlZW4gdHJ1bmNhdGVkLi4uJyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBJZiB0aGVyZSdzIGFuIGVycm9yLCByb2xsIGJhY2sgdGhlIHRyYW5zYWN0aW9uXG4gICAgICAgIGF3YWl0IHRyYW5zYWN0aW9uLnJvbGxiYWNrKCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHRydW5jYXRpbmcgdGFibGVzOicsIGVycm9yKTtcbiAgICB9XG59XG4iLCIvLyBJbXBvcnQgbmVjZXNzYXJ5IG1vZHVsZXNcbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcbi8vIEZ1bmN0aW9uIHRvIGdlbmVyYXRlIGEgaGFzaCBmcm9tIGEgc3RyaW5nXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVIYXNoKHN0cikge1xuICAgIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnbWQ1JykudXBkYXRlKHN0cikuZGlnZXN0KCdoZXgnKTtcbn1cbi8vIEZ1bmN0aW9uIHRvIGdlbmVyYXRlIGFuIGF2YXRhciBVUkwgYmFzZWQgb24gdXNlciBpbml0aWFsc1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQXZhdGFyVXJsKG5hbWUpIHtcbiAgICAvLyBFeHRyYWN0IHRoZSBpbml0aWFscyBmcm9tIHRoZSB1c2VyJ3MgbmFtZVxuICAgIGNvbnN0IGluaXRpYWxzID0gbmFtZVxuICAgICAgICAuc3BsaXQoJyAnKVxuICAgICAgICAubWFwKHBhcnQgPT4gcGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSlcbiAgICAgICAgLmpvaW4oJycpO1xuICAgIC8vIFVzZSBhIHNlcnZpY2UgdGhhdCBnZW5lcmF0ZXMgYXZhdGFycyB3aXRoIGluaXRpYWxzXG4gICAgY29uc3Qgc2l6ZSA9IDIwMDsgLy8gU3BlY2lmeSB0aGUgZGVzaXJlZCBzaXplIG9mIHRoZSBhdmF0YXJcbiAgICBjb25zdCBiYWNrZ3JvdW5kQ29sb3IgPSAncmFuZG9tJzsgLy8gVXNlIGEgcmFuZG9tIGJhY2tncm91bmQgY29sb3JcbiAgICBjb25zdCB0ZXh0Q29sb3IgPSAnZmZmJzsgLy8gVXNlIHdoaXRlIHRleHQgY29sb3JcbiAgICBjb25zdCBiYXNlVXJsID0gYGh0dHBzOi8vdWktYXZhdGFycy5jb20vYXBpLz9uYW1lPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGluaXRpYWxzKX0mc2l6ZT0ke3NpemV9JmJhY2tncm91bmQ9JHtiYWNrZ3JvdW5kQ29sb3J9JmNvbG9yPSR7dGV4dENvbG9yfWA7XG4gICAgcmV0dXJuIGJhc2VVcmw7XG59XG4iLCIvLyBzcmMvZXJyb3JIYW5kbGVyLnRzXG5pbXBvcnQgcHJvY2VzcyBmcm9tICdub2RlOnByb2Nlc3MnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCB7IGVudiB9IGZyb20gJy4uL2NvbmZpZy9pbmRleCc7XG5leHBvcnQgY29uc3QgaGFuZGxlRXJyb3IgPSAoZXJyLCByZXMpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAvLyBJbml0aWFsaXplIGVycm9ycyBvYmplY3RcbiAgICBsZXQgZXJyb3JzID0ge307XG4gICAgLy8gSGFuZGxlIHNwZWNpZmljIGVycm9ycyBjYXNlc1xuICAgIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygnTmV3IFVzZXIgdmFsaWRhdGlvbiBlcnJvcicpKSB7XG4gICAgICAgIGVycm9ycyA9IHtcbiAgICAgICAgICAgIG5hbWU6ICdOYW1lIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgICAgIHVzZXJuYW1lOiAndXNlcm5hbWUgaXMgcmVxdWlyZWQnLFxuICAgICAgICAgICAgZW1haWw6ICdlbWFpbCBpcyByZXF1aXJlZCcsXG4gICAgICAgICAgICBwYXNzd29yZDogJ3Bhc3N3b3JkIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGVyci5tZXNzYWdlLmluY2x1ZGVzKCdVc2VyUmVnaXN0cmF0aW9ucy5lbWFpbCcpKSB7XG4gICAgICAgIGVycm9ycy5lbWFpbCA9ICdFbWFpbCBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQnO1xuICAgIH1cbiAgICBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ2luY29ycmVjdCBlbWFpbCcpKSB7XG4gICAgICAgIGVycm9ycy5lbWFpbCA9ICdlbWFpbCBpcyBub3QgcmVnaXN0ZXJlZCc7XG4gICAgfVxuICAgIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygnSW5jb3JyZWN0IHBhc3N3b3JkJykpIHtcbiAgICAgICAgZXJyb3JzLnBhc3N3b3JkID0gJ3Bhc3N3b3JkIGlzIGluY29ycmVjdCc7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBTZXF1ZWxpemUgdmFsaWRhdGlvbiBlcnJvcnNcbiAgICBpZiAoZXJyLm5hbWUgPT09ICdTZXF1ZWxpemVWYWxpZGF0aW9uRXJyb3InICYmIGVyci5lcnJvcikge1xuICAgICAgICBlcnJvcnMgPSBlcnIuZXJyb3IucmVkdWNlKChhY2MsIGVycm9yKSA9PiB7XG4gICAgICAgICAgICBhY2NbZXJyb3IucGF0aF0gPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgIH1cbiAgICByZXMuc3RhdHVzKGVyci5jb2RlIHx8IDUwMCkuanNvbih7IGVycm9ycyB9KTtcbn07XG4vLyBGdW5jdGlvbiB0byBsb2cgZXJyb3JzIHRvIGEgZmlsZVxuZnVuY3Rpb24gbG9nRXJyb3JUb0ZpbGUoZXJyKSB7XG4gICAgY29uc3QgbG9nID0gYCR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfSAtICR7ZXJyLm1lc3NhZ2V9XFxuJHtlcnIuc3RhY2t9XFxuYDtcbiAgICBmcy5hcHBlbmRGaWxlU3luYygnZXJyb3IubG9nJywgbG9nKTtcbn1cbmNvbnN0IHVuaGFuZGxlZFJlamVjdGlvbnMgPSBuZXcgTWFwKCk7XG5wcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIFJlamVjdGlvbiBhdDonLCBwcm9taXNlLCAncmVhc29uOicsIHJlYXNvbik7XG4gICAgdW5oYW5kbGVkUmVqZWN0aW9ucy5zZXQocHJvbWlzZSwgcmVhc29uKTtcbn0pO1xucHJvY2Vzcy5vbigncmVqZWN0aW9uSGFuZGxlZCcsIHByb21pc2UgPT4ge1xuICAgIHVuaGFuZGxlZFJlamVjdGlvbnMuZGVsZXRlKHByb21pc2UpO1xufSk7XG4vLyBHbG9iYWwgZXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZSBmb3IgRXhwcmVzc1xuZXhwb3J0IGZ1bmN0aW9uIGdsb2JhbEVycm9ySGFuZGxlcihlcnIsIF9yZXEsIHJlcywgbmV4dCkge1xuICAgIGxvZ0Vycm9yVG9GaWxlKGVycik7XG4gICAgLy8gU2VuZCBnZW5lcmljIGVycm9yIHJlc3BvbnNlXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcsXG4gICAgfSk7XG4gICAgbmV4dChlcnIpO1xufVxuLy8gQ2F0Y2ggdW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uc1xucHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgKHJlYXNvbiwgcHJvbWlzZSkgPT4ge1xuICAgIGxvZ0Vycm9yVG9GaWxlKHJlYXNvbik7XG4gICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIFJlamVjdGlvbiBhdDonLCBwcm9taXNlLCAncmVhc29uOicsIHJlYXNvbik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xufSk7XG4vLyBDYXRjaCB1bmNhdWdodCBleGNlcHRpb25zXG5wcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIChlcnIpID0+IHtcbiAgICBsb2dFcnJvclRvRmlsZShlcnIpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VuY2F1Z2h0IEV4Y2VwdGlvbjonLCBlcnIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbn0pO1xucHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCAoZXJyKSA9PiB7XG4gICAgZnMud3JpdGVTeW5jKHByb2Nlc3Muc3RkZXJyLmZkLCBgQ2F1Z2h0IGV4Y2VwdGlvbjogJHtlcnJ9XFxuYCArIGBFeGNlcHRpb24gT3JpZ2luOiAke29yaWdpbn1cXG5gKTtcbn0pO1xuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1RoaXMgd2lsbCBzdGlsbCBydW4uJyk7XG59LCBlbnYuRVJST1JfVElNRU9VVCk7XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgZ2xvYmFsRXJyb3JIYW5kbGVyLFxuICAgIGhhbmRsZUVycm9yLFxufTtcbiJdLCJuYW1lcyI6WyJjb3JzU2NoZW1hRU5WIiwibG9hZCIsIkNPUlNfT1JJR0lOIiwiU3RyaW5nIiwiQ09SU19PUFRJT05TX1NVQ0NFU1NfU1RBVFVTIiwiTnVtYmVyIiwiQ09SU19DUkVERU5USUFMUyIsIkJvb2xlYW4iLCJDT1JTX01FVEhPRFMiLCJvayIsImNvcnNFTlYiLCJjb3JPcHRpb25zIiwib3JpZ2luIiwibWV0aG9kcyIsImNyZWRlbnRpYWxzIiwib3B0aW9uc1N1Y2Nlc3NTdGF0dXMiLCJkYXRhU2NoZW1hRU5WIiwiREJfSE9TVCIsIkRCX1BPUlQiLCJEQl9VU0VSIiwiREJfUEFTUyIsIkRCX05BTUUiLCJEQl9TT0NLRVRfUEFUSCIsIkRCX1NPQ0tFVF9USU1FT1VUIiwiREJfQ09NUFJFU1MiLCJEQl9ERUJVRyIsIkRCX1BFUk1JVF9MT0NBTF9JTkZJTEUiLCJEQl9UUkFDRSIsIkRCX0NIRUNLX0RVUExJQ0FURSIsIkRCX1NTTCIsIkRCX1NTTF9DQSIsIkRCX1NTTF9LRVkiLCJEQl9TU0xfQ0VSVCIsIkRCX0NPTk5FQ1RJT05fQVRUUklCVVRFUyIsIkRCX0NPTk5FQ1RJT05fVElNRU9VVCIsImRhdGFiYXNlRU5WIiwiand0U2NoZW1hRU5WIiwiSldUX1NFQ1JFVCIsIkpXVF9FWFBJUkVTX0lOIiwiSldUX1JFRlJFU0hfU0VDUkVUIiwiSldUX1JFRlJFU0hfRVhQSVJFU19JTiIsIkpXVF9SRUZSRVNIX01BWF9BR0UiLCJKV1RfQUxHT1JJVEhNIiwiSldUX0lTU1VFUiIsIkpXVF9NQVhfQUdFIiwiSldUX0hUVFBfT05MWSIsIkpXVF9TQU1FX1NJVEUiLCJKV1RfQ09PS0lFX05BTUUiLCJKV1RfU0VDVVJFIiwiand0RU5WIiwiY3JlYXRlUG9zdCIsImFzeW5jIiwicmVxIiwicmVzIiwiY2FwdGlvbiIsImxvY2F0aW9uIiwidGFncyIsImJvZHkiLCJ0b2tlbiIsImNvb2tpZXMiLCJqd3QiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImVyciIsImRlY29kZWRUb2tlbiIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyX2lkIiwiaWQiLCJ1c2VyIiwiZmluZEJ5UGsiLCJpbWFnZVJlY29yZCIsImZpbmRJbWFnZUJ5UmVmZXJlbmNlS2V5IiwibmV3UG9zdCIsImNyZWF0ZSIsImltYWdlVVJMIiwiaW1hZ2VVcmwiLCJjcmVhdGVkX0F0IiwiRGF0ZSIsImNyZWF0b3JfSWQiLCJlcnJvciIsImRlbGV0ZUZpbGUiLCJfcmVxIiwiaW1hZ2UiLCJmaW5kT25lIiwid2hlcmUiLCJkZXN0cm95IiwidXBkYXRlUG9zdCIsIm5ld0ltYWdlVXJsIiwicG9zdF9pZCIsInBhcnNlSW50IiwicXVlcnkiLCJwb3N0IiwicHJldmlld0ltYWdlVXJsIiwidXBkYXRlZFBvc3QiLCJ1cGRhdGUiLCJnZXRBbGxQb3N0cyIsInBvc3RzIiwiZmluZEFsbCIsImxpa2VQb3N0IiwiaXNOYU4iLCJuZXdMaWtlIiwiY3JlYXRlTGlrZSIsImxpa2VzX0NvdW50IiwibGlrZXNDb3VudCIsImxpa2UiLCJnZXRQb3N0QnlJZCIsImRlbGV0ZUxpa2VkUG9zdCIsImV4aXN0aW5nTGlrZSIsImN1cnJlbnRMaWtlcyIsInNhdmUiLCJzYXZlUG9zdCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3BsaXQiLCJuZXdTYXZlIiwiY3JlYXRlU2F2ZSIsInNhdmVEYXRlIiwiZGVsZXRlU2F2ZWRQb3N0IiwiZXhpc3RpbmdTYXZlIiwiZGVsZXRlUG9zdCIsImdldEluZmluaXRlUG9zdHMiLCJwYWdlIiwibGltaXQiLCJvZmZzZXQiLCJmaW5kQW5kQ291bnRBbGwiLCJvcmRlciIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsImNvdW50IiwidG90YWxDb3VudCIsInNlYXJjaFBvc3RzIiwic2VhcmNoVmFsdWUiLCJPcCIsInVzZXJSZWdpc3RlciIsIm5hbWUiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJFcnJvciIsIm5ld1VzZXIiLCJoYXNoZWRwYXNzd29yZCIsImNyZWF0ZWRBdCIsImNvb2tpZSIsImh0dHBPbmx5IiwibWF4QWdlIiwic2VjdXJlIiwic2FtZVNpdGUiLCJ1c2VyTG9naW4iLCJsb2dpblVzZXIiLCJyZWZyZXNoVG9rZW4iLCJzZXRIZWFkZXIiLCJsb2NhbHMiLCJ1c2VyTG9nb3V0IiwiYWNjZXNzVG9rZW4iLCJ1c2VySWQiLCJuZXdUb2tlbiIsImV4cGlyZXNJbiIsImFsZ29yaXRobSIsImlzc3VlciIsInJlcXVpcmVBdXRoIiwibmV4dCIsInByb2Nlc3MiLCJlbnYiLCJsaW1pdGVyIiwid2luZG93TXMiLCJSQVJFX0xJTUlUX1dJTkRPV19NUyIsIm1heCIsIk1BWCIsIlJBUkVfTElNSVRfTUVTU0FHRSIsInN0YXR1c0NvZGUiLCJSQVJFX0xJTUlUX0NPREUiLCJoYW5kbGVyIiwia2V5R2VuZXJhdG9yIiwiaXAiLCJyZXBsYWNlIiwic2VuZCIsInNvY2tldCIsInJlbW90ZUFkZHJlc3MiLCJqd3RHZW5lcmF0b3IiLCJwYXlsb2FkIiwiand0UmVmcmVzaCIsInZlcmlmeVVzZXIiLCJ3YWl0Rm9yREIiLCJzZXF1ZWxpemUiLCJhdHRlbXB0cyIsImF1dGhlbnRpY2F0ZSIsInN5bmMiLCJmb3JjZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImRiQ29uZmlnIiwiRGlhbGVjdCIsImhvc3QiLCJkYXRhYmFzZSIsInNvY2tldFBhdGgiLCJzb2NrZXRUaW1lb3V0IiwiY29tcHJlc3MiLCJkZWJ1ZyIsInBlcm1pdExvY2FsSW5maWxlIiwidHJhY2UiLCJjaGVja0R1cGxpY2F0ZSIsImNvbm5lY3RBdHRyaWJ1dGVzIiwiSlNPTiIsInBhcnNlIiwiY29ubmVjdGlvblRpbWVvdXQiLCJwb3J0Iiwic3NsIiwiZGlhbGVjdE9wdGlvbnMiLCJjYSIsInRvU3RyaW5nIiwia2V5IiwiY2VydCIsImNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIiwiU2VxdWVsaXplIiwiZGlhbGVjdCIsIl9fZGlybmFtZSIsImRpcm5hbWUiLCJmaWxlVVJMVG9QYXRoIiwiTWFyaWFEYkRpYWxlY3QiLCJtb2RlbHMiLCJpbXBvcnRNb2RlbHMiLCJhcHAiLCJnZXQiLCJzZW5kU3RhdHVzIiwiZW5kIiwidXNlIiwiaGVhZGVyIiwibWV0aG9kIiwiZXh0ZW5kZWQiLCJUcnVzdF9Qcm94eSIsIlRSVVNUX1BST1hZIiwibnVtYmVyT2ZQcm94aWVzIiwiTlVNQkVSX09GX1BST1hJRVMiLCJzZXQiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJjb250ZW50U2VjdXJpdHlQb2xpY3kiLCJNT1JHQU4iLCJJbWFnZVN0b3JhZ2VzIiwiTW9kZWwiLCJmaW5kSW1hZ2VCeUlkIiwidGhpcyIsInZhbHVlIiwiaW5pdCIsInR5cGUiLCJEYXRhVHlwZXMiLCJJTlRFR0VSIiwicHJpbWFyeUtleSIsImF1dG9JbmNyZW1lbnQiLCJhbGxvd051bGwiLCJTVFJJTkciLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJEQVRFIiwiZGVmYXVsdFZhbHVlIiwiTk9XIiwibW9kZWxOYW1lIiwidGltZXN0YW1wcyIsImFmdGVyQ3JlYXRlIiwiaGFzTWFueSIsImZvcmVpZ25LZXkiLCJvbkRlbGV0ZSIsIm9uVXBkYXRlIiwiYmVsb25nc1RvIiwidGhlbiIsImNhdGNoIiwiTGlrZXMiLCJhdHRyaWJ1dGVzIiwiZmluZExpa2VCeUlkIiwiZmluZExpa2VCeVJlZmVyZW5jZUtleSIsImZpbmRBbGxMaWtlc0J5UmVmZXJlbmNlS2V5IiwiZGVsZXRlTGlrZUJ5UmVmZXJlbmNlS2V5IiwiZnJlZXplVGFibGVOYW1lIiwiUG9zdHMiLCJhZmZlY3RlZENvdW50IiwidXBkYXRlZFBvc3RzIiwicmV0dXJuaW5nIiwiZ2V0UG9zdEJ5SUQiLCJTYXZlcyIsImNoZWNrSWZTYXZlZCIsInRhYmxlTmFtZSIsInRhcmdldEtleSIsIlVzZXJzIiwiZ2V0VXNlckJ5SUQiLCJmaXJzdE5hbWUiLCJ2YWxpZGF0ZSIsIm5vdEVtcHR5IiwibGFzdE5hbWUiLCJ1bmlxdWUiLCJpcyIsImxlbiIsImlzRW1haWwiLCJiaW8iLCJqb2luIiwiYXZhdGFyVXJsIiwicHJvZmlsZVBpYyIsImxhYmVsIiwibGFzdF9hY3Rpdml0eSIsInVwZGF0ZWRfYXQiLCJVc2VyUmVnaXN0cmF0aW9uSUQiLCJVVUlEIiwidXBkYXRlZEF0IiwiVXNlclJlZ2lzdHJhdGlvbiIsImxvZ291dFVzZXIiLCJyZXNldFBhc3N3b3JkIiwiYmVmb3JlQ3JlYXRlIiwic2FsdCIsImhhc2hlZFBhc3N3b3JkIiwic3BhY2VJbmRleCIsImxhc3RJbmRleE9mIiwiZmlyc3RfTmFtZSIsInNsaWNlIiwiYXZhdGFyIiwidXBzZXJ0Iiwicm91dGVyIiwic2luZ2xlIiwiZmlsZSIsInJlbGF0aXZlUGF0aCIsImZpbGVuYW1lIiwicG9zdElkIiwicHV0IiwiZGVsZXRlIiwiTk9ERV9FTlYiLCJSRVNQT05TRV9TVEFUVVMiLCJBUFBfTkFNRSIsInVwbG9hZERpciIsInJlY3Vyc2l2ZSIsInN0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsIl9maWxlIiwiY2IiLCJ1bmlxdWVTdWZmaXgiLCJub3ciLCJyb3VuZCIsInJhbmRvbSIsImZpZWxkbmFtZSIsIm9yaWdpbmFsbmFtZSIsImxpbWl0cyIsImZpbGVTaXplIiwiZmlsZUZpbHRlciIsImZpbGV0eXBlcyIsIm1pbWV0eXBlIiwidGVzdCIsImV4dG5hbWUiLCJ0b0xvd2VyQ2FzZSIsInZhbGlkYXRlTUlNRVR5cGUiLCJwYXRoIiwib3JpZ2luYWxGaWxlbmFtZSIsImFsbG93TWltZVR5cGVzIiwidmFsaWRhdGVNaW1lVHlwZSIsImRvU29tZUxvbmdSdW5uaW5nUHJvY2VzcyIsIlBlcmZvcm1hbmNlT2JzZXJ2ZXIiLCJpdGVtcyIsImdldEVudHJpZXMiLCJmb3JFYWNoIiwiZW50cnkiLCJkdXJhdGlvbiIsInBlcmZvcm1hbmNlIiwiY2xlYXJNYXJrcyIsIm9ic2VydmUiLCJtYXJrIiwiZGV0YWlsIiwibG9naW5NZWFzdXJlIiwibWVhc3VyZSIsInRydW5jYXRlVGFibGVzIiwidHJhbnNhY3Rpb24iLCJ0cnVuY2F0ZSIsImNvbW1pdCIsInJvbGxiYWNrIiwiZ2VuZXJhdGVBdmF0YXJVcmwiLCJpbml0aWFscyIsIm1hcCIsInBhcnQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImhhbmRsZUVycm9yIiwiZXJyb3JzIiwiaW5jbHVkZXMiLCJyZWR1Y2UiLCJhY2MiLCJjb2RlIiwibG9nRXJyb3JUb0ZpbGUiLCJ0b0lTT1N0cmluZyIsInN0YWNrIiwidW5oYW5kbGVkUmVqZWN0aW9ucyIsIk1hcCIsImdsb2JhbEVycm9ySGFuZGxlciIsInJlYXNvbiIsInByb21pc2UiLCJmZCIsIkVSUk9SX1RJTUVPVVQiXSwic291cmNlUm9vdCI6IiJ9