"use strict";exports.id=545,exports.ids=[545],exports.modules={1976:(e,s,t)=>{t.d(s,{v:()=>l});var r=t(2613);const a=(0,t(7546).load)({CORS_ORIGIN:String,CORS_OPTIONS_SUCCESS_STATUS:Number,CORS_CREDENTIALS:Boolean,CORS_METHODS:String}),{CORS_ORIGIN:o,CORS_OPTIONS_SUCCESS_STATUS:n,CORS_CREDENTIALS:i,CORS_METHODS:c}=a;r.strict.ok(o,"CORS origin should be present"),r.strict.ok(n,"CORS options success status should be present"),r.strict.ok(i,"CORS credentials should be present"),r.strict.ok(c,"CORS methods should be present");const d={CORS_ORIGIN:o,CORS_OPTIONS_SUCCESS_STATUS:n,CORS_CREDENTIALS:i,CORS_METHODS:c};t(818).config();const l={origin:d.CORS_ORIGIN,methods:d.CORS_METHODS,credentials:d.CORS_CREDENTIALS,optionsSuccessStatus:d.CORS_OPTIONS_SUCCESS_STATUS}},3085:(e,s,t)=>{t.d(s,{L:()=>U});var r=t(2613);const a=(0,t(7546).load)({DB_HOST:String,DB_PORT:Number,DB_USER:String,DB_PASS:String,DB_NAME:String,DB_SOCKET_PATH:String,DB_SOCKET_TIMEOUT:Number,DB_COMPRESS:Boolean,DB_DEBUG:Boolean,DB_PERMIT_LOCAL_INFILE:Boolean,DB_TRACE:Boolean,DB_CHECK_DUPLICATE:Boolean,DB_SSL:Boolean,DB_SSL_CA:String,DB_SSL_KEY:String,DB_SSL_CERT:String,REJECT_UNAUTHORIZED:Boolean,CIPHERS:String,MIN_VERSION:String,DB_CONNECTION_ATTRIBUTES:String,DB_CONNECTION_TIMEOUT:Number}),{DB_HOST:o,DB_PORT:n,DB_USER:i,DB_PASS:c,DB_NAME:d,DB_SOCKET_PATH:l,DB_SOCKET_TIMEOUT:u,DB_COMPRESS:y,DB_DEBUG:g,DB_PERMIT_LOCAL_INFILE:p,DB_TRACE:m,DB_CHECK_DUPLICATE:h,DB_SSL:E,DB_SSL_CA:f,DB_SSL_KEY:T,DB_SSL_CERT:w,REJECT_UNAUTHORIZED:_,CIPHERS:S,MIN_VERSION:A,DB_CONNECTION_ATTRIBUTES:I,DB_CONNECTION_TIMEOUT:v}=a;r.strict.ok(o,"Database host should be present"),r.strict.ok(n,"Database port should be present"),r.strict.ok(i,"Database user should be present"),r.strict.ok(c,"Database password should be present"),r.strict.ok(d,"Database name should be present");const U={DB_HOST:o,DB_PORT:n,DB_USER:i,DB_PASS:c,DB_NAME:d,DB_SOCKET_PATH:l,DB_SOCKET_TIMEOUT:u,DB_COMPRESS:y,DB_DEBUG:g,DB_PERMIT_LOCAL_INFILE:p,DB_TRACE:m,DB_CHECK_DUPLICATE:h,DB_CONNECTION_ATTRIBUTES:I,DB_CONNECTION_TIMEOUT:v,DB_SSL:E,DB_SSL_CA:f,DB_SSL_KEY:T,DB_SSL_CERT:w,REJECT_UNAUTHORIZED:_,CIPHERS:S,MIN_VERSION:A}},3101:(e,s,t)=>{t.d(s,{n:()=>E});var r=t(2613);const a=(0,t(7546).load)({JWT_SECRET:String,JWT_EXPIRES_IN:String,JWT_REFRESH_SECRET:String,JWT_REFRESH_EXPIRES_IN:String,JWT_REFRESH_MAX_AGE:Number,JWT_ALGORITHM:String,JWT_ISSUER:String,JWT_MAX_AGE:Number,JWT_HTTP_ONLY:Boolean,JWT_SAME_SITE:String,JWT_COOKIE_NAME:String,JWT_SECURE:Boolean}),{JWT_SECRET:o,JWT_EXPIRES_IN:n,JWT_REFRESH_SECRET:i,JWT_REFRESH_EXPIRES_IN:c,JWT_REFRESH_MAX_AGE:d,JWT_ALGORITHM:l,JWT_ISSUER:u,JWT_MAX_AGE:y,JWT_HTTP_ONLY:g,JWT_SAME_SITE:p,JWT_COOKIE_NAME:m,JWT_SECURE:h}=a;r.strict.ok(o,"JWT secret should be present"),r.strict.ok(n,"JWT expires in should be present"),r.strict.ok(i,"JWT refresh secret should be present"),r.strict.ok(c,"JWT refresh expires in should be present"),r.strict.ok(l,"JWT algorithm should be present"),r.strict.ok(u,"JWT issuer should be present"),r.strict.ok(y,"JWT max age should be present"),r.strict.ok(g,"JWT http only should be present"),r.strict.ok(p,"JWT same site should be present"),r.strict.ok(m,"JWT cookie name should be present"),r.strict.ok(h,"JWT secure should be present"),r.strict.ok(d,"JWT refresh max age should be present");const E={JWT_SECRET:o,JWT_EXPIRES_IN:n,JWT_REFRESH_SECRET:i,JWT_REFRESH_EXPIRES_IN:c,JWT_REFRESH_MAX_AGE:d,JWT_ALGORITHM:l,JWT_ISSUER:u,JWT_MAX_AGE:y,JWT_HTTP_ONLY:g,JWT_SAME_SITE:p,JWT_COOKIE_NAME:m,JWT_SECURE:h}},6184:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{CI:()=>D,E0:()=>S,Eu:()=>U,Zv:()=>A,bI:()=>C,gg:()=>h,hv:()=>R,kL:()=>f,lM:()=>I,pD:()=>p,t9:()=>T,tY:()=>w,ys:()=>v,zX:()=>E,zh:()=>_});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(9031),d=t(3101),l=t(6030),u=t(2502),y=t(2993),g=e([l,y]);[l,y]=g.then?(await g)():g,o().config();const p=async(e,s)=>{try{const{caption:t,location:r,tags:a}=e.body,o=e.cookies.jwt;if(!o)return void s.status(401).json({message:"Unauthorized"});i().verify(o,d.n.JWT_SECRET,(async(e,o)=>{if(e)return console.log(e.message),void s.status(401).json({message:"Unauthorized"});const n=o.id,i=await l.zW.findByPk(n);if(!i)return void s.status(404).json({message:"User not found"});const c=await l.my.findImageByReferenceKey("user_id",n);if(!c)return s.status(404).json({message:"Image not found"});const d=await l.AF.create({caption:t,imageURL:c.imageUrl,location:r,tags:a||"",created_At:new Date,creator_Id:i.id});if(d)return s.status(201).json({message:"Post created successfully",newPost:d}),d;s.status(400).json({message:"Error creating new post."})}))}catch(e){console.error("Error creating post:",e),s.status(500).json({message:"Internal server error"})}},m=async(e,s,t)=>{try{const e=await l.my.findOne({where:{imageUrl:t}});if(!e)return void s.status(404).json({message:"Image not found"});await e.destroy(),s.status(200).json({message:"Image deleted successfully"})}catch(e){console.error("Error deleting image:",e),s.status(500).json({message:"Internal server error"})}},h=async(e,s)=>{try{const{caption:t,location:r,tags:a,imageUrl:o}=e.body,n=parseInt(e.query.post_id,10);if(!n)return void s.status(400).json({message:"Post ID is required"});const c=e.cookies.jwt;if(!c)return void s.status(401).json({message:"Unauthorized"});i().verify(c,d.n.JWT_SECRET,(async(i,c)=>{if(i)return console.log(i.message),void s.status(401).json({message:"Unauthorized"});const d=c.id,u=await l.zW.findByPk(d);if(!u)return void s.status(404).json({message:"User not found"});const g=await l.AF.findOne({where:{id:n,creator_Id:d}});if(!g)return void s.status(404).json({message:"Post not found"});if(g.creator_Id!==u.id)return void s.status(403).json({message:"Unauthorized attempt!"});let p=g?.imageURL;if(o)try{const t=await(0,y.r3)(e,s);if(!t)return void s.status(404).json({message:"Image not found"});p=t}catch(e){return void s.status(401).json({message:"Unauthorized"})}const h=await g.update({id:g.id,caption:t,imageURL:p,location:r,tags:a,created_At:new Date});return h?(s.status(200).json({message:"Post updated successfully",post:h}),h):(o&&await m(e,s,o),void s.status(400).json({message:"Error updating post"}))}))}catch(e){console.error("Error updating post:",e),s.status(500).json({message:"Internal server error"})}},E=async(e,s)=>{try{const e=await l.AF.findAll({include:[{model:l.zW,as:"User",attributes:["id","username","email","profilePic","bio","firstName","lastName","imageURL","avatarUrl"]}]});s.status(200).json({posts:e})}catch(e){console.error("Error getting posts:",e),s.status(500).json({message:"Internal server error"})}},f=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id,o=parseInt(e.body.post_id,10);if(isNaN(o))return void s.status(400).json({message:"Invalid post ID"});if(!await l.zW.findByPk(a))return void s.status(404).json({message:"User not found"});const n=await l.AF.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});if(await l.Po.findOne({where:{post_id:o,user_id:a}}))return void s.status(400).json({message:"Post already liked"});const i=await l.Po.createLike({user_id:a,post_id:o,created_At:new Date});n.likes_Count||(n.likes_Count=0);const c=n.likes_Count+1;await n.update({likes_Count:c})?s.status(201).json({message:"Post liked successfully",like:i}):s.status(400).json({message:"Error liking post."})}))}catch(e){console.error("Error liking post:",e),s.status(500).json({message:"Internal server error"})}},T=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});if(!r.id)return void s.status(400).json({message:"User ID is required"});const a=parseInt(e.query.user_id,10);if(!a)return void s.status(400).json({message:"Post ID is required"});const o=parseInt(e.query.user_id,10),n=await l.zW.findByPk(o,{include:[{model:l.AF,attributes:["id","caption","imageURL","location","tags","created_At","likes_Count"]}]});if(!n)return void s.status(404).json({message:"User not found"});const i=await l.Po.findAll({where:{user_id:a}}),c=i.map((e=>e.post_id));s.status(200).json({user:n,likes:i,likedPosts:c,user_id:a,requestedUserId:o})}))}catch(e){console.error("Error getting likes:",e),s.status(500).json({message:"Internal server error"})}},w=async(e,s)=>{try{if(!parseInt(e.query.user_id,10))return void s.status(400).json({message:"post User ID is required"});const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});if(!await l.zW.findByPk(a))return void s.status(404).json({message:"user not found in user"});let o,n,i;try{({post_id:o,creator_id:n,requestedUserId:i}=(0,u.VU)(e))}catch(e){return void s.status(400).json({message:e.message})}if(!o)return void s.status(400).json({message:"Post ID is required"});const c=await l.AF.findByPk(o);c?s.status(200).json({post:c,creator_id:n,requestedUserId:i,post_id:o}):s.status(404).json({message:"Post not found here"})}))}catch(e){console.error("Error getting post:",e),s.status(500).json({message:"Internal server error"})}},_=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.body.post_id,10);if(!await l.zW.findByPk(a))return void s.status(404).json({message:"User not found"});const n=await l.AF.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});const i=await l.Po.findOne({where:{post_id:o,user_id:a}});i&&await i.destroy();let c=n.likes_Count||0;c>0&&(c-=1),await n.update({likes_Count:c}),await n.save(),s.status(200).json({message:i?"Like removed successfully":"Post liked successfully",post:n})}))}catch(e){console.error("Error toggling like:",e),s.status(500).json({message:"Internal server error"})}},S=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log("JWT verification error",t.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.body.post_id,10);if(!o)return void s.status(400).json({message:"Post ID is required"});if(!await l.zW.findByPk(a))return void s.status(404).json({message:"User not found"});if(!await l.AF.findByPk(o))return void s.status(404).json({message:"Post not found"});if(await l.xY.findOne({where:{post_id:o,user_id:a}}))return void s.status(400).json({message:"Post already saved"});const n=await l.xY.createSave({id:a,user_id:a,post_id:o,saveDate:new Date});n?s.status(201).json({message:"Post saved successfully",save:n}):s.status(400).json({message:"Error saving post."})}))}catch(e){console.error("Error saving post:",e),s.status(500).json({message:"Internal server error"})}},A=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log("JWT verification error",t.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});let o;try{({post_id:o}=(0,u.VU)(e))}catch(e){return void s.status(400).json({message:e.message})}if(!await l.zW.findByPk(a))return void s.status(404).json({message:"User not found"});if(!await l.AF.findByPk(o))return void s.status(404).json({message:"Post not found"});const n=await l.xY.findOne({where:{post_id:o,user_id:a}});n&&await n.destroy(),s.status(200).json({message:n?"Post unsaved successfully":"Post not saved"})}))}catch(e){console.error("Error deleting saved post:",e),s.status(500).json({message:"Internal server error"})}},I=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const r=t.id;if(!r)return void s.status(400).json({message:"User ID is required"});if(!await l.zW.findByPk(r))return void s.status(404).json({message:"User not found"});const a=await l.xY.getSavedPosts(r);s.status(200).json({savedPosts:a})}))}catch(e){console.error("Error getting saved posts:",e),s.status(500).json({message:"Internal server error"})}},v=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});if(!await l.zW.findByPk(a))return void s.status(404).json({message:"User not found"});const o=parseInt(e.body.post_id,10);if(!o)return void s.status(400).json({message:"Post ID is required from server"});const n=await l.AF.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});const i=await l.xY.findOne({where:{post_id:o,user_id:a}});if(i&&await i.destroy(),n.imageURL){const e=await l.my.findOne({where:{imageUrl:n.imageURL}});e&&await e.destroy()}await n.destroy(),s.status(200).json({message:"Post deleted successfully"})}))}catch(e){console.error("Error deleting post:",e),s.status(500).json({message:"Internal server error"})}},U=async(e,s)=>{try{const{page:t=0,limit:r=10}=e.query,a=t?parseInt(t,10)*parseInt(r,10):0,o=await l.AF.findAndCountAll({limit:parseInt(r,10),offset:a,order:[["created_At","DESC"]]});s.status(200).json({posts:o,page:parseInt(t,10),totalPages:Math.ceil(o.count/parseInt(r,10)),totalCount:o.count})}catch(e){console.error("Error getting posts:",e),s.status(500).json({message:"Internal server error"})}},D=async(e,s)=>{try{const{searchValue:t}=e.body;if(!t)return void s.status(400).json({message:"Search value is required"});const r=await l.AF.findAll({where:{[c.Op.or]:[{caption:{[c.Op.like]:`%${t}%`}},{tags:{[c.Op.like]:`%${t}%`}},{location:{[c.Op.like]:`%${t}%`}}]}});s.status(200).json({posts:r})}catch(e){console.error("Error searching posts:",e),s.status(500).json({message:"Internal server error"})}},R=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const r=t.id;if(!r)return void s.status(400).json({message:"User ID is required"});const a=await l.AF.findAll({where:{creator_Id:r}});s.status(200).json({posts:a})}))}catch(e){console.error("Error getting user posts:",e),s.status(500).json({message:"Internal server error"})}},C=async(e,s)=>{try{const e=await l.AF.findAll({order:[["likes_Count","DESC"]]});s.status(200).json({popularPosts:e})}catch(e){console.error("Error getting popular posts:",e),s.status(500).json({message:"Internal server error"})}};r()}catch(e){r(e)}}))},9024:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{Be:()=>h,TU:()=>g,Ub:()=>m,pH:()=>p});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(3101),d=t(16),l=t(6030),u=t(2300),y=e([l]);l=(y.then?(await y)():y)[0],o().config();const g=async(e,s)=>{try{const{name:t,username:r,email:a,password:o}=e.body;if(!(t&&r&&a&&o))return(0,u.H4)(new Error("New User validation error"),s);if(await l.hV.findOne({where:{email:a}}))return(0,u.H4)(new Error("UserRegistrations.email: User already exists "),s);const n=await l.hV.create({newUser:t,username:r,email:a,hashedpassword:o,createdAt:new Date}),i=(0,d.Jj)({id:n.id});s.cookie("jwt",i,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.status(201).json({id:n.id,name:n.newUser,username:n.username,email:n.email,token:i})}catch(e){(0,u.H4)(e,s)}},p=async(e,s)=>{try{const{email:t,password:r}=e.body;if(!t||!r)return(0,u.H4)(new Error("Login Validation Error!"),s);const a=await l.hV.loginUser(t,r);if(!a)throw new Error("User not found");const o=(0,d.Jj)({id:a.id}),n=(0,d.v3)({id:a.id});s.cookie("jwt",o,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.cookie("refreshToken",n,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_REFRESH_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.setHeader("Authorization",`Bearer ${o}`),s.locals.user=a,s.json({token:o,refreshToken:n,user:a.id})}catch(e){(0,u.H4)(e,s)}},m=async(e,s)=>{try{const t=e.cookies.jwt,r=e.cookies.refreshToken;if(!t&&!r)return void s.status(400).json({message:"No tokens provided!"});s.cookie("jwt","",{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:1}),s.cookie("refreshToken","",{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:1}),s.status(200).json({message:"User logged out"})}catch(e){(0,u.H4)(e,s)}},h=async(e,s)=>{const t=e.cookies.refreshToken;t?i().verify(t,c.n.JWT_REFRESH_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});try{const e=t.id;if(!e)return void s.status(400).json({message:"User ID is required"});const r=await l.hV.findByPk(e);if(!r)return s.status(404).json({message:"User not found"});const a=i().sign({id:r.id},c.n.JWT_SECRET,{expiresIn:c.n.JWT_EXPIRES_IN,algorithm:c.n.JWT_ALGORITHM,issuer:c.n.JWT_ISSUER});s.cookie("jwt",a,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_REFRESH_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.status(200).json({token:a,user:r.id})}catch(e){console.error("Error getting current user:",e),s.status(500).json({message:"Error getting current user"})}})):s.status(401).json({message:"Unauthorized"})};r()}catch(e){r(e)}}))},2993:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{pK:()=>l,r3:()=>d}),t(4469);var a=t(829),o=t.n(a),n=t(3101),i=t(6030),c=e([i]);i=(c.then?(await c)():c)[0];const d=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});o().verify(t,process.env.JWT_SECRET,(async(e,t)=>{if(e)return void s.status(401).json({message:"Unauthorized"});const r=t.id;if(!r)return void s.status(401).json({message:"Unauthorized"});if(!await i.zW.findByPk(r))return void s.status(401).json({message:"Unauthorized"});const a=await i.my.findImageByReferenceKey("user_id",r);a?s.status(200).json({imageUrl:a.imageUrl}):s.status(200).json({message:"No image found"})}))}catch(e){throw console.error("Error getting image preview:",e),new Error("Failed to get image preview")}},l=async e=>{try{const s=e.cookies.jwt;if(!s)throw new Error("Unauthorized");o().verify(s,n.n.JWT_SECRET,(async(e,s)=>{if(e)throw new Error("Unauthorized");const t=s.id;if(!t)throw new Error("Unauthorized");if(!await i.zW.findByPk(t))throw console.log("No user found"),new Error("Unauthorized");const r=await i.V.findProfilePicByReferenceKey("user_id",t);return r?(console.log("Profile Pic:",r),r):(console.log("No profile pic found"),null)}))}catch(e){throw console.error("Error getting profile pic preview:",e),new Error("Failed to get profile pic preview")}};r()}catch(e){r(e)}}))},4361:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{CF:()=>g,HW:()=>E,TK:()=>m,_q:()=>h,k7:()=>p,ye:()=>f});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(9031),d=t(3101),l=t(6030),u=t(2502),y=e([l]);l=(y.then?(await y)():y)[0],o().config();const g=async(e,s)=>{const t=e.cookies.jwt;if(t)try{i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});if(!await l.zW.findByPk(a))return void s.status(404).json({message:"User not found"});const o=parseInt(e.query.limit,10)||10,n=await l.zW.findAll();if(!n)return void s.status(404).json({message:"Users not found"});if(!n||0===n.length)return void s.status(404).json({message:"Users not found"});const i=n.reduce(((e,s)=>(e[s.id]=s,e)),{});s.status(200).json({user:i,limit:o})}))}catch(e){console.error("Error getting all users:",e),s.status(500).json({message:"Internal server error!"})}else s.status(401).json({message:"Unauthorized"})},p=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID (decodedToken) is required"});if(a!=a)return void s.status(403).json({message:"Unauthorized attempt!"});const o=parseInt(e.query.requestedUserId,10)||10,n=await l.zW.findByPk(o);n?s.status(200).json({user:n,users_id:a,user_id:a}):s.status(404).json({message:"User not found"})}))}catch(e){console.error("Error getting user by ID:",e),s.status(500).json({message:"Internal server error"})}},m=async(e,s)=>{try{const{profilePic:t,newUser:r,...a}=e.body,o=e.cookies.jwt;if(!o)return console.log("Unauthorized - No token"),s.status(401).json({message:"Unauthorized!"});i().verify(o,d.n.JWT_SECRET,(async(e,o)=>{if(e)return console.log("Unauthorized - Invalid token"),console.log(e.message),s.status(401).json({message:"Unauthorized"});const n=o.id;if(!n)return console.log("Unauthorized - No user ID"),s.status(401).json({message:"Unauthorized"});const i=await l.zW.findByPk(n);if(!i)return console.log("User not found"),s.status(404).json({message:"User not found"});if(i.id!==n)return console.log("Unauthorized attempt"),s.status(403).json({message:"Unauthorized attempt!"});if(0===Object.keys(a).length&&!t)return console.log("No fields to update"),s.status(400).json({message:"No fields to update"});if(r){const e=r?.lastIndexOf(" "),s=-1!==e?r.slice(0,e):r,t=-1!==e?r.slice(e+1):"";a.firstName=s,a.lastName=t}let c=i?.profilePic;if(c&&t){if(!await l.V.findProfilePicByReferenceKey("user_id",n))return console.log("No image found"),s.status(404).json({message:"No image found"});c=t}const d={...a,profilePic:c},[u,y]=await l.zW.updateUser(n,d);return 0===u?(console.log("Error updating user:",y),s.status(500).json({message:"Error updating user"})):s.status(200).json({updatedUsers:y,profilePic:c})}))}catch(e){return console.error("Error updating user:",e),s.status(500).json({message:"Internal server error"})}return m},h=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});let o,n,i;try{({post_id:o,creator_id:n,user_id:i}=(0,u.VU)(e))}catch(e){return void s.status(400).json({message:e.message})}const c=await l.zW.getUserByID(a);if(!c)return void s.status(404).json({message:"User not found"});const d=await l.zW.getUserProfile(i||a);if(!c)return void s.status(404).json({message:"user profile not found"});if(c.id!==a)return void s.status(403).json({message:"Unauthorized attempt!"});const y=await l.AF.findByPk(o);y?s.status(200).json({user_id:i,post:y,creator_id:n,user:c,userPostData:d}):s.status(404).json({message:"Post not found"})}))}catch(e){console.error("Error getting user by ID:",e),s.status(500).json({message:"Internal server error"})}},E=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(e,t)=>{if(e)return console.log(e.message),void s.status(401).json({message:"Unauthorized"});const r=t.id;if(!r)return void s.status(400).json({message:"User ID is required"});const a=await l.zW.findByPk(r);a?a.id===r?s.status(200).json({user:a,user_id:r}):s.status(403).json({message:"Unauthorized attempt! User id do not match."}):s.status(400).json({message:"User not found"})}))}catch(e){console.error("Error in getCurrentUser:",e.message),s.status(400).json({message:e.message})}},f=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.query.limit,10)||10,n=parseInt(e.query.offset,10)||0;try{const e=await l.zW.findAll({where:{id:{[c.Op.ne]:a}},limit:o,offset:n});if(!e)return void s.status(404).json({message:"Users not found"});if(!e||0===e.length)return void s.status(404).json({message:"Users not found"});const t=e.reduce(((e,s)=>(e[s.id]=s,e)),{});s.status(200).json({user:t,limit:o,offset:n})}catch(e){console.error("Error getting all users:",e),s.status(500).json({message:"Internal server error!"})}}))}catch(e){console.error("Error getting all users:",e),s.status(500).json({message:"Internal server error!"})}};r()}catch(e){r(e)}}))},1486:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{b:()=>u});var a=t(5486),o=t.n(a),n=t(3101),i=t(80),c=t(2300),d=t(16),l=e([i]);i=(l.then?(await l)():l)[0];const u=async(e,s)=>{try{const{email:t,password:r}=e.body;if(!t||!r)return(0,c.H4)(new Error("Login Validation Error!"),s);const a=await i.A.loginUser(t,r);if(!a)throw new Error("Admin not found");if(!await o().compare(r,a.hashedpassword))throw new Error("Incorrect password");const l=(0,d.Jj)({id:a.id}),u=(0,d.v3)({id:a.id});s.cookie("jwt",l,{httpOnly:n.n.JWT_HTTP_ONLY,maxAge:1e3*n.n.JWT_MAX_AGE,secure:n.n.JWT_SECURE,sameSite:"lax"}),s.cookie("refreshToken",u,{httpOnly:n.n.JWT_HTTP_ONLY,maxAge:1e3*n.n.JWT_REFRESH_MAX_AGE,secure:n.n.JWT_SECURE,sameSite:"lax"}),s.setHeader("Authorization",`Bearer ${l}`),s.locals.user=a,s.json({token:l,refreshToken:u,user:a.id})}catch(e){(0,c.H4)(e,s)}};r()}catch(e){r(e)}}))},7270:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{q:()=>l});var a=t(829),o=t.n(a),n=t(3101),i=t(9389),c=t(80),d=e([i,c]);[i,c]=d.then?(await d)():d;const l=async(e,s,t)=>{try{const r=e.cookies.jwt;if(!r)return s.locals.user=null,t();o().verify(r,n.n.JWT_SECRET,(async(e,r)=>{if(e)return console.error("JWT verification error:",e.message),s.locals.user=null,t();const a=r.id;if(!a)return void s.status(400).json({message:"admin id token is required"});const o=await c.A.findByPk(a);if(o)if(o===a){try{const e=await i.A.findByPk(a);console.log("amin:",a),e&&"admin"===e.role?s.locals.user=e:s.locals.user=null}catch(e){console.error("Error retrieving user:",e),s.locals.user=null}s.status(200).json({user:s.locals.user,loggedInAdmin:o,admin:a}),s.locals.user=null,t()}else s.status(401).json({message:"Unauthorized access to admin route"});else s.status(400).json({message:"Current admin not found"})}))}catch(e){console.error("Error verifying user:",e),s.locals.user=null}};r()}catch(e){r(e)}}))},2785:(e,s,t)=>{t.d(s,{TA:()=>n});var r=t(1763),a=t.n(r),o=t(9469);const n=a()({windowMs:o._.RARE_LIMIT_WINDOW_MS,max:o._.MAX,message:o._.RARE_LIMIT_MESSAGE,statusCode:o._.RARE_LIMIT_CODE,handler:(e,s)=>{s.status(o._.RARE_LIMIT_CODE).json({message:o._.RARE_LIMIT_MESSAGE})},keyGenerator:async(e,s)=>e.ip?e.ip.replace(/:\d+[^:]*$/,""):(s.status(500).send({message:"Warning: request.ip is missing!"}),e.socket.remoteAddress)})},16:(e,s,t)=>{t.d(s,{Jj:()=>c,v3:()=>d});var r=t(818),a=t.n(r),o=t(829),n=t.n(o),i=t(3101);a().config();const c=e=>{try{return n().sign(e,i.n.JWT_SECRET,{algorithm:i.n.JWT_ALGORITHM,expiresIn:i.n.JWT_EXPIRES_IN,issuer:i.n.JWT_ISSUER})}catch(e){throw new Error("Error generating JWT")}},d=e=>{try{return n().sign(e,i.n.JWT_REFRESH_SECRET,{algorithm:i.n.JWT_ALGORITHM,expiresIn:i.n.JWT_REFRESH_EXPIRES_IN,issuer:i.n.JWT_ISSUER})}catch(e){throw new Error("Error generating JWT")}}},2051:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{FH:()=>u});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(3101),d=t(6153),l=e([d]);d=(l.then?(await l)():l)[0],o().config();const u=async(e,s,t)=>{try{const r=e.cookies.jwt;if(!r)return s.locals.user=null,t();i().verify(r,c.n.JWT_SECRET,(async(e,r)=>{if(e)return console.error("JWT verification error:",e.message),s.locals.user=null,t();try{const e=await d.A.findByPk(r.id);console.log("decodedToken:",r),s.locals.user=e||null}catch(e){console.error("Error retrieving user:",e),s.locals.user=null}t()}))}catch(e){console.error("Error verifying user:",e),s.locals.user=null}};r()}catch(e){r(e)}}))},1125:(e,s,t)=>{t.d(s,{r:()=>a});var r=t(128);async function a(){const e=(0,r.J)();let s=0;for(;s<10;)try{return await e.authenticate(),console.log("Database connection established, Starting Server....."),await e.sync({force:!0}),console.log("Drop and re-sync db."),e}catch(e){console.error("Database connection failed:",e),s++,await new Promise((e=>setTimeout(e,1e3)))}throw console.error("Max attempts reached, database connection failed"),new Error("Database connection failed")}},128:(e,s,t)=>{t.d(s,{J:()=>c});var r=t(3024),a=t.n(r),o=t(9031),n=t(3085);const i={Dialect:"mariadb",host:n.L.DB_HOST||"localhost",username:n.L.DB_USER||"metalbrain",password:n.L.DB_PASS||"password",database:n.L.DB_NAME||"FindSomeOne",socketPath:n.L.DB_SOCKET_PATH||"/var/run/mysqld/mysqld.sock",socketTimeout:n.L.DB_SOCKET_TIMEOUT||1e3,compress:n.L.DB_COMPRESS||!1,debug:n.L.DB_DEBUG||!1,permitLocalInfile:n.L.DB_PERMIT_LOCAL_INFILE||!1,trace:n.L.DB_TRACE||!0,checkDuplicate:n.L.DB_CHECK_DUPLICATE||!1,connectAttributes:JSON.parse(n.L.DB_CONNECTION_ATTRIBUTES||"{}"),connectionTimeout:n.L.DB_CONNECTION_TIMEOUT||1e3,port:n.L.DB_PORT||3306,ssl:n.L.DB_SSL||!1,dialectOptions:{ssl:{ca:n.L.DB_SSL_CA?a().readFileSync(n.L.DB_SSL_CA).toString():"",key:n.L.DB_SSL_KEY?a().readFileSync(n.L.DB_SSL_KEY).toString():"",cert:n.L.DB_SSL_CERT?a().readFileSync(n.L.DB_SSL_CERT).toString():""}},rejectUnauthorized:n.L.REJECT_UNAUTHORIZED||!0,ciphers:n.L.CIPHERS||"ECDHE-R",minVersion:n.L.MIN_VERSION||"TLSv1.2"};function c(){return new o.Sequelize(i.database,i.username,i.password,{host:i.host,dialect:i.Dialect,port:i.port,ssl:i.ssl,dialectOptions:i.dialectOptions})}},3121:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>d});var a=t(423),o=t(5520),n=t(6760),i=t(3136),c=t(3085);const e=(0,n.dirname)((0,i.fileURLToPath)("file:///home/babsdevsys/appV-1/src/server/loaders/dataLoader/sequlize.ts")),d=new a.Sequelize({dialect:o.MariaDbDialect,host:c.L.DB_HOST,user:c.L.DB_USER,password:c.L.DB_PASS,database:c.L.DB_NAME,port:c.L.DB_PORT,ssl:c.L.DB_SSL,models:await(0,a.importModels)(e+"/src/server/models/**/*.model.{ts,js}")});r()}catch(e){r(e)}}),1)},6633:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>w});var a=t(290),o=t(3268),n=t.n(o),i=t(6898),c=t.n(i),d=t(7252),l=t.n(d),u=t(2525),y=t.n(u),g=t(6928),p=t.n(g),m=t(9469),h=t(4388),E=t(2300),f=t(2785),T=e([h]);async function w({app:e}){e.use(((e,s,t)=>(s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),"OPTIONS"===e.method?s.sendStatus(204):t()))),e.use(((e,s,t)=>{(new a.AsyncLocalStorage).run(new Map,t)})),e.use(n().urlencoded({extended:!0})),e.use(l().json()),e.use(l().urlencoded({extended:!0})),e.use(c()()),e.use(n().json()),e.use(l().static(p().join(__dirname,"dist"))),e.use("/assets",l().static(p().join(__dirname,"assets")));const s=m._.TRUST_PROXY||"false",t=m._.NUMBER_OF_PROXIES||1;return s?e.set("trust proxy",!0):"false"===s?e.set("trust proxy",!1):(e.set("trust proxy",s),e.set("trust proxy",t)),e.set("trust proxy",t),e.get("/ip",((e,s)=>s.send(e.ip))),e.use(y()({contentSecurityPolicy:!1})),e.use(f.TA),e.use(h.Q),e.use(E.sh),e}h=(T.then?(await T)():T)[0],r()}catch(_){r(_)}}))},1545:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.r(s),t.d(s,{default:()=>u});var a=t(2273),o=t(2541),n=t(6854),i=t(1125),c=t(3121),d=t(6633),l=e([o,c,d]);async function u({app:e}){n.E.flushAll(),await(0,o.K)(),await(0,i.r)(),c.A,await(0,d.A)({app:e}),(0,a.A)(),console.log("Express Server Intialized!")}[o,c,d]=l.then?(await l)():l,r()}catch(y){r(y)}}))},9389:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>n});var a=t(9031);const e=(0,t(128).J)();class o extends a.Model{static async loginAdmin(e,s){return await this.findOne({where:{email:e,hashedpassword:s}})}static async logoutUser(e){return await this.findOne({where:{email:e}})}static async resetPassword(e,s){return await this.findOne({where:{email:e,hashedpassword:s}})}}o.init({id:{type:a.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},firstName:{type:a.DataTypes.STRING,allowNull:!0},lastName:{type:a.DataTypes.STRING,allowNull:!0},username:{type:a.DataTypes.STRING,allowNull:!1},email:{type:a.DataTypes.STRING,allowNull:!1},hashedpassword:{type:a.DataTypes.STRING,allowNull:!1},createdAt:{type:a.DataTypes.DATE,allowNull:!1,defaultValue:a.DataTypes.NOW},role:{type:a.DataTypes.STRING,allowNull:!1,defaultValue:"admin"},avatarUrl:{type:a.DataTypes.STRING,allowNull:!0}},{sequelize:e,tableName:"admin"}),await e.sync({force:!1}).then((()=>{console.log("New Admin synced successfully")})).catch((e=>{console.error("Error syncing Admin Table:",e)}));const n=o;r()}catch(e){r(e)}}),1)},5595:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>u});var a=t(9031),o=t(128),n=t(452),i=t(6153),c=e([n,i]);[n,i]=c.then?(await c)():c;const d=(0,o.J)();class l extends a.Model{static async findImageById(e){return await this.findByPk(e)}static async findImageByReferenceKey(e,s){try{return await this.findOne({where:{[e]:s},order:[["created_At","DESC"]]})}catch(t){throw console.error(`Error finding image by reference key: ${e}, value: ${s}`,t),t}}}l.init({id:{type:a.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},imageUrl:{type:a.DataTypes.STRING,allowNull:!0},user_id:{type:a.DataTypes.INTEGER,references:{model:"Users",key:"id"}},post_id:{type:a.DataTypes.INTEGER,references:{model:"Posts",key:"id"}},created_At:{type:a.DataTypes.DATE,allowNull:!1,defaultValue:a.DataTypes.NOW}},{sequelize:d,modelName:"ImageStorages",timestamps:!1}),l.afterCreate((async e=>{const s=await i.A.findByPk(e.user_id);s&&(s.imageURL=e.imageUrl,await s.save())})),i.A.hasMany(l,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),n.A.hasMany(l,{foreignKey:"post_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),l.belongsTo(i.A,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),l.belongsTo(n.A,{foreignKey:"post_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),await d.sync({force:!1}).then((()=>{console.log("New Image synced successfully")})).catch((e=>{console.error("Error syncing new image:",e)}));const u=l;r()}catch(e){r(e)}}),1)},6030:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{AF:()=>n.A,Po:()=>o.A,V:()=>i.A,hV:()=>l.A,my:()=>a.A,xY:()=>c.A,zW:()=>d.A});var a=t(5595),o=t(8995),n=t(452),i=t(9609),c=t(581),d=t(6153),l=t(80),u=e([a,o,n,i,c,d,l]);[a,o,n,i,c,d,l]=u.then?(await u)():u,d.A,n.A,o.A,c.A,i.A,a.A,l.A,r()}catch(e){r(e)}}))},8995:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>u});var a=t(9031),o=t(128),n=t(452),i=t(6153),c=e([n,i]);[n,i]=c.then?(await c)():c;const d=(0,o.J)();class l extends a.Model{static async createLike(e){return await this.create(e)}static async findLikeById(e){return await this.findByPk(e)}static async findLikeByReferenceKey(e,s){return await this.findOne({where:{[e]:s}})}static async findAllLikesByReferenceKey(e,s){return await this.findAll({where:{[e]:s}})}static async deleteLikeByReferenceKey(e,s){await this.destroy({where:{[e]:s}})}}l.init({id:{type:a.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},user_id:{type:a.DataTypes.INTEGER,allowNull:!1,references:{model:"Users",key:"id"}},post_id:{type:a.DataTypes.INTEGER,allowNull:!1,references:{model:"Posts",key:"id"}},created_At:{type:a.DataTypes.DATE,allowNull:!0}},{sequelize:d,modelName:"Likes",timestamps:!1,freezeTableName:!0}),i.A.hasMany(l,{foreignKey:"user_id",onDelete:"CASCADE"}),l.belongsTo(i.A,{foreignKey:"user_id"}),n.A.hasMany(l,{foreignKey:"post_id",onDelete:"CASCADE"}),l.belongsTo(n.A,{foreignKey:"post_id"}),l.sync({force:!1}).then((()=>{console.log("Like synced successfully")})).catch((e=>{console.error("Error syncing like:",e)}));const u=l;r()}catch(e){r(e)}}))},452:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>l});var a=t(9031),o=t(128),n=t(6153),i=e([n]);n=(i.then?(await i)():i)[0];const c=(0,o.J)();class d extends a.Model{static async createPost(e){return await this.create(e)}static async updatePost(e,s){const[t,r]=await this.update(s,{where:{id:e},returning:!0});return[t,r]}static async deletePost(e){const s=await this.findOne({where:{id:e}});s&&await s.destroy()}static async getAllPosts(){return await this.findAll()}static async getInfinitePosts(e,s){return await this.findAll({offset:e,limit:s})}static async getPostByID(e){return await this.findOne({where:{id:e}})}static async getUserPosts(e){return await this.findAll({where:{creator_Id:e}})}static async getSavedPost(e){return await this.findOne({where:{id:e}})}static async getPostByReferenceID(e){return await this.findOne({where:{creator_Id:e}})}}d.init({id:{type:a.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},caption:{type:a.DataTypes.STRING,allowNull:!1},imageURL:{type:a.DataTypes.STRING,allowNull:!0},location:{type:a.DataTypes.STRING,allowNull:!0},tags:{type:a.DataTypes.STRING,allowNull:!1},likes_Count:{type:a.DataTypes.INTEGER,allowNull:!0},created_At:{type:a.DataTypes.DATE,allowNull:!0},creator_Id:{type:a.DataTypes.INTEGER,allowNull:!1,references:{model:"Users",key:"id"}}},{sequelize:c,modelName:"Posts",timestamps:!1}),d.createPost=async function(e){try{return await this.create(e)}catch(e){throw console.error("Error creating new post:",e),e}},d.updatePost=async function(e,s){try{const[t,r]=await this.update(s,{where:{id:e},returning:!0});return[t,r]}catch(e){throw console.error("Error updating post:",e),e}},d.getInfinitePosts=async function(e,s){try{return await this.findAll({offset:e,limit:s})}catch(e){throw console.error("Error getting infinite posts:",e),e}},d.getPostByID=async function(e){try{return await this.findOne({where:{id:e}})}catch(e){throw console.error("Error getting post by ID:",e),e}},d.getUserPosts=async function(e){try{return await this.findAll({where:{creator_Id:e}})}catch(e){throw console.error("Error getting user posts:",e),e}},n.A.hasMany(d,{foreignKey:"creator_Id",onDelete:"CASCADE",onUpdate:"CASCADE"}),d.belongsTo(n.A,{foreignKey:"creator_Id",onDelete:"CASCADE",onUpdate:"CASCADE"}),await c.sync({force:!1}).then((()=>{console.log("Post synced successfully")})).catch((e=>{console.error("Error syncing Post:",e)}));const l=d;r()}catch(e){r(e)}}),1)},9609:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>l});var a=t(9031),o=t(128),n=t(6153),i=e([n]);n=(i.then?(await i)():i)[0];const c=(0,o.J)();class d extends a.Model{static async findProfilePictureById(e){return await this.findByPk(e)}static async getProfilePicByReferenceID(e){return await this.findOne({where:{user_id:e}})}static async findProfilePicByReferenceKey(e,s){try{return await this.findOne({where:{[e]:s},order:[["created_At","DESC"]]})}catch(t){throw console.error(`Error finding profile image by reference key: ${e}, value: ${s}`,t),t}}}d.init({id:{type:a.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},user_id:{type:a.DataTypes.INTEGER,allowNull:!1,references:{model:"Users",key:"id"},onUpdate:"CASCADE",onDelete:"CASCADE"},profilePic:{type:a.DataTypes.STRING,allowNull:!1},created_At:{type:a.DataTypes.DATE,allowNull:!1,defaultValue:a.DataTypes.NOW},updated_At:{type:a.DataTypes.DATE,allowNull:!1,defaultValue:a.DataTypes.NOW}},{sequelize:c,modelName:"ProfilePictures",timestamps:!1,updatedAt:"updatedAt",createdAt:"createdAt"}),n.A.hasOne(d,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),d.belongsTo(n.A,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),d.sync({force:!1}).then((()=>{console.log("Profile Pic synced successfully")})).catch((e=>{console.error("Error syncing creating profile pic table:",e)}));const l=d;r()}catch(e){r(e)}}))},581:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>u});var a=t(9031),o=t(128),n=t(452),i=t(6153),c=e([n,i]);[n,i]=c.then?(await c)():c;const d=(0,o.J)();class l extends a.Model{static async createSave(e){return await this.create(e)}static async checkIfSaved(e,s){return!!await this.findOne({where:{user_id:e,post_id:s}})}static async deleteSavedPost(e){const s=await this.findOne({where:{post_id:e}});s&&await s.destroy()}static async getSavedPosts(e){return await this.findAll({where:{user_id:e},include:[{model:n.A,as:"Post"}]})}}l.init({id:{type:a.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},user_id:{type:a.DataTypes.INTEGER,references:{model:"Users",key:"id"}},post_id:{type:a.DataTypes.INTEGER,references:{model:"Posts",key:"id"}},saveDate:{type:a.DataTypes.DATE,allowNull:!0,defaultValue:a.DataTypes.NOW}},{sequelize:d,tableName:"Saves",timestamps:!1,freezeTableName:!0,indexes:[{unique:!0,fields:["user_id","post_id"]}]}),l.deleteSavedPost=async function(e){const s=await this.findOne({where:{post_id:e}});s&&await s.destroy()},l.belongsTo(n.A,{foreignKey:"post_id",targetKey:"id",onDelete:"RESTRICT"}),l.belongsTo(i.A,{foreignKey:"user_id",targetKey:"id"}),l.sync({force:!1}).then((()=>{console.log("Save Post synced successfully")})).catch((e=>{console.error("Error syncing Save post:",e)}));const u=l;r()}catch(e){r(e)}}))},6153:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>n});var a=t(9031);const e=(0,t(128).J)();class o extends a.Model{static async getUserByID(e){return await this.findOne({where:{id:e}})}static async getAllUsers(e,s){return await this.findAll({limit:e,attributes:s})}static async getUserProfile(e){return await this.findOne({where:{id:e}})}static async updateUser(e,s){const[t,r]=await this.update(s,{where:{id:e},returning:!0});return[t,r]}}o.init({id:{type:a.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},firstName:{type:a.DataTypes.STRING,allowNull:!1,validate:{notEmpty:!0}},lastName:{type:a.DataTypes.STRING,allowNull:!1,validate:{notEmpty:!0}},username:{type:a.DataTypes.STRING,allowNull:!1,unique:!0,validate:{is:/^[a-zA-Z0-9_]*$/,len:[3,20]}},email:{type:a.DataTypes.STRING,unique:!0,allowNull:!1,validate:{isEmail:!0,len:[5,50],notEmpty:!0}},hashedpassword:{type:a.DataTypes.STRING,allowNull:!1},status:{type:a.DataTypes.STRING,allowNull:!1,defaultValue:"unverified"},bio:{type:a.DataTypes.STRING,defaultValue:"This is a new user."},join:{type:a.DataTypes.DATE,defaultValue:a.DataTypes.NOW},avatarUrl:{type:a.DataTypes.STRING},imageURL:{type:a.DataTypes.STRING},profilePic:{type:a.DataTypes.STRING},label:{type:a.DataTypes.STRING,defaultValue:"New User"},last_activity:{type:a.DataTypes.DATE,defaultValue:a.DataTypes.NOW},updated_at:{type:a.DataTypes.DATE,defaultValue:a.DataTypes.NOW},UserRegistrationID:{type:a.DataTypes.UUID,allowNull:!0,references:{model:"UserRegistration",key:"id"}}},{sequelize:e,modelName:"Users",timestamps:!1,updatedAt:"updated_at"}),await e.sync({force:!1}).then((()=>{console.log("New User synced successfully")})).catch((e=>{console.error("Error syncing new user:",e)}));const n=o;r()}catch(e){r(e)}}),1)},80:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>g});var a=t(5486),o=t.n(a),n=t(9031),i=t(128),c=t(8635),d=t(6153),l=e([d]);d=(l.then?(await l)():l)[0];const u=(0,i.J)();class y extends n.Model{static async loginUser(e,s){return await this.findOne({where:{email:e,hashedpassword:s}})}static async logoutUser(e){return await this.findOne({where:{email:e}})}static async resetPassword(e,s){return await this.findOne({where:{email:e,hashedpassword:s}})}}y.init({id:{type:n.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},newUser:{type:n.DataTypes.STRING,allowNull:!1},username:{type:n.DataTypes.STRING,allowNull:!1,validate:{len:[3,20]}},email:{type:n.DataTypes.STRING,allowNull:!1,unique:!0,validate:{isEmail:!0,len:[7,100]}},hashedpassword:{type:n.DataTypes.STRING,allowNull:!1},createdAt:{type:n.DataTypes.DATE,allowNull:!1,defaultValue:n.DataTypes.NOW}},{sequelize:u,modelName:"UserRegistration",createdAt:"createdAt",timestamps:!1,freezeTableName:!0}),y.beforeCreate((async e=>{try{if(e){const s=o().genSaltSync(10),t=await o().hash(String(e.hashedpassword),s);e.hashedpassword=t}}catch(e){throw console.error("Error hashing password:",e),new Error("Error hashing password")}})),y.afterCreate((async e=>{try{if(e){const s=e.newUser?.lastIndexOf(" "),t=-1!==s?e.newUser?.slice(0,s):e.newUser,r=-1!==s?e.newUser?.slice(s??1):e.newUser,a=(0,c.q)(e.username);await d.A.upsert({firstName:t,lastName:r,username:e.username,email:e.email,hashedpassword:e.hashedpassword,status:"unverified",bio:"Write something interesting about yourself.",join:new Date,avatarUrl:a,imageURL:null,profilePic:null,label:"I am a new user",last_activity:new Date,updated_at:new Date,UserRegistrationID:e.id})}}catch(e){throw console.error("Error registering new user:",e),new Error("Error registering new user")}})),y.loginUser=async function(e,s){try{const t=await this.findOne({where:{email:e}});if(t){if(await o().compare(s,t.hashedpassword))return t;throw new Error("Incorrect password")}throw new Error("Incorrect email")}catch(e){throw console.error("Error logging in user:",e),new Error("User not found")}},y.logoutUser=async function(e){try{return await this.findOne({where:{email:e}})}catch(e){throw console.error("Error logging out user:",e),new Error("User not found")}},await u.sync({force:!1}).then((()=>{console.log("New User Registered synced successfully")})).catch((e=>{console.error("Error syncing new user:",e)}));const g=y;r()}catch(e){r(e)}}),1)},9252:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>_});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(7252),u=t.n(l),y=t(1976),g=t(3101),p=t(1486),m=t(7270),h=t(16),E=t(80),f=t(2300),T=e([p,m,E]);[p,m,E]=T.then?(await T)():T;const w=u().Router();w.use(d()(y.v)),w.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),w.use(o().urlencoded({extended:!0})),w.use(i()()),w.use(u().json()),w.use(o().json()),w.post("/api/adminCreateUser",m.q,(async(e,s)=>{const{name:t,username:r,email:a,password:o}=e.body;try{if(!(t&&r&&a&&o))return(0,f.H4)(new Error("New User validation error"),s);if(await E.A.findOne({where:{email:a}}))return(0,f.H4)(new Error("UserRegistrations.email: User already exists "),s);const e=await E.A.create({newUser:t,username:r,email:a,hashedpassword:o,createdAt:new Date}),n=(0,h.Jj)({id:e.id});s.cookie("jwt",n,{httpOnly:g.n.JWT_HTTP_ONLY,maxAge:1e3*g.n.JWT_MAX_AGE,secure:g.n.JWT_SECURE,sameSite:"lax"}),s.status(201).json({id:e.id,name:e.newUser,username:e.username,email:e.email,token:n})}catch(e){(0,f.H4)(e,s)}})),w.post("/api/adminLogin",p.b);const _=w;r()}catch(e){r(e)}}))},2317:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>h});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(7252),u=t.n(l),y=t(1976),g=t(9024),p=e([g]);g=(p.then?(await p)():p)[0];const m=u().Router();m.use(d()(y.v)),m.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),m.use(o().urlencoded({extended:!0})),m.use(i()()),m.use(u().json()),m.use(o().json()),m.post("/api/register",g.TU),m.post("/api/login",g.pH),m.get("/api/logout",g.Ub),m.post("/api/refresh-token",g.Be);const h=m;r()}catch(e){r(e)}}))},1809:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>_});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(818),u=t.n(l),y=t(7252),g=t.n(y),p=t(829),m=t.n(p),h=t(3101),E=t(2051),f=t(6030),T=e([E,f]);[E,f]=T.then?(await T)():T;const w=g().Router();u().config(),w.use(d()()),w.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),w.use(o().urlencoded({extended:!0})),w.use(i()()),w.use(g().json()),w.use(o().json()),w.get("/api/getUser",E.FH,(async(e,s)=>{const t=e.cookies.jwt;if(!t)return console.log("No token found: send 401 Unauthorized in auth routes"),void s.status(401).json({message:"Unauthorized"});m().verify(t,h.n.JWT_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token in auth routes"});try{const e=await f.zW.findByPk(t.id);if(!e)return s.status(400).json({message:"User ID is required in Auth route"});s.status(200).json({user:e})}catch(e){return console.error("Error getting user:",e),void s.status(500).json({message:"Error getting current user"})}}))}));const _=w;r()}catch(e){r(e)}}))},8358:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>A});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(818),u=t.n(l),y=t(7252),g=t.n(y),p=t(829),m=t.n(p),h=t(1976),E=t(3101),f=t(2993),T=t(6030),w=t(6020),_=e([f,T]);[f,T]=_.then?(await _)():_,u().config();const S=g().Router();S.use(d()(h.v)),S.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),s.header("encoding","multipart/form-data"),t()})),S.use(o().urlencoded({extended:!0})),S.use(i()()),S.use(g().json()),S.use(o().json()),S.post("/api/uploadImage",w.A.single("image"),(async(e,s)=>{try{console.log("File uploaded:",e.file);const t=`assets/images/${e.file?.filename}`,r=e.cookies.jwt,a=parseInt(e.body.postId,10);if(!r)return void s.status(401).json({message:"Unauthorized"});m().verify(r,E.n.JWT_SECRET,(async(e,r)=>{if(e)return void s.status(401).json({message:"Unauthorized"});const o=r.id;o&&await T.zW.findByPk(o)?await T.my.create({imageUrl:t,user_id:o||null,post_id:a||null,created_At:new Date})?s.status(200).json({message:"Image uploaded successfully",imageUrl:t}):s.status(500).send({error:"Error creating image record"}):s.status(401).json({message:"Unauthorized"})}))}catch(e){console.error("Error uploading image:",e),s.status(500).json({message:"Internal server error"})}})),S.post("/api/uploadProfilePic",w.A.single("file"),(async(e,s)=>{try{console.log("File uploaded:",e.file);const t=`assets/images/${e.file?.filename}`,r=e.cookies.jwt;if(!r)return void s.status(401).json({message:"Unauthorized"});m().verify(r,E.n.JWT_SECRET,(async(e,r)=>{if(e)return void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(401).json({message:"Unauthorized"});const o=await T.zW.findByPk(a);o?await T.V.create({profilePic:t,user_id:a||null,created_At:new Date,updated_At:new Date})?(await o.update({profilePic:t}),s.status(200).json({message:"Image uploaded successfully",profilePic:t})):s.status(500).send({error:"Error creating image record"}):s.status(401).json({message:"Unauthorized"})}))}catch(e){console.error("Error uploading image:",e),s.status(500).json({message:"Internal server error"})}})),S.get("/api/sendImageUrl",f.r3),S.get("/api/sendProfilePicUrl",f.pK);const A=S;r()}catch(e){r(e)}}))},9785:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>E});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(7252),u=t.n(l),y=t(6184),g=t(2051),p=t(6030),m=e([y,g,p]);[y,g,p]=m.then?(await m)():m;const h=u().Router();h.use(d()()),h.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),h.use(o().urlencoded({extended:!0})),h.use(i()()),h.use(u().json()),h.use(o().json()),h.post("/api/createPost",y.pD),h.put("/api/updatePost",y.gg),h.delete("/api/deletePost",y.ys),h.get("/api/getAllPosts",y.zX),h.get("/api/getPostById",g.FH,y.tY),h.post("/api/likePost",y.kL),h.get("/api/getLikedPosts",g.FH,y.t9),h.post("/api/savePost",g.FH,y.E0,(async(e,s)=>{try{const{user_id:t,post_id:r}=e.body;await p.xY.create({user_id:t,post_id:r}),s.status(200).send("Post saved")}catch(e){"SequelizeUniqueConstraintError"!==e.name&&"ER_DUP_ENTRY"!==e.code||s.status(400).json({message:"Post already saved by this user"}),console.error("Error saving post:",e),s.status(500).send("Error saving post")}})),h.get("/api/getSavedPosts",g.FH,y.lM),h.delete("/api/deleteSavedPost",y.Zv),h.delete("/api/deleteLikePost",y.zh),h.get("/api/getInfinitePosts",y.Eu),h.post("/api/searchPosts",y.CI),h.get("/api/getUserPosts",y.hv),h.get("/api/getPopularPosts",y.bI);const E=h;r()}catch(e){r(e)}}))},4388:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{Q:()=>T});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(7252),d=t.n(c),l=t(9469),u=t(9252),y=t(2317),g=t(1809),p=t(8358),m=t(9785),h=t(7128),E=t(4704),f=e([u,y,g,p,m,h,E]);[u,y,g,p,m,h,E]=f.then?(await f)():f;const T=d().Router();T.use(((e,s,t)=>(s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),"OPTIONS"===e.method?s.sendStatus(200):t()))),T.use(o().urlencoded({extended:!0})),T.use(i()()),T.use(d().json()),T.use(o().json()),T.get("/",((e,s)=>{s.send({status:`${l._.NODE_ENV}`,message:`${l._.RESPONSE_STATUS}`,name:`${l._.APP_NAME}`})})),T.use(u.A),T.use(y.A),T.use(E.A),T.use(g.A),T.use(h.A),T.use(m.A),T.use(p.A),r()}catch(e){r(e)}}))},7128:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>m});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(7252),u=t.n(l),y=t(4361),g=e([y]);y=(g.then?(await g)():g)[0];const p=u().Router();p.use(d()()),p.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),p.use(o().urlencoded({extended:!0})),p.use(i()()),p.use(u().json()),p.use(o().json()),p.get("/api/getUserData",y._q);const m=p;r()}catch(e){r(e)}}))},4704:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>h});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(7252),u=t.n(l),y=t(4361),g=t(2051),p=e([y,g]);[y,g]=p.then?(await p)():p;const m=u().Router();m.use(d()()),m.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),m.use(o().urlencoded({extended:!0})),m.use(i()()),m.use(u().json()),m.use(o().json()),m.get("/api/getCurrentUser",g.FH,y.HW),m.get("/api/getAllUsers",y.CF),m.get("/api/getUserByID",y.k7),m.put("/api/updateUser",y.TK),m.get("/api/fetchUsers",y.ye);const h=m;r()}catch(e){r(e)}}))},6020:(e,s,t)=>{t.d(s,{A:()=>y});var r=t(8461),a=t.n(r),o=t(6928),n=t.n(o),i=t(7189),c=t(9896),d=t.n(c);const l="/home/babsdevsys/appV-1/public/assets/images";d().existsSync(l)||d().mkdirSync(l,{recursive:!0});const u=a().diskStorage({destination:function(e,s,t){t(null,l)},filename:function(e,s,t){const r=Date.now()+"-"+Math.round(1e9*Math.random());t(null,s.fieldname+"-"+r+n().extname(s.originalname))}}),y=a()({storage:u,limits:{fileSize:1e7},fileFilter:function(e,s,t){const r=/jpeg|jpg|png|svg/,a=r.test(s.mimetype),o=r.test(n().extname(s.originalname).toLowerCase());if(a&&o)return t(null,!0);(async(e,s)=>{try{if(!(await(0,i.validateMIMEType)(e.path,{originalFilename:e.originalname,allowMimeTypes:["image/jpeg","image/png","image/svg+xml"]})).ok)return s(new Error("Invalid file type"));s(null,!0)}catch(e){console.error("Error validating file type:",e),s(new Error("Error validating file type"))}})(s.path,t)}})},2273:(e,s,t)=>{t.d(s,{A:()=>o});var r=t(643);function a(){return new Promise((e=>{setTimeout((()=>{e()}),1e3)}))}new r.PerformanceObserver((e=>{e.getEntries().forEach((e=>{console.log(`${e.name}: ${e.duration}ms`)})),r.performance.clearMarks()})).observe({type:"measure"});const o=async function(){try{r.performance.mark("Loader Start",{detail:"Loader started"}),await a(),r.performance.mark("Task 1 End",{detail:"Task 1 completed"}),await a(),r.performance.mark("Task 2 End",{detail:"Task 2 completed"});const e=r.performance.measure("Task 2 Duration","Task 1 End","Task 2 End");console.log(e.duration),r.performance.mark("Loader End"),r.performance.measure("Total Loader Duration","Loader Start","Loader End")}catch(e){console.error("Error in loader:",e)}}},2541:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{K:()=>d});var a=t(128),o=t(5595),n=t(9609),i=e([o,n]);[o,n]=i.then?(await i)():i;const c=(0,a.J)();async function d(){const e=await c.transaction();try{await o.A.truncate({transaction:e}),await n.A.truncate({transaction:e}),await e.commit(),console.log("Tables have been truncated...")}catch(s){await e.rollback(),console.error("Error truncating tables:",s)}}r()}catch(l){r(l)}}))},8635:(e,s,t)=>{function r(e){const s=e.split(" ").map((e=>e.charAt(0).toUpperCase())).join("");return`https://ui-avatars.com/api/?name=${encodeURIComponent(s)}&size=200&background=random&color=fff`}t.d(s,{q:()=>r}),t(6982)},2300:(e,s,t)=>{t.d(s,{H4:()=>c,sh:()=>u});var r=t(1708),a=t.n(r),o=t(9896),n=t.n(o),i=t(9469);const c=(e,s)=>{console.error(e.message);let t={};e.message.includes("New User validation error")&&(t={name:"Name is required",username:"username is required",email:"email is required",password:"password is required"}),e.message.includes("UserRegistrations.email")&&(t.email="Email is already registered"),e.message.includes("incorrect email")&&(t.email="email is not registered"),e.message.includes("Incorrect password")&&(t.password="password is incorrect"),"SequelizeValidationError"===e.name&&e.error&&(t=e.error.reduce(((e,s)=>(e[s.path]=s.message,e)),{})),s.status(e.code||500).json({errors:t})};function d(e){const s=`${(new Date).toISOString()} - ${e.message}\n${e.stack}\n`;n().appendFileSync("error.log",s)}const l=new Map;function u(e,s,t,r){d(e),t.status(500).json({message:"An unexpected error occurred"}),r(e)}a().on("unhandledRejection",((e,s)=>{console.error("Unhandled Rejection at:",s,"reason:",e),l.set(s,e)})),a().on("rejectionHandled",(e=>{l.delete(e)})),a().on("unhandledRejection",((e,s)=>{d(e),console.error("Unhandled Rejection at:",s,"reason:",e),a().exit(1)})),a().on("uncaughtException",(e=>{d(e),console.error("Uncaught Exception:",e),a().exit(1)})),a().on("uncaughtException",(e=>{n().writeSync(a().stderr.fd,`Caught exception: ${e}\nException Origin: ${origin}\n`)})),setTimeout((()=>{console.log("This will still run.")}),i._.ERROR_TIMEOUT)},6854:(e,s,t)=>{t.d(s,{E:()=>a});var r=t(2011);const a=new(t.n(r)())({stdTTL:3600,checkperiod:120})},2502:(e,s,t)=>{function r(e){const{user_id:s,post_id:t,likes_id:r,creator_id:a,requestedUserId:o,limit:n}=e.query;if(void 0===s)throw new Error("user_id is required");if(void 0===t)throw new Error("post_id is required");const i=void 0!==s?parseInt(s,10):void 0,c=void 0!==t?parseInt(t,10):void 0,d=void 0!==r?parseInt(r,10):void 0,l=void 0!==a?parseInt(a,10):void 0,u=void 0!==o?parseInt(o,10):void 0,y=void 0!==n?parseInt(n,10):void 0;if(console.log("Received parameters:",{user_id:s,post_id:t,likes_id:r,creator_id:a,requestedUserId:o,limit:n}),console.log("Parsed parameters:",{parsedUserId:i,parsedPostId:c,parsedLikesId:d,parsedCreatorId:l,parsedRequestedUserId:u,parsedLimit:y}),isNaN(i??0))throw new Error("user_id must be a number");if(isNaN(c??0))throw new Error("post_id must be a number");if(isNaN(d??0))throw new Error("likes_id must be a number");if(isNaN(l??0))throw new Error("creator_id must be a number");if(isNaN(u??0))throw new Error("requestedUserId must be a number");if(isNaN(y??0))throw new Error("limit must be a number");if(void 0!==i&&i<0||void 0!==c&&c<0||void 0!==d&&d<0||void 0!==l&&l<0||void 0!==u&&u<0||void 0!==y&&y<0)throw new Error("Invalid query parameters: post_id, likes_id, and creator_id must be non-negative");return{user_id:i,post_id:c,likes_id:d,creator_id:l,requestedUserId:u,limit:y}}t.d(s,{VU:()=>r})}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUkzUyxNQUFNLDZCQUVwQixHQUFJcEQsTUFBTWdXLEdBQW1CLEdBQ3pCLE1BQU0sSUFBSTVTLE1BQU0sK0JBRXBCLEdBQUlwRCxNQUFNaVcsR0FBeUIsR0FDL0IsTUFBTSxJQUFJN1MsTUFBTSxvQ0FFcEIsR0FBSXBELE1BQU1rVyxHQUFlLEdBQ3JCLE1BQU0sSUFBSTlTLE1BQU0sMEJBR3BCLFFBQXNCd1MsSUFBakJDLEdBQThCQSxFQUFlLFFBQzVCRCxJQUFqQkUsR0FBOEJBLEVBQWUsUUFDM0JGLElBQWxCRyxHQUErQkEsRUFBZ0IsUUFDM0JILElBQXBCSSxHQUFpQ0EsRUFBa0IsUUFDekJKLElBQTFCSyxHQUF1Q0EsRUFBd0IsUUFDL0NMLElBQWhCTSxHQUE2QkEsRUFBYyxFQUM1QyxNQUFNLElBQUk5UyxNQUFNLG9GQUVwQixNQUFPLENBQ0h6RixRQUFTa1ksRUFDVDVXLFFBQVM2VyxFQUNUSCxTQUFVSSxFQUNWblYsV0FBWW9WLEVBQ1p6VixnQkFBaUIwVixFQUNqQmxVLE1BQU9tVSxFQUVmLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbmZpZy9jb3JzRVZOLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvY29uZmlnL2Nvck9wdGlvbnMudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9jb25maWcvZGF0YWJhc2VFTlYudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9jb25maWcvand0RU5WLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvY29udHJvbGxlcnMvUG9zdENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL2ltYWdlQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL3VzZXJDb250cm9sbGVyLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9hZG1pbi9hZG1pbkNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9sb2FkZXJzL2FkbWluL2ZvdW5kZXIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9sb2FkZXJzL2F1dGgvaXBDb25maWcudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9sb2FkZXJzL2F1dGgvand0R2VuZXJhdG9yLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9hdXRoL3VzZXJBdXRoLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9kYXRhTG9hZGVyL21hcmlhZGIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVsaXplLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9leHByZXNzLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9pbmRleC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy9hZG1pbi5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy9pbWFnZS5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy9pbmRleC5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy9saWtlUG9zdC5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy9wb3N0Lm1vZGVsLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbW9kZWxzL3Byb2ZpbGVQaWMubW9kZWwudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9tb2RlbHMvc2F2ZVBvc3QubW9kZWwudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9tb2RlbHMvdXNlci5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy91c2VyUmVnaXN0ZXIubW9kZWwudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9yb3V0ZXMvYWRtaW5Sb3V0ZXMudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9yb3V0ZXMvYXV0aFJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy9jdXJyZW50VXNlclJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy9pbWFnZVJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy9wb3N0Um91dGVzLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvcm91dGVzL3JvdXRlci50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy91c2VyRGF0YVJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy91c2VyUm91dGVzLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvc2VydmljZXMvbXVsdGVyLmNvbmZpZy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3NlcnZpY2VzL3BlcmZvcm1hbmNlLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvc2VydmljZXMvdHJ1bmNhdGUudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci91dGlscy9hdmF0YXIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci91dGlscy9lcnJvckhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci91dGlscy9ub2RlQ2FjaGUudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci91dGlscy92YWxpZGF0ZUFuZFBhcnNlUGFyYW1zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0cmljdCBhcyBhc3NlcnQgfSBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHsgbG9hZCB9IGZyb20gJ3RzLWRvdGVudic7XG5jb25zdCBjb3JzU2NoZW1hRU5WID0gbG9hZCh7XG4gICAgLyogTG9hZCBDT1JTICovXG4gICAgQ09SU19PUklHSU46IFN0cmluZyxcbiAgICBDT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVM6IE51bWJlcixcbiAgICBDT1JTX0NSRURFTlRJQUxTOiBCb29sZWFuLFxuICAgIENPUlNfTUVUSE9EUzogU3RyaW5nLFxufSk7XG4vLyBkZXN0cnVjdHVyZSB0aGUgQ09SUyBzY2hlbWFcbmNvbnN0IHsgQ09SU19PUklHSU4sIENPUlNfT1BUSU9OU19TVUNDRVNTX1NUQVRVUywgQ09SU19DUkVERU5USUFMUywgQ09SU19NRVRIT0RTLCB9ID0gY29yc1NjaGVtYUVOVjtcbi8vIGFzc2VydCB0aGF0IHRoZSBDT1JTIHNjaGVtYSBpcyBwcmVzZW50XG5hc3NlcnQub2soQ09SU19PUklHSU4sICdDT1JTIG9yaWdpbiBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKENPUlNfT1BUSU9OU19TVUNDRVNTX1NUQVRVUywgJ0NPUlMgb3B0aW9ucyBzdWNjZXNzIHN0YXR1cyBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKENPUlNfQ1JFREVOVElBTFMsICdDT1JTIGNyZWRlbnRpYWxzIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soQ09SU19NRVRIT0RTLCAnQ09SUyBtZXRob2RzIHNob3VsZCBiZSBwcmVzZW50Jyk7XG4vLyBleHBvcnQgdGhlIENPUlMgc2NoZW1hXG5leHBvcnQgY29uc3QgY29yc0VOViA9IHtcbiAgICBDT1JTX09SSUdJTixcbiAgICBDT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVMsXG4gICAgQ09SU19DUkVERU5USUFMUyxcbiAgICBDT1JTX01FVEhPRFMsXG59O1xuLy8gZXhwb3J0IHRoZSBDT1JTIHNjaGVtYVxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNvcnNFTlYsXG59O1xuIiwiLy8gRXhwb3J0IGNvck9wdGlvbnMgb2JqZWN0IHdpdGggb3JpZ2luIGFuZCBvcHRpb25zU3VjY2Vzc1N0YXR1cyBwcm9wZXJ0aWVzXG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcbmltcG9ydCB7IGNvcnNFTlYgfSBmcm9tICcuL2NvcnNFVk4nO1xuY29uc3QgY29yT3B0aW9ucyA9IHtcbiAgICBvcmlnaW46IGNvcnNFTlYuQ09SU19PUklHSU4sXG4gICAgbWV0aG9kczogY29yc0VOVi5DT1JTX01FVEhPRFMsXG4gICAgY3JlZGVudGlhbHM6IGNvcnNFTlYuQ09SU19DUkVERU5USUFMUyxcbiAgICBvcHRpb25zU3VjY2Vzc1N0YXR1czogY29yc0VOVi5DT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVMsXG59O1xuZXhwb3J0IHsgY29yT3B0aW9ucyB9O1xuIiwiaW1wb3J0IHsgc3RyaWN0IGFzIGFzc2VydCB9IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgeyBsb2FkIH0gZnJvbSAndHMtZG90ZW52JztcbmNvbnN0IGRhdGFTY2hlbWFFTlYgPSBsb2FkKHtcbiAgICAvKiBMb2FkIERhdGFiYXNlICovXG4gICAgREJfSE9TVDogU3RyaW5nLFxuICAgIERCX1BPUlQ6IE51bWJlcixcbiAgICBEQl9VU0VSOiBTdHJpbmcsXG4gICAgREJfUEFTUzogU3RyaW5nLFxuICAgIERCX05BTUU6IFN0cmluZyxcbiAgICBEQl9TT0NLRVRfUEFUSDogU3RyaW5nLFxuICAgIERCX1NPQ0tFVF9USU1FT1VUOiBOdW1iZXIsXG4gICAgREJfQ09NUFJFU1M6IEJvb2xlYW4sXG4gICAgREJfREVCVUc6IEJvb2xlYW4sXG4gICAgREJfUEVSTUlUX0xPQ0FMX0lORklMRTogQm9vbGVhbixcbiAgICBEQl9UUkFDRTogQm9vbGVhbixcbiAgICBEQl9DSEVDS19EVVBMSUNBVEU6IEJvb2xlYW4sXG4gICAgREJfU1NMOiBCb29sZWFuLFxuICAgIERCX1NTTF9DQTogU3RyaW5nLFxuICAgIERCX1NTTF9LRVk6IFN0cmluZyxcbiAgICBEQl9TU0xfQ0VSVDogU3RyaW5nLFxuICAgIFJFSkVDVF9VTkFVVEhPUklaRUQ6IEJvb2xlYW4sXG4gICAgQ0lQSEVSUzogU3RyaW5nLFxuICAgIE1JTl9WRVJTSU9OOiBTdHJpbmcsXG4gICAgREJfQ09OTkVDVElPTl9BVFRSSUJVVEVTOiBTdHJpbmcsXG4gICAgREJfQ09OTkVDVElPTl9USU1FT1VUOiBOdW1iZXIsXG59KTtcbmNvbnN0IHsgREJfSE9TVCwgREJfUE9SVCwgREJfVVNFUiwgREJfUEFTUywgREJfTkFNRSwgREJfU09DS0VUX1BBVEgsIERCX1NPQ0tFVF9USU1FT1VULCBEQl9DT01QUkVTUywgREJfREVCVUcsIERCX1BFUk1JVF9MT0NBTF9JTkZJTEUsIERCX1RSQUNFLCBEQl9DSEVDS19EVVBMSUNBVEUsIERCX1NTTCwgREJfU1NMX0NBLCBEQl9TU0xfS0VZLCBEQl9TU0xfQ0VSVCwgUkVKRUNUX1VOQVVUSE9SSVpFRCwgQ0lQSEVSUywgTUlOX1ZFUlNJT04sIERCX0NPTk5FQ1RJT05fQVRUUklCVVRFUywgREJfQ09OTkVDVElPTl9USU1FT1VULCB9ID0gZGF0YVNjaGVtYUVOVjtcbmFzc2VydC5vayhEQl9IT1NULCAnRGF0YWJhc2UgaG9zdCBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKERCX1BPUlQsICdEYXRhYmFzZSBwb3J0IHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soREJfVVNFUiwgJ0RhdGFiYXNlIHVzZXIgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhEQl9QQVNTLCAnRGF0YWJhc2UgcGFzc3dvcmQgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhEQl9OQU1FLCAnRGF0YWJhc2UgbmFtZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuZXhwb3J0IGNvbnN0IGRhdGFiYXNlRU5WID0ge1xuICAgIERCX0hPU1QsXG4gICAgREJfUE9SVCxcbiAgICBEQl9VU0VSLFxuICAgIERCX1BBU1MsXG4gICAgREJfTkFNRSxcbiAgICBEQl9TT0NLRVRfUEFUSCxcbiAgICBEQl9TT0NLRVRfVElNRU9VVCxcbiAgICBEQl9DT01QUkVTUyxcbiAgICBEQl9ERUJVRyxcbiAgICBEQl9QRVJNSVRfTE9DQUxfSU5GSUxFLFxuICAgIERCX1RSQUNFLFxuICAgIERCX0NIRUNLX0RVUExJQ0FURSxcbiAgICBEQl9DT05ORUNUSU9OX0FUVFJJQlVURVMsXG4gICAgREJfQ09OTkVDVElPTl9USU1FT1VULFxuICAgIERCX1NTTCxcbiAgICBEQl9TU0xfQ0EsXG4gICAgREJfU1NMX0tFWSxcbiAgICBEQl9TU0xfQ0VSVCxcbiAgICBSRUpFQ1RfVU5BVVRIT1JJWkVELFxuICAgIENJUEhFUlMsXG4gICAgTUlOX1ZFUlNJT04sXG59O1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIGRhdGFiYXNlRU5WLFxuICAgIG1hcmlhZGI6IHtcbiAgICAgICAgc3NsOiBEQl9TU0wsXG4gICAgICAgIHNzbE9wdGlvbnM6IHtcbiAgICAgICAgICAgIGNhOiBEQl9TU0xfQ0EsXG4gICAgICAgICAgICBrZXk6IERCX1NTTF9LRVksXG4gICAgICAgICAgICBjZXJ0OiBEQl9TU0xfQ0VSVCxcbiAgICAgICAgfSxcbiAgICB9LFxufTtcbiIsImltcG9ydCB7IHN0cmljdCBhcyBhc3NlcnQgfSBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHsgbG9hZCB9IGZyb20gJ3RzLWRvdGVudic7XG5jb25zdCBqd3RTY2hlbWFFTlYgPSBsb2FkKHtcbiAgICAvKiBMb2FkIEpXVCAqL1xuICAgIEpXVF9TRUNSRVQ6IFN0cmluZyxcbiAgICBKV1RfRVhQSVJFU19JTjogU3RyaW5nLFxuICAgIEpXVF9SRUZSRVNIX1NFQ1JFVDogU3RyaW5nLFxuICAgIEpXVF9SRUZSRVNIX0VYUElSRVNfSU46IFN0cmluZyxcbiAgICBKV1RfUkVGUkVTSF9NQVhfQUdFOiBOdW1iZXIsXG4gICAgSldUX0FMR09SSVRITTogU3RyaW5nLFxuICAgIEpXVF9JU1NVRVI6IFN0cmluZyxcbiAgICBKV1RfTUFYX0FHRTogTnVtYmVyLFxuICAgIEpXVF9IVFRQX09OTFk6IEJvb2xlYW4sXG4gICAgSldUX1NBTUVfU0lURTogU3RyaW5nLFxuICAgIEpXVF9DT09LSUVfTkFNRTogU3RyaW5nLFxuICAgIEpXVF9TRUNVUkU6IEJvb2xlYW4sXG59KTtcbi8vIGRlc3RydWN0dXJlIHRoZSBKV1Qgc2NoZW1hXG5jb25zdCB7IEpXVF9TRUNSRVQsIEpXVF9FWFBJUkVTX0lOLCBKV1RfUkVGUkVTSF9TRUNSRVQsIEpXVF9SRUZSRVNIX0VYUElSRVNfSU4sIEpXVF9SRUZSRVNIX01BWF9BR0UsIEpXVF9BTEdPUklUSE0sIEpXVF9JU1NVRVIsIEpXVF9NQVhfQUdFLCBKV1RfSFRUUF9PTkxZLCBKV1RfU0FNRV9TSVRFLCBKV1RfQ09PS0lFX05BTUUsIEpXVF9TRUNVUkUsIH0gPSBqd3RTY2hlbWFFTlY7XG4vLyBhc3NlcnQgdGhhdCB0aGUgSldUIHNjaGVtYSBpcyBwcmVzZW50XG5hc3NlcnQub2soSldUX1NFQ1JFVCwgJ0pXVCBzZWNyZXQgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfRVhQSVJFU19JTiwgJ0pXVCBleHBpcmVzIGluIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX1JFRlJFU0hfU0VDUkVULCAnSldUIHJlZnJlc2ggc2VjcmV0IHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX1JFRlJFU0hfRVhQSVJFU19JTiwgJ0pXVCByZWZyZXNoIGV4cGlyZXMgaW4gc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfQUxHT1JJVEhNLCAnSldUIGFsZ29yaXRobSBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9JU1NVRVIsICdKV1QgaXNzdWVyIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX01BWF9BR0UsICdKV1QgbWF4IGFnZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9IVFRQX09OTFksICdKV1QgaHR0cCBvbmx5IHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX1NBTUVfU0lURSwgJ0pXVCBzYW1lIHNpdGUgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfQ09PS0lFX05BTUUsICdKV1QgY29va2llIG5hbWUgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfU0VDVVJFLCAnSldUIHNlY3VyZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9SRUZSRVNIX01BWF9BR0UsICdKV1QgcmVmcmVzaCBtYXggYWdlIHNob3VsZCBiZSBwcmVzZW50Jyk7XG4vLyBleHBvcnQgdGhlIEpXVCBzY2hlbWFcbmV4cG9ydCBjb25zdCBqd3RFTlYgPSB7XG4gICAgSldUX1NFQ1JFVCxcbiAgICBKV1RfRVhQSVJFU19JTixcbiAgICBKV1RfUkVGUkVTSF9TRUNSRVQsXG4gICAgSldUX1JFRlJFU0hfRVhQSVJFU19JTixcbiAgICBKV1RfUkVGUkVTSF9NQVhfQUdFLFxuICAgIEpXVF9BTEdPUklUSE0sXG4gICAgSldUX0lTU1VFUixcbiAgICBKV1RfTUFYX0FHRSxcbiAgICBKV1RfSFRUUF9PTkxZLFxuICAgIEpXVF9TQU1FX1NJVEUsXG4gICAgSldUX0NPT0tJRV9OQU1FLFxuICAgIEpXVF9TRUNVUkUsXG59O1xuLy8gZXhwb3J0IHRoZSBKV1Qgc2NoZW1hXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgand0RU5WLFxufTtcbiIsImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IE9wIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IHsgSW1hZ2VTdG9yYWdlcywgTGlrZXMsIFBvc3RzLCBTYXZlcywgVXNlcnMsIH0gZnJvbSAnLi4vbW9kZWxzL2luZGV4Lm1vZGVsJztcbmltcG9ydCB7IHZhbGlkYXRlQW5kUGFyc2VQYXJhbXMgfSBmcm9tICcuLi91dGlscy92YWxpZGF0ZUFuZFBhcnNlUGFyYW1zJztcbmltcG9ydCB7IGdldEltYWdlUHJldmlld1VybCB9IGZyb20gJy4vaW1hZ2VDb250cm9sbGVyJztcbmRvdGVudi5jb25maWcoKTtcbi8vICoqIENyZWF0ZSBQb3N0IE1ldGhvZCAtIENyZWF0ZSBhIG5ldyBwb3N0XG5leHBvcnQgY29uc3QgY3JlYXRlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgY2FwdGlvbiwgbG9jYXRpb24sIHRhZ3MgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDsgLy8gRW5zdXJlIHRoYXQgdGhlIHRva2VuIGNvbnRhaW5zIHRoZSB1c2VyIElEXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmV0cmlldmUgdGhlIGltYWdlIFVSTCBmcm9tIHRoZSBJbWFnZVN0b3JhZ2UgdGFibGUgdXNpbmcgdGhlIHN0YXRpYyBtZXRob2RcbiAgICAgICAgICAgIGNvbnN0IGltYWdlUmVjb3JkID0gYXdhaXQgSW1hZ2VTdG9yYWdlcy5maW5kSW1hZ2VCeVJlZmVyZW5jZUtleSgndXNlcl9pZCcsIHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCFpbWFnZVJlY29yZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdJbWFnZSBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV3UG9zdCA9IGF3YWl0IFBvc3RzLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgY2FwdGlvbjogY2FwdGlvbixcbiAgICAgICAgICAgICAgICBpbWFnZVVSTDogaW1hZ2VSZWNvcmQuaW1hZ2VVcmwsXG4gICAgICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgJycsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9BdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICBjcmVhdG9yX0lkOiB1c2VyLmlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIW5ld1Bvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBjcmVhdGluZyBuZXcgcG9zdC4nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgICAgICAuc3RhdHVzKDIwMSlcbiAgICAgICAgICAgICAgICAgICAgLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsIG5ld1Bvc3QgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3UG9zdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gKiogRGVsZXRlIEZpbGUgTWV0aG9kIC0gRGVsZXRlIGEgZmlsZVxuZXhwb3J0IGNvbnN0IGRlbGV0ZUZpbGUgPSBhc3luYyAoX3JlcSwgcmVzLCBpbWFnZVVybCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gYXdhaXQgSW1hZ2VTdG9yYWdlcy5maW5kT25lKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGltYWdlVXJsOiBpbWFnZVVybCB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFpbWFnZSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnSW1hZ2Ugbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBpbWFnZS5kZXN0cm95KCk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0ltYWdlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGltYWdlOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gKiogVXBkYXRlIFBvc3QgTWV0aG9kIC0gVXBkYXRlIGEgcG9zdFxuZXhwb3J0IGNvbnN0IHVwZGF0ZVBvc3QgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGNhcHRpb24sIGxvY2F0aW9uLCB0YWdzLCBpbWFnZVVybDogbmV3SW1hZ2VVcmwgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCBwb3N0X2lkID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnBvc3RfaWQsIDEwKTtcbiAgICAgICAgaWYgKCFwb3N0X2lkKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDsgLy8gRW5zdXJlIHRoYXQgdGhlIHRva2VuIGNvbnRhaW5zIHRoZSB1c2VyIElEXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBwb3N0X2lkLCBjcmVhdG9yX0lkOiB1c2VyX2lkIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zdC5jcmVhdG9yX0lkICE9PSB1c2VyLmlkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkIGF0dGVtcHQhJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaW1hZ2VVcmwgPSBwb3N0Py5pbWFnZVVSTDtcbiAgICAgICAgICAgIGlmIChuZXdJbWFnZVVybCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpZXdJbWFnZVVybCA9IGF3YWl0IGdldEltYWdlUHJldmlld1VybChyZXEsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJldmlld0ltYWdlVXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdJbWFnZSBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gcHJldmlld0ltYWdlVXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRQb3N0ID0gYXdhaXQgcG9zdC51cGRhdGUoe1xuICAgICAgICAgICAgICAgIGlkOiBwb3N0LmlkLFxuICAgICAgICAgICAgICAgIGNhcHRpb246IGNhcHRpb24sXG4gICAgICAgICAgICAgICAgaW1hZ2VVUkw6IGltYWdlVXJsLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcbiAgICAgICAgICAgICAgICB0YWdzOiB0YWdzLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghdXBkYXRlZFBvc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV3SW1hZ2VVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGVsZXRlRmlsZShyZXEsIHJlcywgbmV3SW1hZ2VVcmwpOyAvLyBFbnN1cmUgZGVsZXRlRmlsZSBpcyBkZWZpbmVkIGVsc2V3aGVyZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciB1cGRhdGluZyBwb3N0JyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNcbiAgICAgICAgICAgICAgICAuc3RhdHVzKDIwMClcbiAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdQb3N0IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JywgcG9zdDogdXBkYXRlZFBvc3QgfSk7XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlZFBvc3Q7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vICoqIEdldCBhbGwgcG9zdHNcbmV4cG9ydCBjb25zdCBnZXRBbGxQb3N0cyA9IGFzeW5jIChfcmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwb3N0cyA9IGF3YWl0IFBvc3RzLmZpbmRBbGwoe1xuICAgICAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IFVzZXJzLFxuICAgICAgICAgICAgICAgICAgICBhczogJ1VzZXInLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3VzZXJuYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdlbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAncHJvZmlsZVBpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnYmlvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdmaXJzdE5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2xhc3ROYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdpbWFnZVVSTCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnYXZhdGFyVXJsJyxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcG9zdHM6IHBvc3RzIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBwb3N0czonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vICoqIEZ1bmN0aW9uIHRvIGxpa2UgYSBwb3N0IGJ5IHVzZXJcbmV4cG9ydCBjb25zdCBsaWtlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgY29uc3QgcG9zdF9pZCA9IHBhcnNlSW50KHJlcS5ib2R5LnBvc3RfaWQsIDEwKTtcbiAgICAgICAgICAgIGlmIChpc05hTihwb3N0X2lkKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0ludmFsaWQgcG9zdCBJRCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0cy5maW5kQnlQayhwb3N0X2lkKTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0xpa2UgPSBhd2FpdCBMaWtlcy5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBwb3N0X2lkLCB1c2VyX2lkIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0xpa2UpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IGFscmVhZHkgbGlrZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5ld0xpa2UgPSBhd2FpdCBMaWtlcy5jcmVhdGVMaWtlKHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgICAgIHBvc3RfaWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9BdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFwb3N0Lmxpa2VzX0NvdW50KSB7XG4gICAgICAgICAgICAgICAgcG9zdC5saWtlc19Db3VudCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsaWtlc0NvdW50ID0gcG9zdC5saWtlc19Db3VudCArIDE7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkUG9zdCA9IGF3YWl0IHBvc3QudXBkYXRlKHsgbGlrZXNfQ291bnQ6IGxpa2VzQ291bnQgfSk7XG4gICAgICAgICAgICBpZiAoIXVwZGF0ZWRQb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgbGlraW5nIHBvc3QuJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNcbiAgICAgICAgICAgICAgICAuc3RhdHVzKDIwMSlcbiAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdQb3N0IGxpa2VkIHN1Y2Nlc3NmdWxseScsIGxpa2U6IG5ld0xpa2UgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbGlraW5nIHBvc3Q6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyAqKiBGdW5jdGlvbiB0byBnZXQgYWxsIGxpa2VzIGJ5IHBvc3RcbmV4cG9ydCBjb25zdCBnZXRMaWtlZFBvc3RzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJzX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2Vyc19pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBwYXJzZUludChyZXEucXVlcnkudXNlcl9pZCwgMTApO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVkVXNlcklkID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnVzZXJfaWQsIDEwKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayhyZXF1ZXN0ZWRVc2VySWQsIHtcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBQb3N0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjYXB0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW1hZ2VVUkwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsb2NhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhZ3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjcmVhdGVkX0F0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGlrZXNfQ291bnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGlrZXMgPSBhd2FpdCBMaWtlcy5maW5kQWxsKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyB1c2VyX2lkIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGxpa2VkUG9zdHMgPSBsaWtlcy5tYXAobGlrZSA9PiBsaWtlLnBvc3RfaWQpO1xuICAgICAgICAgICAgcmVzXG4gICAgICAgICAgICAgICAgLnN0YXR1cygyMDApXG4gICAgICAgICAgICAgICAgLmpzb24oeyB1c2VyLCBsaWtlcywgbGlrZWRQb3N0cywgdXNlcl9pZCwgcmVxdWVzdGVkVXNlcklkIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgbGlrZXM6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyAqKiBHZXQgcG9zdCBieSBJRFxuZXhwb3J0IGNvbnN0IGdldFBvc3RCeUlkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVxdWVzdGVkVXNlcklkID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnVzZXJfaWQsIDEwKTtcbiAgICAgICAgaWYgKCFyZXF1ZXN0ZWRVc2VySWQpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ3Bvc3QgVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICd1c2VyIG5vdCBmb3VuZCBpbiB1c2VyJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBhbmQgcGFyc2UgcGFyYW1ldGVyc1xuICAgICAgICAgICAgbGV0IHBvc3RfaWQsIGNyZWF0b3JfaWQsIHJlcXVlc3RlZFVzZXJJZDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgKHsgcG9zdF9pZCwgY3JlYXRvcl9pZCwgcmVxdWVzdGVkVXNlcklkIH0gPVxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUFuZFBhcnNlUGFyYW1zKHJlcSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcG9zdF9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0cy5maW5kQnlQayhwb3N0X2lkKTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgbm90IGZvdW5kIGhlcmUnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcG9zdCwgY3JlYXRvcl9pZCwgcmVxdWVzdGVkVXNlcklkLCBwb3N0X2lkIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vICoqIHRvZ2dsZSBsaWtlc1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUxpa2VkUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdF9pZCA9IHBhcnNlSW50KHJlcS5ib2R5LnBvc3RfaWQsIDEwKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZEJ5UGsocG9zdF9pZCk7XG4gICAgICAgICAgICBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdMaWtlID0gYXdhaXQgTGlrZXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgcG9zdF9pZDogcG9zdF9pZCwgdXNlcl9pZDogdXNlcl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdMaWtlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZXhpc3RpbmdMaWtlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjdXJyZW50TGlrZXMgPSBwb3N0Lmxpa2VzX0NvdW50IHx8IDA7XG4gICAgICAgICAgICBpZiAoY3VycmVudExpa2VzID4gMCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMaWtlcyAtPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgcG9zdC51cGRhdGUoeyBsaWtlc19Db3VudDogY3VycmVudExpa2VzIH0pO1xuICAgICAgICAgICAgYXdhaXQgcG9zdC5zYXZlKCk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXhpc3RpbmdMaWtlXG4gICAgICAgICAgICAgICAgICAgID8gJ0xpa2UgcmVtb3ZlZCBzdWNjZXNzZnVsbHknXG4gICAgICAgICAgICAgICAgICAgIDogJ1Bvc3QgbGlrZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgICAgICBwb3N0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdG9nZ2xpbmcgbGlrZTonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vICoqIEZ1bmN0aW9uIHRvIHNhdmUgYSBwb3N0IGJ5IHVzZXJcbmV4cG9ydCBjb25zdCBzYXZlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0IHx8IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnNwbGl0KCcgJylbMV07XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKV1QgdmVyaWZpY2F0aW9uIGVycm9yJywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBJbnZhbGlkIFRva2VuJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdF9pZCA9IHBhcnNlSW50KHJlcS5ib2R5LnBvc3RfaWQsIDEwKTtcbiAgICAgICAgICAgIGlmICghcG9zdF9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZEJ5UGsocG9zdF9pZCk7XG4gICAgICAgICAgICBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTYXZlID0gYXdhaXQgU2F2ZXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgcG9zdF9pZCwgdXNlcl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTYXZlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBhbHJlYWR5IHNhdmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXdTYXZlID0gYXdhaXQgU2F2ZXMuY3JlYXRlU2F2ZSh7XG4gICAgICAgICAgICAgICAgaWQ6IHVzZXJfaWQsXG4gICAgICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgICAgICBwb3N0X2lkLFxuICAgICAgICAgICAgICAgIHNhdmVEYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIW5ld1NhdmUpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBzYXZpbmcgcG9zdC4nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoMjAxKVxuICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgc2F2ZWQgc3VjY2Vzc2Z1bGx5Jywgc2F2ZTogbmV3U2F2ZSB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vICoqIEdldCBhbGwgc2F2ZWQgcG9zdHMgYnkgdXNlclxuZXhwb3J0IGNvbnN0IGRlbGV0ZVNhdmVkUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0IHx8IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnNwbGl0KCcgJylbMV07XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKV1QgdmVyaWZpY2F0aW9uIGVycm9yJywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBJbnZhbGlkIFRva2VuJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgYW5kIHBhcnNlIHBhcmFtZXRlcnNcbiAgICAgICAgICAgIGxldCBwb3N0X2lkO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAoeyBwb3N0X2lkIH0gPSB2YWxpZGF0ZUFuZFBhcnNlUGFyYW1zKHJlcSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZEJ5UGsocG9zdF9pZCk7XG4gICAgICAgICAgICBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTYXZlID0gYXdhaXQgU2F2ZXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgcG9zdF9pZCwgdXNlcl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTYXZlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZXhpc3RpbmdTYXZlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBleGlzdGluZ1NhdmVcbiAgICAgICAgICAgICAgICAgICAgPyAnUG9zdCB1bnNhdmVkIHN1Y2Nlc3NmdWxseSdcbiAgICAgICAgICAgICAgICAgICAgOiAnUG9zdCBub3Qgc2F2ZWQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgc2F2ZWQgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vICoqIEdldCBhbGwgc2F2ZWQgcG9zdHMgYnkgdXNlclxuZXhwb3J0IGNvbnN0IGdldFNhdmVkUG9zdHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dCB8fCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5zcGxpdCgnICcpWzFdO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSldUIHZlcmlmaWNhdGlvbiBlcnJvcicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzYXZlZFBvc3RzID0gYXdhaXQgU2F2ZXMuZ2V0U2F2ZWRQb3N0cyh1c2VyX2lkKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICBzYXZlZFBvc3RzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBzYXZlZCBwb3N0czonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vICoqIERlbGV0ZSBhIHBvc3RcbmV4cG9ydCBjb25zdCBkZWxldGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3QgfHwgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbj8uc3BsaXQoJyAnKVsxXTtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0X2lkID0gcGFyc2VJbnQocmVxLmJvZHkucG9zdF9pZCwgMTApO1xuICAgICAgICAgICAgaWYgKCFwb3N0X2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBJRCBpcyByZXF1aXJlZCBmcm9tIHNlcnZlcicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmZpbmRCeVBrKHBvc3RfaWQpO1xuICAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU2F2ZSA9IGF3YWl0IFNhdmVzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHBvc3RfaWQsIHVzZXJfaWQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2F2ZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGV4aXN0aW5nU2F2ZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaW5kIGFzc29jaWF0ZWQgaW1hZ2VzIGFuZCBkZWxldGUgdGhlbVxuICAgICAgICAgICAgaWYgKHBvc3QuaW1hZ2VVUkwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IEltYWdlU3RvcmFnZXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGltYWdlVXJsOiBwb3N0LmltYWdlVVJMIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGltYWdlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBwb3N0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHBvc3Q6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyAqKiBHZXQgSW5maW5pdGUgUG9zdHNcbmV4cG9ydCBjb25zdCBnZXRJbmZpbml0ZVBvc3RzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBwYWdlID0gMCwgbGltaXQgPSAxMCB9ID0gcmVxLnF1ZXJ5O1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBwYWdlXG4gICAgICAgICAgICA/IHBhcnNlSW50KHBhZ2UsIDEwKSAqIHBhcnNlSW50KGxpbWl0LCAxMClcbiAgICAgICAgICAgIDogMDtcbiAgICAgICAgY29uc3QgcG9zdHMgPSBhd2FpdCBQb3N0cy5maW5kQW5kQ291bnRBbGwoe1xuICAgICAgICAgICAgbGltaXQ6IHBhcnNlSW50KGxpbWl0LCAxMCksXG4gICAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgICBvcmRlcjogW1snY3JlYXRlZF9BdCcsICdERVNDJ11dLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgcG9zdHMsXG4gICAgICAgICAgICBwYWdlOiBwYXJzZUludChwYWdlLCAxMCksXG4gICAgICAgICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwocG9zdHMuY291bnQgLyBwYXJzZUludChsaW1pdCwgMTApKSxcbiAgICAgICAgICAgIHRvdGFsQ291bnQ6IHBvc3RzLmNvdW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcG9zdHM6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyAqKiBTZWFyY2ggcG9zdHNcbmV4cG9ydCBjb25zdCBzZWFyY2hQb3N0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgc2VhcmNoVmFsdWUgfSA9IHJlcS5ib2R5O1xuICAgICAgICBpZiAoIXNlYXJjaFZhbHVlKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdTZWFyY2ggdmFsdWUgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdHMuZmluZEFsbCh7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgIFtPcC5vcl06IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtPcC5saWtlXTogYCUke3NlYXJjaFZhbHVlfSVgLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtPcC5saWtlXTogYCUke3NlYXJjaFZhbHVlfSVgLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbT3AubGlrZV06IGAlJHtzZWFyY2hWYWx1ZX0lYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICBwb3N0cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWFyY2hpbmcgcG9zdHM6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyAqKiBHZXQgYWxsIHBvc3RzIGJ5IHVzZXJcbmV4cG9ydCBjb25zdCBnZXRVc2VyUG9zdHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dCB8fCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5zcGxpdCgnICcpWzFdO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSldUIHZlcmlmaWNhdGlvbiBlcnJvcicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdHMuZmluZEFsbCh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgY3JlYXRvcl9JZDogdXNlcl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHBvc3RzIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBwb3N0czonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vICoqIEdldCBQb3B1bGFyIFBvc3RzXG5leHBvcnQgY29uc3QgZ2V0UG9wdWxhclBvc3RzID0gYXN5bmMgKF9yZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvcHVsYXJQb3N0cyA9IGF3YWl0IFBvc3RzLmZpbmRBbGwoe1xuICAgICAgICAgICAgb3JkZXI6IFtbJ2xpa2VzX0NvdW50JywgJ0RFU0MnXV0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHBvcHVsYXJQb3N0cyB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcG9wdWxhciBwb3N0czonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbiIsImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IHsgand0R2VuZXJhdG9yLCBqd3RSZWZyZXNoIH0gZnJvbSAnLi4vbG9hZGVycy9hdXRoL2p3dEdlbmVyYXRvcic7XG5pbXBvcnQgeyBVc2VyUmVnaXN0cmF0aW9uIH0gZnJvbSAnLi4vbW9kZWxzL2luZGV4Lm1vZGVsJztcbmltcG9ydCB7IGhhbmRsZUVycm9yIH0gZnJvbSAnLi4vdXRpbHMvZXJyb3JIYW5kbGVyJztcbmRvdGVudi5jb25maWcoKTtcbi8vICoqIFVzZXIgUmVnaXN0cmF0aW9uXG5leHBvcnQgY29uc3QgdXNlclJlZ2lzdGVyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBuYW1lLCB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcbiAgICAgICAgaWYgKCFuYW1lIHx8ICF1c2VybmFtZSB8fCAhZW1haWwgfHwgIXBhc3N3b3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlRXJyb3IobmV3IEVycm9yKCdOZXcgVXNlciB2YWxpZGF0aW9uIGVycm9yJyksIHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0c1xuICAgICAgICBjb25zdCB1c2VyRXhpc3RzID0gYXdhaXQgVXNlclJlZ2lzdHJhdGlvbi5maW5kT25lKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGVtYWlsOiBlbWFpbCB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVzZXJFeGlzdHMpIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVFcnJvcihuZXcgRXJyb3IoJ1VzZXJSZWdpc3RyYXRpb25zLmVtYWlsOiBVc2VyIGFscmVhZHkgZXhpc3RzICcpLCByZXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyUmVnaXN0cmF0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICBuZXdVc2VyOiBuYW1lLFxuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgaGFzaGVkcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBqd3RHZW5lcmF0b3IoeyBpZDogdXNlci5pZCB9KTtcbiAgICAgICAgcmVzLmNvb2tpZSgnand0JywgdG9rZW4sIHtcbiAgICAgICAgICAgIGh0dHBPbmx5OiBqd3RFTlYuSldUX0hUVFBfT05MWSxcbiAgICAgICAgICAgIG1heEFnZTogand0RU5WLkpXVF9NQVhfQUdFICogMTAwMCxcbiAgICAgICAgICAgIHNlY3VyZTogand0RU5WLkpXVF9TRUNVUkUsXG4gICAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICAgIG5hbWU6IHVzZXIubmV3VXNlcixcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICB0b2tlbjogdG9rZW4sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaGFuZGxlRXJyb3IoZXJyb3IsIHJlcyk7XG4gICAgfVxufTtcbi8vICoqIFVzZXIgTG9naW5cbmV4cG9ydCBjb25zdCB1c2VyTG9naW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlRXJyb3IobmV3IEVycm9yKCdMb2dpbiBWYWxpZGF0aW9uIEVycm9yIScpLCByZXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyUmVnaXN0cmF0aW9uLmxvZ2luVXNlcihlbWFpbCwgcGFzc3dvcmQpO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b2tlbiA9IGp3dEdlbmVyYXRvcih7IGlkOiB1c2VyLmlkIH0pO1xuICAgICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBqd3RSZWZyZXNoKHsgaWQ6IHVzZXIuaWQgfSk7XG4gICAgICAgIC8vIFNldHRpbmcgdGhlIGFjY2VzcyB0b2tlbiBjb29raWVcbiAgICAgICAgcmVzLmNvb2tpZSgnand0JywgdG9rZW4sIHtcbiAgICAgICAgICAgIGh0dHBPbmx5OiBqd3RFTlYuSldUX0hUVFBfT05MWSxcbiAgICAgICAgICAgIG1heEFnZTogand0RU5WLkpXVF9NQVhfQUdFICogMTAwMCwgLy8gaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgICBzZWN1cmU6IGp3dEVOVi5KV1RfU0VDVVJFLFxuICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gU2V0dGluZyB0aGUgcmVmcmVzaCB0b2tlbiBjb29raWVcbiAgICAgICAgcmVzLmNvb2tpZSgncmVmcmVzaFRva2VuJywgcmVmcmVzaFRva2VuLCB7XG4gICAgICAgICAgICBodHRwT25seTogand0RU5WLkpXVF9IVFRQX09OTFksXG4gICAgICAgICAgICBtYXhBZ2U6IGp3dEVOVi5KV1RfUkVGUkVTSF9NQVhfQUdFICogMTAwMCwgLy8gaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgICBzZWN1cmU6IGp3dEVOVi5KV1RfU0VDVVJFLFxuICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnNldEhlYWRlcignQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt0b2tlbn1gKTtcbiAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gdXNlcjtcbiAgICAgICAgcmVzLmpzb24oeyB0b2tlbiwgcmVmcmVzaFRva2VuLCB1c2VyOiB1c2VyLmlkIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaGFuZGxlRXJyb3IoZXJyb3IsIHJlcyk7XG4gICAgfVxufTtcbi8vICoqIFVzZXIgTG9nb3V0XG5leHBvcnQgY29uc3QgdXNlckxvZ291dCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSByZXEuY29va2llcy5yZWZyZXNoVG9rZW47XG4gICAgICAgIGlmICghYWNjZXNzVG9rZW4gJiYgIXJlZnJlc2hUb2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnTm8gdG9rZW5zIHByb3ZpZGVkIScgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2xlYXIgdGhlIGFjY2VzcyB0b2tlblxuICAgICAgICByZXMuY29va2llKCdqd3QnLCAnJywge1xuICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgICBtYXhBZ2U6IDEsIC8vIDEgbWlsbGlzZWNvbmQgdG8gZWZmZWN0aXZlbHkgZXhwaXJlIHRoZSBjb29raWVcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIENsZWFyIHRoZSByZWZyZXNoIHRva2VuXG4gICAgICAgIHJlcy5jb29raWUoJ3JlZnJlc2hUb2tlbicsICcnLCB7XG4gICAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICAgICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgICAgICAgIG1heEFnZTogMSwgLy8gMSBtaWxsaXNlY29uZCB0byBlZmZlY3RpdmVseSBleHBpcmUgdGhlIGNvb2tpZVxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBsb2dnZWQgb3V0JyB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKGVycm9yLCByZXMpO1xuICAgIH1cbn07XG4vLyAqKiBSZWZyZXNoIFRva2VuXG5leHBvcnQgY29uc3QgcmVmcmVzaFRva2VuID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcmVmcmVzaFRva2VuID0gcmVxLmNvb2tpZXMucmVmcmVzaFRva2VuO1xuICAgIGlmICghcmVmcmVzaFRva2VuKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgand0LnZlcmlmeShyZWZyZXNoVG9rZW4sIGp3dEVOVi5KV1RfUkVGUkVTSF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSldUIHZlcmlmaWNhdGlvbiBlcnJvcicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBJbnZhbGlkIFRva2VuJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyUmVnaXN0cmF0aW9uLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IHRva2VuXG4gICAgICAgICAgICBjb25zdCBuZXdUb2tlbiA9IGp3dC5zaWduKHsgaWQ6IHVzZXIuaWQgfSwgand0RU5WLkpXVF9TRUNSRVQsIHtcbiAgICAgICAgICAgICAgICBleHBpcmVzSW46IGp3dEVOVi5KV1RfRVhQSVJFU19JTixcbiAgICAgICAgICAgICAgICBhbGdvcml0aG06IGp3dEVOVi5KV1RfQUxHT1JJVEhNLFxuICAgICAgICAgICAgICAgIGlzc3Vlcjogand0RU5WLkpXVF9JU1NVRVIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlcy5jb29raWUoJ2p3dCcsIG5ld1Rva2VuLCB7XG4gICAgICAgICAgICAgICAgaHR0cE9ubHk6IGp3dEVOVi5KV1RfSFRUUF9PTkxZLFxuICAgICAgICAgICAgICAgIG1heEFnZTogand0RU5WLkpXVF9SRUZSRVNIX01BWF9BR0UgKiAxMDAwLFxuICAgICAgICAgICAgICAgIHNlY3VyZTogand0RU5WLkpXVF9TRUNVUkUsXG4gICAgICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHRva2VuOiBuZXdUb2tlbiwgdXNlcjogdXNlci5pZCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgY3VycmVudCB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGdldHRpbmcgY3VycmVudCB1c2VyJyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfSk7XG59O1xuIiwiaW1wb3J0ICdkb3RlbnYvY29uZmlnJztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IHsgSW1hZ2VTdG9yYWdlcywgUHJvZmlsZVBpY3R1cmVzLCBVc2VycyB9IGZyb20gJy4uL21vZGVscy9pbmRleC5tb2RlbCc7XG4vLyAqKiBSZWZhY3RvcmVkIGZ1bmN0aW9uIHRvIHJldHVybiBpbWFnZSBVUkxcbmV4cG9ydCBjb25zdCBnZXRJbWFnZVByZXZpZXdVcmwgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBJbWFnZVN0b3JhZ2VzLmZpbmRJbWFnZUJ5UmVmZXJlbmNlS2V5KCd1c2VyX2lkJywgdXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnTm8gaW1hZ2UgZm91bmQnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBpbWFnZVVybDogaW1hZ2UuaW1hZ2VVcmwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBpbWFnZSBwcmV2aWV3OicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2V0IGltYWdlIHByZXZpZXcnKTtcbiAgICB9XG59O1xuLy8gKiogUmV0dXJuIFByb2ZpbGUgcGljdHVyZSB1cmwgZm9yIHByZXZpZXdcbmV4cG9ydCBjb25zdCBnZXRQcm9maWxlUGljUHJldmlld1VybCA9IGFzeW5jIChyZXEpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHVzZXIgZm91bmQnKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJvZmlsZVBpYyA9IGF3YWl0IFByb2ZpbGVQaWN0dXJlcy5maW5kUHJvZmlsZVBpY0J5UmVmZXJlbmNlS2V5KCd1c2VyX2lkJywgdXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXByb2ZpbGVQaWMpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gcHJvZmlsZSBwaWMgZm91bmQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQcm9maWxlIFBpYzonLCBwcm9maWxlUGljKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9maWxlUGljO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcHJvZmlsZSBwaWMgcHJldmlldzonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGdldCBwcm9maWxlIHBpYyBwcmV2aWV3Jyk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IHsgZ2V0SW1hZ2VQcmV2aWV3VXJsLCBnZXRQcm9maWxlUGljUHJldmlld1VybCB9O1xuIiwiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgT3AgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgand0RU5WIH0gZnJvbSAnLi4vY29uZmlnL2p3dEVOVic7XG5pbXBvcnQgeyBQb3N0cywgUHJvZmlsZVBpY3R1cmVzLCBVc2VycyB9IGZyb20gJy4uL21vZGVscy9pbmRleC5tb2RlbCc7XG5pbXBvcnQgeyB2YWxpZGF0ZUFuZFBhcnNlUGFyYW1zIH0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGVBbmRQYXJzZVBhcmFtcyc7XG5kb3RlbnYuY29uZmlnKCk7XG4vLyAqKiBHZXQgYWxsIFVzZXJzIGZyb20gZGF0YWJhc2Ugd2l0aCBsaW1pdCBhbmQgb2Zmc2V0XG5leHBvcnQgY29uc3QgZ2V0QWxsVXNlcnMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJzX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2Vyc19pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcnNfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2Vycykge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCwgMTApIHx8IDEwOyAvLyBEZWZhdWx0IGxpbWl0IHRvIDEwXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEFsbCgpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlcnMgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXVzZXIgfHwgdXNlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VycyBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJzT2JqZWN0ID0gdXNlci5yZWR1Y2UoKGFjYywgdXNlcikgPT4ge1xuICAgICAgICAgICAgICAgIGFjY1t1c2VyLmlkXSA9IHVzZXI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2Vyc09iamVjdCxcbiAgICAgICAgICAgICAgICBsaW1pdDogbGltaXQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBPcHRpb25hbGx5LCB5b3UgY291bGQgYWRkIHJvbGUtYmFzZWQgY2hlY2tzIGhlcmVcbiAgICAgICAgLy8gaWYgKHVzZXIucm9sZSAhPT0gJ2FkbWluJykge1xuICAgICAgICAvLyAgIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ0ZvcmJpZGRlbicgfSk7XG4gICAgICAgIC8vICAgcmV0dXJuO1xuICAgICAgICAvLyB9XG4gICAgICAgIC8vIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQocmVxLnF1ZXJ5LmxpbWl0IGFzIHN0cmluZywgMTApIHx8IDEwOyAvLyBEZWZhdWx0IGxpbWl0IHRvIDEwXG4gICAgICAgIC8vIGNvbnN0IGF0dHJpYnV0ZXMgPSBbXG4gICAgICAgIC8vICAgJ2lkJyxcbiAgICAgICAgLy8gICAnZmlyc3ROYW1lJyxcbiAgICAgICAgLy8gICAnbGFzdE5hbWUnLFxuICAgICAgICAvLyAgICd1c2VybmFtZScsXG4gICAgICAgIC8vICAgJ2ltYWdlVVJMJyxcbiAgICAgICAgLy8gICAnYXZhdGFyVXJsJyxcbiAgICAgICAgLy8gICAncHJvZmlsZVBpYycsXG4gICAgICAgIC8vICAgJ2JpbycsXG4gICAgICAgIC8vIF07XG4gICAgICAgICk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGFsbCB1c2VyczonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvciEnIH0pO1xuICAgIH1cbn07XG4vLyAqKiBHZXQgdXNlciBieSBJRFxuZXhwb3J0IGNvbnN0IGdldFVzZXJCeUlEID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJzX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2Vyc19pZCkge1xuICAgICAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgICAgICAuc3RhdHVzKDQwMClcbiAgICAgICAgICAgICAgICAgICAgLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCAoZGVjb2RlZFRva2VuKSBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVzZXJzX2lkICE9PSB1c2Vyc19pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBhdHRlbXB0IScgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVkVXNlcklkID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnJlcXVlc3RlZFVzZXJJZCwgMTApIHx8IDEwO1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHJlcXVlc3RlZFVzZXJJZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICAgICAgdXNlcnNfaWQ6IHVzZXJzX2lkLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJzX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IElEOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gKiogVXBkYXRlIHVzZXJcbmV4cG9ydCBjb25zdCB1cGRhdGVVc2VyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBwcm9maWxlUGljOiBuZXdJbWFnZVVybCwgbmV3VXNlciwgLi4ucmVzdCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVW5hdXRob3JpemVkIC0gTm8gdG9rZW4nKTtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQhJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VuYXV0aG9yaXplZCAtIEludmFsaWQgdG9rZW4nKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VuYXV0aG9yaXplZCAtIE5vIHVzZXIgSUQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlci5pZCAhPT0gdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVbmF1dGhvcml6ZWQgYXR0ZW1wdCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgYXR0ZW1wdCEnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc3QpLmxlbmd0aCA9PT0gMCAmJiAhbmV3SW1hZ2VVcmwpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gZmllbGRzIHRvIHVwZGF0ZScpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdObyBmaWVsZHMgdG8gdXBkYXRlJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdVc2VyKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BhY2VJbmRleCA9IG5ld1VzZXI/Lmxhc3RJbmRleE9mKCcgJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3ROYW1lID0gc3BhY2VJbmRleCAhPT0gLTEgPyBuZXdVc2VyLnNsaWNlKDAsIHNwYWNlSW5kZXgpIDogbmV3VXNlcjtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0TmFtZSA9IHNwYWNlSW5kZXggIT09IC0xID8gbmV3VXNlci5zbGljZShzcGFjZUluZGV4ICsgMSkgOiAnJztcbiAgICAgICAgICAgICAgICByZXN0LmZpcnN0TmFtZSA9IGZpcnN0TmFtZTtcbiAgICAgICAgICAgICAgICByZXN0Lmxhc3ROYW1lID0gbGFzdE5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcHJvZmlsZVBpYyA9IHVzZXI/LnByb2ZpbGVQaWM7XG4gICAgICAgICAgICBpZiAocHJvZmlsZVBpYyAmJiBuZXdJbWFnZVVybCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlID0gYXdhaXQgUHJvZmlsZVBpY3R1cmVzLmZpbmRQcm9maWxlUGljQnlSZWZlcmVuY2VLZXkoJ3VzZXJfaWQnLCB1c2VyX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBpbWFnZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnTm8gaW1hZ2UgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9maWxlUGljID0gbmV3SW1hZ2VVcmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0geyAuLi5yZXN0LCBwcm9maWxlUGljIH07XG4gICAgICAgICAgICAvLyAqKiBVcGRhdGUgdXNlclxuICAgICAgICAgICAgY29uc3QgW2FmZmVjdGVkQ291bnQsIHVwZGF0ZWRVc2Vyc10gPSBhd2FpdCBVc2Vycy51cGRhdGVVc2VyKHVzZXJfaWQsIGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgdXBkYXRpbmcgdXNlcjonLCB1cGRhdGVkVXNlcnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciB1cGRhdGluZyB1c2VyJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVwZGF0ZWRVc2VycywgcHJvZmlsZVBpYyB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVVc2VyO1xufTtcbi8vICoqIEdldCB1c2VyIGZvciBwb3N0IHZpZXcgYnkgSURcbmV4cG9ydCBjb25zdCBnZXRVc2VyRm9yUG9zdFZpZXdCeUlEID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVzZXIuaWQgIT09IHVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgYXR0ZW1wdCEnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlZFVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQWxsKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogdXNlcl9pZCB9LFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IFBvc3RzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NhcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpbWFnZVVSTCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xvY2F0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFncycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xpa2VzX0NvdW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY3JlYXRlZF9BdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NyZWF0b3JfSWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXJlcXVlc3RlZFVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzXG4gICAgICAgICAgICAgICAgLnN0YXR1cygyMDApXG4gICAgICAgICAgICAgICAgLmpzb24oeyByZXF1ZXN0ZWRVc2VyOiByZXF1ZXN0ZWRVc2VyLCB1c2VyX2lkOiB1c2VyX2lkIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBieSBJRDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vICoqIEdldCB1c2VyIGRhdGEgYnkgSURcbmV4cG9ydCBjb25zdCBnZXRVc2VyRGF0YUJ5SUQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcnNfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJzX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgYW5kIHBhcnNlIHBhcmFtZXRlcnNcbiAgICAgICAgICAgIGxldCBwb3N0X2lkLCBjcmVhdG9yX2lkLCB1c2VyX2lkO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAoeyBwb3N0X2lkLCBjcmVhdG9yX2lkLCB1c2VyX2lkIH0gPSB2YWxpZGF0ZUFuZFBhcnNlUGFyYW1zKHJlcSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5nZXRVc2VyQnlJRCh1c2Vyc19pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlclBvc3REYXRhID0gYXdhaXQgVXNlcnMuZ2V0VXNlclByb2ZpbGUodXNlcl9pZCB8fCB1c2Vyc19pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICd1c2VyIHByb2ZpbGUgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlci5pZCAhPT0gdXNlcnNfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgYXR0ZW1wdCEnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0cy5maW5kQnlQayhwb3N0X2lkKTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgICAgICBwb3N0LFxuICAgICAgICAgICAgICAgIGNyZWF0b3JfaWQsXG4gICAgICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgICAgICB1c2VyUG9zdERhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgYnkgSUQ6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyAqKiBHZXQgY3VycmVudCB1c2VyXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlci5pZCAhPT0gdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgICAgICAuc3RhdHVzKDQwMylcbiAgICAgICAgICAgICAgICAgICAgLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkIGF0dGVtcHQhIFVzZXIgaWQgZG8gbm90IG1hdGNoLicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldEN1cnJlbnRVc2VyOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxufTtcbi8vICoqIEZldGNoIHVzZXJzIGZvciBob21lIHN0b3J5IHZpZXcgd2l0aCBsaW1pdCBhbmQgb2Zmc2V0XG5leHBvcnQgY29uc3QgZmV0Y2hVc2Vyc0ZvckhvbWVTdG9yeSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2Vyc19pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcnNfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCwgMTApIHx8IDEwOyAvLyBEZWZhdWx0IGxpbWl0IHRvIDEwXG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBwYXJzZUludChyZXEucXVlcnkub2Zmc2V0LCAxMCkgfHwgMDsgLy8gRGVmYXVsdCBvZmZzZXQgdG8gMFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEFsbCh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtPcC5uZV06IHVzZXJzX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IG9mZnNldCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlcnMgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXVzZXIgfHwgdXNlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlcnMgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB1c2Vyc09iamVjdCA9IHVzZXIucmVkdWNlKChhY2MsIHVzZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYWNjW3VzZXIuaWRdID0gdXNlcjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgICAgICAgICB1c2VyOiB1c2Vyc09iamVjdCxcbiAgICAgICAgICAgICAgICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IG9mZnNldCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChkYkVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBhbGwgdXNlcnM6JywgZGJFcnJvcik7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yIScgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBhbGwgdXNlcnM6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IhJyB9KTtcbiAgICB9XG59O1xuIiwiaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnO1xuaW1wb3J0IHsgand0RU5WIH0gZnJvbSAnLi4vLi4vY29uZmlnL2p3dEVOVic7XG5pbXBvcnQgVXNlclJlZ2lzdHJhdGlvbiBmcm9tICcuLi8uLi9tb2RlbHMvdXNlclJlZ2lzdGVyLm1vZGVsJztcbmltcG9ydCB7IGhhbmRsZUVycm9yIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXJyb3JIYW5kbGVyJztcbmltcG9ydCB7IGp3dEdlbmVyYXRvciwgand0UmVmcmVzaCB9IGZyb20gJy4uL2F1dGgvand0R2VuZXJhdG9yJztcbi8vICoqIEFkbWluIExvZ2luXG5leHBvcnQgY29uc3QgYWRtaW5Mb2dpbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcbiAgICAgICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVFcnJvcihuZXcgRXJyb3IoJ0xvZ2luIFZhbGlkYXRpb24gRXJyb3IhJyksIHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWRtaW4gPSBhd2FpdCBVc2VyUmVnaXN0cmF0aW9uLmxvZ2luVXNlcihlbWFpbCwgcGFzc3dvcmQpO1xuICAgICAgICBpZiAoIWFkbWluKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FkbWluIG5vdCBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhc3N3b3JkTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgYWRtaW4uaGFzaGVkcGFzc3dvcmQpO1xuICAgICAgICBpZiAoIXBhc3N3b3JkTWF0Y2gpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5jb3JyZWN0IHBhc3N3b3JkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9rZW4gPSBqd3RHZW5lcmF0b3IoeyBpZDogYWRtaW4uaWQgfSk7XG4gICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IGp3dFJlZnJlc2goeyBpZDogYWRtaW4uaWQgfSk7XG4gICAgICAgIHJlcy5jb29raWUoJ2p3dCcsIHRva2VuLCB7XG4gICAgICAgICAgICBodHRwT25seTogand0RU5WLkpXVF9IVFRQX09OTFksXG4gICAgICAgICAgICBtYXhBZ2U6IGp3dEVOVi5KV1RfTUFYX0FHRSAqIDEwMDAsXG4gICAgICAgICAgICBzZWN1cmU6IGp3dEVOVi5KV1RfU0VDVVJFLFxuICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLmNvb2tpZSgncmVmcmVzaFRva2VuJywgcmVmcmVzaFRva2VuLCB7XG4gICAgICAgICAgICBodHRwT25seTogand0RU5WLkpXVF9IVFRQX09OTFksXG4gICAgICAgICAgICBtYXhBZ2U6IGp3dEVOVi5KV1RfUkVGUkVTSF9NQVhfQUdFICogMTAwMCxcbiAgICAgICAgICAgIHNlY3VyZTogand0RU5WLkpXVF9TRUNVUkUsXG4gICAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc2V0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3Rva2VufWApO1xuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBhZG1pbjtcbiAgICAgICAgcmVzLmpzb24oeyB0b2tlbiwgcmVmcmVzaFRva2VuLCB1c2VyOiBhZG1pbi5pZCB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKGVycm9yLCByZXMpO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBqd3RFTlYgfSBmcm9tICcuLi8uLi9jb25maWcvand0RU5WJztcbmltcG9ydCBBZG1pbiBmcm9tICcuLi8uLi9tb2RlbHMvYWRtaW4ubW9kZWwnO1xuaW1wb3J0IFVzZXJSZWdpc3RyYXRpb24gZnJvbSAnLi4vLi4vbW9kZWxzL3VzZXJSZWdpc3Rlci5tb2RlbCc7XG4vLyAqKiBDaGVjayBpZiB1c2VyIGlzIGFuIGFkbWluXG5leHBvcnQgY29uc3QgaXNBZG1pbiA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignSldUIHZlcmlmaWNhdGlvbiBlcnJvcjonLCBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWRtaW4gPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIWFkbWluKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnYWRtaW4gaWQgdG9rZW4gaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvZ2dlZEluQWRtaW4gPSBhd2FpdCBVc2VyUmVnaXN0cmF0aW9uLmZpbmRCeVBrKGFkbWluKTtcbiAgICAgICAgICAgIGlmICghbG9nZ2VkSW5BZG1pbikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0N1cnJlbnQgYWRtaW4gbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobG9nZ2VkSW5BZG1pbiAhPT0gYWRtaW4pIHtcbiAgICAgICAgICAgICAgICByZXNcbiAgICAgICAgICAgICAgICAgICAgLnN0YXR1cyg0MDEpXG4gICAgICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBhY2Nlc3MgdG8gYWRtaW4gcm91dGUnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IEFkbWluLmZpbmRCeVBrKGFkbWluKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYW1pbjonLCBhZG1pbik7XG4gICAgICAgICAgICAgICAgaWYgKHVzZXIgJiYgdXNlci5yb2xlID09PSAnYWRtaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IHVzZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJldHJpZXZpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICB1c2VyOiByZXMubG9jYWxzLnVzZXIsXG4gICAgICAgICAgICAgICAgbG9nZ2VkSW5BZG1pbixcbiAgICAgICAgICAgICAgICBhZG1pbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2ZXJpZnlpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IHsgaXNBZG1pbiB9O1xuIiwiaW1wb3J0IHJhdGVMaW1pdCBmcm9tICdleHByZXNzLXJhdGUtbGltaXQnO1xuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vLi4vY29uZmlnL2luZGV4Jztcbi8vICoqIEtleSBHZW5lcmF0b3JcbmV4cG9ydCBjb25zdCBrZXlHZW5lcmF0b3IgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBpZiAoIXJlcS5pcCkge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6ICdXYXJuaW5nOiByZXF1ZXN0LmlwIGlzIG1pc3NpbmchJyB9KTtcbiAgICAgICAgcmV0dXJuIHJlcS5zb2NrZXQucmVtb3RlQWRkcmVzcztcbiAgICB9XG4gICAgcmV0dXJuIHJlcS5pcC5yZXBsYWNlKC86XFxkK1teOl0qJC8sICcnKTtcbn07XG4vLyAqKiBSYXRlIExpbWl0ZXJcbmV4cG9ydCBjb25zdCBsaW1pdGVyID0gcmF0ZUxpbWl0KHtcbiAgICB3aW5kb3dNczogZW52LlJBUkVfTElNSVRfV0lORE9XX01TLFxuICAgIG1heDogZW52Lk1BWCxcbiAgICBtZXNzYWdlOiBlbnYuUkFSRV9MSU1JVF9NRVNTQUdFLFxuICAgIHN0YXR1c0NvZGU6IGVudi5SQVJFX0xJTUlUX0NPREUsXG4gICAgaGFuZGxlcjogKF9yZXEsIHJlcykgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKGVudi5SQVJFX0xJTUlUX0NPREUpLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogZW52LlJBUkVfTElNSVRfTUVTU0FHRSxcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBrZXlHZW5lcmF0b3IsXG59KTtcbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBsaW1pdGVyLFxuICAgIGtleUdlbmVyYXRvcixcbn07XG4iLCJpbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBqd3RFTlYgfSBmcm9tICcuLi8uLi9jb25maWcvand0RU5WJztcbmRvdGVudi5jb25maWcoKTtcbi8vICoqIEpXVCBHZW5lcmF0b3JcbmV4cG9ydCBjb25zdCBqd3RHZW5lcmF0b3IgPSAocGF5bG9hZCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBqd3RFTlYuSldUX1NFQ1JFVCwge1xuICAgICAgICAgICAgYWxnb3JpdGhtOiBqd3RFTlYuSldUX0FMR09SSVRITSxcbiAgICAgICAgICAgIGV4cGlyZXNJbjogand0RU5WLkpXVF9FWFBJUkVTX0lOLFxuICAgICAgICAgICAgaXNzdWVyOiBqd3RFTlYuSldUX0lTU1VFUixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgSldUJyk7XG4gICAgfVxufTtcbi8vICoqIEpXVCBWZXJpZmllclxuZXhwb3J0IGNvbnN0IGp3dFZlcmlmaWVyID0gKHRva2VuKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVUKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgdmVyaWZ5aW5nIEpXVCcpO1xuICAgIH1cbn07XG4vLyAqKiBKV1QgUmVmcmVzaFxuZXhwb3J0IGNvbnN0IGp3dFJlZnJlc2ggPSAocGF5bG9hZCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBqd3RFTlYuSldUX1JFRlJFU0hfU0VDUkVULCB7XG4gICAgICAgICAgICBhbGdvcml0aG06IGp3dEVOVi5KV1RfQUxHT1JJVEhNLFxuICAgICAgICAgICAgZXhwaXJlc0luOiBqd3RFTlYuSldUX1JFRlJFU0hfRVhQSVJFU19JTixcbiAgICAgICAgICAgIGlzc3Vlcjogand0RU5WLkpXVF9JU1NVRVIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBnZW5lcmF0aW5nIEpXVCcpO1xuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgand0R2VuZXJhdG9yLFxuICAgIGp3dFZlcmlmaWVyLFxuICAgIGp3dFJlZnJlc2gsXG59O1xuIiwiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgand0RU5WIH0gZnJvbSAnLi4vLi4vY29uZmlnL2p3dEVOVic7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi4vLi4vbW9kZWxzL3VzZXIubW9kZWwnO1xuZG90ZW52LmNvbmZpZygpO1xuLy8gKiogUmVxdWlyZSBBdXRoXG5leHBvcnQgY29uc3QgcmVxdWlyZUF1dGggPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKGRlY29kZWRUb2tlbi5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMubG9jYWxzLnVzZXIgPSB1c2VyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmV0cmlldmluZyB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgbmV4dCgpO1xuICAgIH1cbn07XG4vLyAqKiBWZXJpZnkgVXNlclxuZXhwb3J0IGNvbnN0IHZlcmlmeVVzZXIgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3I6JywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKGRlY29kZWRUb2tlbi5pZCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RlY29kZWRUb2tlbjonLCBkZWNvZGVkVG9rZW4pO1xuICAgICAgICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IHVzZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJldHJpZXZpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2ZXJpZnlpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IHsgdmVyaWZ5VXNlciwgcmVxdWlyZUF1dGggfTtcbiIsImltcG9ydCB7IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIH0gZnJvbSAnLi9zZXF1aWxpemVDb24nO1xuLy8gKiogRGF0YWJhc2UgQ29ubmVjdGlvblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JEQigpIHtcbiAgICBjb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuICAgIGNvbnN0IG1heEF0dGVtcHRzID0gMTA7IC8vIDEwIGF0dGVtcHRzXG4gICAgY29uc3QgZGVsYXkgPSAxMDAwOyAvLyAxIHNlY29uZFxuICAgIGxldCBhdHRlbXB0cyA9IDA7XG4gICAgd2hpbGUgKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRlc3QgdGhlIGNvbm5lY3Rpb25cbiAgICAgICAgICAgIGF3YWl0IHNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkLCBTdGFydGluZyBTZXJ2ZXIuLi4uLicpO1xuICAgICAgICAgICAgLy8gU3luYyB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgIGF3YWl0IHNlcXVlbGl6ZS5zeW5jKHsgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRHJvcCBhbmQgcmUtc3luYyBkYi4nKTtcbiAgICAgICAgICAgIHJldHVybiBzZXF1ZWxpemU7IC8vIFJldHVybiB0aGUgU2VxdWVsaXplIGluc3RhbmNlXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgICBhdHRlbXB0cysrO1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5lcnJvcignTWF4IGF0dGVtcHRzIHJlYWNoZWQsIGRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xufVxuZXhwb3J0IGRlZmF1bHQgeyB3YWl0Rm9yREIgfTtcbiIsImltcG9ydCBmcyBmcm9tICdub2RlOmZzJztcbmltcG9ydCB7IFNlcXVlbGl6ZSB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBkYXRhYmFzZUVOViB9IGZyb20gJy4uLy4uL2NvbmZpZy9kYXRhYmFzZUVOVic7XG4vLyAqKiBEYXRhYmFzZSBGdXJ0aGVyIENvbmZpZ3VyYXRpb25cbmNvbnN0IGRiQ29uZmlnID0ge1xuICAgIERpYWxlY3Q6ICdtYXJpYWRiJyxcbiAgICBob3N0OiBkYXRhYmFzZUVOVi5EQl9IT1NUIHx8ICdsb2NhbGhvc3QnLFxuICAgIHVzZXJuYW1lOiBkYXRhYmFzZUVOVi5EQl9VU0VSIHx8ICdtZXRhbGJyYWluJyxcbiAgICBwYXNzd29yZDogZGF0YWJhc2VFTlYuREJfUEFTUyB8fCAncGFzc3dvcmQnLFxuICAgIGRhdGFiYXNlOiBkYXRhYmFzZUVOVi5EQl9OQU1FIHx8ICdGaW5kU29tZU9uZScsXG4gICAgc29ja2V0UGF0aDogZGF0YWJhc2VFTlYuREJfU09DS0VUX1BBVEggfHwgJy92YXIvcnVuL215c3FsZC9teXNxbGQuc29jaycsXG4gICAgc29ja2V0VGltZW91dDogZGF0YWJhc2VFTlYuREJfU09DS0VUX1RJTUVPVVQgfHwgMTAwMCxcbiAgICBjb21wcmVzczogZGF0YWJhc2VFTlYuREJfQ09NUFJFU1MgfHwgZmFsc2UsXG4gICAgZGVidWc6IGRhdGFiYXNlRU5WLkRCX0RFQlVHIHx8IGZhbHNlLFxuICAgIHBlcm1pdExvY2FsSW5maWxlOiBkYXRhYmFzZUVOVi5EQl9QRVJNSVRfTE9DQUxfSU5GSUxFIHx8IGZhbHNlLFxuICAgIHRyYWNlOiBkYXRhYmFzZUVOVi5EQl9UUkFDRSB8fCB0cnVlLFxuICAgIGNoZWNrRHVwbGljYXRlOiBkYXRhYmFzZUVOVi5EQl9DSEVDS19EVVBMSUNBVEUgfHwgZmFsc2UsXG4gICAgY29ubmVjdEF0dHJpYnV0ZXM6IEpTT04ucGFyc2UoZGF0YWJhc2VFTlYuREJfQ09OTkVDVElPTl9BVFRSSUJVVEVTIHx8ICd7fScpLFxuICAgIGNvbm5lY3Rpb25UaW1lb3V0OiBkYXRhYmFzZUVOVi5EQl9DT05ORUNUSU9OX1RJTUVPVVQgfHwgMTAwMCxcbiAgICBwb3J0OiBkYXRhYmFzZUVOVi5EQl9QT1JUIHx8IDMzMDYsXG4gICAgc3NsOiBkYXRhYmFzZUVOVi5EQl9TU0wgfHwgZmFsc2UsXG4gICAgZGlhbGVjdE9wdGlvbnM6IHtcbiAgICAgICAgc3NsOiB7XG4gICAgICAgICAgICBjYTogZGF0YWJhc2VFTlYuREJfU1NMX0NBXG4gICAgICAgICAgICAgICAgPyBmcy5yZWFkRmlsZVN5bmMoZGF0YWJhc2VFTlYuREJfU1NMX0NBKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgOiAnJyxcbiAgICAgICAgICAgIGtleTogZGF0YWJhc2VFTlYuREJfU1NMX0tFWVxuICAgICAgICAgICAgICAgID8gZnMucmVhZEZpbGVTeW5jKGRhdGFiYXNlRU5WLkRCX1NTTF9LRVkpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICA6ICcnLFxuICAgICAgICAgICAgY2VydDogZGF0YWJhc2VFTlYuREJfU1NMX0NFUlRcbiAgICAgICAgICAgICAgICA/IGZzLnJlYWRGaWxlU3luYyhkYXRhYmFzZUVOVi5EQl9TU0xfQ0VSVCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIDogJycsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGRhdGFiYXNlRU5WLlJFSkVDVF9VTkFVVEhPUklaRUQgfHwgdHJ1ZSxcbiAgICBjaXBoZXJzOiBkYXRhYmFzZUVOVi5DSVBIRVJTIHx8ICdFQ0RIRS1SJywgLy8gVXNlIHN0cm9uZyBjaXBoZXJzXG4gICAgbWluVmVyc2lvbjogZGF0YWJhc2VFTlYuTUlOX1ZFUlNJT04gfHwgJ1RMU3YxLjInLCAvLyBFbmZvcmNlIGEgbWluaW11bSBUTFMgdmVyc2lvblxufTtcbi8vICoqIENyZWF0ZSBhIG5ldyBTZXF1ZWxpemUgaW5zdGFuY2VcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpIHtcbiAgICAvLyBDcmVhdGUgYSBuZXcgU2VxdWVsaXplIGluc3RhbmNlXG4gICAgY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZShkYkNvbmZpZy5kYXRhYmFzZSwgZGJDb25maWcudXNlcm5hbWUsIGRiQ29uZmlnLnBhc3N3b3JkLCB7XG4gICAgICAgIGhvc3Q6IGRiQ29uZmlnLmhvc3QsXG4gICAgICAgIGRpYWxlY3Q6IGRiQ29uZmlnLkRpYWxlY3QsXG4gICAgICAgIHBvcnQ6IGRiQ29uZmlnLnBvcnQsXG4gICAgICAgIHNzbDogZGJDb25maWcuc3NsLFxuICAgICAgICBkaWFsZWN0T3B0aW9uczogZGJDb25maWcuZGlhbGVjdE9wdGlvbnMsXG4gICAgfSk7XG4gICAgcmV0dXJuIHNlcXVlbGl6ZTtcbn1cbmV4cG9ydCBkZWZhdWx0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfTtcbiIsIi8vIHRoaXMgd2lsbCBsb2FkIGFsbCBtb2RlbCBjbGFzc2VzIGZvdW5kIGluIGZpbGVzIG1hdGNoaW5nIHRoaXMgZ2xvYiBwYXR0ZXJuLlxuaW1wb3J0IHsgU2VxdWVsaXplLCBpbXBvcnRNb2RlbHMgfSBmcm9tICdAc2VxdWVsaXplL2NvcmUnO1xuaW1wb3J0IHsgTWFyaWFEYkRpYWxlY3QgfSBmcm9tICdAc2VxdWVsaXplL21hcmlhZGInO1xuaW1wb3J0IHsgZGlybmFtZSB9IGZyb20gJ25vZGU6cGF0aCc7XG5pbXBvcnQgeyBmaWxlVVJMVG9QYXRoIH0gZnJvbSAnbm9kZTp1cmwnO1xuaW1wb3J0IHsgZGF0YWJhc2VFTlYgfSBmcm9tICcuLi8uLi9jb25maWcvZGF0YWJhc2VFTlYnO1xuLy8gKiogRGVmaW5lIF9fZGlybmFtZVxuY29uc3QgX19kaXJuYW1lID0gZGlybmFtZShmaWxlVVJMVG9QYXRoKGltcG9ydC5tZXRhLnVybCkpO1xuLy8gKiogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIFNlcXVlbGl6ZVxuZXhwb3J0IGNvbnN0IHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoe1xuICAgIGRpYWxlY3Q6IE1hcmlhRGJEaWFsZWN0LFxuICAgIGhvc3Q6IGRhdGFiYXNlRU5WLkRCX0hPU1QsXG4gICAgdXNlcjogZGF0YWJhc2VFTlYuREJfVVNFUixcbiAgICBwYXNzd29yZDogZGF0YWJhc2VFTlYuREJfUEFTUyxcbiAgICBkYXRhYmFzZTogZGF0YWJhc2VFTlYuREJfTkFNRSxcbiAgICBwb3J0OiBkYXRhYmFzZUVOVi5EQl9QT1JULFxuICAgIHNzbDogZGF0YWJhc2VFTlYuREJfU1NMLFxuICAgIG1vZGVsczogYXdhaXQgaW1wb3J0TW9kZWxzKF9fZGlybmFtZSArICcvc3JjL3NlcnZlci9tb2RlbHMvKiovKi5tb2RlbC57dHMsanN9JyksXG59KTtcbmV4cG9ydCBkZWZhdWx0IHNlcXVlbGl6ZTtcbiIsImltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlIH0gZnJvbSAnYXN5bmNfaG9va3MnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGhlbG1ldCBmcm9tICdoZWxtZXQnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBlbnYgfSBmcm9tICcuLi9jb25maWcvaW5kZXgnO1xuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSAnLi4vcm91dGVzL3JvdXRlcic7XG5pbXBvcnQgeyBnbG9iYWxFcnJvckhhbmRsZXIgfSBmcm9tICcuLi91dGlscy9lcnJvckhhbmRsZXInO1xuaW1wb3J0IHsgbGltaXRlciB9IGZyb20gJy4vYXV0aC9pcENvbmZpZyc7XG4vLyAqKiBFeHByZXNzIExvYWRlclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gKHsgYXBwIH0pIHtcbiAgICBhcHAudXNlKChfcmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgICAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICAgICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gICAgICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICAgICAgaWYgKF9yZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfSk7XG4gICAgYXBwLnVzZSgoX3JlcSwgX3JlcywgbmV4dCkgPT4ge1xuICAgICAgICBjb25zdCBzdG9yZSA9IG5ldyBBc3luY0xvY2FsU3RvcmFnZSgpO1xuICAgICAgICBzdG9yZS5ydW4obmV3IE1hcCgpLCBuZXh0KTtcbiAgICB9KTtcbiAgICAvLyAqKiBCb2R5IFBhcnNlcnNcbiAgICBhcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbiAgICBhcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbiAgICBhcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbiAgICBhcHAudXNlKGNvb2tpZVBhcnNlcigpKTtcbiAgICBhcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbiAgICAvLyAqKiBTZXJ2ZSBzdGF0aWMgZmlsZXMgZnJvbSAnZGlzdCcgZGlyZWN0b3J5XG4gICAgYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnZGlzdCcpKSk7XG4gICAgYXBwLnVzZSgnL2Fzc2V0cycsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICdhc3NldHMnKSkpO1xuICAgIGNvbnN0IFRydXN0X1Byb3h5ID0gZW52LlRSVVNUX1BST1hZIHx8ICdmYWxzZSc7XG4gICAgY29uc3QgbnVtYmVyT2ZQcm94aWVzID0gZW52Lk5VTUJFUl9PRl9QUk9YSUVTIHx8IDE7XG4gICAgaWYgKFRydXN0X1Byb3h5KSB7XG4gICAgICAgIGFwcC5zZXQoJ3RydXN0IHByb3h5JywgdHJ1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKFRydXN0X1Byb3h5ID09PSAnZmFsc2UnKSB7XG4gICAgICAgIGFwcC5zZXQoJ3RydXN0IHByb3h5JywgZmFsc2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXBwLnNldCgndHJ1c3QgcHJveHknLCBUcnVzdF9Qcm94eSk7XG4gICAgICAgIGFwcC5zZXQoJ3RydXN0IHByb3h5JywgbnVtYmVyT2ZQcm94aWVzKTtcbiAgICB9XG4gICAgYXBwLnNldCgndHJ1c3QgcHJveHknLCBudW1iZXJPZlByb3hpZXMpO1xuICAgIGFwcC5nZXQoJy9pcCcsIChyZXF1ZXN0LCByZXNwb25zZSkgPT4gcmVzcG9uc2Uuc2VuZChyZXF1ZXN0LmlwKSk7XG4gICAgYXBwLnVzZShoZWxtZXQoe1xuICAgICAgICBjb250ZW50U2VjdXJpdHlQb2xpY3k6IGZhbHNlLFxuICAgIH0pKTtcbiAgICBhcHAudXNlKGxpbWl0ZXIpO1xuICAgIGFwcC51c2Uocm91dGVyKTtcbiAgICBhcHAudXNlKGdsb2JhbEVycm9ySGFuZGxlcik7XG4gICAgcmV0dXJuIGFwcDtcbn1cbiIsImltcG9ydCBsb2FkZXIgZnJvbSAnLi4vc2VydmljZXMvcGVyZm9ybWFuY2UnO1xuaW1wb3J0IHsgdHJ1bmNhdGVUYWJsZXMgfSBmcm9tICcuLi9zZXJ2aWNlcy90cnVuY2F0ZSc7XG5pbXBvcnQgeyBhcHBDYWNoZSB9IGZyb20gJy4uL3V0aWxzL25vZGVDYWNoZSc7XG5pbXBvcnQgeyB3YWl0Rm9yREIgfSBmcm9tICcuL2RhdGFMb2FkZXIvbWFyaWFkYic7XG5pbXBvcnQgc2VxdWlsaXplTG9hZGVyIGZyb20gJy4vZGF0YUxvYWRlci9zZXF1bGl6ZSc7XG5pbXBvcnQgZXhwcmVzc0xvYWRlciBmcm9tICcuL2V4cHJlc3MnO1xuLy8gKiogRXhwcmVzcyBMb2FkZXJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uICh7IGFwcCB9KSB7XG4gICAgYXBwQ2FjaGUuZmx1c2hBbGwoKTtcbiAgICBhd2FpdCB0cnVuY2F0ZVRhYmxlcygpO1xuICAgIGF3YWl0IHdhaXRGb3JEQigpO1xuICAgIHNlcXVpbGl6ZUxvYWRlcjtcbiAgICBhd2FpdCBleHByZXNzTG9hZGVyKHsgYXBwIH0pO1xuICAgIGxvYWRlcigpO1xuICAgIGNvbnNvbGUubG9nKCdFeHByZXNzIFNlcnZlciBJbnRpYWxpemVkIScpO1xufVxuIiwiaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24uanMnO1xuLy8gKiogRGVmaW5lIEluc3RhbmNlIG9mIFNlcXVlbGl6ZVxuY29uc3Qgc2VxdWVsaXplID0gY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UoKTtcbi8vICoqIERlZmluZSB0aGUgQWRtaW4gTW9kZWxcbmNsYXNzIEFkbWluIGV4dGVuZHMgTW9kZWwge1xuICAgIHN0YXRpYyBhc3luYyBsb2dpbkFkbWluKGVtYWlsLCBoYXNoZWRwYXNzd29yZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kT25lKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGVtYWlsOiBlbWFpbCwgaGFzaGVkcGFzc3dvcmQ6IGhhc2hlZHBhc3N3b3JkIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGxvZyBvdXQgdXNlclxuICAgIHN0YXRpYyBhc3luYyBsb2dvdXRVc2VyKGVtYWlsKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGVtYWlsIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIHJlc2V0IHRoZSBwYXNzd29yZCwgY29tcGFyZSB0aGUgaGFzaGVkIHBhc3N3b3JkXG4gICAgc3RhdGljIGFzeW5jIHJlc2V0UGFzc3dvcmQoZW1haWwsIGhhc2hlZHBhc3N3b3JkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGVtYWlsLCBoYXNoZWRwYXNzd29yZDogaGFzaGVkcGFzc3dvcmQgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8gKiogSW5pdGlhbGl6ZSB0aGUgQWRtaW4gTW9kZWxcbkFkbWluLmluaXQoe1xuICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgIH0sXG4gICAgZmlyc3ROYW1lOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxuICAgIGxhc3ROYW1lOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxuICAgIHVzZXJuYW1lOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICBlbWFpbDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgaGFzaGVkcGFzc3dvcmQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG4gICAgcm9sZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6ICdhZG1pbicsXG4gICAgfSxcbiAgICBhdmF0YXJVcmw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgIH0sXG59LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIHRhYmxlTmFtZTogJ2FkbWluJyxcbn0pO1xuLy8gKiogU3luYyB0aGUgQWRtaW4gTW9kZWxcbmF3YWl0IHNlcXVlbGl6ZVxuICAgIC5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdOZXcgQWRtaW4gc3luY2VkIHN1Y2Nlc3NmdWxseScpO1xufSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIEFkbWluIFRhYmxlOicsIGVycik7XG59KTtcbmV4cG9ydCBkZWZhdWx0IEFkbWluO1xuIiwiaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24uanMnO1xuaW1wb3J0IFBvc3RzIGZyb20gJy4vcG9zdC5tb2RlbC5qcyc7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi91c2VyLm1vZGVsLmpzJztcbi8vICoqIERlZmluZSBJbnN0YW5jZSBvZiBTZXF1ZWxpemVcbmNvbnN0IHNlcXVlbGl6ZSA9IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCk7XG4vLyAqKiBEZWZpbmUgdGhlIEltYWdlU3RvcmFnZSBNb2RlbFxuY2xhc3MgSW1hZ2VTdG9yYWdlcyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGZpbmQgYW4gaW1hZ2UgYnkgSURcbiAgICBzdGF0aWMgYXN5bmMgZmluZEltYWdlQnlJZChpZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQnlQayhpZCk7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBmaW5kSW1hZ2VCeVJlZmVyZW5jZUtleShrZXksIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IHRoaXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgW2tleV06IHZhbHVlIH0sXG4gICAgICAgICAgICAgICAgb3JkZXI6IFtbJ2NyZWF0ZWRfQXQnLCAnREVTQyddXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGltYWdlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmluZGluZyBpbWFnZSBieSByZWZlcmVuY2Uga2V5OiAke2tleX0sIHZhbHVlOiAke3ZhbHVlfWAsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yOyAvLyBSZS10aHJvdyB0aGUgZXJyb3IgYWZ0ZXIgbG9nZ2luZyBpdFxuICAgICAgICB9XG4gICAgfVxufVxuLy8gKiogRGVmaW5lIHRoZSBJbWFnZVN0b3JhZ2UgTW9kZWxcbkltYWdlU3RvcmFnZXMuaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICBpbWFnZVVybDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbiAgICB1c2VyX2lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1VzZXJzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHBvc3RfaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnUG9zdHMnLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgY3JlYXRlZF9BdDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG59LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ0ltYWdlU3RvcmFnZXMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxufSk7XG4vLyAqKiBEZWZpbmUgdGhlIGhvb2sgdG8gdXBkYXRlIHRoZSB1c2VyJ3MgaW1hZ2VVUkwgYWZ0ZXIgY3JlYXRpbmcgYW4gaW1hZ2VcbkltYWdlU3RvcmFnZXMuYWZ0ZXJDcmVhdGUoYXN5bmMgKGltYWdlKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKGltYWdlLnVzZXJfaWQpO1xuICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHVzZXIuaW1hZ2VVUkwgPSBpbWFnZS5pbWFnZVVybDtcbiAgICAgICAgYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgfVxufSk7XG4vLyAqKiBEZWZpbmUgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSBVc2VyIGFuZCBJbWFnZVN0b3JhZ2UgbW9kZWxzXG5Vc2Vycy5oYXNNYW55KEltYWdlU3RvcmFnZXMsIHtcbiAgICBmb3JlaWduS2V5OiAndXNlcl9pZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG5Qb3N0cy5oYXNNYW55KEltYWdlU3RvcmFnZXMsIHtcbiAgICBmb3JlaWduS2V5OiAncG9zdF9pZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG4vLyBEZWZpbmUgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSBVc2VyLCBOZXdQb3N0LCBhbmQgSW1hZ2VTdG9yYWdlIG1vZGVsc1xuSW1hZ2VTdG9yYWdlcy5iZWxvbmdzVG8oVXNlcnMsIHtcbiAgICBmb3JlaWduS2V5OiAndXNlcl9pZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG5JbWFnZVN0b3JhZ2VzLmJlbG9uZ3NUbyhQb3N0cywge1xuICAgIGZvcmVpZ25LZXk6ICdwb3N0X2lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxuICAgIG9uVXBkYXRlOiAnQ0FTQ0FERScsXG59KTtcbi8vICoqIHN5bmMgdGhlIEltYWdlU3RvcmFnZSBtb2RlbCB3aXRoIHRoZSBkYXRhYmFzZVxuYXdhaXQgc2VxdWVsaXplXG4gICAgLnN5bmMoeyBmb3JjZTogZmFsc2UgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ05ldyBJbWFnZSBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgbmV3IGltYWdlOicsIGVycik7XG59KTtcbmV4cG9ydCBkZWZhdWx0IEltYWdlU3RvcmFnZXM7XG4iLCJpbXBvcnQgSW1hZ2VTdG9yYWdlcyBmcm9tICcuL2ltYWdlLm1vZGVsJztcbmltcG9ydCBMaWtlcyBmcm9tICcuL2xpa2VQb3N0Lm1vZGVsJztcbmltcG9ydCBQb3N0cyBmcm9tICcuL3Bvc3QubW9kZWwnO1xuaW1wb3J0IFByb2ZpbGVQaWN0dXJlcyBmcm9tICcuL3Byb2ZpbGVQaWMubW9kZWwnO1xuaW1wb3J0IFNhdmVzIGZyb20gJy4vc2F2ZVBvc3QubW9kZWwnO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4vdXNlci5tb2RlbCc7XG5pbXBvcnQgVXNlclJlZ2lzdHJhdGlvbiBmcm9tICcuL3VzZXJSZWdpc3Rlci5tb2RlbCc7XG4vLyAqKlxuZXhwb3J0IHsgSW1hZ2VTdG9yYWdlcywgTGlrZXMsIFBvc3RzLCBQcm9maWxlUGljdHVyZXMsIFNhdmVzLCBVc2VyUmVnaXN0cmF0aW9uLCBVc2VycywgfTtcbmNvbnN0IG1vZGVscyA9IHtcbiAgICBVc2VycyxcbiAgICBQb3N0cyxcbiAgICBMaWtlcyxcbiAgICBTYXZlcyxcbiAgICBQcm9maWxlUGljdHVyZXMsXG4gICAgSW1hZ2VTdG9yYWdlcyxcbiAgICBVc2VyUmVnaXN0cmF0aW9uLFxufTtcbmV4cG9ydCBkZWZhdWx0IG1vZGVscztcbiIsImltcG9ydCB7IERhdGFUeXBlcywgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfSBmcm9tICcuLi9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uJztcbmltcG9ydCBQb3N0cyBmcm9tICcuL3Bvc3QubW9kZWwnO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4vdXNlci5tb2RlbCc7XG4vLyAqKiBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuY2xhc3MgTGlrZXMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gKiogY3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBjcmVhdGUgYSBuZXcgbGlrZVxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGVMaWtlKGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlKGF0dHJpYnV0ZXMpO1xuICAgIH1cbiAgICAvLyAqKiBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGZpbmQgYSBsaWtlIGJ5IElEXG4gICAgc3RhdGljIGFzeW5jIGZpbmRMaWtlQnlJZChpZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQnlQayhpZCk7XG4gICAgfVxuICAgIC8vICoqIGNyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gZmluZCBhIGxpa2UgYnkgcmVmZXJlbmNlIGtleSAodXNlcklkIG9yIHBvc3RJZClcbiAgICBzdGF0aWMgYXN5bmMgZmluZExpa2VCeVJlZmVyZW5jZUtleShrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBba2V5XTogdmFsdWUgfSB9KTtcbiAgICB9XG4gICAgLy8gKiogY3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBmaW5kIGFsbCBsaWtlcyBieSByZWZlcmVuY2Uga2V5ICh1c2VySWQgb3IgcG9zdElkKVxuICAgIHN0YXRpYyBhc3luYyBmaW5kQWxsTGlrZXNCeVJlZmVyZW5jZUtleShrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRBbGwoeyB3aGVyZTogeyBba2V5XTogdmFsdWUgfSB9KTtcbiAgICB9XG4gICAgLy8gKiogY3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBmaW5kIGFsbCBsaWtlcyBieSByZWZlcmVuY2Uga2V5ICh1c2VySWQgb3IgcG9zdElkKVxuICAgIHN0YXRpYyBhc3luYyBkZWxldGVMaWtlQnlSZWZlcmVuY2VLZXkoa2V5LCB2YWx1ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmRlc3Ryb3koeyB3aGVyZTogeyBba2V5XTogdmFsdWUgfSB9KTtcbiAgICB9XG59XG4vLyAqKiBJbml0aWFsaXplIHRoZSBMaWtlIE1vZGVsXG5MaWtlcy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnVXNlcnMnLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgcG9zdF9pZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdQb3N0cycsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBjcmVhdGVkX0F0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbn0sIHtcbiAgICBzZXF1ZWxpemUsXG4gICAgbW9kZWxOYW1lOiAnTGlrZXMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGZyZWV6ZVRhYmxlTmFtZTogdHJ1ZSxcbn0pO1xuLy8gKiogRGVmaW5lIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBVc2VyIGFuZCBMaWtlXG5Vc2Vycy5oYXNNYW55KExpa2VzLCB7XG4gICAgZm9yZWlnbktleTogJ3VzZXJfaWQnLFxuICAgIG9uRGVsZXRlOiAnQ0FTQ0FERScsXG59KTtcbi8vICoqIERlZmluZSB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gUG9zdCBhbmQgTGlrZVxuTGlrZXMuYmVsb25nc1RvKFVzZXJzLCB7XG4gICAgZm9yZWlnbktleTogJ3VzZXJfaWQnLFxufSk7XG4vLyAqKiBEZWZpbmUgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIFBvc3QgYW5kIExpa2VcblBvc3RzLmhhc01hbnkoTGlrZXMsIHtcbiAgICBmb3JlaWduS2V5OiAncG9zdF9pZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbn0pO1xuTGlrZXMuYmVsb25nc1RvKFBvc3RzLCB7XG4gICAgZm9yZWlnbktleTogJ3Bvc3RfaWQnLFxufSk7XG4vLyAqKiBTeW5jIHRoZSBMaWtlIG1vZGVsIHdpdGggdGhlIGRhdGFiYXNlXG5MaWtlcy5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdMaWtlIHN5bmNlZCBzdWNjZXNzZnVsbHknKTtcbn0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2luZyBsaWtlOicsIGVycik7XG59KTtcbmV4cG9ydCBkZWZhdWx0IExpa2VzO1xuIiwiaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24nO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4vdXNlci5tb2RlbCc7XG4vLyBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuY2xhc3MgUG9zdHMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gY3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBjcmVhdGUgYSBuZXcgcG9zdFxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGVQb3N0KGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlKGF0dHJpYnV0ZXMpO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgdXBkYXRlUG9zdChpZCwgYXR0cmlidXRlcykge1xuICAgICAgICBjb25zdCBbYWZmZWN0ZWRDb3VudCwgdXBkYXRlZFBvc3RzXSA9IGF3YWl0IHRoaXMudXBkYXRlKGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgICAgICByZXR1cm5pbmc6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW2FmZmVjdGVkQ291bnQsIHVwZGF0ZWRQb3N0c107XG4gICAgfVxuICAgIC8vIGRlY2xhcmUgc3RhdGljIG1ldGhvZHMgdG8gZGVsZXRlIGEgUG9zdCBieSBJRFxuICAgIHN0YXRpYyBhc3luYyBkZWxldGVQb3N0KGlkKSB7XG4gICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBpZCB9IH0pO1xuICAgICAgICBpZiAocG9zdCkge1xuICAgICAgICAgICAgYXdhaXQgcG9zdC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBnZXQgYWxsIHBvc3RzXG4gICAgc3RhdGljIGFzeW5jIGdldEFsbFBvc3RzKCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQWxsKCk7XG4gICAgfVxuICAgIC8vIGRlY2xhcmUgc3RhdGljIG1ldGhvZHMgdG8gZ2V0IGluZmluaXRlIHBvc3RzXG4gICAgc3RhdGljIGFzeW5jIGdldEluZmluaXRlUG9zdHMob2Zmc2V0LCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQWxsKHsgb2Zmc2V0LCBsaW1pdCB9KTtcbiAgICB9XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBnZXQgcG9zdCBieSBJRFxuICAgIHN0YXRpYyBhc3luYyBnZXRQb3N0QnlJRChwb3N0X2lkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogcG9zdF9pZCB9IH0pO1xuICAgIH1cbiAgICAvLyBkZWNsYXJlIHN0YXRpYyBtZXRob2RzIHRvIGdldCB1c2VyJ3MgcG9zdHNcbiAgICBzdGF0aWMgYXN5bmMgZ2V0VXNlclBvc3RzKHVzZXJfaWQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZEFsbCh7IHdoZXJlOiB7IGNyZWF0b3JfSWQ6IHVzZXJfaWQgfSB9KTtcbiAgICB9XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBnZXQgU2F2ZWQgcG9zdCBieSBwb3N0IElEXG4gICAgc3RhdGljIGFzeW5jIGdldFNhdmVkUG9zdChwb3N0X2lkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogcG9zdF9pZCB9IH0pO1xuICAgIH1cbiAgICAvLyBkZWNsYXJlIHN0YXRpYyBtZXRob2RzIHRvIGdldCBwb3N0IGJ5IHJlZmVyZW5jZSBJRCAoY3JlYXRvcl9JZClcbiAgICBzdGF0aWMgYXN5bmMgZ2V0UG9zdEJ5UmVmZXJlbmNlSUQoY3JlYXRvcl9JZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgY3JlYXRvcl9JZCB9IH0pO1xuICAgIH1cbn1cbi8vIFN5bmMgdGhlIG1vZGVsIHdpdGggdGhlIGRhdGFiYXNlXG5Qb3N0cy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICB9LFxuICAgIGNhcHRpb246IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGltYWdlVVJMOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxuICAgIGxvY2F0aW9uOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxuICAgIHRhZ3M6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGxpa2VzX0NvdW50OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbiAgICBjcmVhdGVkX0F0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbiAgICBjcmVhdG9yX0lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1VzZXJzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxufSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdQb3N0cycsXG4gICAgdGltZXN0YW1wczogZmFsc2UsXG59KTtcbi8vIENyZWF0ZSBuZXcgcG9zdFxuUG9zdHMuY3JlYXRlUG9zdCA9IGFzeW5jIGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbmV3UG9zdCA9IGF3YWl0IHRoaXMuY3JlYXRlKGF0dHJpYnV0ZXMpO1xuICAgICAgICByZXR1cm4gbmV3UG9zdDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG5ldyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcbi8vIFVwZGF0ZSBwb3N0IGJ5IElEXG5Qb3N0cy51cGRhdGVQb3N0ID0gYXN5bmMgZnVuY3Rpb24gKGlkLCBhdHRyaWJ1dGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2FmZmVjdGVkQ291bnQsIHVwZGF0ZWRQb3N0c10gPSBhd2FpdCB0aGlzLnVwZGF0ZShhdHRyaWJ1dGVzLCB7XG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICAgICAgcmV0dXJuaW5nOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFthZmZlY3RlZENvdW50LCB1cGRhdGVkUG9zdHNdO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn07XG4vLyBpbmZpbml0ZSBwb3N0c1xuUG9zdHMuZ2V0SW5maW5pdGVQb3N0cyA9IGFzeW5jIGZ1bmN0aW9uIChvZmZzZXQsIGxpbWl0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcG9zdHMgPSBhd2FpdCB0aGlzLmZpbmRBbGwoeyBvZmZzZXQsIGxpbWl0IH0pO1xuICAgICAgICByZXR1cm4gcG9zdHM7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGluZmluaXRlIHBvc3RzOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcbi8vIEdldCBzZWFyY2ggcmVzdWx0cyAtIHBvc3RzXG5Qb3N0cy5nZXRQb3N0QnlJRCA9IGFzeW5jIGZ1bmN0aW9uIChpZCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBpZCB9IH0pO1xuICAgICAgICByZXR1cm4gcG9zdDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcG9zdCBieSBJRDonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn07XG4vLyBHZXQgdXNlcidzIHBvc3RzXG5Qb3N0cy5nZXRVc2VyUG9zdHMgPSBhc3luYyBmdW5jdGlvbiAodXNlcl9pZCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgdGhpcy5maW5kQWxsKHsgd2hlcmU6IHsgY3JlYXRvcl9JZDogdXNlcl9pZCB9IH0pO1xuICAgICAgICByZXR1cm4gcG9zdHM7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgcG9zdHM6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59O1xuLy8gRGVmaW5lIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgVXNlciBhbmQgUG9zdCBtb2RlbHNcblVzZXJzLmhhc01hbnkoUG9zdHMsIHtcbiAgICBmb3JlaWduS2V5OiAnY3JlYXRvcl9JZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG5Qb3N0cy5iZWxvbmdzVG8oVXNlcnMsIHtcbiAgICBmb3JlaWduS2V5OiAnY3JlYXRvcl9JZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG5hd2FpdCBzZXF1ZWxpemVcbiAgICAuc3luYyh7IGZvcmNlOiBmYWxzZSB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnUG9zdCBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgUG9zdDonLCBlcnIpO1xufSk7XG5leHBvcnQgZGVmYXVsdCBQb3N0cztcbiIsImltcG9ydCB7IERhdGFUeXBlcywgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfSBmcm9tICcuLi9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uJztcbmltcG9ydCBVc2VycyBmcm9tICcuL3VzZXIubW9kZWwnO1xuY29uc3Qgc2VxdWVsaXplID0gY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UoKTtcbmNsYXNzIFByb2ZpbGVQaWN0dXJlcyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGZpbmQgYSBwcm9maWxlIHBpY3R1cmUgYnkgSURcbiAgICBzdGF0aWMgYXN5bmMgZmluZFByb2ZpbGVQaWN0dXJlQnlJZCh1c2VyX2lkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgIH1cbiAgICAvLyAqKiBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIHJldGlyZXZlIGEgcHJvZmlsZSBwaWN0dXJlIGJ5IHJlZmVyZW5jZSBJRCh1c2VyX2lkKVxuICAgIHN0YXRpYyBhc3luYyBnZXRQcm9maWxlUGljQnlSZWZlcmVuY2VJRCh1c2VyX2lkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyB1c2VyX2lkIH0gfSk7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBmaW5kUHJvZmlsZVBpY0J5UmVmZXJlbmNlS2V5KGtleSwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHByb2ZpbGVJbWFnZSA9IGF3YWl0IHRoaXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgW2tleV06IHZhbHVlIH0sXG4gICAgICAgICAgICAgICAgb3JkZXI6IFtbJ2NyZWF0ZWRfQXQnLCAnREVTQyddXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHByb2ZpbGVJbWFnZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZpbmRpbmcgcHJvZmlsZSBpbWFnZSBieSByZWZlcmVuY2Uga2V5OiAke2tleX0sIHZhbHVlOiAke3ZhbHVlfWAsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yOyAvLyBSZS10aHJvdyB0aGUgZXJyb3IgYWZ0ZXIgbG9nZ2luZyBpdFxuICAgICAgICB9XG4gICAgfVxufVxuUHJvZmlsZVBpY3R1cmVzLmluaXQoe1xuICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgIH0sXG4gICAgdXNlcl9pZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdVc2VycycsIC8vIE5hbWUgb2YgdGhlIHVzZXJzIHRhYmxlXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgICAgIG9uVXBkYXRlOiAnQ0FTQ0FERScsXG4gICAgICAgIG9uRGVsZXRlOiAnQ0FTQ0FERScsXG4gICAgfSxcbiAgICBwcm9maWxlUGljOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICBjcmVhdGVkX0F0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5OT1csXG4gICAgfSxcbiAgICB1cGRhdGVkX0F0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5OT1csXG4gICAgfSxcbn0sIHtcbiAgICBzZXF1ZWxpemUsXG4gICAgbW9kZWxOYW1lOiAnUHJvZmlsZVBpY3R1cmVzJyxcbiAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB1cGRhdGVkQXQ6ICd1cGRhdGVkQXQnLFxuICAgIGNyZWF0ZWRBdDogJ2NyZWF0ZWRBdCcsXG59KTtcbi8vIERlZmluZSB0aGUgYXNzb2NpYXRpb24gYmV0d2VlbiBVc2VyIGFuZCBQcm9maWxlUGljdHVyZVxuVXNlcnMuaGFzT25lKFByb2ZpbGVQaWN0dXJlcywge1xuICAgIGZvcmVpZ25LZXk6ICd1c2VyX2lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxuICAgIG9uVXBkYXRlOiAnQ0FTQ0FERScsXG59KTtcblByb2ZpbGVQaWN0dXJlcy5iZWxvbmdzVG8oVXNlcnMsIHtcbiAgICBmb3JlaWduS2V5OiAndXNlcl9pZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG5Qcm9maWxlUGljdHVyZXMuc3luYyh7IGZvcmNlOiBmYWxzZSB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnUHJvZmlsZSBQaWMgc3luY2VkIHN1Y2Nlc3NmdWxseScpO1xufSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIGNyZWF0aW5nIHByb2ZpbGUgcGljIHRhYmxlOicsIGVycik7XG59KTtcbmV4cG9ydCBkZWZhdWx0IFByb2ZpbGVQaWN0dXJlcztcbiIsImltcG9ydCB7IERhdGFUeXBlcywgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfSBmcm9tICcuLi9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uJztcbmltcG9ydCBQb3N0cyBmcm9tICcuL3Bvc3QubW9kZWwnO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4vdXNlci5tb2RlbCc7XG4vLyBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuY2xhc3MgU2F2ZXMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gQ3JlYXRlIGN1c3RvbSBjbGFzcyBtZXRob2RzIHRvIGNyZWF0ZSBhIG5ldyBwb3N0XG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZVNhdmUoYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGUoYXR0cmlidXRlcyk7XG4gICAgfVxuICAgIC8vIGNyZWF0ZSBjdXN0b20gbWV0aG9kIHRvIGNoZWNrIGlmIHBvc3QgaXMgc2F2ZWRcbiAgICBzdGF0aWMgYXN5bmMgY2hlY2tJZlNhdmVkKHVzZXJfaWQsIHBvc3RfaWQpIHtcbiAgICAgICAgY29uc3Qgc2F2ZSA9IGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IHVzZXJfaWQsIHBvc3RfaWQgfSB9KTtcbiAgICAgICAgcmV0dXJuICEhc2F2ZTtcbiAgICB9XG4gICAgLy8gY3JlYXRlIGN1c3RvbSBtZXRob2QgdG8gZGVsZXRlIGEgc2F2ZWQgcG9zdFxuICAgIHN0YXRpYyBhc3luYyBkZWxldGVTYXZlZFBvc3QocG9zdF9pZCkge1xuICAgICAgICBjb25zdCBzYXZlID0gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgcG9zdF9pZCB9IH0pO1xuICAgICAgICBpZiAoc2F2ZSkge1xuICAgICAgICAgICAgYXdhaXQgc2F2ZS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gY3JlYXRlIGN1c3RvbSBtZXRob2QgdG8gZ2V0IGFsbCBzYXZlZCBwb3N0c1xuICAgIHN0YXRpYyBhc3luYyBnZXRTYXZlZFBvc3RzKHVzZXJfaWQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZEFsbCh7XG4gICAgICAgICAgICB3aGVyZTogeyB1c2VyX2lkIH0sXG4gICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbDogUG9zdHMsXG4gICAgICAgICAgICAgICAgICAgIGFzOiAnUG9zdCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIERlZmluZSB0aGUgU2F2ZXMgbW9kZWxcblNhdmVzLmluaXQoe1xuICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgdXNlcl9pZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdVc2VycycsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBwb3N0X2lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1Bvc3RzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHNhdmVEYXRlOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICB9LFxufSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICB0YWJsZU5hbWU6ICdTYXZlcycsXG4gICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgZnJlZXplVGFibGVOYW1lOiB0cnVlLFxuICAgIGluZGV4ZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICAgICAgZmllbGRzOiBbJ3VzZXJfaWQnLCAncG9zdF9pZCddLFxuICAgICAgICB9LFxuICAgIF0sXG59KTtcbi8vIENyZWF0ZSBhIGZ1bmN0aW9uIHRvIGRlbGV0ZSBzYXZlZCBQb3N0IHVzaW5nIHRoZSBzdGF0aWMgbWV0aG9kXG5TYXZlcy5kZWxldGVTYXZlZFBvc3QgPSBhc3luYyBmdW5jdGlvbiAocG9zdF9pZCkge1xuICAgIGNvbnN0IHNhdmUgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBwb3N0X2lkIH0gfSk7XG4gICAgaWYgKHNhdmUpIHtcbiAgICAgICAgYXdhaXQgc2F2ZS5kZXN0cm95KCk7XG4gICAgfVxufTtcbi8vIENyZWF0ZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBTYXZlcyBhbmQgUG9zdHNcblNhdmVzLmJlbG9uZ3NUbyhQb3N0cywge1xuICAgIGZvcmVpZ25LZXk6ICdwb3N0X2lkJyxcbiAgICB0YXJnZXRLZXk6ICdpZCcsXG4gICAgb25EZWxldGU6ICdSRVNUUklDVCcsXG59KTtcbi8vIENyZWF0ZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBTYXZlcyBhbmQgVXNlcnNcblNhdmVzLmJlbG9uZ3NUbyhVc2Vycywge1xuICAgIGZvcmVpZ25LZXk6ICd1c2VyX2lkJyxcbiAgICB0YXJnZXRLZXk6ICdpZCcsXG59KTtcblNhdmVzLnN5bmMoeyBmb3JjZTogZmFsc2UgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1NhdmUgUG9zdCBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgU2F2ZSBwb3N0OicsIGVycik7XG59KTtcbmV4cG9ydCBkZWZhdWx0IFNhdmVzO1xuIiwiaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24nO1xuLy8gKiogRGVmaW5lIEluc3RhbmNlIG9mIFNlcXVlbGl6ZVxuY29uc3Qgc2VxdWVsaXplID0gY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UoKTtcbi8vICoqIERlZmluZSB0aGUgVXNlciBNb2RlbCAqKlxuY2xhc3MgVXNlcnMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gKiogZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBnZXQgdXNlciBieSBJRFxuICAgIHN0YXRpYyBhc3luYyBnZXRVc2VyQnlJRCh1c2VyX2lkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogdXNlcl9pZCB9IH0pO1xuICAgIH1cbiAgICAvLyAqKiBTdGF0aWMgbWV0aG9kIHRvIGdldCB1c2VyIGJ5IGVtYWlsXG4gICAgc3RhdGljIGFzeW5jIGdldEFsbFVzZXJzKGxpbWl0LCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRBbGwoe1xuICAgICAgICAgICAgbGltaXQsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gKiogU3RhdGljIG1ldGhvZCB0byBnZXQgdXNlciBwcm9maWxlIHdoZW4gdmlzaXRpbmcgYSB1c2VyJ3MgcHJvZmlsZVxuICAgIHN0YXRpYyBhc3luYyBnZXRVc2VyUHJvZmlsZSh1c2VyX2lkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogdXNlcl9pZCB9IH0pO1xuICAgIH1cbiAgICAvLyAqKiBkZWNsYXJlIHN0YXRpYyBtZXRob2RzIHRvIHVwZGF0ZSBhIHVzZXIgYnkgSURcbiAgICBzdGF0aWMgYXN5bmMgdXBkYXRlVXNlcihpZCwgYXR0cmlidXRlcykge1xuICAgICAgICBjb25zdCBbYWZmZWN0ZWRDb3VudCwgdXBkYXRlZFVzZXJzXSA9IGF3YWl0IHRoaXMudXBkYXRlKGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgICAgICByZXR1cm5pbmc6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW2FmZmVjdGVkQ291bnQsIHVwZGF0ZWRVc2Vyc107XG4gICAgfVxufVxuLy8gKiogSW5pdGlhbGl6ZSBVc2VyIG1vZGVsICoqXG5Vc2Vycy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICB9LFxuICAgIGZpcnN0TmFtZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbm90RW1wdHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBsYXN0TmFtZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbm90RW1wdHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB1c2VybmFtZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpczogL15bYS16QS1aMC05X10qJC8sXG4gICAgICAgICAgICBsZW46IFszLCAyMF0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBlbWFpbDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpc0VtYWlsOiB0cnVlLFxuICAgICAgICAgICAgbGVuOiBbNSwgNTBdLFxuICAgICAgICAgICAgbm90RW1wdHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBoYXNoZWRwYXNzd29yZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgc3RhdHVzOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogJ3VudmVyaWZpZWQnLFxuICAgIH0sXG4gICAgYmlvOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogJ1RoaXMgaXMgYSBuZXcgdXNlci4nLFxuICAgIH0sXG4gICAgam9pbjoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG4gICAgYXZhdGFyVXJsOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgfSxcbiAgICBpbWFnZVVSTDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgIH0sXG4gICAgcHJvZmlsZVBpYzoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgIH0sXG4gICAgbGFiZWw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiAnTmV3IFVzZXInLFxuICAgIH0sXG4gICAgbGFzdF9hY3Rpdml0eToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG4gICAgdXBkYXRlZF9hdDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG4gICAgVXNlclJlZ2lzdHJhdGlvbklEOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnVXNlclJlZ2lzdHJhdGlvbicsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbn0sIHtcbiAgICBzZXF1ZWxpemUsXG4gICAgbW9kZWxOYW1lOiAnVXNlcnMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIHVwZGF0ZWRBdDogJ3VwZGF0ZWRfYXQnLFxufSk7XG4vLyAqKiBTeW5jIFVzZXIgbW9kZWwgd2l0aCB0aGUgZGF0YWJhc2VcbmF3YWl0IHNlcXVlbGl6ZVxuICAgIC5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdOZXcgVXNlciBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgbmV3IHVzZXI6JywgZXJyKTtcbn0pO1xuZXhwb3J0IGRlZmF1bHQgVXNlcnM7XG4iLCJpbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5pbXBvcnQgeyBEYXRhVHlwZXMsIE1vZGVsIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCB7IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIH0gZnJvbSAnLi4vbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVpbGl6ZUNvbic7XG5pbXBvcnQgeyBnZW5lcmF0ZUF2YXRhclVybCB9IGZyb20gJy4uL3V0aWxzL2F2YXRhcic7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi91c2VyLm1vZGVsJztcbi8vICoqIERlZmluZSBJbnN0YW5jZSBvZiBTZXF1ZWxpemVcbmNvbnN0IHNlcXVlbGl6ZSA9IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCk7XG5jbGFzcyBVc2VyUmVnaXN0cmF0aW9uIGV4dGVuZHMgTW9kZWwge1xuICAgIC8vICoqIENyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gbG9nIGluIHVzZXIgdXBvbiBzdWNjZXNzZnVsIHJlZ2lzdHJhdGlvblxuICAgIHN0YXRpYyBhc3luYyBsb2dpblVzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGVtYWlsLCBoYXNoZWRwYXNzd29yZDogcGFzc3dvcmQgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vICoqIENyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gbG9nIG91dCB1c2VyXG4gICAgc3RhdGljIGFzeW5jIGxvZ291dFVzZXIoZW1haWwpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogZW1haWwgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vICoqIENyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gcmVzZXQgdGhlIHBhc3N3b3JkLCBjb21wYXJlIHRoZSBoYXNoZWQgcGFzc3dvcmRcbiAgICBzdGF0aWMgYXN5bmMgcmVzZXRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogZW1haWwsIGhhc2hlZHBhc3N3b3JkOiBwYXNzd29yZCB9LFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyAqKiBJbml0aWFsaXplIFVzZXJSZWdpc3RyYXRpb24gbW9kZWwgKipcblVzZXJSZWdpc3RyYXRpb24uaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgfSxcbiAgICBuZXdVc2VyOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICB1c2VybmFtZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbGVuOiBbMywgMjBdLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNFbWFpbDogdHJ1ZSxcbiAgICAgICAgICAgIGxlbjogWzcsIDEwMF0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBoYXNoZWRwYXNzd29yZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgY3JlYXRlZEF0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5OT1csXG4gICAgfSxcbn0sIHtcbiAgICBzZXF1ZWxpemU6IHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdVc2VyUmVnaXN0cmF0aW9uJyxcbiAgICBjcmVhdGVkQXQ6ICdjcmVhdGVkQXQnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGZyZWV6ZVRhYmxlTmFtZTogdHJ1ZSxcbn0pO1xuLy8gKiogSGFzaCB0aGUgcGFzc3dvcmQgYmVmb3JlIHNhdmluZ1xuVXNlclJlZ2lzdHJhdGlvbi5iZWZvcmVDcmVhdGUoYXN5bmMgKHVzZXIpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgY29uc3Qgc2FsdCA9IGJjcnlwdC5nZW5TYWx0U3luYygxMCk7XG4gICAgICAgICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKFN0cmluZyh1c2VyLmhhc2hlZHBhc3N3b3JkKSwgc2FsdCk7XG4gICAgICAgICAgICB1c2VyLmhhc2hlZHBhc3N3b3JkID0gaGFzaGVkUGFzc3dvcmQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGhhc2hpbmcgcGFzc3dvcmQ6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGhhc2hpbmcgcGFzc3dvcmQnKTtcbiAgICB9XG59KTtcbi8vICoqIENyZWF0ZSBhIG5ldyB1c2VyIHJlY29yZCBpbiB0aGUgVXNlcnMgdGFibGVcblVzZXJSZWdpc3RyYXRpb24uYWZ0ZXJDcmVhdGUoYXN5bmMgKHVzZXIpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgY29uc3Qgc3BhY2VJbmRleCA9IHVzZXIubmV3VXNlcj8ubGFzdEluZGV4T2YoJyAnKTtcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIGZpcnN0IG5hbWUgYW5kIGxhc3QgbmFtZSBiYXNlZCBvbiB0aGUgbGFzdCBzcGFjZVxuICAgICAgICAgICAgY29uc3QgZmlyc3RfTmFtZSA9IHNwYWNlSW5kZXggIT09IC0xID8gdXNlci5uZXdVc2VyPy5zbGljZSgwLCBzcGFjZUluZGV4KSA6IHVzZXIubmV3VXNlcjtcbiAgICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID0gc3BhY2VJbmRleCAhPT0gLTFcbiAgICAgICAgICAgICAgICA/IHVzZXIubmV3VXNlcj8uc2xpY2Uoc3BhY2VJbmRleCA/PyArMSlcbiAgICAgICAgICAgICAgICA6IHVzZXIubmV3VXNlcjtcbiAgICAgICAgICAgIGNvbnN0IGF2YXRhciA9IGdlbmVyYXRlQXZhdGFyVXJsKHVzZXIudXNlcm5hbWUpO1xuICAgICAgICAgICAgLy8gQ3JlYXRlIG9yIHVwZGF0ZSB0aGUgdXNlciByZWNvcmQgaW4gdGhlIFVzZXJzIHRhYmxlXG4gICAgICAgICAgICBhd2FpdCBVc2Vycy51cHNlcnQoe1xuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogZmlyc3RfTmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogbGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgaGFzaGVkcGFzc3dvcmQ6IHVzZXIuaGFzaGVkcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAndW52ZXJpZmllZCcsXG4gICAgICAgICAgICAgICAgYmlvOiAnV3JpdGUgc29tZXRoaW5nIGludGVyZXN0aW5nIGFib3V0IHlvdXJzZWxmLicsXG4gICAgICAgICAgICAgICAgam9pbjogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICBhdmF0YXJVcmw6IGF2YXRhcixcbiAgICAgICAgICAgICAgICBpbWFnZVVSTDogbnVsbCxcbiAgICAgICAgICAgICAgICBwcm9maWxlUGljOiBudWxsLFxuICAgICAgICAgICAgICAgIGxhYmVsOiAnSSBhbSBhIG5ldyB1c2VyJyxcbiAgICAgICAgICAgICAgICBsYXN0X2FjdGl2aXR5OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgVXNlclJlZ2lzdHJhdGlvbklEOiB1c2VyLmlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlZ2lzdGVyaW5nIG5ldyB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciByZWdpc3RlcmluZyBuZXcgdXNlcicpO1xuICAgIH1cbn0pO1xuLy8gKiogRGVmaW5lIGEgY3VzdG9tIG1ldGhvZCB0byBsb2dpbiB1c2VyIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGFuZCBjb21wYXJlIHRoZSBoYXNoZWQgcGFzc3dvcmRcblVzZXJSZWdpc3RyYXRpb24ubG9naW5Vc2VyID0gYXN5bmMgZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbDogZW1haWwgfSB9KTtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGF1dGggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5oYXNoZWRwYXNzd29yZCk7XG4gICAgICAgICAgICBpZiAoYXV0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmNvcnJlY3QgcGFzc3dvcmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5jb3JyZWN0IGVtYWlsJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvZ2dpbmcgaW4gdXNlcjonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICB9XG59O1xuLy8gKiogRGVmaW5lIGEgY3VzdG9tIG1ldGhvZCB0byBsb2dvdXQgdXNlclxuVXNlclJlZ2lzdHJhdGlvbi5sb2dvdXRVc2VyID0gYXN5bmMgZnVuY3Rpb24gKGVtYWlsKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsOiBlbWFpbCB9IH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBvdXQgdXNlcjonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICB9XG59O1xuLy8gKiogU3luYyB0aGUgVXNlclJlZ2lzdHJhdGlvbiBtb2RlbCB3aXRoIHRoZSBkYXRhYmFzZVxuYXdhaXQgc2VxdWVsaXplXG4gICAgLnN5bmMoeyBmb3JjZTogZmFsc2UgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ05ldyBVc2VyIFJlZ2lzdGVyZWQgc3luY2VkIHN1Y2Nlc3NmdWxseScpO1xufSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIG5ldyB1c2VyOicsIGVycik7XG59KTtcbmV4cG9ydCBkZWZhdWx0IFVzZXJSZWdpc3RyYXRpb247XG4iLCJpbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IGNvck9wdGlvbnMgfSBmcm9tICcuLi9jb25maWcvY29yT3B0aW9ucyc7XG5pbXBvcnQgeyBqd3RFTlYgfSBmcm9tICcuLi9jb25maWcvand0RU5WJztcbmltcG9ydCAqIGFzIGFkbWluQ29udHJvbGxlciBmcm9tICcuLi9sb2FkZXJzL2FkbWluL2FkbWluQ29udHJvbGxlcic7XG5pbXBvcnQgeyBpc0FkbWluIH0gZnJvbSAnLi4vbG9hZGVycy9hZG1pbi9mb3VuZGVyJztcbmltcG9ydCB7IGp3dEdlbmVyYXRvciB9IGZyb20gJy4uL2xvYWRlcnMvYXV0aC9qd3RHZW5lcmF0b3InO1xuaW1wb3J0IFVzZXJSZWdpc3RyYXRpb24gZnJvbSAnLi4vbW9kZWxzL3VzZXJSZWdpc3Rlci5tb2RlbCc7XG5pbXBvcnQgeyBoYW5kbGVFcnJvciB9IGZyb20gJy4uL3V0aWxzL2Vycm9ySGFuZGxlcic7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xucm91dGVyLnVzZShjb3JzKGNvck9wdGlvbnMpKTtcbnJvdXRlci51c2UoKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgbmV4dCgpO1xufSk7XG4vLyBhcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiBmYWxzZSB9KSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbi8vIFJvdXRlIHRvIGNyZWF0ZSBhIG5ldyB1c2VyXG5yb3V0ZXIucG9zdCgnL2FwaS9hZG1pbkNyZWF0ZVVzZXInLCBpc0FkbWluLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgIHRyeSB7XG4gICAgICAgIGlmICghbmFtZSB8fCAhdXNlcm5hbWUgfHwgIWVtYWlsIHx8ICFwYXNzd29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUVycm9yKG5ldyBFcnJvcignTmV3IFVzZXIgdmFsaWRhdGlvbiBlcnJvcicpLCByZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgY29uc3QgdXNlckV4aXN0cyA9IGF3YWl0IFVzZXJSZWdpc3RyYXRpb24uZmluZE9uZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogZW1haWwgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh1c2VyRXhpc3RzKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlRXJyb3IobmV3IEVycm9yKCdVc2VyUmVnaXN0cmF0aW9ucy5lbWFpbDogVXNlciBhbHJlYWR5IGV4aXN0cyAnKSwgcmVzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlclJlZ2lzdHJhdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgbmV3VXNlcjogbmFtZSxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgIGhhc2hlZHBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRva2VuID0gand0R2VuZXJhdG9yKHsgaWQ6IHVzZXIuaWQgfSk7XG4gICAgICAgIHJlcy5jb29raWUoJ2p3dCcsIHRva2VuLCB7XG4gICAgICAgICAgICBodHRwT25seTogand0RU5WLkpXVF9IVFRQX09OTFksXG4gICAgICAgICAgICBtYXhBZ2U6IGp3dEVOVi5KV1RfTUFYX0FHRSAqIDEwMDAsXG4gICAgICAgICAgICBzZWN1cmU6IGp3dEVOVi5KV1RfU0VDVVJFLFxuICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICBuYW1lOiB1c2VyLm5ld1VzZXIsXG4gICAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgdG9rZW46IHRva2VuLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKGVycm9yLCByZXMpO1xuICAgIH1cbn0pO1xuLy8gUm91dGUgdG8gbG9naW4gYXMgYW4gYWRtaW5cbnJvdXRlci5wb3N0KCcvYXBpL2FkbWluTG9naW4nLCBhZG1pbkNvbnRyb2xsZXIuYWRtaW5Mb2dpbik7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iLCJpbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IGNvck9wdGlvbnMgfSBmcm9tICcuLi9jb25maWcvY29yT3B0aW9ucyc7XG5pbXBvcnQgKiBhcyBhdXRoQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlcic7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xucm91dGVyLnVzZShjb3JzKGNvck9wdGlvbnMpKTtcbnJvdXRlci51c2UoKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgbmV4dCgpO1xufSk7XG4vLyBhcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiBmYWxzZSB9KSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbnJvdXRlci5wb3N0KCcvYXBpL3JlZ2lzdGVyJywgYXV0aENvbnRyb2xsZXIudXNlclJlZ2lzdGVyKTtcbnJvdXRlci5wb3N0KCcvYXBpL2xvZ2luJywgYXV0aENvbnRyb2xsZXIudXNlckxvZ2luKTtcbnJvdXRlci5nZXQoJy9hcGkvbG9nb3V0JywgYXV0aENvbnRyb2xsZXIudXNlckxvZ291dCk7XG5yb3V0ZXIucG9zdCgnL2FwaS9yZWZyZXNoLXRva2VuJywgYXV0aENvbnRyb2xsZXIucmVmcmVzaFRva2VuKTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgand0RU5WIH0gZnJvbSAnLi4vY29uZmlnL2p3dEVOVic7XG5pbXBvcnQgeyB2ZXJpZnlVc2VyIH0gZnJvbSAnLi4vbG9hZGVycy9hdXRoL3VzZXJBdXRoJztcbmltcG9ydCB7IFVzZXJzIH0gZnJvbSAnLi4vbW9kZWxzL2luZGV4Lm1vZGVsJztcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5kb3RlbnYuY29uZmlnKCk7XG5yb3V0ZXIudXNlKGNvcnMoKSk7XG5yb3V0ZXIudXNlKChfcmVxLCByZXMsIG5leHQpID0+IHtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnaHR0cDovL2xvY2FsaG9zdDo4MDgwJyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdPcmlnaW4sIFgtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQWNjZXB0Jyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xuICAgIG5leHQoKTtcbn0pO1xucm91dGVyLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG5yb3V0ZXIudXNlKGNvb2tpZVBhcnNlcigpKTtcbnJvdXRlci51c2UoZXhwcmVzcy5qc29uKCkpO1xucm91dGVyLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFVzZXInLCB2ZXJpZnlVc2VyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyB0b2tlbiBmb3VuZDogc2VuZCA0MDEgVW5hdXRob3JpemVkIGluIGF1dGggcm91dGVzJyk7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSldUIHZlcmlmaWNhdGlvbiBlcnJvcicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoNDAxKVxuICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBJbnZhbGlkIFRva2VuIGluIGF1dGggcm91dGVzJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKGRlY29kZWRUb2tlbi5pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoNDAwKVxuICAgICAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkIGluIEF1dGggcm91dGUnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VyIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGdldHRpbmcgY3VycmVudCB1c2VyJyB9KTtcbiAgICAgICAgICAgIHJldHVybjsgLy8gQWRkIGEgcmV0dXJuIHN0YXRlbWVudCBoZXJlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuOyAvLyBBZGQgYSByZXR1cm4gc3RhdGVtZW50IGhlcmVcbiAgICB9IC8vIEFkZCBhIHJldHVybiBzdGF0ZW1lbnQgaGVyZVxuICAgICk7XG59KTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgY29yT3B0aW9ucyB9IGZyb20gJy4uL2NvbmZpZy9jb3JPcHRpb25zJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IHsgZ2V0SW1hZ2VQcmV2aWV3VXJsLCBnZXRQcm9maWxlUGljUHJldmlld1VybCwgfSBmcm9tICcuLi9jb250cm9sbGVycy9pbWFnZUNvbnRyb2xsZXInO1xuaW1wb3J0IHsgSW1hZ2VTdG9yYWdlcywgUHJvZmlsZVBpY3R1cmVzLCBVc2VycyB9IGZyb20gJy4uL21vZGVscy9pbmRleC5tb2RlbCc7XG5pbXBvcnQgdXBsb2FkIGZyb20gJy4uL3NlcnZpY2VzL211bHRlci5jb25maWcnO1xuZG90ZW52LmNvbmZpZygpO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbi8vIEVuYWJsZSBDT1JTIGZvciBhbGwgcm91dGVzXG5yb3V0ZXIudXNlKGNvcnMoY29yT3B0aW9ucykpO1xucm91dGVyLnVzZSgoX3JlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICByZXMuaGVhZGVyKCdlbmNvZGluZycsICdtdWx0aXBhcnQvZm9ybS1kYXRhJyk7XG4gICAgbmV4dCgpO1xufSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbnJvdXRlci5wb3N0KCcvYXBpL3VwbG9hZEltYWdlJywgdXBsb2FkLnNpbmdsZSgnaW1hZ2UnKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgdXBsb2FkZWQ6JywgcmVxLmZpbGUpO1xuICAgICAgICAvLyBNb2RpZnkgdGhlIGZpbGUgcGF0aCB0byB0aGUgcmVxdWlyZWQgZm9ybWF0XG4gICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGBhc3NldHMvaW1hZ2VzLyR7cmVxLmZpbGU/LmZpbGVuYW1lfWA7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBjb25zdCBwb3N0X2lkID0gcGFyc2VJbnQocmVxLmJvZHkucG9zdElkLCAxMCk7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbWFnZVJlY29yZCA9IGF3YWl0IEltYWdlU3RvcmFnZXMuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBpbWFnZVVybDogcmVsYXRpdmVQYXRoLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJfaWQgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICBwb3N0X2lkOiBwb3N0X2lkIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9BdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFpbWFnZVJlY29yZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgZXJyb3I6ICdFcnJvciBjcmVhdGluZyBpbWFnZSByZWNvcmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW1hZ2UgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgICAgICBpbWFnZVVybDogcmVsYXRpdmVQYXRoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGltYWdlOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59KTtcbnJvdXRlci5wb3N0KCcvYXBpL3VwbG9hZFByb2ZpbGVQaWMnLCB1cGxvYWQuc2luZ2xlKCdmaWxlJyksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGaWxlIHVwbG9hZGVkOicsIHJlcS5maWxlKTtcbiAgICAgICAgLy8gTW9kaWZ5IHRoZSBmaWxlIHBhdGggdG8gdGhlIHJlcXVpcmVkIGZvcm1hdFxuICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBgYXNzZXRzL2ltYWdlcy8ke3JlcS5maWxlPy5maWxlbmFtZX1gO1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHByb2ZpbGVQaWNSZWNvcmQgPSBhd2FpdCBQcm9maWxlUGljdHVyZXMuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBwcm9maWxlUGljOiByZWxhdGl2ZVBhdGgsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdXNlcl9pZCB8fCBudWxsLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9BdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFwcm9maWxlUGljUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBlcnJvcjogJ0Vycm9yIGNyZWF0aW5nIGltYWdlIHJlY29yZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdXNlci51cGRhdGUoeyBwcm9maWxlUGljOiByZWxhdGl2ZVBhdGggfSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ltYWdlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgICAgICAgICAgcHJvZmlsZVBpYzogcmVsYXRpdmVQYXRoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGltYWdlOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59KTtcbi8vICoqIFJldHVybiBwaWN0dXJlIHVybCBmb3IgcHJldmlld1xucm91dGVyLmdldCgnL2FwaS9zZW5kSW1hZ2VVcmwnLCBnZXRJbWFnZVByZXZpZXdVcmwpO1xuLy8gKiogUmV0dXJuIFByb2ZpbGUgcGljdHVyZSB1cmwgZm9yIHByZXZpZXdcbnJvdXRlci5nZXQoJy9hcGkvc2VuZFByb2ZpbGVQaWNVcmwnLCBnZXRQcm9maWxlUGljUHJldmlld1VybCk7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iLCJpbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IGNyZWF0ZVBvc3QsIGRlbGV0ZUxpa2VkUG9zdCwgZGVsZXRlUG9zdCwgZGVsZXRlU2F2ZWRQb3N0LCBnZXRBbGxQb3N0cywgZ2V0SW5maW5pdGVQb3N0cywgZ2V0TGlrZWRQb3N0cywgZ2V0UG9wdWxhclBvc3RzLCBnZXRQb3N0QnlJZCwgZ2V0U2F2ZWRQb3N0cywgZ2V0VXNlclBvc3RzLCBsaWtlUG9zdCwgc2F2ZVBvc3QsIHNlYXJjaFBvc3RzLCB1cGRhdGVQb3N0LCB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL1Bvc3RDb250cm9sbGVyJztcbmltcG9ydCB7IHZlcmlmeVVzZXIgfSBmcm9tICcuLi9sb2FkZXJzL2F1dGgvdXNlckF1dGgnO1xuaW1wb3J0IHsgU2F2ZXMgfSBmcm9tICcuLi9tb2RlbHMvaW5kZXgubW9kZWwnO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbnJvdXRlci51c2UoY29ycygpKTtcbnJvdXRlci51c2UoKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgbmV4dCgpO1xufSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbi8vIENyZWF0ZSBhIG5ldyBwb3N0XG5yb3V0ZXIucG9zdCgnL2FwaS9jcmVhdGVQb3N0JywgY3JlYXRlUG9zdCk7XG4vLyBVcGRhdGUgYSBwb3N0XG5yb3V0ZXIucHV0KCcvYXBpL3VwZGF0ZVBvc3QnLCB1cGRhdGVQb3N0KTtcbi8vIGRlbGV0ZSBhIHBvc3RcbnJvdXRlci5kZWxldGUoJy9hcGkvZGVsZXRlUG9zdCcsIGRlbGV0ZVBvc3QpO1xuLy8gR2V0IFJlY2VudCBQb3N0c1xucm91dGVyLmdldCgnL2FwaS9nZXRBbGxQb3N0cycsIGdldEFsbFBvc3RzKTtcbi8vIEdldCBwb3N0IGJ5IElEXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFBvc3RCeUlkJywgdmVyaWZ5VXNlciwgZ2V0UG9zdEJ5SWQpO1xuLy8gTGlrZSBhIFBvc3RcbnJvdXRlci5wb3N0KCcvYXBpL2xpa2VQb3N0JywgbGlrZVBvc3QpO1xuLy8gKiogZ2V0IGxpa2VkIHBvc3RzXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldExpa2VkUG9zdHMnLCB2ZXJpZnlVc2VyLCBnZXRMaWtlZFBvc3RzKTtcbi8vIFNhdmUgYSBQb3N0XG4vLyByb3V0ZXIucG9zdCgnL2FwaS9zYXZlUG9zdCcsIHZlcmlmeVVzZXIsIHNhdmVQb3N0KTtcbnJvdXRlci5wb3N0KCcvYXBpL3NhdmVQb3N0JywgdmVyaWZ5VXNlciwgc2F2ZVBvc3QsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgdXNlcl9pZCwgcG9zdF9pZCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGF3YWl0IFNhdmVzLmNyZWF0ZSh7XG4gICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgcG9zdF9pZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKCdQb3N0IHNhdmVkJyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1NlcXVlbGl6ZVVuaXF1ZUNvbnN0cmFpbnRFcnJvcicgfHxcbiAgICAgICAgICAgIGVycm9yLmNvZGUgPT09ICdFUl9EVVBfRU5UUlknKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IGFscmVhZHkgc2F2ZWQgYnkgdGhpcyB1c2VyJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKCdFcnJvciBzYXZpbmcgcG9zdCcpO1xuICAgIH1cbn0pO1xuLy8gZ2V0IHNhdmVkIHBvc3RzXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFNhdmVkUG9zdHMnLCB2ZXJpZnlVc2VyLCBnZXRTYXZlZFBvc3RzKTtcbi8vIERlbGV0ZSBhIFBvc3RcbnJvdXRlci5kZWxldGUoJy9hcGkvZGVsZXRlU2F2ZWRQb3N0JywgZGVsZXRlU2F2ZWRQb3N0KTtcbi8vIERlbGV0ZSBhIGxpa2VcbnJvdXRlci5kZWxldGUoJy9hcGkvZGVsZXRlTGlrZVBvc3QnLCBkZWxldGVMaWtlZFBvc3QpO1xuLy8gR2V0IEluZmluaXRlIFBvc3RzXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldEluZmluaXRlUG9zdHMnLCBnZXRJbmZpbml0ZVBvc3RzKTtcbi8vIFNlYXJjaCBQb3N0c1xucm91dGVyLnBvc3QoJy9hcGkvc2VhcmNoUG9zdHMnLCBzZWFyY2hQb3N0cyk7XG4vLyBHZXQgdXNlcidzIHNhdmVkIHBvc3RzXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFVzZXJQb3N0cycsIGdldFVzZXJQb3N0cyk7XG4vLyBHZXQgcG9wdWxhciBwb3N0c1xucm91dGVyLmdldCgnL2FwaS9nZXRQb3B1bGFyUG9zdHMnLCBnZXRQb3B1bGFyUG9zdHMpO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIiwiaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vY29uZmlnL2luZGV4JztcbmltcG9ydCBhZG1pblJvdXRlcyBmcm9tICcuL2FkbWluUm91dGVzJztcbmltcG9ydCBhdXRoUm91dGVzIGZyb20gJy4vYXV0aFJvdXRlcyc7XG5pbXBvcnQgY3VycmVudFVzZXJSb3V0ZXMgZnJvbSAnLi9jdXJyZW50VXNlclJvdXRlcyc7XG5pbXBvcnQgaW1hZ2VSb3V0ZXMgZnJvbSAnLi9pbWFnZVJvdXRlcyc7XG5pbXBvcnQgcG9zdFJvdXRlcyBmcm9tICcuL3Bvc3RSb3V0ZXMnO1xuaW1wb3J0IHVzZXJEYXRhUm91dGVzIGZyb20gJy4vdXNlckRhdGFSb3V0ZXMnO1xuaW1wb3J0IHVzZXJSb3V0ZXMgZnJvbSAnLi91c2VyUm91dGVzJztcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5yb3V0ZXIudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdPUFRJT05TJykge1xuICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsgLy8gSGFuZGxlIHByZWZsaWdodCByZXF1ZXN0IGZvciBDT1JTXG4gICAgfVxuICAgIHJldHVybiBuZXh0KCk7XG59KTtcbi8vIGFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xucm91dGVyLnVzZShjb29raWVQYXJzZXIoKSk7XG5yb3V0ZXIudXNlKGV4cHJlc3MuanNvbigpKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci5qc29uKCkpO1xucm91dGVyLmdldCgnLycsIChfcmVxLCByZXMpID0+IHtcbiAgICByZXMuc2VuZCh7XG4gICAgICAgIHN0YXR1czogYCR7ZW52Lk5PREVfRU5WfWAsXG4gICAgICAgIG1lc3NhZ2U6IGAke2Vudi5SRVNQT05TRV9TVEFUVVN9YCxcbiAgICAgICAgbmFtZTogYCR7ZW52LkFQUF9OQU1FfWAsXG4gICAgfSk7XG59KTtcbnJvdXRlci51c2UoYWRtaW5Sb3V0ZXMpO1xucm91dGVyLnVzZShhdXRoUm91dGVzKTtcbnJvdXRlci51c2UodXNlclJvdXRlcyk7XG5yb3V0ZXIudXNlKGN1cnJlbnRVc2VyUm91dGVzKTtcbnJvdXRlci51c2UodXNlckRhdGFSb3V0ZXMpO1xucm91dGVyLnVzZShwb3N0Um91dGVzKTtcbnJvdXRlci51c2UoaW1hZ2VSb3V0ZXMpO1xuZXhwb3J0IHsgcm91dGVyIH07XG4iLCJpbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IGdldFVzZXJEYXRhQnlJRCB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL3VzZXJDb250cm9sbGVyJztcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5yb3V0ZXIudXNlKGNvcnMoKSk7XG5yb3V0ZXIudXNlKChfcmVxLCByZXMsIG5leHQpID0+IHtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnaHR0cDovL2xvY2FsaG9zdDo4MDgwJyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdPcmlnaW4sIFgtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQWNjZXB0Jyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xuICAgIG5leHQoKTtcbn0pO1xucm91dGVyLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG5yb3V0ZXIudXNlKGNvb2tpZVBhcnNlcigpKTtcbnJvdXRlci51c2UoZXhwcmVzcy5qc29uKCkpO1xucm91dGVyLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG4vLyAqKiBjdXJyZW50IHVzZXIgZGF0YXMocG9zdCwgbGlrZXMsIHVzZXJfaWQpXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFVzZXJEYXRhJywgZ2V0VXNlckRhdGFCeUlEKTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgZmV0Y2hVc2Vyc0ZvckhvbWVTdG9yeSwgZ2V0QWxsVXNlcnMsIGdldEN1cnJlbnRVc2VyLCBnZXRVc2VyQnlJRCwgdXBkYXRlVXNlciwgfSBmcm9tICcuLi9jb250cm9sbGVycy91c2VyQ29udHJvbGxlcic7XG5pbXBvcnQgeyB2ZXJpZnlVc2VyIH0gZnJvbSAnLi4vbG9hZGVycy9hdXRoL3VzZXJBdXRoJztcbi8vIGltcG9ydCB7IHZlcmlmeVVzZXIgfSBmcm9tICcuLi9sb2FkZXJzL2F1dGgvdXNlckF1dGgnO1xuLy8gaW1wb3J0IHsgTGlrZXMsIFBvc3RzLCBVc2VycyB9IGZyb20gJy4uL21vZGVscy9pbmRleC5tb2RlbCc7XG4vLyBpbXBvcnQgeyB2YWxpZGF0ZUFuZFBhcnNlUGFyYW1zIH0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGVBbmRQYXJzZVBhcmFtcyc7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xucm91dGVyLnVzZShjb3JzKCkpO1xucm91dGVyLnVzZSgoX3JlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICBuZXh0KCk7XG59KTtcbnJvdXRlci51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xucm91dGVyLnVzZShjb29raWVQYXJzZXIoKSk7XG5yb3V0ZXIudXNlKGV4cHJlc3MuanNvbigpKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci5qc29uKCkpO1xucm91dGVyLmdldCgnL2FwaS9nZXRDdXJyZW50VXNlcicsIHZlcmlmeVVzZXIsIGdldEN1cnJlbnRVc2VyKTtcbi8vIEdldCBhbGwgdXNlcnNcbnJvdXRlci5nZXQoJy9hcGkvZ2V0QWxsVXNlcnMnLCBnZXRBbGxVc2Vycyk7XG4vLyBHZXQgdXNlciBieSBJRFxucm91dGVyLmdldCgnL2FwaS9nZXRVc2VyQnlJRCcsIGdldFVzZXJCeUlEKTtcbi8vIFVwZGF0ZSB1c2VyIGJ5IElEXG5yb3V0ZXIucHV0KCcvYXBpL3VwZGF0ZVVzZXInLCB1cGRhdGVVc2VyKTtcbi8vICoqIGZldGNoIHVzZXJzIGZvciB0aGUgaG9tZSBwYWdlXG5yb3V0ZXIuZ2V0KCcvYXBpL2ZldGNoVXNlcnMnLCBmZXRjaFVzZXJzRm9ySG9tZVN0b3J5KTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgdmFsaWRhdGVNSU1FVHlwZSB9IGZyb20gJ3ZhbGlkYXRlLWltYWdlLXR5cGUnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbi8vIERlZmluZSBjdXN0b20gZGVzdGluYXRpb24gZGlyZWN0b3J5XG5jb25zdCB1cGxvYWREaXIgPSAnL2hvbWUvYmFic2RldnN5cy9hcHBWLTEvcHVibGljL2Fzc2V0cy9pbWFnZXMnO1xuLy8gRW5zdXJlIHRoZSBkaXJlY3RvcnkgZXhpc3RzXG5pZiAoIWZzLmV4aXN0c1N5bmModXBsb2FkRGlyKSkge1xuICAgIGZzLm1rZGlyU3luYyh1cGxvYWREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xufVxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XG4gICAgZGVzdGluYXRpb246IGZ1bmN0aW9uIChfcmVxLCBfZmlsZSwgY2IpIHtcbiAgICAgICAgY2IobnVsbCwgdXBsb2FkRGlyKTtcbiAgICB9LFxuICAgIGZpbGVuYW1lOiBmdW5jdGlvbiAoX3JlcSwgZmlsZSwgY2IpIHtcbiAgICAgICAgY29uc3QgdW5pcXVlU3VmZml4ID0gRGF0ZS5ub3coKSArICctJyArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDFlOSk7XG4gICAgICAgIGNiKG51bGwsIGZpbGUuZmllbGRuYW1lICsgJy0nICsgdW5pcXVlU3VmZml4ICsgcGF0aC5leHRuYW1lKGZpbGUub3JpZ2luYWxuYW1lKSk7XG4gICAgfSxcbn0pO1xuLy8gQ2hlY2sgZmlsZSB0eXBlXG5jb25zdCB2YWxpZGF0ZU1pbWVUeXBlID0gYXN5bmMgKGZpbGUsIGNiKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IGF3YWl0IHZhbGlkYXRlTUlNRVR5cGUoZmlsZS5wYXRoLCB7XG4gICAgICAgICAgICBvcmlnaW5hbEZpbGVuYW1lOiBmaWxlLm9yaWdpbmFsbmFtZSxcbiAgICAgICAgICAgIGFsbG93TWltZVR5cGVzOiBbJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL3N2Zyt4bWwnXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC5vaykge1xuICAgICAgICAgICAgcmV0dXJuIGNiKG5ldyBFcnJvcignSW52YWxpZCBmaWxlIHR5cGUnKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2IobnVsbCwgdHJ1ZSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2YWxpZGF0aW5nIGZpbGUgdHlwZTonLCBlcnJvcik7XG4gICAgICAgIGNiKG5ldyBFcnJvcignRXJyb3IgdmFsaWRhdGluZyBmaWxlIHR5cGUnKSk7XG4gICAgfVxufTtcbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7XG4gICAgc3RvcmFnZTogc3RvcmFnZSxcbiAgICBsaW1pdHM6IHsgZmlsZVNpemU6IDEwMDAwMDAwIH0sXG4gICAgZmlsZUZpbHRlcjogZnVuY3Rpb24gKF9yZXEsIGZpbGUsIGNiKSB7XG4gICAgICAgIGNvbnN0IGZpbGV0eXBlcyA9IC9qcGVnfGpwZ3xwbmd8c3ZnLztcbiAgICAgICAgY29uc3QgbWltZXR5cGUgPSBmaWxldHlwZXMudGVzdChmaWxlLm1pbWV0eXBlKTtcbiAgICAgICAgY29uc3QgZXh0bmFtZSA9IGZpbGV0eXBlcy50ZXN0KHBhdGguZXh0bmFtZShmaWxlLm9yaWdpbmFsbmFtZSkudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGlmIChtaW1ldHlwZSAmJiBleHRuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsaWRhdGVNaW1lVHlwZShmaWxlLnBhdGgsIGNiKTtcbiAgICB9LFxufSk7XG5leHBvcnQgZGVmYXVsdCB1cGxvYWQ7XG4iLCJpbXBvcnQgeyBQZXJmb3JtYW5jZU9ic2VydmVyLCBwZXJmb3JtYW5jZSB9IGZyb20gJ25vZGU6cGVyZl9ob29rcyc7XG4vLyBTZXQgdXAgdGhlIFBlcmZvcm1hbmNlT2JzZXJ2ZXJcbmNvbnN0IG9icyA9IG5ldyBQZXJmb3JtYW5jZU9ic2VydmVyKGl0ZW1zID0+IHtcbiAgICBpdGVtcy5nZXRFbnRyaWVzKCkuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2VudHJ5Lm5hbWV9OiAke2VudHJ5LmR1cmF0aW9ufW1zYCk7XG4gICAgfSk7XG4gICAgcGVyZm9ybWFuY2UuY2xlYXJNYXJrcygpO1xufSk7XG5vYnMub2JzZXJ2ZSh7IHR5cGU6ICdtZWFzdXJlJyB9KTtcbi8vIFNpbXVsYXRlIHRoZSBsb2FkZXIgZnVuY3Rpb25cbmFzeW5jIGZ1bmN0aW9uIGxvYWRlcigpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBNYXJrIHRoZSBzdGFydCBvZiB0aGUgbG9hZGVyXG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ0xvYWRlciBTdGFydCcsIHtcbiAgICAgICAgICAgIGRldGFpbDogJ0xvYWRlciBzdGFydGVkJyxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFBlcmZvcm0gVGFzayAxXG4gICAgICAgIGF3YWl0IGRvU29tZUxvbmdSdW5uaW5nUHJvY2VzcygpO1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdUYXNrIDEgRW5kJywge1xuICAgICAgICAgICAgZGV0YWlsOiAnVGFzayAxIGNvbXBsZXRlZCcsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBQZXJmb3JtIFRhc2sgMlxuICAgICAgICBhd2FpdCBkb1NvbWVMb25nUnVubmluZ1Byb2Nlc3MoKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnVGFzayAyIEVuZCcsIHtcbiAgICAgICAgICAgIGRldGFpbDogJ1Rhc2sgMiBjb21wbGV0ZWQnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbG9naW5NZWFzdXJlID0gcGVyZm9ybWFuY2UubWVhc3VyZSgnVGFzayAyIER1cmF0aW9uJywgJ1Rhc2sgMSBFbmQnLCAnVGFzayAyIEVuZCcpO1xuICAgICAgICBjb25zb2xlLmxvZyhsb2dpbk1lYXN1cmUuZHVyYXRpb24pO1xuICAgICAgICAvLyBFbmQgb2YgdGhlIGxvYWRlclxuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdMb2FkZXIgRW5kJyk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoJ1RvdGFsIExvYWRlciBEdXJhdGlvbicsICdMb2FkZXIgU3RhcnQnLCAnTG9hZGVyIEVuZCcpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gbG9hZGVyOicsIGVycm9yKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkb1NvbWVMb25nUnVubmluZ1Byb2Nlc3MoKSB7XG4gICAgLy8gUmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGEgdGltZW91dCB0byBzaW11bGF0ZSBhIGxvbmctcnVubmluZyBwcm9jZXNzXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSwgMTAwMCk7IC8vIDEgc2Vjb25kIHRpbWVvdXQgdG8gc2ltdWxhdGUgdGhlIHByb2Nlc3MgZHVyYXRpb25cbiAgICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IGxvYWRlcjtcbiIsIi8vIERlc2M6IFRydW5jYXRlIHRhYmxlcyBpbiB0aGUgZGF0YWJhc2VcbmltcG9ydCB7IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIH0gZnJvbSAnLi4vbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVpbGl6ZUNvbi5qcyc7XG5pbXBvcnQgSW1hZ2VTdG9yYWdlcyBmcm9tICcuLi9tb2RlbHMvaW1hZ2UubW9kZWwuanMnO1xuaW1wb3J0IFByb2ZpbGVQaWN0dXJlcyBmcm9tICcuLi9tb2RlbHMvcHJvZmlsZVBpYy5tb2RlbC5qcyc7XG4vLyAqKiBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuLy8gKiogdHJ1bmNhdGVUYWJsZXMgZnVuY3Rpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0cnVuY2F0ZVRhYmxlcygpIHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHNlcXVlbGl6ZS50cmFuc2FjdGlvbigpO1xuICAgIHRyeSB7XG4gICAgICAgIC8vIGF3YWl0IFVzZXJzLmRlc3Ryb3koeyB3aGVyZToge30sIHRydW5jYXRlOiB0cnVlIH0pO1xuICAgICAgICAvLyBhd2FpdCBVc2VyUmVnaXN0cmF0aW9uLmRlc3Ryb3koeyB3aGVyZToge30sIHRydW5jYXRlOiB0cnVlIH0pO1xuICAgICAgICBhd2FpdCBJbWFnZVN0b3JhZ2VzLnRydW5jYXRlKHsgdHJhbnNhY3Rpb24gfSk7XG4gICAgICAgIGF3YWl0IFByb2ZpbGVQaWN0dXJlcy50cnVuY2F0ZSh7IHRyYW5zYWN0aW9uIH0pO1xuICAgICAgICAvLyBJZiBldmVyeXRoaW5nIGlzIHN1Y2Nlc3NmdWwsIGNvbW1pdCB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgYXdhaXQgdHJhbnNhY3Rpb24uY29tbWl0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdUYWJsZXMgaGF2ZSBiZWVuIHRydW5jYXRlZC4uLicpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhbiBlcnJvciwgcm9sbCBiYWNrIHRoZSB0cmFuc2FjdGlvblxuICAgICAgICBhd2FpdCB0cmFuc2FjdGlvbi5yb2xsYmFjaygpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB0cnVuY2F0aW5nIHRhYmxlczonLCBlcnJvcik7XG4gICAgfVxufVxuIiwiLy8gSW1wb3J0IG5lY2Vzc2FyeSBtb2R1bGVzXG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG4vLyBGdW5jdGlvbiB0byBnZW5lcmF0ZSBhIGhhc2ggZnJvbSBhIHN0cmluZ1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlSGFzaChzdHIpIHtcbiAgICByZXR1cm4gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpLnVwZGF0ZShzdHIpLmRpZ2VzdCgnaGV4Jyk7XG59XG4vLyBGdW5jdGlvbiB0byBnZW5lcmF0ZSBhbiBhdmF0YXIgVVJMIGJhc2VkIG9uIHVzZXIgaW5pdGlhbHNcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUF2YXRhclVybChuYW1lKSB7XG4gICAgLy8gRXh0cmFjdCB0aGUgaW5pdGlhbHMgZnJvbSB0aGUgdXNlcidzIG5hbWVcbiAgICBjb25zdCBpbml0aWFscyA9IG5hbWVcbiAgICAgICAgLnNwbGl0KCcgJylcbiAgICAgICAgLm1hcChwYXJ0ID0+IHBhcnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkpXG4gICAgICAgIC5qb2luKCcnKTtcbiAgICAvLyBVc2UgYSBzZXJ2aWNlIHRoYXQgZ2VuZXJhdGVzIGF2YXRhcnMgd2l0aCBpbml0aWFsc1xuICAgIGNvbnN0IHNpemUgPSAyMDA7IC8vIFNwZWNpZnkgdGhlIGRlc2lyZWQgc2l6ZSBvZiB0aGUgYXZhdGFyXG4gICAgY29uc3QgYmFja2dyb3VuZENvbG9yID0gJ3JhbmRvbSc7IC8vIFVzZSBhIHJhbmRvbSBiYWNrZ3JvdW5kIGNvbG9yXG4gICAgY29uc3QgdGV4dENvbG9yID0gJ2ZmZic7IC8vIFVzZSB3aGl0ZSB0ZXh0IGNvbG9yXG4gICAgY29uc3QgYmFzZVVybCA9IGBodHRwczovL3VpLWF2YXRhcnMuY29tL2FwaS8/bmFtZT0ke2VuY29kZVVSSUNvbXBvbmVudChpbml0aWFscyl9JnNpemU9JHtzaXplfSZiYWNrZ3JvdW5kPSR7YmFja2dyb3VuZENvbG9yfSZjb2xvcj0ke3RleHRDb2xvcn1gO1xuICAgIHJldHVybiBiYXNlVXJsO1xufVxuIiwiLy8gc3JjL2Vycm9ySGFuZGxlci50c1xuaW1wb3J0IHByb2Nlc3MgZnJvbSAnbm9kZTpwcm9jZXNzJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgeyBlbnYgfSBmcm9tICcuLi9jb25maWcvaW5kZXgnO1xuZXhwb3J0IGNvbnN0IGhhbmRsZUVycm9yID0gKGVyciwgcmVzKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgLy8gSW5pdGlhbGl6ZSBlcnJvcnMgb2JqZWN0XG4gICAgbGV0IGVycm9ycyA9IHt9O1xuICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBlcnJvcnMgY2FzZXNcbiAgICBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ05ldyBVc2VyIHZhbGlkYXRpb24gZXJyb3InKSkge1xuICAgICAgICBlcnJvcnMgPSB7XG4gICAgICAgICAgICBuYW1lOiAnTmFtZSBpcyByZXF1aXJlZCcsXG4gICAgICAgICAgICB1c2VybmFtZTogJ3VzZXJuYW1lIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgICAgIGVtYWlsOiAnZW1haWwgaXMgcmVxdWlyZWQnLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICdwYXNzd29yZCBpcyByZXF1aXJlZCcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygnVXNlclJlZ2lzdHJhdGlvbnMuZW1haWwnKSkge1xuICAgICAgICBlcnJvcnMuZW1haWwgPSAnRW1haWwgaXMgYWxyZWFkeSByZWdpc3RlcmVkJztcbiAgICB9XG4gICAgaWYgKGVyci5tZXNzYWdlLmluY2x1ZGVzKCdpbmNvcnJlY3QgZW1haWwnKSkge1xuICAgICAgICBlcnJvcnMuZW1haWwgPSAnZW1haWwgaXMgbm90IHJlZ2lzdGVyZWQnO1xuICAgIH1cbiAgICBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ0luY29ycmVjdCBwYXNzd29yZCcpKSB7XG4gICAgICAgIGVycm9ycy5wYXNzd29yZCA9ICdwYXNzd29yZCBpcyBpbmNvcnJlY3QnO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgU2VxdWVsaXplIHZhbGlkYXRpb24gZXJyb3JzXG4gICAgaWYgKGVyci5uYW1lID09PSAnU2VxdWVsaXplVmFsaWRhdGlvbkVycm9yJyAmJiBlcnIuZXJyb3IpIHtcbiAgICAgICAgZXJyb3JzID0gZXJyLmVycm9yLnJlZHVjZSgoYWNjLCBlcnJvcikgPT4ge1xuICAgICAgICAgICAgYWNjW2Vycm9yLnBhdGhdID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9XG4gICAgcmVzLnN0YXR1cyhlcnIuY29kZSB8fCA1MDApLmpzb24oeyBlcnJvcnMgfSk7XG59O1xuLy8gRnVuY3Rpb24gdG8gbG9nIGVycm9ycyB0byBhIGZpbGVcbmZ1bmN0aW9uIGxvZ0Vycm9yVG9GaWxlKGVycikge1xuICAgIGNvbnN0IGxvZyA9IGAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX0gLSAke2Vyci5tZXNzYWdlfVxcbiR7ZXJyLnN0YWNrfVxcbmA7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMoJ2Vycm9yLmxvZycsIGxvZyk7XG59XG5jb25zdCB1bmhhbmRsZWRSZWplY3Rpb25zID0gbmV3IE1hcCgpO1xucHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgKHJlYXNvbiwgcHJvbWlzZSkgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBSZWplY3Rpb24gYXQ6JywgcHJvbWlzZSwgJ3JlYXNvbjonLCByZWFzb24pO1xuICAgIHVuaGFuZGxlZFJlamVjdGlvbnMuc2V0KHByb21pc2UsIHJlYXNvbik7XG59KTtcbnByb2Nlc3Mub24oJ3JlamVjdGlvbkhhbmRsZWQnLCBwcm9taXNlID0+IHtcbiAgICB1bmhhbmRsZWRSZWplY3Rpb25zLmRlbGV0ZShwcm9taXNlKTtcbn0pO1xuLy8gR2xvYmFsIGVycm9yIGhhbmRsaW5nIG1pZGRsZXdhcmUgZm9yIEV4cHJlc3NcbmV4cG9ydCBmdW5jdGlvbiBnbG9iYWxFcnJvckhhbmRsZXIoZXJyLCBfcmVxLCByZXMsIG5leHQpIHtcbiAgICBsb2dFcnJvclRvRmlsZShlcnIpO1xuICAgIC8vIFNlbmQgZ2VuZXJpYyBlcnJvciByZXNwb25zZVxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnLFxuICAgIH0pO1xuICAgIG5leHQoZXJyKTtcbn1cbi8vIENhdGNoIHVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbnNcbnByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIChyZWFzb24sIHByb21pc2UpID0+IHtcbiAgICBsb2dFcnJvclRvRmlsZShyZWFzb24pO1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBSZWplY3Rpb24gYXQ6JywgcHJvbWlzZSwgJ3JlYXNvbjonLCByZWFzb24pO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbn0pO1xuLy8gQ2F0Y2ggdW5jYXVnaHQgZXhjZXB0aW9uc1xucHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCAoZXJyKSA9PiB7XG4gICAgbG9nRXJyb3JUb0ZpbGUoZXJyKTtcbiAgICBjb25zb2xlLmVycm9yKCdVbmNhdWdodCBFeGNlcHRpb246JywgZXJyKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG59KTtcbnByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uJywgKGVycikgPT4ge1xuICAgIGZzLndyaXRlU3luYyhwcm9jZXNzLnN0ZGVyci5mZCwgYENhdWdodCBleGNlcHRpb246ICR7ZXJyfVxcbmAgKyBgRXhjZXB0aW9uIE9yaWdpbjogJHtvcmlnaW59XFxuYCk7XG59KTtcbnNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdUaGlzIHdpbGwgc3RpbGwgcnVuLicpO1xufSwgZW52LkVSUk9SX1RJTUVPVVQpO1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIGdsb2JhbEVycm9ySGFuZGxlcixcbiAgICBoYW5kbGVFcnJvcixcbn07XG4iLCJpbXBvcnQgTm9kZUNhY2hlIGZyb20gJ25vZGUtY2FjaGUnO1xuZXhwb3J0IGNvbnN0IGFwcENhY2hlID0gbmV3IE5vZGVDYWNoZSh7IHN0ZFRUTDogMzYwMCwgY2hlY2twZXJpb2Q6IDEyMCB9KTsgLy8gQ2FjaGUgZW50cmllcyBleHBpcmUgYWZ0ZXIgMSBob3VyXG5leHBvcnQgZGVmYXVsdCB7IGFwcENhY2hlIH07XG4iLCIvLyBIZWxwZXIgZnVuY3Rpb24gdG8gdmFsaWRhdGUgYW5kIHBhcnNlIHF1ZXJ5IHBhcmFtZXRlcnNcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFuZFBhcnNlUGFyYW1zKHJlcSkge1xuICAgIC8vIEV4dHJhY3QgcXVlcnkgcGFyYW1ldGVyc1xuICAgIGNvbnN0IHsgdXNlcl9pZCwgcG9zdF9pZCwgbGlrZXNfaWQsIGNyZWF0b3JfaWQsIHJlcXVlc3RlZFVzZXJJZCwgbGltaXQgfSA9IHJlcS5xdWVyeTtcbiAgICAvLyBWYWxpZGF0ZSBwcmVzZW5jZSBvZiByZXF1aXJlZCBwYXJhbWV0ZXJzXG4gICAgaWYgKHVzZXJfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZXJfaWQgaXMgcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgaWYgKHBvc3RfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Bvc3RfaWQgaXMgcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgLy8gUGFyc2UgcGFyYW1ldGVyc1xuICAgIGNvbnN0IHBhcnNlZFVzZXJJZCA9IHVzZXJfaWQgIT09IHVuZGVmaW5lZCA/IHBhcnNlSW50KHVzZXJfaWQsIDEwKSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBwYXJzZWRQb3N0SWQgPSBwb3N0X2lkICE9PSB1bmRlZmluZWQgPyBwYXJzZUludChwb3N0X2lkLCAxMCkgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgcGFyc2VkTGlrZXNJZCA9IGxpa2VzX2lkICE9PSB1bmRlZmluZWQgPyBwYXJzZUludChsaWtlc19pZCwgMTApIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHBhcnNlZENyZWF0b3JJZCA9IGNyZWF0b3JfaWQgIT09IHVuZGVmaW5lZCA/IHBhcnNlSW50KGNyZWF0b3JfaWQsIDEwKSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBwYXJzZWRSZXF1ZXN0ZWRVc2VySWQgPSByZXF1ZXN0ZWRVc2VySWQgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IHBhcnNlSW50KHJlcXVlc3RlZFVzZXJJZCwgMTApXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHBhcnNlZExpbWl0ID0gbGltaXQgIT09IHVuZGVmaW5lZCA/IHBhcnNlSW50KGxpbWl0LCAxMCkgOiB1bmRlZmluZWQ7XG4gICAgLy8gRGVidWdnaW5nIGxvZ3NcbiAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgcGFyYW1ldGVyczonLCB7XG4gICAgICAgIHVzZXJfaWQsXG4gICAgICAgIHBvc3RfaWQsXG4gICAgICAgIGxpa2VzX2lkLFxuICAgICAgICBjcmVhdG9yX2lkLFxuICAgICAgICByZXF1ZXN0ZWRVc2VySWQsXG4gICAgICAgIGxpbWl0LFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCdQYXJzZWQgcGFyYW1ldGVyczonLCB7XG4gICAgICAgIHBhcnNlZFVzZXJJZCxcbiAgICAgICAgcGFyc2VkUG9zdElkLFxuICAgICAgICBwYXJzZWRMaWtlc0lkLFxuICAgICAgICBwYXJzZWRDcmVhdG9ySWQsXG4gICAgICAgIHBhcnNlZFJlcXVlc3RlZFVzZXJJZCxcbiAgICAgICAgcGFyc2VkTGltaXQsXG4gICAgfSk7XG4gICAgaWYgKGlzTmFOKHBhcnNlZFVzZXJJZCA/PyAwKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZXJfaWQgbXVzdCBiZSBhIG51bWJlcicpO1xuICAgIH1cbiAgICBpZiAoaXNOYU4ocGFyc2VkUG9zdElkID8/IDApKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigncG9zdF9pZCBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gICAgfVxuICAgIGlmIChpc05hTihwYXJzZWRMaWtlc0lkID8/IDApKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbGlrZXNfaWQgbXVzdCBiZSBhIG51bWJlcicpO1xuICAgIH1cbiAgICBpZiAoaXNOYU4ocGFyc2VkQ3JlYXRvcklkID8/IDApKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY3JlYXRvcl9pZCBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gICAgfVxuICAgIGlmIChpc05hTihwYXJzZWRSZXF1ZXN0ZWRVc2VySWQgPz8gMCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZXF1ZXN0ZWRVc2VySWQgbXVzdCBiZSBhIG51bWJlcicpO1xuICAgIH1cbiAgICBpZiAoaXNOYU4ocGFyc2VkTGltaXQgPz8gMCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdsaW1pdCBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gICAgfVxuICAgIC8vIEFkZGl0aW9uYWwgY2hlY2tzIGFuZCBlcnJvciBoYW5kbGluZ1xuICAgIGlmICgocGFyc2VkVXNlcklkICE9PSB1bmRlZmluZWQgJiYgcGFyc2VkVXNlcklkIDwgMCkgfHxcbiAgICAgICAgKHBhcnNlZFBvc3RJZCAhPT0gdW5kZWZpbmVkICYmIHBhcnNlZFBvc3RJZCA8IDApIHx8XG4gICAgICAgIChwYXJzZWRMaWtlc0lkICE9PSB1bmRlZmluZWQgJiYgcGFyc2VkTGlrZXNJZCA8IDApIHx8XG4gICAgICAgIChwYXJzZWRDcmVhdG9ySWQgIT09IHVuZGVmaW5lZCAmJiBwYXJzZWRDcmVhdG9ySWQgPCAwKSB8fFxuICAgICAgICAocGFyc2VkUmVxdWVzdGVkVXNlcklkICE9PSB1bmRlZmluZWQgJiYgcGFyc2VkUmVxdWVzdGVkVXNlcklkIDwgMCkgfHxcbiAgICAgICAgKHBhcnNlZExpbWl0ICE9PSB1bmRlZmluZWQgJiYgcGFyc2VkTGltaXQgPCAwKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcXVlcnkgcGFyYW1ldGVyczogcG9zdF9pZCwgbGlrZXNfaWQsIGFuZCBjcmVhdG9yX2lkIG11c3QgYmUgbm9uLW5lZ2F0aXZlJyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHVzZXJfaWQ6IHBhcnNlZFVzZXJJZCxcbiAgICAgICAgcG9zdF9pZDogcGFyc2VkUG9zdElkLFxuICAgICAgICBsaWtlc19pZDogcGFyc2VkTGlrZXNJZCxcbiAgICAgICAgY3JlYXRvcl9pZDogcGFyc2VkQ3JlYXRvcklkLFxuICAgICAgICByZXF1ZXN0ZWRVc2VySWQ6IHBhcnNlZFJlcXVlc3RlZFVzZXJJZCxcbiAgICAgICAgbGltaXQ6IHBhcnNlZExpbWl0LFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbXVzdEZpbmQoYXJyLCBwcmVkaWNhdGUpIHtcbiAgICBjb25zdCBmb3VuZCA9IGFyci5maW5kKHByZWRpY2F0ZSk7XG4gICAgaWYgKCFmb3VuZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIGl0ZW0gd2l0aCBpZCAke3ByZWRpY2F0ZX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuLy8gVmFsaWRhdGlvbiBtaWRkbGV3YXJlXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVVc2VyQ3JlYXRpb24ocmVxLCByZXMpIHtcbiAgICBjb25zdCB7IG5hbWUsIHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IGVycm9ycyA9IHt9O1xuICAgIGlmICghbmFtZSlcbiAgICAgICAgZXJyb3JzLm5hbWUgPSAnTmFtZSBpcyByZXF1aXJlZCc7XG4gICAgaWYgKCF1c2VybmFtZSlcbiAgICAgICAgZXJyb3JzLnVzZXJuYW1lID0gJ1VzZXJuYW1lIGlzIHJlcXVpcmVkJztcbiAgICBpZiAoIWVtYWlsKVxuICAgICAgICBlcnJvcnMuZW1haWwgPSAnRW1haWwgaXMgcmVxdWlyZWQnO1xuICAgIGlmICghcGFzc3dvcmQpXG4gICAgICAgIGVycm9ycy5wYXNzd29yZCA9ICdQYXNzd29yZCBpcyByZXF1aXJlZCc7XG4gICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnMgfSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICB2YWxpZGF0ZUFuZFBhcnNlUGFyYW1zLFxuICAgIHZhbGlkYXRlVXNlckNyZWF0aW9uLFxufTtcbiJdLCJuYW1lcyI6WyJjb3JzU2NoZW1hRU5WIiwibG9hZCIsIkNPUlNfT1JJR0lOIiwiU3RyaW5nIiwiQ09SU19PUFRJT05TX1NVQ0NFU1NfU1RBVFVTIiwiTnVtYmVyIiwiQ09SU19DUkVERU5USUFMUyIsIkJvb2xlYW4iLCJDT1JTX01FVEhPRFMiLCJvayIsImNvcnNFTlYiLCJjb3JPcHRpb25zIiwib3JpZ2luIiwibWV0aG9kcyIsImNyZWRlbnRpYWxzIiwib3B0aW9uc1N1Y2Nlc3NTdGF0dXMiLCJkYXRhU2NoZW1hRU5WIiwiREJfSE9TVCIsIkRCX1BPUlQiLCJEQl9VU0VSIiwiREJfUEFTUyIsIkRCX05BTUUiLCJEQl9TT0NLRVRfUEFUSCIsIkRCX1NPQ0tFVF9USU1FT1VUIiwiREJfQ09NUFJFU1MiLCJEQl9ERUJVRyIsIkRCX1BFUk1JVF9MT0NBTF9JTkZJTEUiLCJEQl9UUkFDRSIsIkRCX0NIRUNLX0RVUExJQ0FURSIsIkRCX1NTTCIsIkRCX1NTTF9DQSIsIkRCX1NTTF9LRVkiLCJEQl9TU0xfQ0VSVCIsIlJFSkVDVF9VTkFVVEhPUklaRUQiLCJDSVBIRVJTIiwiTUlOX1ZFUlNJT04iLCJEQl9DT05ORUNUSU9OX0FUVFJJQlVURVMiLCJEQl9DT05ORUNUSU9OX1RJTUVPVVQiLCJkYXRhYmFzZUVOViIsImp3dFNjaGVtYUVOViIsIkpXVF9TRUNSRVQiLCJKV1RfRVhQSVJFU19JTiIsIkpXVF9SRUZSRVNIX1NFQ1JFVCIsIkpXVF9SRUZSRVNIX0VYUElSRVNfSU4iLCJKV1RfUkVGUkVTSF9NQVhfQUdFIiwiSldUX0FMR09SSVRITSIsIkpXVF9JU1NVRVIiLCJKV1RfTUFYX0FHRSIsIkpXVF9IVFRQX09OTFkiLCJKV1RfU0FNRV9TSVRFIiwiSldUX0NPT0tJRV9OQU1FIiwiSldUX1NFQ1VSRSIsImp3dEVOViIsImNyZWF0ZVBvc3QiLCJhc3luYyIsInJlcSIsInJlcyIsImNhcHRpb24iLCJsb2NhdGlvbiIsInRhZ3MiLCJib2R5IiwidG9rZW4iLCJjb29raWVzIiwiand0Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnIiLCJkZWNvZGVkVG9rZW4iLCJjb25zb2xlIiwibG9nIiwidXNlcl9pZCIsImlkIiwidXNlciIsImZpbmRCeVBrIiwiaW1hZ2VSZWNvcmQiLCJmaW5kSW1hZ2VCeVJlZmVyZW5jZUtleSIsIm5ld1Bvc3QiLCJjcmVhdGUiLCJpbWFnZVVSTCIsImltYWdlVXJsIiwiY3JlYXRlZF9BdCIsIkRhdGUiLCJjcmVhdG9yX0lkIiwiZXJyb3IiLCJkZWxldGVGaWxlIiwiX3JlcSIsImltYWdlIiwiZmluZE9uZSIsIndoZXJlIiwiZGVzdHJveSIsInVwZGF0ZVBvc3QiLCJuZXdJbWFnZVVybCIsInBvc3RfaWQiLCJwYXJzZUludCIsInF1ZXJ5IiwicG9zdCIsInByZXZpZXdJbWFnZVVybCIsInVwZGF0ZWRQb3N0IiwidXBkYXRlIiwiZ2V0QWxsUG9zdHMiLCJwb3N0cyIsImZpbmRBbGwiLCJpbmNsdWRlIiwibW9kZWwiLCJhcyIsImF0dHJpYnV0ZXMiLCJsaWtlUG9zdCIsImlzTmFOIiwibmV3TGlrZSIsImNyZWF0ZUxpa2UiLCJsaWtlc19Db3VudCIsImxpa2VzQ291bnQiLCJsaWtlIiwiZ2V0TGlrZWRQb3N0cyIsInJlcXVlc3RlZFVzZXJJZCIsImxpa2VzIiwibGlrZWRQb3N0cyIsIm1hcCIsImdldFBvc3RCeUlkIiwiY3JlYXRvcl9pZCIsImRlbGV0ZUxpa2VkUG9zdCIsImV4aXN0aW5nTGlrZSIsImN1cnJlbnRMaWtlcyIsInNhdmUiLCJzYXZlUG9zdCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3BsaXQiLCJuZXdTYXZlIiwiY3JlYXRlU2F2ZSIsInNhdmVEYXRlIiwiZGVsZXRlU2F2ZWRQb3N0IiwiZXhpc3RpbmdTYXZlIiwiZ2V0U2F2ZWRQb3N0cyIsInNhdmVkUG9zdHMiLCJkZWxldGVQb3N0IiwiZ2V0SW5maW5pdGVQb3N0cyIsInBhZ2UiLCJsaW1pdCIsIm9mZnNldCIsImZpbmRBbmRDb3VudEFsbCIsIm9yZGVyIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwiY291bnQiLCJ0b3RhbENvdW50Iiwic2VhcmNoUG9zdHMiLCJzZWFyY2hWYWx1ZSIsIk9wIiwib3IiLCJnZXRVc2VyUG9zdHMiLCJnZXRQb3B1bGFyUG9zdHMiLCJwb3B1bGFyUG9zdHMiLCJ1c2VyUmVnaXN0ZXIiLCJuYW1lIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiRXJyb3IiLCJuZXdVc2VyIiwiaGFzaGVkcGFzc3dvcmQiLCJjcmVhdGVkQXQiLCJjb29raWUiLCJodHRwT25seSIsIm1heEFnZSIsInNlY3VyZSIsInNhbWVTaXRlIiwidXNlckxvZ2luIiwibG9naW5Vc2VyIiwicmVmcmVzaFRva2VuIiwic2V0SGVhZGVyIiwibG9jYWxzIiwidXNlckxvZ291dCIsImFjY2Vzc1Rva2VuIiwibmV3VG9rZW4iLCJleHBpcmVzSW4iLCJhbGdvcml0aG0iLCJpc3N1ZXIiLCJnZXRJbWFnZVByZXZpZXdVcmwiLCJwcm9jZXNzIiwiZW52IiwiZ2V0UHJvZmlsZVBpY1ByZXZpZXdVcmwiLCJwcm9maWxlUGljIiwiZmluZFByb2ZpbGVQaWNCeVJlZmVyZW5jZUtleSIsImdldEFsbFVzZXJzIiwidXNlcnNfaWQiLCJsZW5ndGgiLCJ1c2Vyc09iamVjdCIsInJlZHVjZSIsImFjYyIsImdldFVzZXJCeUlEIiwidXBkYXRlVXNlciIsInJlc3QiLCJPYmplY3QiLCJrZXlzIiwic3BhY2VJbmRleCIsImxhc3RJbmRleE9mIiwiZmlyc3ROYW1lIiwic2xpY2UiLCJsYXN0TmFtZSIsImFmZmVjdGVkQ291bnQiLCJ1cGRhdGVkVXNlcnMiLCJnZXRVc2VyRGF0YUJ5SUQiLCJ1c2VyUG9zdERhdGEiLCJnZXRVc2VyUHJvZmlsZSIsImdldEN1cnJlbnRVc2VyIiwiZmV0Y2hVc2Vyc0ZvckhvbWVTdG9yeSIsIm5lIiwiZGJFcnJvciIsImFkbWluTG9naW4iLCJhZG1pbiIsImlzQWRtaW4iLCJuZXh0IiwibG9nZ2VkSW5BZG1pbiIsIkEiLCJyb2xlIiwibGltaXRlciIsIndpbmRvd01zIiwiUkFSRV9MSU1JVF9XSU5ET1dfTVMiLCJtYXgiLCJNQVgiLCJSQVJFX0xJTUlUX01FU1NBR0UiLCJzdGF0dXNDb2RlIiwiUkFSRV9MSU1JVF9DT0RFIiwiaGFuZGxlciIsImtleUdlbmVyYXRvciIsImlwIiwicmVwbGFjZSIsInNlbmQiLCJzb2NrZXQiLCJyZW1vdGVBZGRyZXNzIiwiand0R2VuZXJhdG9yIiwicGF5bG9hZCIsImp3dFJlZnJlc2giLCJ2ZXJpZnlVc2VyIiwid2FpdEZvckRCIiwic2VxdWVsaXplIiwiYXR0ZW1wdHMiLCJhdXRoZW50aWNhdGUiLCJzeW5jIiwiZm9yY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJkYkNvbmZpZyIsIkRpYWxlY3QiLCJob3N0IiwiZGF0YWJhc2UiLCJzb2NrZXRQYXRoIiwic29ja2V0VGltZW91dCIsImNvbXByZXNzIiwiZGVidWciLCJwZXJtaXRMb2NhbEluZmlsZSIsInRyYWNlIiwiY2hlY2tEdXBsaWNhdGUiLCJjb25uZWN0QXR0cmlidXRlcyIsIkpTT04iLCJwYXJzZSIsImNvbm5lY3Rpb25UaW1lb3V0IiwicG9ydCIsInNzbCIsImRpYWxlY3RPcHRpb25zIiwiY2EiLCJ0b1N0cmluZyIsImtleSIsImNlcnQiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJjaXBoZXJzIiwibWluVmVyc2lvbiIsImNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIiwiU2VxdWVsaXplIiwiZGlhbGVjdCIsIl9fZGlybmFtZSIsImRpcm5hbWUiLCJmaWxlVVJMVG9QYXRoIiwiTWFyaWFEYkRpYWxlY3QiLCJtb2RlbHMiLCJpbXBvcnRNb2RlbHMiLCJhcHAiLCJ1c2UiLCJoZWFkZXIiLCJtZXRob2QiLCJzZW5kU3RhdHVzIiwiX3JlcyIsIkFzeW5jTG9jYWxTdG9yYWdlIiwicnVuIiwiTWFwIiwiZXh0ZW5kZWQiLCJUcnVzdF9Qcm94eSIsIlRSVVNUX1BST1hZIiwibnVtYmVyT2ZQcm94aWVzIiwiTlVNQkVSX09GX1BST1hJRVMiLCJzZXQiLCJnZXQiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJjb250ZW50U2VjdXJpdHlQb2xpY3kiLCJmbHVzaEFsbCIsIkFkbWluIiwiTW9kZWwiLCJsb2dpbkFkbWluIiwidGhpcyIsImxvZ291dFVzZXIiLCJyZXNldFBhc3N3b3JkIiwiaW5pdCIsInR5cGUiLCJEYXRhVHlwZXMiLCJJTlRFR0VSIiwiYXV0b0luY3JlbWVudCIsInByaW1hcnlLZXkiLCJTVFJJTkciLCJhbGxvd051bGwiLCJEQVRFIiwiZGVmYXVsdFZhbHVlIiwiTk9XIiwiYXZhdGFyVXJsIiwidGFibGVOYW1lIiwidGhlbiIsImNhdGNoIiwiSW1hZ2VTdG9yYWdlcyIsImZpbmRJbWFnZUJ5SWQiLCJ2YWx1ZSIsInJlZmVyZW5jZXMiLCJtb2RlbE5hbWUiLCJ0aW1lc3RhbXBzIiwiYWZ0ZXJDcmVhdGUiLCJoYXNNYW55IiwiZm9yZWlnbktleSIsIm9uRGVsZXRlIiwib25VcGRhdGUiLCJiZWxvbmdzVG8iLCJMaWtlcyIsImZpbmRMaWtlQnlJZCIsImZpbmRMaWtlQnlSZWZlcmVuY2VLZXkiLCJmaW5kQWxsTGlrZXNCeVJlZmVyZW5jZUtleSIsImRlbGV0ZUxpa2VCeVJlZmVyZW5jZUtleSIsImZyZWV6ZVRhYmxlTmFtZSIsIlBvc3RzIiwidXBkYXRlZFBvc3RzIiwicmV0dXJuaW5nIiwiZ2V0UG9zdEJ5SUQiLCJnZXRTYXZlZFBvc3QiLCJnZXRQb3N0QnlSZWZlcmVuY2VJRCIsIlByb2ZpbGVQaWN0dXJlcyIsImZpbmRQcm9maWxlUGljdHVyZUJ5SWQiLCJnZXRQcm9maWxlUGljQnlSZWZlcmVuY2VJRCIsInVwZGF0ZWRfQXQiLCJ1cGRhdGVkQXQiLCJoYXNPbmUiLCJTYXZlcyIsImNoZWNrSWZTYXZlZCIsImluZGV4ZXMiLCJ1bmlxdWUiLCJmaWVsZHMiLCJ0YXJnZXRLZXkiLCJVc2VycyIsInZhbGlkYXRlIiwibm90RW1wdHkiLCJpcyIsImxlbiIsImlzRW1haWwiLCJiaW8iLCJqb2luIiwibGFiZWwiLCJsYXN0X2FjdGl2aXR5IiwidXBkYXRlZF9hdCIsIlVzZXJSZWdpc3RyYXRpb25JRCIsIlVVSUQiLCJVc2VyUmVnaXN0cmF0aW9uIiwiYmVmb3JlQ3JlYXRlIiwic2FsdCIsImhhc2hlZFBhc3N3b3JkIiwiZmlyc3RfTmFtZSIsImF2YXRhciIsInVwc2VydCIsInJvdXRlciIsInNpbmdsZSIsImZpbGUiLCJyZWxhdGl2ZVBhdGgiLCJmaWxlbmFtZSIsInBvc3RJZCIsInB1dCIsImRlbGV0ZSIsImNvZGUiLCJOT0RFX0VOViIsIlJFU1BPTlNFX1NUQVRVUyIsIkFQUF9OQU1FIiwidXBsb2FkRGlyIiwicmVjdXJzaXZlIiwic3RvcmFnZSIsImRlc3RpbmF0aW9uIiwiX2ZpbGUiLCJjYiIsInVuaXF1ZVN1ZmZpeCIsIm5vdyIsInJvdW5kIiwicmFuZG9tIiwiZmllbGRuYW1lIiwib3JpZ2luYWxuYW1lIiwibGltaXRzIiwiZmlsZVNpemUiLCJmaWxlRmlsdGVyIiwiZmlsZXR5cGVzIiwibWltZXR5cGUiLCJ0ZXN0IiwiZXh0bmFtZSIsInRvTG93ZXJDYXNlIiwidmFsaWRhdGVNSU1FVHlwZSIsInBhdGgiLCJvcmlnaW5hbEZpbGVuYW1lIiwiYWxsb3dNaW1lVHlwZXMiLCJ2YWxpZGF0ZU1pbWVUeXBlIiwiZG9Tb21lTG9uZ1J1bm5pbmdQcm9jZXNzIiwiUGVyZm9ybWFuY2VPYnNlcnZlciIsIml0ZW1zIiwiZ2V0RW50cmllcyIsImZvckVhY2giLCJlbnRyeSIsImR1cmF0aW9uIiwicGVyZm9ybWFuY2UiLCJjbGVhck1hcmtzIiwib2JzZXJ2ZSIsIm1hcmsiLCJkZXRhaWwiLCJsb2dpbk1lYXN1cmUiLCJtZWFzdXJlIiwidHJ1bmNhdGVUYWJsZXMiLCJ0cmFuc2FjdGlvbiIsInRydW5jYXRlIiwiY29tbWl0Iiwicm9sbGJhY2siLCJnZW5lcmF0ZUF2YXRhclVybCIsImluaXRpYWxzIiwicGFydCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiaGFuZGxlRXJyb3IiLCJlcnJvcnMiLCJpbmNsdWRlcyIsImxvZ0Vycm9yVG9GaWxlIiwidG9JU09TdHJpbmciLCJzdGFjayIsInVuaGFuZGxlZFJlamVjdGlvbnMiLCJnbG9iYWxFcnJvckhhbmRsZXIiLCJyZWFzb24iLCJwcm9taXNlIiwiZmQiLCJFUlJPUl9USU1FT1VUIiwiYXBwQ2FjaGUiLCJzdGRUVEwiLCJjaGVja3BlcmlvZCIsInZhbGlkYXRlQW5kUGFyc2VQYXJhbXMiLCJsaWtlc19pZCIsInVuZGVmaW5lZCIsInBhcnNlZFVzZXJJZCIsInBhcnNlZFBvc3RJZCIsInBhcnNlZExpa2VzSWQiLCJwYXJzZWRDcmVhdG9ySWQiLCJwYXJzZWRSZXF1ZXN0ZWRVc2VySWQiLCJwYXJzZWRMaW1pdCJdLCJzb3VyY2VSb290IjoiIn0=