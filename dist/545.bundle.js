"use strict";exports.id=545,exports.ids=[545],exports.modules={1976:(e,s,t)=>{t.d(s,{v:()=>l});var r=t(2613);const a=(0,t(7546).load)({CORS_ORIGIN:String,CORS_OPTIONS_SUCCESS_STATUS:Number,CORS_CREDENTIALS:Boolean,CORS_METHODS:String}),{CORS_ORIGIN:o,CORS_OPTIONS_SUCCESS_STATUS:n,CORS_CREDENTIALS:i,CORS_METHODS:c}=a;r.strict.ok(o,"CORS origin should be present"),r.strict.ok(n,"CORS options success status should be present"),r.strict.ok(i,"CORS credentials should be present"),r.strict.ok(c,"CORS methods should be present");const d={CORS_ORIGIN:o,CORS_OPTIONS_SUCCESS_STATUS:n,CORS_CREDENTIALS:i,CORS_METHODS:c};t(818).config();const l={origin:d.CORS_ORIGIN,methods:d.CORS_METHODS,credentials:d.CORS_CREDENTIALS,optionsSuccessStatus:d.CORS_OPTIONS_SUCCESS_STATUS}},3085:(e,s,t)=>{t.d(s,{L:()=>A});var r=t(2613);const a=(0,t(7546).load)({DB_HOST:String,DB_PORT:Number,DB_USER:String,DB_PASS:String,DB_NAME:String,DB_SOCKET_PATH:String,DB_SOCKET_TIMEOUT:Number,DB_COMPRESS:Boolean,DB_DEBUG:Boolean,DB_PERMIT_LOCAL_INFILE:Boolean,DB_TRACE:Boolean,DB_CHECK_DUPLICATE:Boolean,DB_SSL:Boolean,DB_SSL_CA:String,DB_SSL_KEY:String,DB_SSL_CERT:String,DB_CONNECTION_ATTRIBUTES:String,DB_CONNECTION_TIMEOUT:Number}),{DB_HOST:o,DB_PORT:n,DB_USER:i,DB_PASS:c,DB_NAME:d,DB_SOCKET_PATH:l,DB_SOCKET_TIMEOUT:u,DB_COMPRESS:g,DB_DEBUG:y,DB_PERMIT_LOCAL_INFILE:p,DB_TRACE:T,DB_CHECK_DUPLICATE:m,DB_SSL:E,DB_SSL_CA:h,DB_SSL_KEY:f,DB_SSL_CERT:_,DB_CONNECTION_ATTRIBUTES:w,DB_CONNECTION_TIMEOUT:S}=a;r.strict.ok(o,"Database host should be present"),r.strict.ok(n,"Database port should be present"),r.strict.ok(i,"Database user should be present"),r.strict.ok(c,"Database password should be present"),r.strict.ok(d,"Database name should be present");const A={DB_HOST:o,DB_PORT:n,DB_USER:i,DB_PASS:c,DB_NAME:d,DB_SOCKET_PATH:l,DB_SOCKET_TIMEOUT:u,DB_COMPRESS:g,DB_DEBUG:y,DB_PERMIT_LOCAL_INFILE:p,DB_TRACE:T,DB_CHECK_DUPLICATE:m,DB_CONNECTION_ATTRIBUTES:w,DB_CONNECTION_TIMEOUT:S,DB_SSL:E,DB_SSL_CA:h,DB_SSL_KEY:f,DB_SSL_CERT:_}},3101:(e,s,t)=>{t.d(s,{n:()=>E});var r=t(2613);const a=(0,t(7546).load)({JWT_SECRET:String,JWT_EXPIRES_IN:String,JWT_REFRESH_SECRET:String,JWT_REFRESH_EXPIRES_IN:String,JWT_REFRESH_MAX_AGE:Number,JWT_ALGORITHM:String,JWT_ISSUER:String,JWT_MAX_AGE:Number,JWT_HTTP_ONLY:Boolean,JWT_SAME_SITE:String,JWT_COOKIE_NAME:String,JWT_SECURE:Boolean}),{JWT_SECRET:o,JWT_EXPIRES_IN:n,JWT_REFRESH_SECRET:i,JWT_REFRESH_EXPIRES_IN:c,JWT_REFRESH_MAX_AGE:d,JWT_ALGORITHM:l,JWT_ISSUER:u,JWT_MAX_AGE:g,JWT_HTTP_ONLY:y,JWT_SAME_SITE:p,JWT_COOKIE_NAME:T,JWT_SECURE:m}=a;r.strict.ok(o,"JWT secret should be present"),r.strict.ok(n,"JWT expires in should be present"),r.strict.ok(i,"JWT refresh secret should be present"),r.strict.ok(c,"JWT refresh expires in should be present"),r.strict.ok(l,"JWT algorithm should be present"),r.strict.ok(u,"JWT issuer should be present"),r.strict.ok(g,"JWT max age should be present"),r.strict.ok(y,"JWT http only should be present"),r.strict.ok(p,"JWT same site should be present"),r.strict.ok(T,"JWT cookie name should be present"),r.strict.ok(m,"JWT secure should be present"),r.strict.ok(d,"JWT refresh max age should be present");const E={JWT_SECRET:o,JWT_EXPIRES_IN:n,JWT_REFRESH_SECRET:i,JWT_REFRESH_EXPIRES_IN:c,JWT_REFRESH_MAX_AGE:d,JWT_ALGORITHM:l,JWT_ISSUER:u,JWT_MAX_AGE:g,JWT_HTTP_ONLY:y,JWT_SAME_SITE:p,JWT_COOKIE_NAME:T,JWT_SECURE:m}},6184:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{CI:()=>C,E0:()=>I,Eu:()=>U,Zv:()=>D,bI:()=>O,gg:()=>f,hv:()=>j,kL:()=>w,lM:()=>v,pD:()=>E,tY:()=>S,ys:()=>R,zX:()=>_,zh:()=>A});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(5595),d=t(6153),l=t(3101),u=t(452),g=t(2993),y=t(8995),p=t(581),T=t(9031),m=e([c,d,u,g,y,p]);[c,d,u,g,y,p]=m.then?(await m)():m,o().config();const E=async(e,s)=>{try{const{caption:t,location:r,tags:a}=e.body,o=e.cookies.jwt;if(!o)return void s.status(401).json({message:"Unauthorized"});i().verify(o,l.n.JWT_SECRET,(async(e,o)=>{if(e)return console.log(e.message),void s.status(401).json({message:"Unauthorized"});const n=o.id,i=await d.A.findByPk(n);if(!i)return void s.status(404).json({message:"User not found"});const l=await c.A.findImageByReferenceKey("user_id",n);if(!l)return s.status(404).json({message:"Image not found"});const g=await u.A.create({caption:t,imageURL:l.imageUrl,location:r,tags:a||"",created_At:new Date,creator_Id:i.id});if(g)return s.status(201).json({message:"Post created successfully",newPost:g}),g;s.status(400).json({message:"Error creating new post."})}))}catch(e){console.error("Error creating post:",e),s.status(500).json({message:"Internal server error"})}},h=async(e,s,t)=>{try{const e=await c.A.findOne({where:{imageUrl:t}});if(!e)return void s.status(404).json({message:"Image not found"});await e.destroy(),s.status(200).json({message:"Image deleted successfully"})}catch(e){console.error("Error deleting image:",e),s.status(500).json({message:"Internal server error"})}},f=async(e,s)=>{try{const{caption:t,location:r,tags:a,imageUrl:o}=e.body,n=parseInt(e.query.post_id,10);if(!n)return void s.status(400).json({message:"Post ID is required"});const c=e.cookies.jwt;if(!c)return void s.status(401).json({message:"Unauthorized"});i().verify(c,l.n.JWT_SECRET,(async(i,c)=>{if(i)return console.log(i.message),void s.status(401).json({message:"Unauthorized"});const l=c.id,y=await d.A.findByPk(l);if(!y)return void s.status(404).json({message:"User not found"});const p=await u.A.findOne({where:{id:n,creator_Id:l}});if(!p)return void s.status(404).json({message:"Post not found"});if(p.creator_Id!==y.id)return void s.status(403).json({message:"Unauthorized attempt!"});let T=p?.imageURL;if(o)try{const t=await(0,g.A)(e,s);if(!t)return void s.status(404).json({message:"Image not found"});T=t}catch(e){return void s.status(401).json({message:"Unauthorized"})}const m=await p.update({id:p.id,caption:t,imageURL:T,location:r,tags:a,created_At:new Date});return m?(s.status(200).json({message:"Post updated successfully",post:m}),m):(o&&await h(e,s,o),void s.status(400).json({message:"Error updating post"}))}))}catch(e){console.error("Error updating post:",e),s.status(500).json({message:"Internal server error"})}},_=async(e,s)=>{try{const e=await u.A.findAll({include:[{model:d.A,as:"User",attributes:["id","username","email","profilePic","bio","firstName","lastName","imageURL","avatarUrl"]}]});s.status(200).json({posts:e})}catch(e){console.error("Error getting posts:",e),s.status(500).json({message:"Internal server error"})}},w=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,l.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id,o=parseInt(e.body.post_id,10);if(isNaN(o))return void s.status(400).json({message:"Invalid post ID"});if(!await d.A.findByPk(a))return void s.status(404).json({message:"User not found"});const n=await u.A.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});if(await y.A.findOne({where:{post_id:o,user_id:a}}))return void s.status(400).json({message:"Post already liked"});const i=await y.A.createLike({user_id:a,post_id:o,created_At:new Date});n.likes_Count||(n.likes_Count=0);const c=n.likes_Count+1;await n.update({likes_Count:c})?s.status(201).json({message:"Post liked successfully",like:i}):s.status(400).json({message:"Error liking post."})}))}catch(e){console.error("Error liking post:",e),s.status(500).json({message:"Internal server error"})}},S=async(e,s)=>{try{const t=parseInt(e.query.user_id,10);if(!t)return void s.status(400).json({message:"post User ID is required"});const r=e.cookies.jwt;if(!r)return void s.status(401).json({message:"Unauthorized"});i().verify(r,l.n.JWT_SECRET,(async(r,a)=>{if(r)return console.log(r.message),void s.status(401).json({message:"Unauthorized"});const o=a.id;if(!o)return void s.status(400).json({message:"User ID is required"});if(!await d.A.findByPk(o))return void s.status(404).json({message:"User not found"});const n=await d.A.findOne({where:{id:t}});if(!n)return void s.status(404).json({message:"User not found"});const i=parseInt(e.query.post_id,10);if(!i)return void s.status(400).json({message:"Post ID is required"});const c=await u.A.findByPk(i);c?s.status(200).json({post:c,requestedUser:n,requestedUserId:t}):s.status(404).json({message:"Post not found here"})}))}catch(e){console.error("Error getting post:",e),s.status(500).json({message:"Internal server error"})}},A=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,l.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.body.post_id,10);if(!await d.A.findByPk(a))return void s.status(404).json({message:"User not found"});const n=await u.A.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});const i=await y.A.findOne({where:{post_id:o,user_id:a}});i&&await i.destroy();let c=n.likes_Count||0;c>0&&(c-=1),await n.update({likes_Count:c}),await n.save(),s.status(200).json({message:i?"Like removed successfully":"Post liked successfully",post:n})}))}catch(e){console.error("Error toggling like:",e),s.status(500).json({message:"Internal server error"})}},I=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,l.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log("JWT verification error",t.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.body.post_id,10);if(!o)return void s.status(400).json({message:"Post ID is required"});if(!await d.A.findByPk(a))return void s.status(404).json({message:"User not found"});if(!await u.A.findByPk(o))return void s.status(404).json({message:"Post not found"});if(await p.A.findOne({where:{post_id:o,user_id:a}}))return void s.status(400).json({message:"Post already saved"});const n=await p.A.createSave({id:a,user_id:a,post_id:o,saveDate:new Date});n?s.status(201).json({message:"Post saved successfully",save:n}):s.status(400).json({message:"Error saving post."})}))}catch(e){console.error("Error saving post:",e),s.status(500).json({message:"Internal server error"})}},D=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,l.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log("JWT verification error",t.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.body.post_id,10);if(!o)return void s.status(400).json({message:"Post ID is required"});if(!await d.A.findByPk(a))return void s.status(404).json({message:"User not found"});if(!await u.A.findByPk(o))return void s.status(404).json({message:"Post not found"});const n=await p.A.findOne({where:{post_id:o,user_id:a}});n&&await n.destroy(),s.status(200).json({message:n?"Post unsaved successfully":"Post not saved"})}))}catch(e){console.error("Error deleting saved post:",e),s.status(500).json({message:"Internal server error"})}},v=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,l.n.JWT_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const r=t.id;if(!r)return void s.status(400).json({message:"User ID is required"});if(!await d.A.findByPk(r))return void s.status(404).json({message:"User not found"});const a=await p.A.getSavedPosts(r);s.status(200).json({savedPosts:a})}))}catch(e){console.error("Error getting saved posts:",e),s.status(500).json({message:"Internal server error"})}},R=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,l.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});if(!await d.A.findByPk(a))return void s.status(404).json({message:"User not found"});const o=parseInt(e.body.post_id,10);if(!o)return void s.status(400).json({message:"Post ID is required from server"});const n=await u.A.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});const i=await p.A.findOne({where:{post_id:o,user_id:a}});if(i&&await i.destroy(),n.imageURL){const e=await c.A.findOne({where:{imageUrl:n.imageURL}});e&&await e.destroy()}await n.destroy(),s.status(200).json({message:"Post deleted successfully"})}))}catch(e){console.error("Error deleting post:",e),s.status(500).json({message:"Internal server error"})}},U=async(e,s)=>{try{const{page:t=0,limit:r=10}=e.query,a=t?parseInt(t,10)*parseInt(r,10):0,o=await u.A.findAndCountAll({limit:parseInt(r,10),offset:a,order:[["created_At","DESC"]]});s.status(200).json({posts:o,page:parseInt(t,10),totalPages:Math.ceil(o.count/parseInt(r,10)),totalCount:o.count})}catch(e){console.error("Error getting posts:",e),s.status(500).json({message:"Internal server error"})}},C=async(e,s)=>{try{const{searchValue:t}=e.body;if(!t)return void s.status(400).json({message:"Search value is required"});const r=await u.A.findAll({where:{[T.Op.or]:[{caption:{[T.Op.like]:`%${t}%`}},{tags:{[T.Op.like]:`%${t}%`}},{location:{[T.Op.like]:`%${t}%`}}]}});s.status(200).json({posts:r})}catch(e){console.error("Error searching posts:",e),s.status(500).json({message:"Internal server error"})}},j=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,l.n.JWT_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const r=t.id;if(!r)return void s.status(400).json({message:"User ID is required"});const a=await u.A.findAll({where:{creator_Id:r}});s.status(200).json({posts:a})}))}catch(e){console.error("Error getting user posts:",e),s.status(500).json({message:"Internal server error"})}},O=async(e,s)=>{try{const e=await u.A.findAll({order:[["likes_Count","DESC"]]});s.status(200).json({popularPosts:e})}catch(e){console.error("Error getting popular posts:",e),s.status(500).json({message:"Internal server error"})}};r()}catch(e){r(e)}}))},9024:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{Be:()=>m,TU:()=>y,Ub:()=>T,pH:()=>p});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(3101),d=t(16),l=t(80),u=t(2300),g=e([l]);l=(g.then?(await g)():g)[0],o().config();const y=async(e,s)=>{try{const{name:t,username:r,email:a,password:o}=e.body;if(!(t&&r&&a&&o))return(0,u.H4)(new Error("New User validation error"),s);if(await l.A.findOne({where:{email:a}}))return(0,u.H4)(new Error("UserRegistrations.email: User already exists "),s);const n=await l.A.create({newUser:t,username:r,email:a,hashedpassword:o,createdAt:new Date}),i=(0,d.Jj)({id:n.id});s.cookie("jwt",i,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.status(201).json({id:n.id,name:n.newUser,username:n.username,email:n.email,token:i})}catch(e){(0,u.H4)(e,s)}},p=async(e,s)=>{try{const{email:t,password:r}=e.body;if(!t||!r)return(0,u.H4)(new Error("Login Validation Error!"),s);const a=await l.A.loginUser(t,r);if(!a)throw new Error("User not found");const o=(0,d.Jj)({id:a.id}),n=(0,d.v3)({id:a.id});console.log("User logged in:",n),s.cookie("jwt",o,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.cookie("refreshToken",n,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_REFRESH_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.setHeader("Authorization",`Bearer ${o}`),s.locals.user=a,s.json({token:o,refreshToken:n,user:a.id})}catch(e){(0,u.H4)(e,s)}},T=async(e,s)=>{try{const t=e.cookies.jwt,r=e.cookies.refreshToken;if(!t&&!r)return void s.status(400).json({message:"No tokens provided!"});s.cookie("jwt","",{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:1}),s.cookie("refreshToken","",{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:1}),s.status(200).json({message:"User logged out"})}catch(e){(0,u.H4)(e,s)}},m=async(e,s)=>{const t=e.cookies.refreshToken;t?i().verify(t,c.n.JWT_REFRESH_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});try{const e=t.id;if(console.log("User ID:",e),!e)return void s.status(400).json({message:"User ID is required"});const r=await l.A.findByPk(e);if(!r)return s.status(404).json({message:"User not found"});const a=i().sign({id:r.id},c.n.JWT_SECRET,{expiresIn:c.n.JWT_EXPIRES_IN,algorithm:c.n.JWT_ALGORITHM,issuer:c.n.JWT_ISSUER});s.cookie("jwt",a,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_REFRESH_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.status(200).json({token:a,user:r.id})}catch(e){console.error("Error getting current user:",e),s.status(500).json({message:"Error getting current user"})}})):s.status(401).json({message:"Unauthorized"})};r()}catch(e){r(e)}}))},2993:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>d});var a=t(5595),o=t(829),n=t.n(o),i=(t(4469),t(6153)),c=e([a,i]);[a,i]=c.then?(await c)():c;const d=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});n().verify(t,process.env.JWT_SECRET,(async(e,t)=>{if(e)return void s.status(401).json({message:"Unauthorized"});const r=t.id;if(!r)return void s.status(401).json({message:"Unauthorized"});if(!await i.A.findByPk(r))return void s.status(401).json({message:"Unauthorized"});const o=await a.A.findImageByReferenceKey("user_id",r);o?s.status(200).json({imageUrl:o.imageUrl}):s.status(200).json({message:"No image found"})}))}catch(e){throw console.error("Error getting image preview:",e),new Error("Failed to get image preview")}};r()}catch(e){r(e)}}))},4361:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{CF:()=>p,TK:()=>m,k7:()=>T});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(3101),d=t(6153),l=t(2993),u=t(452),g=t(8995),y=e([d,l,u,g]);[d,l,u,g]=y.then?(await y)():y,o().config();const p=async(e,s)=>{const t=e.cookies.jwt;if(t)try{i().verify(t,c.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!await d.A.findByPk(a))return void s.status(404).json({message:"User not found"});const o=parseInt(e.query.limit,10)||10,n=await d.A.getAllUsers(o,["id","firstName","lastName","username","imageURL","avatarUrl","bio"]);s.status(200).json({users:n})}))}catch(e){console.error("Error getting all users:",e),s.status(500).json({message:"Internal server error"})}else s.status(401).json({message:"Unauthorized"})},T=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,c.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id,o=parseInt(e.query.user_id,10),n=await d.A.findByPk(a);if(!n)return void s.status(404).json({message:"User not found"});if(n.id!==a)return void s.status(403).json({message:"Unauthorized attempt!"});const i=await d.A.findOne({where:{id:o}});if(!i)return void s.status(404).json({message:"Requested User not found"});const c=await u.A.getPostByReferenceID(o);if(!c)return void s.status(400).json({message:"Post ID is required"});const l=await g.A.findByPk(a);l?s.status(200).json({user:i,post:c,userLikes:l,user_id:a}):s.status(400).json({message:"User ID is required S routes"})}))}catch(e){console.error("Error getting user by ID:",e),s.status(500).json({message:"Internal server error"})}},m=async(e,s)=>{try{const{id:t}=e.params,r=e.body,a=e.cookies.jwt;if(!a)return void s.status(401).json({message:"Unauthorized"});i().verify(a,c.n.JWT_SECRET,(async(a,o)=>{if(a)return console.log(a.message),void s.status(401).json({message:"Unauthorized"});const n=o.id,i=await d.A.findByPk(n);if(!i)return void s.status(404).json({message:"User not found"});if(i.id!==Number(t))return void s.status(403).json({message:"Unauthorized attempt!"});let{imageUrl:c}=e.body;if(c)try{const t=await(0,l.A)(e,s);if(!t)return void s.status(404).json({message:"Image not found"});r.imageUrl=t}catch(e){return console.error("Error fetching image preview URL:",e),void s.status(500).json({message:"Error updating profile picture"})}const[u,g]=await d.A.updateUser(Number(t),r);0!==u?s.status(200).json({updatedUsers:g}):s.status(400).json({message:"Error updating user"})}))}catch(e){console.error("Error updating user:",e),s.status(500).json({message:"Internal server error"})}};r()}catch(e){r(e)}}))},2785:(e,s,t)=>{t.d(s,{TA:()=>n});var r=t(1763),a=t.n(r),o=t(9469);const n=a()({windowMs:o._.RARE_LIMIT_WINDOW_MS,max:o._.MAX,message:o._.RARE_LIMIT_MESSAGE,statusCode:o._.RARE_LIMIT_CODE,handler:(e,s)=>{s.status(o._.RARE_LIMIT_CODE).json({message:o._.RARE_LIMIT_MESSAGE})},keyGenerator:async(e,s)=>e.ip?e.ip.replace(/:\d+[^:]*$/,""):(s.status(500).send({message:"Warning: request.ip is missing!"}),e.socket.remoteAddress)})},16:(e,s,t)=>{t.d(s,{Jj:()=>c,v3:()=>d});var r=t(818),a=t.n(r),o=t(829),n=t.n(o),i=t(3101);a().config();const c=e=>{try{return n().sign(e,i.n.JWT_SECRET,{algorithm:i.n.JWT_ALGORITHM,expiresIn:i.n.JWT_EXPIRES_IN,issuer:i.n.JWT_ISSUER})}catch(e){throw new Error("Error generating JWT")}},d=e=>{try{return n().sign(e,i.n.JWT_REFRESH_SECRET,{algorithm:i.n.JWT_ALGORITHM,expiresIn:i.n.JWT_REFRESH_EXPIRES_IN,issuer:i.n.JWT_ISSUER})}catch(e){throw new Error("Error generating JWT")}}},2051:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{FH:()=>u});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(3101),d=t(6153),l=e([d]);d=(l.then?(await l)():l)[0],o().config();const u=async(e,s,t)=>{try{const r=e.cookies.jwt;if(!r)return s.locals.user=null,t();i().verify(r,c.n.JWT_SECRET,(async(e,r)=>{if(e)return console.error("JWT verification error:",e.message),s.locals.user=null,t();try{const e=await d.A.findByPk(r.id);console.log("decodedToken:",r),s.locals.user=e||null}catch(e){console.error("Error retrieving user:",e),s.locals.user=null}t()}))}catch(e){console.error("Error verifying user:",e),s.locals.user=null,t()}};r()}catch(e){r(e)}}))},1125:(e,s,t)=>{t.d(s,{r:()=>a});var r=t(128);async function a(){const e=(0,r.J)();let s=0;for(;s<10;)try{return await e.authenticate(),console.log("Database connection established, Starting Server....."),await e.sync({force:!0}),console.log("Drop and re-sync db."),e}catch(e){console.error("Database connection failed:",e),s++,await new Promise((e=>setTimeout(e,1e3)))}throw console.error("Max attempts reached, database connection failed"),new Error("Database connection failed")}},128:(e,s,t)=>{t.d(s,{J:()=>c});var r=t(9031),a=t(3085),o=t(3024),n=t.n(o);const i={Dialect:"mariadb",host:a.L.DB_HOST||"localhost",username:a.L.DB_USER||"metalbrain",password:a.L.DB_PASS||"password",database:a.L.DB_NAME||"FindSomeOne",socketPath:a.L.DB_SOCKET_PATH||"/var/run/mysqld/mysqld.sock",socketTimeout:a.L.DB_SOCKET_TIMEOUT||1e3,compress:a.L.DB_COMPRESS||!1,debug:a.L.DB_DEBUG||!1,permitLocalInfile:a.L.DB_PERMIT_LOCAL_INFILE||!1,trace:a.L.DB_TRACE||!0,checkDuplicate:a.L.DB_CHECK_DUPLICATE||!1,connectAttributes:JSON.parse(a.L.DB_CONNECTION_ATTRIBUTES||"{}"),connectionTimeout:a.L.DB_CONNECTION_TIMEOUT||1e3,port:a.L.DB_PORT||3306,ssl:a.L.DB_SSL||!1,dialectOptions:{ssl:{ca:a.L.DB_SSL_CA?n().readFileSync(a.L.DB_SSL_CA).toString():"",key:a.L.DB_SSL_KEY?n().readFileSync(a.L.DB_SSL_KEY).toString():"",cert:a.L.DB_SSL_CERT?n().readFileSync(a.L.DB_SSL_CERT).toString():""}}};function c(){return new r.Sequelize(i.database,i.username,i.password,{host:i.host,dialect:i.Dialect,port:i.port,ssl:i.ssl,dialectOptions:i.dialectOptions})}},3121:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>d});var a=t(423),o=t(5520),n=t(3136),i=t(6760),c=t(3085);const e=(0,i.dirname)((0,n.fileURLToPath)("file:///home/babsdevsys/appV-1/src/server/loaders/dataLoader/sequlize.ts")),d=new a.Sequelize({dialect:o.MariaDbDialect,host:c.L.DB_HOST,user:c.L.DB_USER,password:c.L.DB_PASS,database:c.L.DB_NAME,port:c.L.DB_PORT,ssl:c.L.DB_SSL,models:await(0,a.importModels)(e+"/src/server/models/**/*.model.{ts,js}")});r()}catch(e){r(e)}}),1)},6633:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>w});var a=t(7252),o=t.n(a),n=t(6898),i=t.n(n),c=t(3268),d=t.n(c),l=t(2525),u=t.n(l),g=t(2096),y=t.n(g),p=t(9469),T=t(4388),m=t(2785),E=t(2300),h=t(6928),f=t.n(h),_=e([T]);async function w({app:e}){e.get("/status",((e,s)=>s.sendStatus(200).end())),e.use(((e,s,t)=>(s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),"OPTIONS"===e.method?s.sendStatus(204):t()))),e.use(d().urlencoded({extended:!0})),e.use(o().json()),e.use(o().urlencoded({extended:!0})),e.use(i()()),e.use(d().json()),e.use(o().static(f().join(__dirname,"dist"))),e.use("/assets",o().static(f().join(__dirname,"assets")));const s=p._.TRUST_PROXY||"false",t=p._.NUMBER_OF_PROXIES||1;return s?e.set("trust proxy",!0):"false"===s?e.set("trust proxy",!1):(e.set("trust proxy",s),e.set("trust proxy",t)),e.set("trust proxy",t),e.get("/ip",((e,s)=>s.send(e.ip))),e.use(u()({contentSecurityPolicy:!1})),e.use(y()(p._.MORGAN)),e.use(m.TA),e.use(T.Q),e.use(E.sh),e}T=(_.then?(await _)():_)[0],r()}catch(S){r(S)}}))},1545:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.r(s),t.d(s,{default:()=>l});var a=t(6633),o=t(3121),n=t(1125),i=t(2541),c=t(2273),d=e([a,o,i]);async function l({app:e}){await(0,i.K)(),await(0,n.r)(),o.A,await(0,a.A)({app:e}),(0,c.A)(),console.log("Express Server Intialized!")}[a,o,i]=d.then?(await d)():d,r()}catch(u){r(u)}}))},5595:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>u});var a=t(9031),o=t(128),n=t(6153),i=t(452),c=e([n,i]);[n,i]=c.then?(await c)():c;const d=(0,o.J)();class l extends a.Model{static async findImageById(e){return await this.findByPk(e)}static async findImageByReferenceKey(e,s){try{return await this.findOne({where:{[e]:s},order:[["created_At","DESC"]]})}catch(t){throw console.error(`Error finding image by reference key: ${e}, value: ${s}`,t),t}}}l.init({id:{type:a.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},imageUrl:{type:a.DataTypes.STRING,allowNull:!0},user_id:{type:a.DataTypes.INTEGER,references:{model:"Users",key:"id"}},post_id:{type:a.DataTypes.INTEGER,references:{model:"Posts",key:"id"}},created_At:{type:a.DataTypes.DATE,allowNull:!1,defaultValue:a.DataTypes.NOW}},{sequelize:d,modelName:"ImageStorages",timestamps:!1}),l.init({id:{type:a.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},imageUrl:{type:a.DataTypes.STRING,allowNull:!0},user_id:{type:a.DataTypes.INTEGER,references:{model:"Users",key:"id"}},post_id:{type:a.DataTypes.INTEGER,references:{model:"Posts",key:"id"},allowNull:!0},created_At:{type:a.DataTypes.DATE,allowNull:!1,defaultValue:a.DataTypes.NOW}},{sequelize:d,modelName:"ImageStorages",timestamps:!1}),l.afterCreate((async e=>{const s=await n.A.findByPk(e.user_id);s&&(s.imageURL=e.imageUrl,await s.save())})),n.A.hasMany(l,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),i.A.hasMany(l,{foreignKey:"post_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),l.belongsTo(n.A,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),l.belongsTo(i.A,{foreignKey:"post_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),await d.sync({force:!1}).then((()=>{console.log("New Image synced successfully")})).catch((e=>{console.error("Error syncing new image:",e)}));const u=l;r()}catch(e){r(e)}}),1)},8995:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>u});var a=t(9031),o=t(128),n=t(6153),i=t(452),c=e([n,i]);[n,i]=c.then?(await c)():c;const d=(0,o.J)();class l extends a.Model{static async createLike(e){return await this.create(e)}static async findLikeById(e){return await this.findByPk(e)}static async findLikeByReferenceKey(e,s){return await this.findOne({where:{[e]:s}})}static async findAllLikesByReferenceKey(e,s){return await this.findAll({where:{[e]:s}})}static async deleteLikeByReferenceKey(e,s){await this.destroy({where:{[e]:s}})}}l.init({id:{type:a.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},user_id:{type:a.DataTypes.INTEGER,allowNull:!1,references:{model:"Users",key:"id"}},post_id:{type:a.DataTypes.INTEGER,allowNull:!1,references:{model:"Posts",key:"id"}},created_At:{type:a.DataTypes.DATE,allowNull:!0}},{sequelize:d,modelName:"Likes",timestamps:!1,freezeTableName:!0}),n.A.hasMany(l,{foreignKey:"user_id",onDelete:"CASCADE"}),l.belongsTo(n.A,{foreignKey:"user_id"}),i.A.hasMany(l,{foreignKey:"post_id",onDelete:"CASCADE"}),l.belongsTo(i.A,{foreignKey:"post_id"}),l.sync({force:!1}).then((()=>{console.log("Like synced successfully")})).catch((e=>{console.error("Error syncing like:",e)}));const u=l;r()}catch(e){r(e)}}))},452:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>l});var a=t(9031),o=t(128),n=t(6153),i=e([n]);n=(i.then?(await i)():i)[0];const c=(0,o.J)();class d extends a.Model{static async createPost(e){return await this.create(e)}static async updatePost(e,s){const[t,r]=await this.update(s,{where:{id:e},returning:!0});return[t,r]}static async deletePost(e){const s=await this.findOne({where:{id:e}});s&&await s.destroy()}static async getAllPosts(){return await this.findAll()}static async getInfinitePosts(e,s){return await this.findAll({offset:e,limit:s})}static async getPostByID(e){return await this.findOne({where:{id:e}})}static async getUserPosts(e){return await this.findAll({where:{creator_Id:e}})}static async getSavedPost(e){return await this.findOne({where:{id:e}})}static async getPostByReferenceID(e){return await this.findOne({where:{creator_Id:e}})}}d.init({id:{type:a.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},caption:{type:a.DataTypes.STRING,allowNull:!1},imageURL:{type:a.DataTypes.STRING,allowNull:!0},location:{type:a.DataTypes.STRING,allowNull:!0},tags:{type:a.DataTypes.STRING,allowNull:!1},likes_Count:{type:a.DataTypes.INTEGER,allowNull:!0},created_At:{type:a.DataTypes.DATE,allowNull:!0},creator_Id:{type:a.DataTypes.INTEGER,allowNull:!1,references:{model:"Users",key:"id"}}},{sequelize:c,modelName:"Posts",timestamps:!1}),d.createPost=async function(e){try{return await this.create(e)}catch(e){throw console.error("Error creating new post:",e),e}},d.updatePost=async function(e,s){try{const[t,r]=await this.update(s,{where:{id:e},returning:!0});return[t,r]}catch(e){throw console.error("Error updating post:",e),e}},d.getInfinitePosts=async function(e,s){try{return await this.findAll({offset:e,limit:s})}catch(e){throw console.error("Error getting infinite posts:",e),e}},d.getPostByID=async function(e){try{return await this.findOne({where:{id:e}})}catch(e){throw console.error("Error getting post by ID:",e),e}},d.getUserPosts=async function(e){try{return await this.findAll({where:{creator_Id:e}})}catch(e){throw console.error("Error getting user posts:",e),e}},n.A.hasMany(d,{foreignKey:"creator_Id",onDelete:"CASCADE",onUpdate:"CASCADE"}),d.belongsTo(n.A,{foreignKey:"creator_Id",onDelete:"CASCADE",onUpdate:"CASCADE"}),await c.sync({force:!1}).then((()=>{console.log("Post synced successfully")})).catch((e=>{console.error("Error syncing Post:",e)}));const l=d;r()}catch(e){r(e)}}),1)},581:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>u});var a=t(9031),o=t(128),n=t(6153),i=t(452),c=e([n,i]);[n,i]=c.then?(await c)():c;const d=(0,o.J)();class l extends a.Model{static async createSave(e){return await this.create(e)}static async checkIfSaved(e,s){return!!await this.findOne({where:{user_id:e,post_id:s}})}static async deleteSavedPost(e){const s=await this.findOne({where:{post_id:e}});s&&await s.destroy()}static async getSavedPosts(e){return await this.findAll({where:{user_id:e},include:[{model:i.A,as:"Post"}]})}}l.init({id:{type:a.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},user_id:{type:a.DataTypes.INTEGER,references:{model:"Users",key:"id"}},post_id:{type:a.DataTypes.INTEGER,references:{model:"Posts",key:"id"}},saveDate:{type:a.DataTypes.DATE,allowNull:!0,defaultValue:a.DataTypes.NOW}},{sequelize:d,tableName:"Saves",timestamps:!1,freezeTableName:!0}),l.deleteSavedPost=async function(e){const s=await this.findOne({where:{post_id:e}});s&&await s.destroy()},l.belongsTo(n.A,{foreignKey:"user_id",targetKey:"id"}),l.belongsTo(i.A,{foreignKey:"post_id",targetKey:"id"}),l.sync({force:!1}).then((()=>{console.log("Save Post synced successfully")})).catch((e=>{console.error("Error syncing Save post:",e)}));const u=l;r()}catch(e){r(e)}}))},6153:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>n});var a=t(9031);const e=(0,t(128).J)();class o extends a.Model{static async getUserByID(e){return await this.findOne({where:{id:e}})}static async getAllUsers(e,s){return await this.findAll({limit:e,attributes:s})}static async updateUser(e,s){const[t,r]=await this.update(s,{where:{id:e},returning:!0});return[t,r]}}o.init({id:{type:a.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},firstName:{type:a.DataTypes.STRING,allowNull:!1,validate:{notEmpty:!0}},lastName:{type:a.DataTypes.STRING,allowNull:!1,validate:{notEmpty:!0}},username:{type:a.DataTypes.STRING,allowNull:!1,unique:!0,validate:{is:/^[a-zA-Z0-9_]*$/,len:[3,20]}},email:{type:a.DataTypes.STRING,unique:!0,allowNull:!1,validate:{isEmail:!0,len:[5,50],notEmpty:!0}},hashedpassword:{type:a.DataTypes.STRING(64)},status:{type:a.DataTypes.STRING,allowNull:!1,defaultValue:"unverified"},bio:{type:a.DataTypes.STRING,defaultValue:"This is a new user."},join:{type:a.DataTypes.DATE,defaultValue:a.DataTypes.NOW},avatarUrl:{type:a.DataTypes.STRING},imageURL:{type:a.DataTypes.STRING},profilePic:{type:a.DataTypes.STRING},label:{type:a.DataTypes.STRING,defaultValue:"New User"},last_activity:{type:a.DataTypes.DATE,defaultValue:a.DataTypes.NOW},updated_at:{type:a.DataTypes.DATE,defaultValue:a.DataTypes.NOW},UserRegistrationID:{type:a.DataTypes.UUID,allowNull:!0,references:{model:"UserRegistration",key:"id"}}},{sequelize:e,modelName:"Users",timestamps:!1,updatedAt:"updated_at"}),await e.sync({force:!1}).then((()=>{console.log("New User synced successfully")})).catch((e=>{console.error("Error syncing new user:",e)}));const n=o;r()}catch(e){r(e)}}),1)},80:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>y});var a=t(9031),o=t(128),n=t(5486),i=t.n(n),c=t(8635),d=t(6153),l=e([d]);d=(l.then?(await l)():l)[0];const u=(0,o.J)();class g extends a.Model{static async loginUser(e,s){return await this.findOne({where:{email:e,hashedpassword:s}})}static async logoutUser(e){return await this.findOne({where:{email:e}})}static async resetPassword(e,s){return await this.findOne({where:{email:e,hashedpassword:s}})}}g.init({id:{type:a.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},newUser:{type:a.DataTypes.STRING,allowNull:!1},username:{type:a.DataTypes.STRING,allowNull:!1},email:{type:a.DataTypes.STRING,allowNull:!1},hashedpassword:{type:a.DataTypes.STRING,allowNull:!1},createdAt:{type:a.DataTypes.DATE,allowNull:!1,defaultValue:a.DataTypes.NOW}},{sequelize:u,modelName:"UserRegistration",createdAt:"createdAt",timestamps:!1,freezeTableName:!0}),g.beforeCreate((async e=>{try{if(e){const s=i().genSaltSync(10),t=await i().hash(String(e.hashedpassword),s);e.hashedpassword=t}}catch(e){throw console.error("Error hashing password:",e),new Error("Error hashing password")}})),g.afterCreate((async e=>{try{if(e){const s=e.newUser?.lastIndexOf(" "),t=-1!==s?e.newUser?.slice(0,s):e.newUser,r=-1!==s?e.newUser?.slice(s??1):"",a=(0,c.q)(e.username);await d.A.upsert({firstName:t,lastName:r,username:e.username,email:e.email,hashedpassword:e.hashedpassword,status:"unverified",bio:"I am a new user.",join:new Date,avatarUrl:a,imageURL:null,profilePic:null,label:"New User",last_activity:new Date,updated_at:new Date,UserRegistrationID:e.id})}}catch(e){throw console.error("Error registering new user:",e),new Error("Error registering new user")}})),g.loginUser=async function(e,s){try{const t=await this.findOne({where:{email:e}});if(t){if(await i().compare(s,t.hashedpassword))return t;throw new Error("Incorrect password")}throw new Error("Incorrect email")}catch(e){throw console.error("Error logging in user:",e),new Error("User not found")}},g.logoutUser=async function(e){try{return await this.findOne({where:{email:e}})}catch(e){throw console.error("Error logging out user:",e),new Error("User not found")}},await u.sync({force:!1}).then((()=>{console.log("New User Registered synced successfully")})).catch((e=>{console.error("Error syncing new user:",e)}));const y=g;r()}catch(e){r(e)}}),1)},2317:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>m});var a=t(7252),o=t.n(a),n=t(8577),i=t.n(n),c=t(1976),d=t(9024),l=t(3268),u=t.n(l),g=t(6898),y=t.n(g),p=e([d]);d=(p.then?(await p)():p)[0];const T=o().Router();T.use(i()(c.v)),T.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),T.use(u().urlencoded({extended:!0})),T.use(y()()),T.use(o().json()),T.use(u().json()),T.post("/api/register",d.TU),T.post("/api/login",d.pH),T.get("/api/logout",d.Ub),T.post("/api/refresh-token",d.Be);const m=T;r()}catch(e){r(e)}}))},6010:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>w});var a=t(818),o=t.n(a),n=t(7252),i=t.n(n),c=t(8577),d=t.n(c),l=t(6153),u=t(3268),g=t.n(u),y=t(6898),p=t.n(y),T=t(2051),m=t(829),E=t.n(m),h=t(3101),f=e([l,T]);[l,T]=f.then?(await f)():f;const _=i().Router();o().config(),_.use(d()()),_.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),_.use(g().urlencoded({extended:!0})),_.use(p()()),_.use(i().json()),_.use(g().json()),_.get("/api/getUser",T.FH,(async(e,s,t)=>{const r=e.cookies.jwt;r?E().verify(r,h.n.JWT_SECRET,(async(e,r)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});try{const e=await l.A.findByPk(r.id);if(!e)return void s.status(400).json({message:"User ID is required S routes"});s.status(200).json({user:e})}catch(e){console.error("Error getting current user:",e),s.status(500).json({message:"Error getting current user"})}return t()})):s.status(401).json({message:"Unauthorized"})}));const w=_;r()}catch(e){r(e)}}))},8358:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>I});var a=t(818),o=t.n(a),n=t(7252),i=t.n(n),c=t(8577),d=t.n(c),l=t(1976),u=t(3268),g=t.n(u),y=t(6898),p=t.n(y),T=t(6020),m=t(2993),E=t(5595),h=t(829),f=t.n(h),_=t(6153),w=t(3101),S=e([m,E,_]);[m,E,_]=S.then?(await S)():S,o().config();const A=i().Router();A.use(d()(l.v)),A.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),s.header("encoding","multipart/form-data"),t()})),A.use(g().urlencoded({extended:!0})),A.use(p()()),A.use(i().json()),A.use(g().json()),A.post("/api/uploadImage",T.A.single("image"),(async(e,s)=>{try{console.log("File uploaded:",e.file);const t=`assets/images/${e.file?.filename}`,r=e.cookies.jwt,a=parseInt(e.body.postId,10);if(!r)return void s.status(401).json({message:"Unauthorized"});f().verify(r,w.n.JWT_SECRET,(async(e,r)=>{if(e)return void s.status(401).json({message:"Unauthorized"});const o=r.id;o&&await _.A.findByPk(o)?await E.A.create({imageUrl:t,user_id:o||null,post_id:a||null,created_At:new Date})?s.status(200).json({message:"Image uploaded successfully",imageUrl:t}):s.status(500).send({error:"Error creating image record"}):s.status(401).json({message:"Unauthorized"})}))}catch(e){console.error("Error uploading image:",e),s.status(500).json({message:"Internal server error"})}})),A.get("/api/sendImageUrl",m.A);const I=A;r()}catch(e){r(e)}}))},9785:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>m});var a=t(7252),o=t.n(a),n=t(8577),i=t.n(n),c=t(6898),d=t.n(c),l=t(3268),u=t.n(l),g=t(6184),y=t(2051),p=e([g,y]);[g,y]=p.then?(await p)():p;const T=o().Router();T.use(i()()),T.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),T.use(u().urlencoded({extended:!0})),T.use(d()()),T.use(o().json()),T.use(u().json()),T.post("/api/createPost",g.pD),T.put("/api/updatePost",g.gg),T.delete("/api/deletePost",g.ys),T.get("/api/getAllPosts",g.zX),T.get("/api/getPostById",y.FH,g.tY),T.post("/api/likePost",g.kL),T.post("/api/savePost",y.FH,g.E0),T.get("/api/getSavedPosts",y.FH,g.lM),T.delete("/api/deleteSavedPost",g.Zv),T.delete("/api/deleteLikePost",g.zh),T.get("/api/getInfinitePosts",g.Eu),T.post("/api/searchPosts",g.CI),T.get("/api/getUserPosts",g.hv),T.get("/api/getPopularPosts",g.bI);const m=T;r()}catch(e){r(e)}}))},4388:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{Q:()=>E});var a=t(7252),o=t.n(a),n=t(9469),i=t(2317),c=t(6010),d=t(4704),l=t(3268),u=t.n(l),g=t(6898),y=t.n(g),p=t(9785),T=t(8358),m=e([i,c,d,p,T]);[i,c,d,p,T]=m.then?(await m)():m;const E=o().Router();E.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),E.use(u().urlencoded({extended:!0})),E.use(y()()),E.use(o().json()),E.use(u().json()),E.get("/",((e,s)=>{s.send({status:`${n._.NODE_ENV}`,message:`${n._.RESPONSE_STATUS}`,name:`${n._.APP_NAME}`})})),E.use(i.A),E.use(p.A),E.use(T.A),E.use(d.A),E.use(c.A),r()}catch(e){r(e)}}))},4704:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>S});var a=t(7252),o=t.n(a),n=t(8577),i=t.n(n),c=t(3268),d=t.n(c),l=t(6898),u=t.n(l),g=t(4361),y=t(2051),p=t(829),T=t.n(p),m=t(3101),E=t(6153),h=t(8995),f=t(452),_=e([g,y,E,h,f]);[g,y,E,h,f]=_.then?(await _)():_;const w=o().Router();w.use(i()()),w.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),w.use(d().urlencoded({extended:!0})),w.use(u()()),w.use(o().json()),w.use(d().json()),w.get("/api/getCurrentUser",y.FH,(async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});T().verify(t,m.n.JWT_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const r=t.id;if(r)try{const e=await E.A.findByPk(r);if(!e)return void s.status(400).json({message:"User ID is required S routes"});const t=await f.A.getPostByReferenceID(r);if(!t)return void s.status(400).json({message:"Post ID is required"});const a=await h.A.findByPk(r);if(!a)return void s.status(400).json({message:"User ID is required S routes"});s.status(200).json({user:e,post:t,userLikes:a})}catch(e){throw new Error(e)}else s.status(400).json({message:"User ID is required"})}))}catch(e){s.status(400).json({message:"User ID is required"})}})),w.get("/api/getAllUsers",g.CF),w.get("/api/getUserByID",g.k7),w.get("/api/updateUser",g.TK);const S=w;r()}catch(e){r(e)}}))},6020:(e,s,t)=>{t.d(s,{A:()=>g});var r=t(8461),a=t.n(r),o=t(6928),n=t.n(o),i=t(7189),c=t(9896),d=t.n(c);const l="/home/babsdevsys/appV-1/public/assets/images";d().existsSync(l)||d().mkdirSync(l,{recursive:!0});const u=a().diskStorage({destination:function(e,s,t){t(null,l)},filename:function(e,s,t){const r=Date.now()+"-"+Math.round(1e9*Math.random());t(null,s.fieldname+"-"+r+n().extname(s.originalname))}}),g=a()({storage:u,limits:{fileSize:1e7},fileFilter:function(e,s,t){const r=/jpeg|jpg|png|svg/,a=r.test(s.mimetype),o=r.test(n().extname(s.originalname).toLowerCase());if(a&&o)return t(null,!0);(async(e,s)=>{try{if(!(await(0,i.validateMIMEType)(e.path,{originalFilename:e.originalname,allowMimeTypes:["image/jpeg","image/png","image/svg+xml"]})).ok)return s(new Error("Invalid file type"));s(null,!0)}catch(e){console.error("Error validating file type:",e),s(new Error("Error validating file type"))}})(s.path,t)}})},2273:(e,s,t)=>{t.d(s,{A:()=>o});var r=t(643);function a(){return new Promise((e=>{setTimeout((()=>{e()}),1e3)}))}new r.PerformanceObserver((e=>{e.getEntries().forEach((e=>{console.log(`${e.name}: ${e.duration}ms`)})),r.performance.clearMarks()})).observe({type:"measure"});const o=async function(){try{r.performance.mark("Loader Start",{detail:"Loader started"}),await a(),r.performance.mark("Task 1 End",{detail:"Task 1 completed"}),await a(),r.performance.mark("Task 2 End",{detail:"Task 2 completed"});const e=r.performance.measure("Task 2 Duration","Task 1 End","Task 2 End");console.log(e.duration),r.performance.mark("Loader End"),r.performance.measure("Total Loader Duration","Loader Start","Loader End")}catch(e){console.error("Error in loader:",e)}}},2541:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{K:()=>c});var a=t(128),o=t(5595),n=e([o]);o=(n.then?(await n)():n)[0];const i=(0,a.J)();async function c(){const e=await i.transaction();try{await o.A.truncate({transaction:e}),await e.commit(),console.log("Tables have been truncated...")}catch(s){await e.rollback(),console.error("Error truncating tables:",s)}}r()}catch(d){r(d)}}))},8635:(e,s,t)=>{function r(e){const s=e.split(" ").map((e=>e.charAt(0).toUpperCase())).join("");return`https://ui-avatars.com/api/?name=${encodeURIComponent(s)}&size=200&background=random&color=fff`}t.d(s,{q:()=>r}),t(6982)},2300:(e,s,t)=>{t.d(s,{H4:()=>c,sh:()=>u});var r=t(1708),a=t.n(r),o=t(9896),n=t.n(o),i=t(9469);const c=(e,s)=>{console.error(e.message);let t={};e.message.includes("New User validation error")&&(t={name:"Name is required",username:"username is required",email:"email is required",password:"password is required"}),e.message.includes("UserRegistrations.email")&&(t.email="Email is already registered"),e.message.includes("incorrect email")&&(t.email="email is not registered"),e.message.includes("Incorrect password")&&(t.password="password is incorrect"),"SequelizeValidationError"===e.name&&e.error&&(t=e.error.reduce(((e,s)=>(e[s.path]=s.message,e)),{})),s.status(e.code||500).json({errors:t})};function d(e){const s=`${(new Date).toISOString()} - ${e.message}\n${e.stack}\n`;n().appendFileSync("error.log",s)}const l=new Map;function u(e,s,t,r){d(e),t.status(500).json({message:"An unexpected error occurred"}),r(e)}a().on("unhandledRejection",((e,s)=>{console.error("Unhandled Rejection at:",s,"reason:",e),l.set(s,e)})),a().on("rejectionHandled",(e=>{l.delete(e)})),a().on("unhandledRejection",((e,s)=>{d(e),console.error("Unhandled Rejection at:",s,"reason:",e),a().exit(1)})),a().on("uncaughtException",(e=>{d(e),console.error("Uncaught Exception:",e),a().exit(1)})),a().on("uncaughtException",(e=>{n().writeSync(a().stderr.fd,`Caught exception: ${e}\nException Origin: ${origin}\n`)})),setTimeout((()=>{console.log("This will still run.")}),i._.ERROR_TIMEOUT)}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBcUIzVix3QkFBK0JwRCxXQUFXLElBRW5HeU0sWUFBVyxLQUNQbkosUUFBUUMsSUFBSSx1QkFBdUIsR0FDcEMsSUFBSXlWLGMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbmZpZy9jb3JzRVZOLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvY29uZmlnL2Nvck9wdGlvbnMudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9jb25maWcvZGF0YWJhc2VFTlYudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9jb25maWcvand0RU5WLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvY29udHJvbGxlcnMvUG9zdENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL2ltYWdlQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL3VzZXJDb250cm9sbGVyLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9hdXRoL2lwQ29uZmlnLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9hdXRoL2p3dEdlbmVyYXRvci50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2xvYWRlcnMvYXV0aC91c2VyQXV0aC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2xvYWRlcnMvZGF0YUxvYWRlci9tYXJpYWRiLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVpbGl6ZUNvbi50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1bGl6ZS50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2xvYWRlcnMvZXhwcmVzcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2xvYWRlcnMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9tb2RlbHMvaW1hZ2UubW9kZWwudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9tb2RlbHMvbGlrZVBvc3QubW9kZWwudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9tb2RlbHMvcG9zdC5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy9zYXZlUG9zdC5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy91c2VyLm1vZGVsLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbW9kZWxzL3VzZXJSZWdpc3Rlci5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy9hdXRoUm91dGVzLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvcm91dGVzL2N1cnJlbnRVc2VyUm91dGUudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9yb3V0ZXMvaW1hZ2VSb3V0ZXMudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9yb3V0ZXMvcG9zdFJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy9yb3V0ZXIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9yb3V0ZXMvdXNlclJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3NlcnZpY2VzL211bHRlci5jb25maWcudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9zZXJ2aWNlcy9wZXJmb3JtYW5jZS50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3NlcnZpY2VzL3RydW5jYXRlLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvdXRpbHMvYXZhdGFyLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvdXRpbHMvZXJyb3JIYW5kbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0cmljdCBhcyBhc3NlcnQgfSBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHsgbG9hZCB9IGZyb20gJ3RzLWRvdGVudic7XG5jb25zdCBjb3JzU2NoZW1hRU5WID0gbG9hZCh7XG4gICAgLyogTG9hZCBDT1JTICovXG4gICAgQ09SU19PUklHSU46IFN0cmluZyxcbiAgICBDT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVM6IE51bWJlcixcbiAgICBDT1JTX0NSRURFTlRJQUxTOiBCb29sZWFuLFxuICAgIENPUlNfTUVUSE9EUzogU3RyaW5nLFxufSk7XG4vLyBkZXN0cnVjdHVyZSB0aGUgQ09SUyBzY2hlbWFcbmNvbnN0IHsgQ09SU19PUklHSU4sIENPUlNfT1BUSU9OU19TVUNDRVNTX1NUQVRVUywgQ09SU19DUkVERU5USUFMUywgQ09SU19NRVRIT0RTLCB9ID0gY29yc1NjaGVtYUVOVjtcbi8vIGFzc2VydCB0aGF0IHRoZSBDT1JTIHNjaGVtYSBpcyBwcmVzZW50XG5hc3NlcnQub2soQ09SU19PUklHSU4sICdDT1JTIG9yaWdpbiBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKENPUlNfT1BUSU9OU19TVUNDRVNTX1NUQVRVUywgJ0NPUlMgb3B0aW9ucyBzdWNjZXNzIHN0YXR1cyBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKENPUlNfQ1JFREVOVElBTFMsICdDT1JTIGNyZWRlbnRpYWxzIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soQ09SU19NRVRIT0RTLCAnQ09SUyBtZXRob2RzIHNob3VsZCBiZSBwcmVzZW50Jyk7XG4vLyBleHBvcnQgdGhlIENPUlMgc2NoZW1hXG5leHBvcnQgY29uc3QgY29yc0VOViA9IHtcbiAgICBDT1JTX09SSUdJTixcbiAgICBDT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVMsXG4gICAgQ09SU19DUkVERU5USUFMUyxcbiAgICBDT1JTX01FVEhPRFMsXG59O1xuLy8gZXhwb3J0IHRoZSBDT1JTIHNjaGVtYVxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNvcnNFTlYsXG59O1xuIiwiLy8gRXhwb3J0IGNvck9wdGlvbnMgb2JqZWN0IHdpdGggb3JpZ2luIGFuZCBvcHRpb25zU3VjY2Vzc1N0YXR1cyBwcm9wZXJ0aWVzXG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcbmltcG9ydCB7IGNvcnNFTlYgfSBmcm9tICcuL2NvcnNFVk4nO1xuY29uc3QgY29yT3B0aW9ucyA9IHtcbiAgICBvcmlnaW46IGNvcnNFTlYuQ09SU19PUklHSU4sXG4gICAgbWV0aG9kczogY29yc0VOVi5DT1JTX01FVEhPRFMsXG4gICAgY3JlZGVudGlhbHM6IGNvcnNFTlYuQ09SU19DUkVERU5USUFMUyxcbiAgICBvcHRpb25zU3VjY2Vzc1N0YXR1czogY29yc0VOVi5DT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVMsXG59O1xuZXhwb3J0IHsgY29yT3B0aW9ucyB9O1xuIiwiaW1wb3J0IHsgc3RyaWN0IGFzIGFzc2VydCB9IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgeyBsb2FkIH0gZnJvbSAndHMtZG90ZW52JztcbmNvbnN0IGRhdGFTY2hlbWFFTlYgPSBsb2FkKHtcbiAgICAvKiBMb2FkIERhdGFiYXNlICovXG4gICAgREJfSE9TVDogU3RyaW5nLFxuICAgIERCX1BPUlQ6IE51bWJlcixcbiAgICBEQl9VU0VSOiBTdHJpbmcsXG4gICAgREJfUEFTUzogU3RyaW5nLFxuICAgIERCX05BTUU6IFN0cmluZyxcbiAgICBEQl9TT0NLRVRfUEFUSDogU3RyaW5nLFxuICAgIERCX1NPQ0tFVF9USU1FT1VUOiBOdW1iZXIsXG4gICAgREJfQ09NUFJFU1M6IEJvb2xlYW4sXG4gICAgREJfREVCVUc6IEJvb2xlYW4sXG4gICAgREJfUEVSTUlUX0xPQ0FMX0lORklMRTogQm9vbGVhbixcbiAgICBEQl9UUkFDRTogQm9vbGVhbixcbiAgICBEQl9DSEVDS19EVVBMSUNBVEU6IEJvb2xlYW4sXG4gICAgREJfU1NMOiBCb29sZWFuLFxuICAgIERCX1NTTF9DQTogU3RyaW5nLFxuICAgIERCX1NTTF9LRVk6IFN0cmluZyxcbiAgICBEQl9TU0xfQ0VSVDogU3RyaW5nLFxuICAgIERCX0NPTk5FQ1RJT05fQVRUUklCVVRFUzogU3RyaW5nLFxuICAgIERCX0NPTk5FQ1RJT05fVElNRU9VVDogTnVtYmVyLFxufSk7XG5jb25zdCB7IERCX0hPU1QsIERCX1BPUlQsIERCX1VTRVIsIERCX1BBU1MsIERCX05BTUUsIERCX1NPQ0tFVF9QQVRILCBEQl9TT0NLRVRfVElNRU9VVCwgREJfQ09NUFJFU1MsIERCX0RFQlVHLCBEQl9QRVJNSVRfTE9DQUxfSU5GSUxFLCBEQl9UUkFDRSwgREJfQ0hFQ0tfRFVQTElDQVRFLCBEQl9TU0wsIERCX1NTTF9DQSwgREJfU1NMX0tFWSwgREJfU1NMX0NFUlQsIERCX0NPTk5FQ1RJT05fQVRUUklCVVRFUywgREJfQ09OTkVDVElPTl9USU1FT1VULCB9ID0gZGF0YVNjaGVtYUVOVjtcbmFzc2VydC5vayhEQl9IT1NULCAnRGF0YWJhc2UgaG9zdCBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKERCX1BPUlQsICdEYXRhYmFzZSBwb3J0IHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soREJfVVNFUiwgJ0RhdGFiYXNlIHVzZXIgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhEQl9QQVNTLCAnRGF0YWJhc2UgcGFzc3dvcmQgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhEQl9OQU1FLCAnRGF0YWJhc2UgbmFtZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuZXhwb3J0IGNvbnN0IGRhdGFiYXNlRU5WID0ge1xuICAgIERCX0hPU1QsXG4gICAgREJfUE9SVCxcbiAgICBEQl9VU0VSLFxuICAgIERCX1BBU1MsXG4gICAgREJfTkFNRSxcbiAgICBEQl9TT0NLRVRfUEFUSCxcbiAgICBEQl9TT0NLRVRfVElNRU9VVCxcbiAgICBEQl9DT01QUkVTUyxcbiAgICBEQl9ERUJVRyxcbiAgICBEQl9QRVJNSVRfTE9DQUxfSU5GSUxFLFxuICAgIERCX1RSQUNFLFxuICAgIERCX0NIRUNLX0RVUExJQ0FURSxcbiAgICBEQl9DT05ORUNUSU9OX0FUVFJJQlVURVMsXG4gICAgREJfQ09OTkVDVElPTl9USU1FT1VULFxuICAgIERCX1NTTCxcbiAgICBEQl9TU0xfQ0EsXG4gICAgREJfU1NMX0tFWSxcbiAgICBEQl9TU0xfQ0VSVCxcbn07XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgZGF0YWJhc2VFTlYsXG4gICAgbWFyaWFkYjoge1xuICAgICAgICBzc2w6IERCX1NTTCxcbiAgICAgICAgc3NsT3B0aW9uczoge1xuICAgICAgICAgICAgY2E6IERCX1NTTF9DQSxcbiAgICAgICAgICAgIGtleTogREJfU1NMX0tFWSxcbiAgICAgICAgICAgIGNlcnQ6IERCX1NTTF9DRVJULFxuICAgICAgICB9LFxuICAgIH0sXG59O1xuIiwiaW1wb3J0IHsgc3RyaWN0IGFzIGFzc2VydCB9IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgeyBsb2FkIH0gZnJvbSAndHMtZG90ZW52JztcbmNvbnN0IGp3dFNjaGVtYUVOViA9IGxvYWQoe1xuICAgIC8qIExvYWQgSldUICovXG4gICAgSldUX1NFQ1JFVDogU3RyaW5nLFxuICAgIEpXVF9FWFBJUkVTX0lOOiBTdHJpbmcsXG4gICAgSldUX1JFRlJFU0hfU0VDUkVUOiBTdHJpbmcsXG4gICAgSldUX1JFRlJFU0hfRVhQSVJFU19JTjogU3RyaW5nLFxuICAgIEpXVF9SRUZSRVNIX01BWF9BR0U6IE51bWJlcixcbiAgICBKV1RfQUxHT1JJVEhNOiBTdHJpbmcsXG4gICAgSldUX0lTU1VFUjogU3RyaW5nLFxuICAgIEpXVF9NQVhfQUdFOiBOdW1iZXIsXG4gICAgSldUX0hUVFBfT05MWTogQm9vbGVhbixcbiAgICBKV1RfU0FNRV9TSVRFOiBTdHJpbmcsXG4gICAgSldUX0NPT0tJRV9OQU1FOiBTdHJpbmcsXG4gICAgSldUX1NFQ1VSRTogQm9vbGVhbixcbn0pO1xuLy8gZGVzdHJ1Y3R1cmUgdGhlIEpXVCBzY2hlbWFcbmNvbnN0IHsgSldUX1NFQ1JFVCwgSldUX0VYUElSRVNfSU4sIEpXVF9SRUZSRVNIX1NFQ1JFVCwgSldUX1JFRlJFU0hfRVhQSVJFU19JTiwgSldUX1JFRlJFU0hfTUFYX0FHRSwgSldUX0FMR09SSVRITSwgSldUX0lTU1VFUiwgSldUX01BWF9BR0UsIEpXVF9IVFRQX09OTFksIEpXVF9TQU1FX1NJVEUsIEpXVF9DT09LSUVfTkFNRSwgSldUX1NFQ1VSRSwgfSA9IGp3dFNjaGVtYUVOVjtcbi8vIGFzc2VydCB0aGF0IHRoZSBKV1Qgc2NoZW1hIGlzIHByZXNlbnRcbmFzc2VydC5vayhKV1RfU0VDUkVULCAnSldUIHNlY3JldCBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9FWFBJUkVTX0lOLCAnSldUIGV4cGlyZXMgaW4gc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfUkVGUkVTSF9TRUNSRVQsICdKV1QgcmVmcmVzaCBzZWNyZXQgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfUkVGUkVTSF9FWFBJUkVTX0lOLCAnSldUIHJlZnJlc2ggZXhwaXJlcyBpbiBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9BTEdPUklUSE0sICdKV1QgYWxnb3JpdGhtIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX0lTU1VFUiwgJ0pXVCBpc3N1ZXIgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfTUFYX0FHRSwgJ0pXVCBtYXggYWdlIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX0hUVFBfT05MWSwgJ0pXVCBodHRwIG9ubHkgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfU0FNRV9TSVRFLCAnSldUIHNhbWUgc2l0ZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9DT09LSUVfTkFNRSwgJ0pXVCBjb29raWUgbmFtZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9TRUNVUkUsICdKV1Qgc2VjdXJlIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX1JFRlJFU0hfTUFYX0FHRSwgJ0pXVCByZWZyZXNoIG1heCBhZ2Ugc2hvdWxkIGJlIHByZXNlbnQnKTtcbi8vIGV4cG9ydCB0aGUgSldUIHNjaGVtYVxuZXhwb3J0IGNvbnN0IGp3dEVOViA9IHtcbiAgICBKV1RfU0VDUkVULFxuICAgIEpXVF9FWFBJUkVTX0lOLFxuICAgIEpXVF9SRUZSRVNIX1NFQ1JFVCxcbiAgICBKV1RfUkVGUkVTSF9FWFBJUkVTX0lOLFxuICAgIEpXVF9SRUZSRVNIX01BWF9BR0UsXG4gICAgSldUX0FMR09SSVRITSxcbiAgICBKV1RfSVNTVUVSLFxuICAgIEpXVF9NQVhfQUdFLFxuICAgIEpXVF9IVFRQX09OTFksXG4gICAgSldUX1NBTUVfU0lURSxcbiAgICBKV1RfQ09PS0lFX05BTUUsXG4gICAgSldUX1NFQ1VSRSxcbn07XG4vLyBleHBvcnQgdGhlIEpXVCBzY2hlbWFcbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBqd3RFTlYsXG59O1xuIiwiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IEltYWdlU3RvcmFnZSBmcm9tICcuLi9tb2RlbHMvaW1hZ2UubW9kZWwnO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4uL21vZGVscy91c2VyLm1vZGVsJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IFBvc3RzIGZyb20gJy4uL21vZGVscy9wb3N0Lm1vZGVsJztcbmltcG9ydCBnZXRJbWFnZVByZXZpZXdVcmwgZnJvbSAnLi9pbWFnZUNvbnRyb2xsZXInO1xuaW1wb3J0IExpa2VzIGZyb20gJy4uL21vZGVscy9saWtlUG9zdC5tb2RlbCc7XG5pbXBvcnQgU2F2ZXMgZnJvbSAnLi4vbW9kZWxzL3NhdmVQb3N0Lm1vZGVsJztcbmltcG9ydCB7IE9wIH0gZnJvbSAnc2VxdWVsaXplJztcbmRvdGVudi5jb25maWcoKTtcbi8vIENyZWF0ZSBQb3N0IE1ldGhvZCAtIENyZWF0ZSBhIG5ldyBwb3N0XG5leHBvcnQgY29uc3QgY3JlYXRlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgY2FwdGlvbiwgbG9jYXRpb24sIHRhZ3MgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDsgLy8gRW5zdXJlIHRoYXQgdGhlIHRva2VuIGNvbnRhaW5zIHRoZSB1c2VyIElEXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmV0cmlldmUgdGhlIGltYWdlIFVSTCBmcm9tIHRoZSBJbWFnZVN0b3JhZ2UgdGFibGUgdXNpbmcgdGhlIHN0YXRpYyBtZXRob2RcbiAgICAgICAgICAgIGNvbnN0IGltYWdlUmVjb3JkID0gYXdhaXQgSW1hZ2VTdG9yYWdlLmZpbmRJbWFnZUJ5UmVmZXJlbmNlS2V5KCd1c2VyX2lkJywgdXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIWltYWdlUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0ltYWdlIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXdQb3N0ID0gYXdhaXQgUG9zdHMuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBjYXB0aW9uOiBjYXB0aW9uLFxuICAgICAgICAgICAgICAgIGltYWdlVVJMOiBpbWFnZVJlY29yZC5pbWFnZVVybCxcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgdGFnczogdGFncyB8fCAnJyxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX0F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIGNyZWF0b3JfSWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghbmV3UG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGNyZWF0aW5nIG5ldyBwb3N0LicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzXG4gICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoMjAxKVxuICAgICAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdQb3N0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgbmV3UG9zdCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdQb3N0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHBvc3Q6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgZGVsZXRlRmlsZSA9IGFzeW5jIChfcmVxLCByZXMsIGltYWdlVXJsKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBJbWFnZVN0b3JhZ2UuZmluZE9uZSh7IHdoZXJlOiB7IGltYWdlVXJsOiBpbWFnZVVybCB9IH0pO1xuICAgICAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdJbWFnZSBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGltYWdlLmRlc3Ryb3koKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSW1hZ2UgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgaW1hZ2U6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBVcGRhdGUgUG9zdCBNZXRob2QgLSBVcGRhdGUgYSBwb3N0XG5leHBvcnQgY29uc3QgdXBkYXRlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgY2FwdGlvbiwgbG9jYXRpb24sIHRhZ3MsIGltYWdlVXJsOiBuZXdJbWFnZVVybCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IHBvc3RfaWQgPSBwYXJzZUludChyZXEucXVlcnkucG9zdF9pZCwgMTApO1xuICAgICAgICBpZiAoIXBvc3RfaWQpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkOyAvLyBFbnN1cmUgdGhhdCB0aGUgdG9rZW4gY29udGFpbnMgdGhlIHVzZXIgSURcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHBvc3RfaWQsIGNyZWF0b3JfSWQ6IHVzZXJfaWQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwb3N0LmNyZWF0b3JfSWQgIT09IHVzZXIuaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgYXR0ZW1wdCEnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpbWFnZVVybCA9IHBvc3Q/LmltYWdlVVJMO1xuICAgICAgICAgICAgaWYgKG5ld0ltYWdlVXJsKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlld0ltYWdlVXJsID0gYXdhaXQgZ2V0SW1hZ2VQcmV2aWV3VXJsKHJlcSwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2aWV3SW1hZ2VVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0ltYWdlIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBwcmV2aWV3SW1hZ2VVcmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBvc3QgPSBhd2FpdCBwb3N0LnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgaWQ6IHBvc3QuaWQsXG4gICAgICAgICAgICAgICAgY2FwdGlvbjogY2FwdGlvbixcbiAgICAgICAgICAgICAgICBpbWFnZVVSTDogaW1hZ2VVcmwsXG4gICAgICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgIHRhZ3M6IHRhZ3MsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9BdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF1cGRhdGVkUG9zdCkge1xuICAgICAgICAgICAgICAgIGlmIChuZXdJbWFnZVVybCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBkZWxldGVGaWxlKHJlcSwgcmVzLCBuZXdJbWFnZVVybCk7IC8vIEVuc3VyZSBkZWxldGVGaWxlIGlzIGRlZmluZWQgZWxzZXdoZXJlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIHVwZGF0aW5nIHBvc3QnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgdXBkYXRlZCBzdWNjZXNzZnVsbHknLCBwb3N0OiB1cGRhdGVkUG9zdCB9KTtcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkUG9zdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gR2V0IGFsbCBwb3N0c1xuZXhwb3J0IGNvbnN0IGdldEFsbFBvc3RzID0gYXN5bmMgKF9yZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdHMuZmluZEFsbCh7XG4gICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbDogVXNlcnMsXG4gICAgICAgICAgICAgICAgICAgIGFzOiAnVXNlcicsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAndXNlcm5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2VtYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdwcm9maWxlUGljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdiaW8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpcnN0TmFtZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbGFzdE5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ltYWdlVVJMJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdhdmF0YXJVcmwnLFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBwb3N0czogcG9zdHMgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHBvc3RzOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gRnVuY3Rpb24gdG8gbGlrZSBhIHBvc3QgYnkgdXNlclxuZXhwb3J0IGNvbnN0IGxpa2VQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBjb25zdCBwb3N0X2lkID0gcGFyc2VJbnQocmVxLmJvZHkucG9zdF9pZCwgMTApO1xuICAgICAgICAgICAgaWYgKGlzTmFOKHBvc3RfaWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBwb3N0IElEJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmZpbmRCeVBrKHBvc3RfaWQpO1xuICAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTGlrZSA9IGF3YWl0IExpa2VzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHBvc3RfaWQsIHVzZXJfaWQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nTGlrZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgYWxyZWFkeSBsaWtlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV3TGlrZSA9IGF3YWl0IExpa2VzLmNyZWF0ZUxpa2Uoe1xuICAgICAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICAgICAgcG9zdF9pZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX0F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXBvc3QubGlrZXNfQ291bnQpIHtcbiAgICAgICAgICAgICAgICBwb3N0Lmxpa2VzX0NvdW50ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxpa2VzQ291bnQgPSBwb3N0Lmxpa2VzX0NvdW50ICsgMTtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRQb3N0ID0gYXdhaXQgcG9zdC51cGRhdGUoeyBsaWtlc19Db3VudDogbGlrZXNDb3VudCB9KTtcbiAgICAgICAgICAgIGlmICghdXBkYXRlZFBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBsaWtpbmcgcG9zdC4nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoMjAxKVxuICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgbGlrZWQgc3VjY2Vzc2Z1bGx5JywgbGlrZTogbmV3TGlrZSB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsaWtpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIEdldCBwb3N0IGJ5IElEXG5leHBvcnQgY29uc3QgZ2V0UG9zdEJ5SWQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXF1ZXN0ZWRVc2VySWQgPSBwYXJzZUludChyZXEucXVlcnkudXNlcl9pZCwgMTApO1xuICAgICAgICBpZiAoIXJlcXVlc3RlZFVzZXJJZCkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAncG9zdCBVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRVc2VyID0gYXdhaXQgVXNlcnMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHJlcXVlc3RlZFVzZXJJZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXJlcXVlc3RlZFVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdF9pZCA9IHBhcnNlSW50KHJlcS5xdWVyeS5wb3N0X2lkLCAxMCk7XG4gICAgICAgICAgICBpZiAoIXBvc3RfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZEJ5UGsocG9zdF9pZCk7XG4gICAgICAgICAgICBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IG5vdCBmb3VuZCBoZXJlJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHBvc3QsIHJlcXVlc3RlZFVzZXIsIHJlcXVlc3RlZFVzZXJJZCB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHBvc3Q6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyB0b2dnbGUgbGlrZXNcbmV4cG9ydCBjb25zdCBkZWxldGVMaWtlZFBvc3QgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3RfaWQgPSBwYXJzZUludChyZXEuYm9keS5wb3N0X2lkLCAxMCk7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmZpbmRCeVBrKHBvc3RfaWQpO1xuICAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTGlrZSA9IGF3YWl0IExpa2VzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHBvc3RfaWQ6IHBvc3RfaWQsIHVzZXJfaWQ6IHVzZXJfaWQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nTGlrZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGV4aXN0aW5nTGlrZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY3VycmVudExpa2VzID0gcG9zdC5saWtlc19Db3VudCB8fCAwO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRMaWtlcyA+IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50TGlrZXMgLT0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHBvc3QudXBkYXRlKHsgbGlrZXNfQ291bnQ6IGN1cnJlbnRMaWtlcyB9KTtcbiAgICAgICAgICAgIGF3YWl0IHBvc3Quc2F2ZSgpO1xuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGV4aXN0aW5nTGlrZVxuICAgICAgICAgICAgICAgICAgICA/ICdMaWtlIHJlbW92ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgICAgICAgICAgICAgICA6ICdQb3N0IGxpa2VkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgICAgICAgICAgcG9zdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHRvZ2dsaW5nIGxpa2U6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBGdW5jdGlvbiB0byBzYXZlIGEgcG9zdCBieSB1c2VyXG5leHBvcnQgY29uc3Qgc2F2ZVBvc3QgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dCB8fCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5zcGxpdCgnICcpWzFdO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSldUIHZlcmlmaWNhdGlvbiBlcnJvcicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3RfaWQgPSBwYXJzZUludChyZXEuYm9keS5wb3N0X2lkLCAxMCk7XG4gICAgICAgICAgICBpZiAoIXBvc3RfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmZpbmRCeVBrKHBvc3RfaWQpO1xuICAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU2F2ZSA9IGF3YWl0IFNhdmVzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHBvc3RfaWQsIHVzZXJfaWQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2F2ZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgYWxyZWFkeSBzYXZlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV3U2F2ZSA9IGF3YWl0IFNhdmVzLmNyZWF0ZVNhdmUoe1xuICAgICAgICAgICAgICAgIGlkOiB1c2VyX2lkLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICAgICAgcG9zdF9pZCxcbiAgICAgICAgICAgICAgICBzYXZlRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFuZXdTYXZlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3Igc2F2aW5nIHBvc3QuJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNcbiAgICAgICAgICAgICAgICAuc3RhdHVzKDIwMSlcbiAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdQb3N0IHNhdmVkIHN1Y2Nlc3NmdWxseScsIHNhdmU6IG5ld1NhdmUgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHBvc3Q6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBGdW5jdGlvbiB0byBkZWxldGUgYSBzYXZlZCBwb3N0IGJ5IHVzZXJcbmV4cG9ydCBjb25zdCBkZWxldGVTYXZlZFBvc3QgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dCB8fCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5zcGxpdCgnICcpWzFdO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSldUIHZlcmlmaWNhdGlvbiBlcnJvcicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3RfaWQgPSBwYXJzZUludChyZXEuYm9keS5wb3N0X2lkLCAxMCk7XG4gICAgICAgICAgICBpZiAoIXBvc3RfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmZpbmRCeVBrKHBvc3RfaWQpO1xuICAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU2F2ZSA9IGF3YWl0IFNhdmVzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHBvc3RfaWQsIHVzZXJfaWQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2F2ZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGV4aXN0aW5nU2F2ZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXhpc3RpbmdTYXZlXG4gICAgICAgICAgICAgICAgICAgID8gJ1Bvc3QgdW5zYXZlZCBzdWNjZXNzZnVsbHknXG4gICAgICAgICAgICAgICAgICAgIDogJ1Bvc3Qgbm90IHNhdmVkJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHNhdmVkIHBvc3Q6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBHZXQgYWxsIHNhdmVkIHBvc3RzIGJ5IHVzZXJcbmV4cG9ydCBjb25zdCBnZXRTYXZlZFBvc3RzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3QgfHwgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbj8uc3BsaXQoJyAnKVsxXTtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3InLCBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkIEludmFsaWQgVG9rZW4nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2F2ZWRQb3N0cyA9IGF3YWl0IFNhdmVzLmdldFNhdmVkUG9zdHModXNlcl9pZCk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgc2F2ZWRQb3N0cyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgc2F2ZWQgcG9zdHM6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBEZWxldGUgYSBwb3N0IC1cbmV4cG9ydCBjb25zdCBkZWxldGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3QgfHwgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbj8uc3BsaXQoJyAnKVsxXTtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0X2lkID0gcGFyc2VJbnQocmVxLmJvZHkucG9zdF9pZCwgMTApO1xuICAgICAgICAgICAgaWYgKCFwb3N0X2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBJRCBpcyByZXF1aXJlZCBmcm9tIHNlcnZlcicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmZpbmRCeVBrKHBvc3RfaWQpO1xuICAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU2F2ZSA9IGF3YWl0IFNhdmVzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHBvc3RfaWQsIHVzZXJfaWQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2F2ZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGV4aXN0aW5nU2F2ZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaW5kIGFzc29jaWF0ZWQgaW1hZ2VzIGFuZCBkZWxldGUgdGhlbVxuICAgICAgICAgICAgaWYgKHBvc3QuaW1hZ2VVUkwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IEltYWdlU3RvcmFnZS5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaW1hZ2VVcmw6IHBvc3QuaW1hZ2VVUkwgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaW1hZ2UuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHBvc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBkZWxldGVkIHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIEdldCBhbGwgaW5maW5pdGUgcG9zdHNcbmV4cG9ydCBjb25zdCBnZXRJbmZpbml0ZVBvc3RzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBwYWdlID0gMCwgbGltaXQgPSAxMCB9ID0gcmVxLnF1ZXJ5O1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBwYWdlXG4gICAgICAgICAgICA/IHBhcnNlSW50KHBhZ2UsIDEwKSAqIHBhcnNlSW50KGxpbWl0LCAxMClcbiAgICAgICAgICAgIDogMDtcbiAgICAgICAgY29uc3QgcG9zdHMgPSBhd2FpdCBQb3N0cy5maW5kQW5kQ291bnRBbGwoe1xuICAgICAgICAgICAgbGltaXQ6IHBhcnNlSW50KGxpbWl0LCAxMCksXG4gICAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgICBvcmRlcjogW1snY3JlYXRlZF9BdCcsICdERVNDJ11dLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgcG9zdHMsXG4gICAgICAgICAgICBwYWdlOiBwYXJzZUludChwYWdlLCAxMCksXG4gICAgICAgICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwocG9zdHMuY291bnQgLyBwYXJzZUludChsaW1pdCwgMTApKSxcbiAgICAgICAgICAgIHRvdGFsQ291bnQ6IHBvc3RzLmNvdW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcG9zdHM6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBTZWFyY2ggcG9zdHNcbmV4cG9ydCBjb25zdCBzZWFyY2hQb3N0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgc2VhcmNoVmFsdWUgfSA9IHJlcS5ib2R5O1xuICAgICAgICBpZiAoIXNlYXJjaFZhbHVlKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdTZWFyY2ggdmFsdWUgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdHMuZmluZEFsbCh7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgIFtPcC5vcl06IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtPcC5saWtlXTogYCUke3NlYXJjaFZhbHVlfSVgLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtPcC5saWtlXTogYCUke3NlYXJjaFZhbHVlfSVgLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbT3AubGlrZV06IGAlJHtzZWFyY2hWYWx1ZX0lYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICBwb3N0cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWFyY2hpbmcgcG9zdHM6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBHZXQgYWxsIHBvc3RzIGJ5IHVzZXJcbmV4cG9ydCBjb25zdCBnZXRVc2VyUG9zdHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dCB8fCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5zcGxpdCgnICcpWzFdO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSldUIHZlcmlmaWNhdGlvbiBlcnJvcicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdHMuZmluZEFsbCh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgY3JlYXRvcl9JZDogdXNlcl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHBvc3RzIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBwb3N0czonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIEdldCBQb3B1bGFyIFBvc3RzXG5leHBvcnQgY29uc3QgZ2V0UG9wdWxhclBvc3RzID0gYXN5bmMgKF9yZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvcHVsYXJQb3N0cyA9IGF3YWl0IFBvc3RzLmZpbmRBbGwoe1xuICAgICAgICAgICAgb3JkZXI6IFtbJ2xpa2VzX0NvdW50JywgJ0RFU0MnXV0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHBvcHVsYXJQb3N0cyB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcG9wdWxhciBwb3N0czonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbiIsImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IHsgand0R2VuZXJhdG9yLCBqd3RSZWZyZXNoIH0gZnJvbSAnLi4vbG9hZGVycy9hdXRoL2p3dEdlbmVyYXRvcic7XG5pbXBvcnQgVXNlclJlZ2lzdHJhdGlvbiBmcm9tICcuLi9tb2RlbHMvdXNlclJlZ2lzdGVyLm1vZGVsJztcbmltcG9ydCB7IGhhbmRsZUVycm9yIH0gZnJvbSAnLi4vdXRpbHMvZXJyb3JIYW5kbGVyJztcbmRvdGVudi5jb25maWcoKTtcbmV4cG9ydCBjb25zdCB1c2VyUmVnaXN0ZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IG5hbWUsIHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgICAgICBpZiAoIW5hbWUgfHwgIXVzZXJuYW1lIHx8ICFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVFcnJvcihuZXcgRXJyb3IoJ05ldyBVc2VyIHZhbGlkYXRpb24gZXJyb3InKSwgcmVzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGNvbnN0IHVzZXJFeGlzdHMgPSBhd2FpdCBVc2VyUmVnaXN0cmF0aW9uLmZpbmRPbmUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGVtYWlsIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodXNlckV4aXN0cykge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUVycm9yKG5ldyBFcnJvcignVXNlclJlZ2lzdHJhdGlvbnMuZW1haWw6IFVzZXIgYWxyZWFkeSBleGlzdHMgJyksIHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJSZWdpc3RyYXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgIG5ld1VzZXI6IG5hbWUsXG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgICBoYXNoZWRwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0b2tlbiA9IGp3dEdlbmVyYXRvcih7IGlkOiB1c2VyLmlkIH0pO1xuICAgICAgICByZXMuY29va2llKCdqd3QnLCB0b2tlbiwge1xuICAgICAgICAgICAgaHR0cE9ubHk6IGp3dEVOVi5KV1RfSFRUUF9PTkxZLFxuICAgICAgICAgICAgbWF4QWdlOiBqd3RFTlYuSldUX01BWF9BR0UgKiAxMDAwLFxuICAgICAgICAgICAgc2VjdXJlOiBqd3RFTlYuSldUX1NFQ1VSRSxcbiAgICAgICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uZXdVc2VyLFxuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgIHRva2VuOiB0b2tlbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBoYW5kbGVFcnJvcihlcnJvciwgcmVzKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHVzZXJMb2dpbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcbiAgICAgICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVFcnJvcihuZXcgRXJyb3IoJ0xvZ2luIFZhbGlkYXRpb24gRXJyb3IhJyksIHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJSZWdpc3RyYXRpb24ubG9naW5Vc2VyKGVtYWlsLCBwYXNzd29yZCk7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRva2VuID0gand0R2VuZXJhdG9yKHsgaWQ6IHVzZXIuaWQgfSk7XG4gICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IGp3dFJlZnJlc2goeyBpZDogdXNlci5pZCB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgbG9nZ2VkIGluOicsIHJlZnJlc2hUb2tlbik7XG4gICAgICAgIC8vIFNldHRpbmcgdGhlIGFjY2VzcyB0b2tlbiBjb29raWVcbiAgICAgICAgcmVzLmNvb2tpZSgnand0JywgdG9rZW4sIHtcbiAgICAgICAgICAgIGh0dHBPbmx5OiBqd3RFTlYuSldUX0hUVFBfT05MWSxcbiAgICAgICAgICAgIG1heEFnZTogand0RU5WLkpXVF9NQVhfQUdFICogMTAwMCwgLy8gaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgICBzZWN1cmU6IGp3dEVOVi5KV1RfU0VDVVJFLFxuICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gU2V0dGluZyB0aGUgcmVmcmVzaCB0b2tlbiBjb29raWVcbiAgICAgICAgcmVzLmNvb2tpZSgncmVmcmVzaFRva2VuJywgcmVmcmVzaFRva2VuLCB7XG4gICAgICAgICAgICBodHRwT25seTogand0RU5WLkpXVF9IVFRQX09OTFksXG4gICAgICAgICAgICBtYXhBZ2U6IGp3dEVOVi5KV1RfUkVGUkVTSF9NQVhfQUdFICogMTAwMCwgLy8gaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgICBzZWN1cmU6IGp3dEVOVi5KV1RfU0VDVVJFLFxuICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnNldEhlYWRlcignQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt0b2tlbn1gKTtcbiAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gdXNlcjtcbiAgICAgICAgcmVzLmpzb24oeyB0b2tlbiwgcmVmcmVzaFRva2VuLCB1c2VyOiB1c2VyLmlkIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaGFuZGxlRXJyb3IoZXJyb3IsIHJlcyk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB1c2VyTG9nb3V0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IHJlcS5jb29raWVzLnJlZnJlc2hUb2tlbjtcbiAgICAgICAgaWYgKCFhY2Nlc3NUb2tlbiAmJiAhcmVmcmVzaFRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdObyB0b2tlbnMgcHJvdmlkZWQhJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhciB0aGUgYWNjZXNzIHRva2VuXG4gICAgICAgIHJlcy5jb29raWUoJ2p3dCcsICcnLCB7XG4gICAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICAgICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgICAgICAgIG1heEFnZTogMSwgLy8gMSBtaWxsaXNlY29uZCB0byBlZmZlY3RpdmVseSBleHBpcmUgdGhlIGNvb2tpZVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIHJlZnJlc2ggdG9rZW5cbiAgICAgICAgcmVzLmNvb2tpZSgncmVmcmVzaFRva2VuJywgJycsIHtcbiAgICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICAgICAgbWF4QWdlOiAxLCAvLyAxIG1pbGxpc2Vjb25kIHRvIGVmZmVjdGl2ZWx5IGV4cGlyZSB0aGUgY29va2llXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIGxvZ2dlZCBvdXQnIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaGFuZGxlRXJyb3IoZXJyb3IsIHJlcyk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCByZWZyZXNoVG9rZW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCByZWZyZXNoVG9rZW4gPSByZXEuY29va2llcy5yZWZyZXNoVG9rZW47XG4gICAgaWYgKCFyZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBqd3QudmVyaWZ5KHJlZnJlc2hUb2tlbiwgand0RU5WLkpXVF9SRUZSRVNIX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKV1QgdmVyaWZpY2F0aW9uIGVycm9yJywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkIEludmFsaWQgVG9rZW4nIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB1c2VySWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVXNlciBJRDonLCB1c2VySWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VySWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlclJlZ2lzdHJhdGlvbi5maW5kQnlQayh1c2VySWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IHRva2VuXG4gICAgICAgICAgICBjb25zdCBuZXdUb2tlbiA9IGp3dC5zaWduKHsgaWQ6IHVzZXIuaWQgfSwgand0RU5WLkpXVF9TRUNSRVQsIHtcbiAgICAgICAgICAgICAgICBleHBpcmVzSW46IGp3dEVOVi5KV1RfRVhQSVJFU19JTixcbiAgICAgICAgICAgICAgICBhbGdvcml0aG06IGp3dEVOVi5KV1RfQUxHT1JJVEhNLFxuICAgICAgICAgICAgICAgIGlzc3Vlcjogand0RU5WLkpXVF9JU1NVRVIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlcy5jb29raWUoJ2p3dCcsIG5ld1Rva2VuLCB7XG4gICAgICAgICAgICAgICAgaHR0cE9ubHk6IGp3dEVOVi5KV1RfSFRUUF9PTkxZLFxuICAgICAgICAgICAgICAgIG1heEFnZTogand0RU5WLkpXVF9SRUZSRVNIX01BWF9BR0UgKiAxMDAwLFxuICAgICAgICAgICAgICAgIHNlY3VyZTogand0RU5WLkpXVF9TRUNVUkUsXG4gICAgICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHRva2VuOiBuZXdUb2tlbiwgdXNlcjogdXNlci5pZCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgY3VycmVudCB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGdldHRpbmcgY3VycmVudCB1c2VyJyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfSk7XG59O1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIHVzZXJSZWdpc3RlcixcbiAgICB1c2VyTG9naW4sXG4gICAgdXNlckxvZ291dCxcbiAgICByZWZyZXNoVG9rZW4sXG59O1xuIiwiaW1wb3J0IEltYWdlU3RvcmFnZXMgZnJvbSAnLi4vbW9kZWxzL2ltYWdlLm1vZGVsJztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCAnZG90ZW52L2NvbmZpZyc7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi4vbW9kZWxzL3VzZXIubW9kZWwnO1xuLy8gUmVmYWN0b3JlZCBmdW5jdGlvbiB0byByZXR1cm4gaW1hZ2UgVVJMXG5leHBvcnQgY29uc3QgZ2V0SW1hZ2VQcmV2aWV3VXJsID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGltYWdlID0gYXdhaXQgSW1hZ2VTdG9yYWdlcy5maW5kSW1hZ2VCeVJlZmVyZW5jZUtleSgndXNlcl9pZCcsIHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCFpbWFnZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ05vIGltYWdlIGZvdW5kJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgaW1hZ2VVcmw6IGltYWdlLmltYWdlVXJsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgaW1hZ2UgcHJldmlldzonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGdldCBpbWFnZSBwcmV2aWV3Jyk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGdldEltYWdlUHJldmlld1VybDtcbiIsImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4uL21vZGVscy91c2VyLm1vZGVsJztcbmltcG9ydCBnZXRJbWFnZVByZXZpZXdVcmwgZnJvbSAnLi9pbWFnZUNvbnRyb2xsZXInO1xuaW1wb3J0IFBvc3RzIGZyb20gJy4uL21vZGVscy9wb3N0Lm1vZGVsJztcbmltcG9ydCBMaWtlcyBmcm9tICcuLi9tb2RlbHMvbGlrZVBvc3QubW9kZWwnO1xuZG90ZW52LmNvbmZpZygpO1xuLy8gR2V0IGFsbCBVc2VycyBmcm9tIGRhdGFiYXNlIHdpdGggbGltaXQgYW5kIG9mZnNldFxuZXhwb3J0IGNvbnN0IGdldEFsbFVzZXJzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VySWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcklkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPcHRpb25hbGx5LCB5b3UgY291bGQgYWRkIHJvbGUtYmFzZWQgY2hlY2tzIGhlcmVcbiAgICAgICAgICAgIC8vIGlmICh1c2VyLnJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgICAgICAgIC8vICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnRm9yYmlkZGVuJyB9KTtcbiAgICAgICAgICAgIC8vICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgY29uc3QgbGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQsIDEwKSB8fCAxMDsgLy8gRGVmYXVsdCBsaW1pdCB0byAxMFxuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IFtcbiAgICAgICAgICAgICAgICAnaWQnLFxuICAgICAgICAgICAgICAgICdmaXJzdE5hbWUnLFxuICAgICAgICAgICAgICAgICdsYXN0TmFtZScsXG4gICAgICAgICAgICAgICAgJ3VzZXJuYW1lJyxcbiAgICAgICAgICAgICAgICAnaW1hZ2VVUkwnLFxuICAgICAgICAgICAgICAgICdhdmF0YXJVcmwnLFxuICAgICAgICAgICAgICAgICdiaW8nLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlcnMuZ2V0QWxsVXNlcnMobGltaXQsIGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VycyB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGFsbCB1c2VyczonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIEdldCB1c2VyIGJ5IElEXG4vLyBleHBvcnQgY29uc3QgZ2V0VXNlckJ5SUQgPSBhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4vLyAgIHRyeSB7XG4vLyAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4vLyAgICAgaWYgKCF0b2tlbikge1xuLy8gICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbi8vICAgICAgIHJldHVybjtcbi8vICAgICB9XG4vLyAgICAgand0LnZlcmlmeShcbi8vICAgICAgIHRva2VuLFxuLy8gICAgICAgand0RU5WLkpXVF9TRUNSRVQsXG4vLyAgICAgICBhc3luYyAoZXJyOiBhbnksIGRlY29kZWRUb2tlbjogYW55KSA9PiB7XG4vLyAgICAgICAgIGlmIChlcnIpIHtcbi8vICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4vLyAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbi8vICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbi8vICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuLy8gICAgICAgICBpZiAoIXVzZXIpIHtcbi8vICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4vLyAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGlmICh1c2VyLmlkICE9PSB1c2VyX2lkKSB7XG4vLyAgICAgICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkIGF0dGVtcHQhJyB9KTtcbi8vICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgY29uc3QgcmVxdWVzdGVkVXNlciA9IGF3YWl0IFVzZXJzLmZpbmRBbGwoe1xuLy8gICAgICAgICAgIHdoZXJlOiB7IGlkOiB1c2VyX2lkIH0sXG4vLyAgICAgICAgICAgaW5jbHVkZTogW1xuLy8gICAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgICBtb2RlbDogUG9zdHMsXG4vLyAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcbi8vICAgICAgICAgICAgICAgICAnaWQnLFxuLy8gICAgICAgICAgICAgICAgICdjYXB0aW9uJyxcbi8vICAgICAgICAgICAgICAgICAnaW1hZ2VVUkwnLFxuLy8gICAgICAgICAgICAgICAgICdsb2NhdGlvbicsXG4vLyAgICAgICAgICAgICAgICAgJ3RhZ3MnLFxuLy8gICAgICAgICAgICAgICAgICdsaWtlc19Db3VudCcsXG4vLyAgICAgICAgICAgICAgICAgJ2NyZWF0ZWRfQXQnLFxuLy8gICAgICAgICAgICAgICAgICdjcmVhdG9yX0lkJyxcbi8vICAgICAgICAgICAgICAgXSxcbi8vICAgICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgXSxcbi8vICAgICAgICAgfSk7XG4vLyAgICAgICAgIGlmICghcmVxdWVzdGVkVXNlcikge1xuLy8gICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbi8vICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgcmVzXG4vLyAgICAgICAgICAgLnN0YXR1cygyMDApXG4vLyAgICAgICAgICAgLmpzb24oeyByZXF1ZXN0ZWRVc2VyOiByZXF1ZXN0ZWRVc2VyLCB1c2VyX2lkOiB1c2VyX2lkIH0pO1xuLy8gICAgICAgfSxcbi8vICAgICApO1xuLy8gICB9IGNhdGNoIChlcnJvcikge1xuLy8gICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBieSBJRDonLCBlcnJvcik7XG4vLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbi8vICAgfVxuLy8gfTtcbi8vIFVwZGF0ZSB1c2VyIGJ5IElEXG5leHBvcnQgY29uc3QgZ2V0VXNlckJ5SUQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlZFVzZXJJZCA9IHBhcnNlSW50KHJlcS5xdWVyeS51c2VyX2lkLCAxMCk7XG4gICAgICAgICAgICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2Vycykge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlcnMuaWQgIT09IHVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgYXR0ZW1wdCEnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogcmVxdWVzdGVkVXNlcklkIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1JlcXVlc3RlZCBVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmdldFBvc3RCeVJlZmVyZW5jZUlEKHJlcXVlc3RlZFVzZXJJZCk7XG4gICAgICAgICAgICBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyTGlrZXMgPSBhd2FpdCBMaWtlcy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlckxpa2VzKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCBTIHJvdXRlcycgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICAgICAgcG9zdCxcbiAgICAgICAgICAgICAgICB1c2VyTGlrZXMsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdXNlcl9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBieSBJRDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIFVwZGF0ZSB1c2VyIGJ5IElEXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSByZXEuYm9keTtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVzZXIuaWQgIT09IE51bWJlcihpZCkpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgYXR0ZW1wdCEnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB7IGltYWdlVXJsOiBuZXdJbWFnZVVybCB9ID0gcmVxLmJvZHk7XG4gICAgICAgICAgICBpZiAobmV3SW1hZ2VVcmwpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aWV3SW1hZ2VVcmwgPSBhd2FpdCBnZXRJbWFnZVByZXZpZXdVcmwocmVxLCByZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZpZXdJbWFnZVVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnSW1hZ2Ugbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLmltYWdlVXJsID0gcHJldmlld0ltYWdlVXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgaW1hZ2UgcHJldmlldyBVUkw6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciB1cGRhdGluZyBwcm9maWxlIHBpY3R1cmUnIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgW2FmZmVjdGVkQ291bnQsIHVwZGF0ZWRVc2Vyc10gPSBhd2FpdCBVc2Vycy51cGRhdGVVc2VyKE51bWJlcihpZCksIGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciB1cGRhdGluZyB1c2VyJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVwZGF0ZWRVc2VycyB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuIiwiaW1wb3J0IHJhdGVMaW1pdCBmcm9tICdleHByZXNzLXJhdGUtbGltaXQnO1xuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vLi4vY29uZmlnL2luZGV4JztcbmV4cG9ydCBjb25zdCBrZXlHZW5lcmF0b3IgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBpZiAoIXJlcS5pcCkge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6ICdXYXJuaW5nOiByZXF1ZXN0LmlwIGlzIG1pc3NpbmchJyB9KTtcbiAgICAgICAgcmV0dXJuIHJlcS5zb2NrZXQucmVtb3RlQWRkcmVzcztcbiAgICB9XG4gICAgcmV0dXJuIHJlcS5pcC5yZXBsYWNlKC86XFxkK1teOl0qJC8sICcnKTtcbn07XG5leHBvcnQgY29uc3QgbGltaXRlciA9IHJhdGVMaW1pdCh7XG4gICAgd2luZG93TXM6IGVudi5SQVJFX0xJTUlUX1dJTkRPV19NUyxcbiAgICBtYXg6IGVudi5NQVgsXG4gICAgbWVzc2FnZTogZW52LlJBUkVfTElNSVRfTUVTU0FHRSxcbiAgICBzdGF0dXNDb2RlOiBlbnYuUkFSRV9MSU1JVF9DT0RFLFxuICAgIGhhbmRsZXI6IChfcmVxLCByZXMpID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyhlbnYuUkFSRV9MSU1JVF9DT0RFKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVudi5SQVJFX0xJTUlUX01FU1NBR0UsXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAga2V5R2VuZXJhdG9yLFxufSk7XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgbGltaXRlcixcbiAgICBrZXlHZW5lcmF0b3IsXG59O1xuIiwiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgand0RU5WIH0gZnJvbSAnLi4vLi4vY29uZmlnL2p3dEVOVic7XG5kb3RlbnYuY29uZmlnKCk7XG5leHBvcnQgY29uc3Qgand0R2VuZXJhdG9yID0gKHBheWxvYWQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgand0RU5WLkpXVF9TRUNSRVQsIHtcbiAgICAgICAgICAgIGFsZ29yaXRobTogand0RU5WLkpXVF9BTEdPUklUSE0sXG4gICAgICAgICAgICBleHBpcmVzSW46IGp3dEVOVi5KV1RfRVhQSVJFU19JTixcbiAgICAgICAgICAgIGlzc3Vlcjogand0RU5WLkpXVF9JU1NVRVIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBnZW5lcmF0aW5nIEpXVCcpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3Qgand0VmVyaWZpZXIgPSAodG9rZW4pID0+IHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciB2ZXJpZnlpbmcgSldUJyk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBqd3RSZWZyZXNoID0gKHBheWxvYWQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgand0RU5WLkpXVF9SRUZSRVNIX1NFQ1JFVCwge1xuICAgICAgICAgICAgYWxnb3JpdGhtOiBqd3RFTlYuSldUX0FMR09SSVRITSxcbiAgICAgICAgICAgIGV4cGlyZXNJbjogand0RU5WLkpXVF9SRUZSRVNIX0VYUElSRVNfSU4sXG4gICAgICAgICAgICBpc3N1ZXI6IGp3dEVOVi5KV1RfSVNTVUVSLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgZ2VuZXJhdGluZyBKV1QnKTtcbiAgICB9XG59O1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIGp3dEdlbmVyYXRvcixcbiAgICBqd3RWZXJpZmllcixcbiAgICBqd3RSZWZyZXNoLFxufTtcbiIsImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uLy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4uLy4uL21vZGVscy91c2VyLm1vZGVsJztcbmRvdGVudi5jb25maWcoKTtcbmV4cG9ydCBjb25zdCByZXF1aXJlQXV0aCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsoZGVjb2RlZFRva2VuLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IHVzZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXRyaWV2aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICBuZXh0KCk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB2ZXJpZnlVc2VyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdKV1QgdmVyaWZpY2F0aW9uIGVycm9yOicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayhkZWNvZGVkVG9rZW4uaWQpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWNvZGVkVG9rZW46JywgZGVjb2RlZFRva2VuKTtcbiAgICAgICAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgICAgICAgICByZXMubG9jYWxzLnVzZXIgPSB1c2VyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXRyaWV2aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdmVyaWZ5aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICBuZXh0KCk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IHsgdmVyaWZ5VXNlciwgcmVxdWlyZUF1dGggfTtcbiIsImltcG9ydCB7IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIH0gZnJvbSAnLi9zZXF1aWxpemVDb24nO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JEQigpIHtcbiAgICBjb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuICAgIGNvbnN0IG1heEF0dGVtcHRzID0gMTA7IC8vIDEwIGF0dGVtcHRzXG4gICAgY29uc3QgZGVsYXkgPSAxMDAwOyAvLyAxIHNlY29uZFxuICAgIGxldCBhdHRlbXB0cyA9IDA7XG4gICAgd2hpbGUgKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRlc3QgdGhlIGNvbm5lY3Rpb25cbiAgICAgICAgICAgIGF3YWl0IHNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBjb25uZWN0aW9uIGVzdGFibGlzaGVkLCBTdGFydGluZyBTZXJ2ZXIuLi4uLicpO1xuICAgICAgICAgICAgLy8gU3luYyB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgIGF3YWl0IHNlcXVlbGl6ZS5zeW5jKHsgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRHJvcCBhbmQgcmUtc3luYyBkYi4nKTtcbiAgICAgICAgICAgIHJldHVybiBzZXF1ZWxpemU7IC8vIFJldHVybiB0aGUgU2VxdWVsaXplIGluc3RhbmNlXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgICBhdHRlbXB0cysrO1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5lcnJvcignTWF4IGF0dGVtcHRzIHJlYWNoZWQsIGRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xufVxuZXhwb3J0IGRlZmF1bHQgeyB3YWl0Rm9yREIgfTtcbiIsImltcG9ydCB7IFNlcXVlbGl6ZSB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBkYXRhYmFzZUVOViB9IGZyb20gJy4uLy4uL2NvbmZpZy9kYXRhYmFzZUVOVic7XG5pbXBvcnQgZnMgZnJvbSAnbm9kZTpmcyc7XG5jb25zdCBkYkNvbmZpZyA9IHtcbiAgICBEaWFsZWN0OiAnbWFyaWFkYicsXG4gICAgaG9zdDogZGF0YWJhc2VFTlYuREJfSE9TVCB8fCAnbG9jYWxob3N0JyxcbiAgICB1c2VybmFtZTogZGF0YWJhc2VFTlYuREJfVVNFUiB8fCAnbWV0YWxicmFpbicsXG4gICAgcGFzc3dvcmQ6IGRhdGFiYXNlRU5WLkRCX1BBU1MgfHwgJ3Bhc3N3b3JkJyxcbiAgICBkYXRhYmFzZTogZGF0YWJhc2VFTlYuREJfTkFNRSB8fCAnRmluZFNvbWVPbmUnLFxuICAgIHNvY2tldFBhdGg6IGRhdGFiYXNlRU5WLkRCX1NPQ0tFVF9QQVRIIHx8ICcvdmFyL3J1bi9teXNxbGQvbXlzcWxkLnNvY2snLFxuICAgIHNvY2tldFRpbWVvdXQ6IGRhdGFiYXNlRU5WLkRCX1NPQ0tFVF9USU1FT1VUIHx8IDEwMDAsXG4gICAgY29tcHJlc3M6IGRhdGFiYXNlRU5WLkRCX0NPTVBSRVNTIHx8IGZhbHNlLFxuICAgIGRlYnVnOiBkYXRhYmFzZUVOVi5EQl9ERUJVRyB8fCBmYWxzZSxcbiAgICBwZXJtaXRMb2NhbEluZmlsZTogZGF0YWJhc2VFTlYuREJfUEVSTUlUX0xPQ0FMX0lORklMRSB8fCBmYWxzZSxcbiAgICB0cmFjZTogZGF0YWJhc2VFTlYuREJfVFJBQ0UgfHwgdHJ1ZSxcbiAgICBjaGVja0R1cGxpY2F0ZTogZGF0YWJhc2VFTlYuREJfQ0hFQ0tfRFVQTElDQVRFIHx8IGZhbHNlLFxuICAgIGNvbm5lY3RBdHRyaWJ1dGVzOiBKU09OLnBhcnNlKGRhdGFiYXNlRU5WLkRCX0NPTk5FQ1RJT05fQVRUUklCVVRFUyB8fCAne30nKSxcbiAgICBjb25uZWN0aW9uVGltZW91dDogZGF0YWJhc2VFTlYuREJfQ09OTkVDVElPTl9USU1FT1VUIHx8IDEwMDAsXG4gICAgcG9ydDogZGF0YWJhc2VFTlYuREJfUE9SVCB8fCAzMzA2LFxuICAgIHNzbDogZGF0YWJhc2VFTlYuREJfU1NMIHx8IGZhbHNlLFxuICAgIGRpYWxlY3RPcHRpb25zOiB7XG4gICAgICAgIHNzbDoge1xuICAgICAgICAgICAgY2E6IGRhdGFiYXNlRU5WLkRCX1NTTF9DQVxuICAgICAgICAgICAgICAgID8gZnMucmVhZEZpbGVTeW5jKGRhdGFiYXNlRU5WLkRCX1NTTF9DQSkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIDogJycsXG4gICAgICAgICAgICBrZXk6IGRhdGFiYXNlRU5WLkRCX1NTTF9LRVlcbiAgICAgICAgICAgICAgICA/IGZzLnJlYWRGaWxlU3luYyhkYXRhYmFzZUVOVi5EQl9TU0xfS0VZKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgOiAnJyxcbiAgICAgICAgICAgIGNlcnQ6IGRhdGFiYXNlRU5WLkRCX1NTTF9DRVJUXG4gICAgICAgICAgICAgICAgPyBmcy5yZWFkRmlsZVN5bmMoZGF0YWJhc2VFTlYuREJfU1NMX0NFUlQpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICA6ICcnLFxuICAgICAgICB9LFxuICAgIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCkge1xuICAgIC8vIENyZWF0ZSBhIG5ldyBTZXF1ZWxpemUgaW5zdGFuY2VcbiAgICBjb25zdCBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKGRiQ29uZmlnLmRhdGFiYXNlLCBkYkNvbmZpZy51c2VybmFtZSwgZGJDb25maWcucGFzc3dvcmQsIHtcbiAgICAgICAgaG9zdDogZGJDb25maWcuaG9zdCxcbiAgICAgICAgZGlhbGVjdDogZGJDb25maWcuRGlhbGVjdCxcbiAgICAgICAgcG9ydDogZGJDb25maWcucG9ydCxcbiAgICAgICAgc3NsOiBkYkNvbmZpZy5zc2wsXG4gICAgICAgIGRpYWxlY3RPcHRpb25zOiBkYkNvbmZpZy5kaWFsZWN0T3B0aW9ucyxcbiAgICB9KTtcbiAgICByZXR1cm4gc2VxdWVsaXplO1xufVxuZXhwb3J0IGRlZmF1bHQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9O1xuIiwiLy8gdGhpcyB3aWxsIGxvYWQgYWxsIG1vZGVsIGNsYXNzZXMgZm91bmQgaW4gZmlsZXMgbWF0Y2hpbmcgdGhpcyBnbG9iIHBhdHRlcm4uXG5pbXBvcnQgeyBTZXF1ZWxpemUsIGltcG9ydE1vZGVscyB9IGZyb20gJ0BzZXF1ZWxpemUvY29yZSc7XG5pbXBvcnQgeyBNYXJpYURiRGlhbGVjdCB9IGZyb20gJ0BzZXF1ZWxpemUvbWFyaWFkYic7XG5pbXBvcnQgeyBmaWxlVVJMVG9QYXRoIH0gZnJvbSAnbm9kZTp1cmwnO1xuaW1wb3J0IHsgZGlybmFtZSB9IGZyb20gJ25vZGU6cGF0aCc7XG5pbXBvcnQgeyBkYXRhYmFzZUVOViB9IGZyb20gJy4uLy4uL2NvbmZpZy9kYXRhYmFzZUVOVic7XG5jb25zdCBfX2Rpcm5hbWUgPSBkaXJuYW1lKGZpbGVVUkxUb1BhdGgoaW1wb3J0Lm1ldGEudXJsKSk7XG5leHBvcnQgY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZSh7XG4gICAgZGlhbGVjdDogTWFyaWFEYkRpYWxlY3QsXG4gICAgaG9zdDogZGF0YWJhc2VFTlYuREJfSE9TVCxcbiAgICB1c2VyOiBkYXRhYmFzZUVOVi5EQl9VU0VSLFxuICAgIHBhc3N3b3JkOiBkYXRhYmFzZUVOVi5EQl9QQVNTLFxuICAgIGRhdGFiYXNlOiBkYXRhYmFzZUVOVi5EQl9OQU1FLFxuICAgIHBvcnQ6IGRhdGFiYXNlRU5WLkRCX1BPUlQsXG4gICAgc3NsOiBkYXRhYmFzZUVOVi5EQl9TU0wsXG4gICAgbW9kZWxzOiBhd2FpdCBpbXBvcnRNb2RlbHMoX19kaXJuYW1lICsgJy9zcmMvc2VydmVyL21vZGVscy8qKi8qLm1vZGVsLnt0cyxqc30nKSxcbn0pO1xuZXhwb3J0IGRlZmF1bHQgc2VxdWVsaXplO1xuIiwiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGhlbG1ldCBmcm9tICdoZWxtZXQnO1xuaW1wb3J0IG1vcmdhbiBmcm9tICdtb3JnYW4nO1xuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vY29uZmlnL2luZGV4JztcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gJy4uL3JvdXRlcy9yb3V0ZXInO1xuaW1wb3J0IHsgbGltaXRlciB9IGZyb20gJy4vYXV0aC9pcENvbmZpZyc7XG5pbXBvcnQgeyBnbG9iYWxFcnJvckhhbmRsZXIgfSBmcm9tICcuLi91dGlscy9lcnJvckhhbmRsZXInO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiAoeyBhcHAgfSkge1xuICAgIGFwcC5nZXQoJy9zdGF0dXMnLCAoX3JlcSwgcmVzKSA9PiByZXMuc2VuZFN0YXR1cygyMDApLmVuZCgpKTtcbiAgICBhcHAudXNlKChfcmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgICAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICAgICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gICAgICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICAgICAgaWYgKF9yZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfSk7XG4gICAgYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG4gICAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gICAgYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG4gICAgYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG4gICAgYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG4gICAgLy8gU2VydmUgc3RhdGljIGZpbGVzIGZyb20gJ2Rpc3QnIGRpcmVjdG9yeVxuICAgIGFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJ2Rpc3QnKSkpO1xuICAgIGFwcC51c2UoJy9hc3NldHMnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnYXNzZXRzJykpKTtcbiAgICBjb25zdCBUcnVzdF9Qcm94eSA9IGVudi5UUlVTVF9QUk9YWSB8fCAnZmFsc2UnO1xuICAgIGNvbnN0IG51bWJlck9mUHJveGllcyA9IGVudi5OVU1CRVJfT0ZfUFJPWElFUyB8fCAxO1xuICAgIGlmIChUcnVzdF9Qcm94eSkge1xuICAgICAgICBhcHAuc2V0KCd0cnVzdCBwcm94eScsIHRydWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChUcnVzdF9Qcm94eSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICBhcHAuc2V0KCd0cnVzdCBwcm94eScsIGZhbHNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFwcC5zZXQoJ3RydXN0IHByb3h5JywgVHJ1c3RfUHJveHkpO1xuICAgICAgICBhcHAuc2V0KCd0cnVzdCBwcm94eScsIG51bWJlck9mUHJveGllcyk7XG4gICAgfVxuICAgIGFwcC5zZXQoJ3RydXN0IHByb3h5JywgbnVtYmVyT2ZQcm94aWVzKTtcbiAgICBhcHAuZ2V0KCcvaXAnLCAocmVxdWVzdCwgcmVzcG9uc2UpID0+IHJlc3BvbnNlLnNlbmQocmVxdWVzdC5pcCkpO1xuICAgIGFwcC51c2UoaGVsbWV0KHtcbiAgICAgICAgY29udGVudFNlY3VyaXR5UG9saWN5OiBmYWxzZSxcbiAgICB9KSk7XG4gICAgYXBwLnVzZShtb3JnYW4oZW52Lk1PUkdBTikpO1xuICAgIGFwcC51c2UobGltaXRlcik7XG4gICAgYXBwLnVzZShyb3V0ZXIpO1xuICAgIGFwcC51c2UoZ2xvYmFsRXJyb3JIYW5kbGVyKTtcbiAgICByZXR1cm4gYXBwO1xufVxuIiwiaW1wb3J0IGV4cHJlc3NMb2FkZXIgZnJvbSAnLi9leHByZXNzJztcbmltcG9ydCBzZXF1aWxpemVMb2FkZXIgZnJvbSAnLi9kYXRhTG9hZGVyL3NlcXVsaXplJztcbmltcG9ydCB7IHdhaXRGb3JEQiB9IGZyb20gJy4vZGF0YUxvYWRlci9tYXJpYWRiJztcbmltcG9ydCB7IHRydW5jYXRlVGFibGVzIH0gZnJvbSAnLi4vc2VydmljZXMvdHJ1bmNhdGUnO1xuaW1wb3J0IGxvYWRlciBmcm9tICcuLi9zZXJ2aWNlcy9wZXJmb3JtYW5jZSc7XG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiAoeyBhcHAgfSkge1xuICAgIGF3YWl0IHRydW5jYXRlVGFibGVzKCk7XG4gICAgYXdhaXQgd2FpdEZvckRCKCk7XG4gICAgc2VxdWlsaXplTG9hZGVyO1xuICAgIGF3YWl0IGV4cHJlc3NMb2FkZXIoeyBhcHAgfSk7XG4gICAgbG9hZGVyKCk7XG4gICAgY29uc29sZS5sb2coJ0V4cHJlc3MgU2VydmVyIEludGlhbGl6ZWQhJyk7XG59XG4iLCJpbXBvcnQgeyBEYXRhVHlwZXMsIE1vZGVsIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCB7IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIH0gZnJvbSAnLi4vbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVpbGl6ZUNvbi5qcyc7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi91c2VyLm1vZGVsLmpzJztcbmltcG9ydCBQb3N0cyBmcm9tICcuL3Bvc3QubW9kZWwuanMnO1xuLy8gRGVmaW5lIEluc3RhbmNlIG9mIFNlcXVlbGl6ZVxuY29uc3Qgc2VxdWVsaXplID0gY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UoKTtcbmNsYXNzIEltYWdlU3RvcmFnZXMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gY3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBmaW5kIGFuIGltYWdlIGJ5IElEXG4gICAgc3RhdGljIGFzeW5jIGZpbmRJbWFnZUJ5SWQoaWQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZEJ5UGsoaWQpO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgZmluZEltYWdlQnlSZWZlcmVuY2VLZXkoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCB0aGlzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IFtrZXldOiB2YWx1ZSB9LFxuICAgICAgICAgICAgICAgIG9yZGVyOiBbWydjcmVhdGVkX0F0JywgJ0RFU0MnXV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbWFnZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZpbmRpbmcgaW1hZ2UgYnkgcmVmZXJlbmNlIGtleTogJHtrZXl9LCB2YWx1ZTogJHt2YWx1ZX1gLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgdGhlIGVycm9yIGFmdGVyIGxvZ2dpbmcgaXRcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIERlZmluZSB0aGUgSW1hZ2VTdG9yYWdlIG1vZGVsXG5JbWFnZVN0b3JhZ2VzLmluaXQoe1xuICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgaW1hZ2VVcmw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgIH0sXG4gICAgdXNlcl9pZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdVc2VycycsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBwb3N0X2lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1Bvc3RzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGNyZWF0ZWRfQXQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICB9LFxufSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdJbWFnZVN0b3JhZ2VzJyxcbiAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbn0pO1xuLy8gRGVmaW5lIHRoZSBVc2VyIG1vZGVsXG5JbWFnZVN0b3JhZ2VzLmluaXQoe1xuICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgaW1hZ2VVcmw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgIH0sXG4gICAgdXNlcl9pZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdVc2VycycsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBwb3N0X2lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1Bvc3RzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgIH0sXG4gICAgY3JlYXRlZF9BdDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG59LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ0ltYWdlU3RvcmFnZXMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxufSk7XG4vLyBjcmVhdGUgYSBob29rIHRoYXQgc2F2ZXMgdXBsb2FkZWQgaW1hZ2UgdG8gdGhlIHVzZXIncyBjb2x1bW5zIGluIHRoZSBkYXRhYmFzZVxuSW1hZ2VTdG9yYWdlcy5hZnRlckNyZWF0ZShhc3luYyAoaW1hZ2UpID0+IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsoaW1hZ2UudXNlcl9pZCk7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdXNlci5pbWFnZVVSTCA9IGltYWdlLmltYWdlVXJsO1xuICAgICAgICBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICB9XG59KTtcbi8vIEFmdGVyIFVwbG9hZGluZyBhbiBpbWFnZSwgc2F2ZSB0byB1c2VyJ3MgdGFibGVcblVzZXJzLmhhc01hbnkoSW1hZ2VTdG9yYWdlcywge1xuICAgIGZvcmVpZ25LZXk6ICd1c2VyX2lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxuICAgIG9uVXBkYXRlOiAnQ0FTQ0FERScsXG59KTtcblBvc3RzLmhhc01hbnkoSW1hZ2VTdG9yYWdlcywge1xuICAgIGZvcmVpZ25LZXk6ICdwb3N0X2lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxuICAgIG9uVXBkYXRlOiAnQ0FTQ0FERScsXG59KTtcbi8vIERlZmluZSB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gdGhlIFVzZXIsIE5ld1Bvc3QsIGFuZCBJbWFnZVN0b3JhZ2UgbW9kZWxzXG5JbWFnZVN0b3JhZ2VzLmJlbG9uZ3NUbyhVc2Vycywge1xuICAgIGZvcmVpZ25LZXk6ICd1c2VyX2lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxuICAgIG9uVXBkYXRlOiAnQ0FTQ0FERScsXG59KTtcbkltYWdlU3RvcmFnZXMuYmVsb25nc1RvKFBvc3RzLCB7XG4gICAgZm9yZWlnbktleTogJ3Bvc3RfaWQnLFxuICAgIG9uRGVsZXRlOiAnQ0FTQ0FERScsXG4gICAgb25VcGRhdGU6ICdDQVNDQURFJyxcbn0pO1xuLy8gc3luYyB0aGUgSW1hZ2VTdG9yYWdlIG1vZGVsIHdpdGggdGhlIGRhdGFiYXNlXG5hd2FpdCBzZXF1ZWxpemVcbiAgICAuc3luYyh7IGZvcmNlOiBmYWxzZSB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnTmV3IEltYWdlIHN5bmNlZCBzdWNjZXNzZnVsbHknKTtcbn0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2luZyBuZXcgaW1hZ2U6JywgZXJyKTtcbn0pO1xuLy8gSW1hZ2VTdG9yYWdlLnN5bmMoeyBmb3JjZTogdHJ1ZSB9KVxuLy8gICAudGhlbigoKSA9PiB7XG4vLyAgICAgY29uc29sZS5sb2coJ0ltYWdlU3RvcmFnZSBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4vLyAgIH0pXG4vLyAgIC5jYXRjaChlcnIgPT4ge1xuLy8gICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgSW1hZ2VTdG9yYWdlOicsIGVycik7XG4vLyAgIH0pO1xuZXhwb3J0IGRlZmF1bHQgSW1hZ2VTdG9yYWdlcztcbiIsImltcG9ydCB7IERhdGFUeXBlcywgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfSBmcm9tICcuLi9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uJztcbmltcG9ydCBVc2VyIGZyb20gJy4vdXNlci5tb2RlbC5qcyc7XG5pbXBvcnQgUG9zdCBmcm9tICcuL3Bvc3QubW9kZWwuanMnO1xuLy8gRGVmaW5lIEluc3RhbmNlIG9mIFNlcXVlbGl6ZVxuY29uc3Qgc2VxdWVsaXplID0gY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UoKTtcbmNsYXNzIExpa2VzIGV4dGVuZHMgTW9kZWwge1xuICAgIC8vIGNyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gY3JlYXRlIGEgbmV3IGxpa2VcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlTGlrZShhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZShhdHRyaWJ1dGVzKTtcbiAgICB9XG4gICAgLy8gY3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBmaW5kIGEgbGlrZSBieSBJRFxuICAgIHN0YXRpYyBhc3luYyBmaW5kTGlrZUJ5SWQoaWQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZEJ5UGsoaWQpO1xuICAgIH1cbiAgICAvLyBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGZpbmQgYSBsaWtlIGJ5IHJlZmVyZW5jZSBrZXkgKHVzZXJJZCBvciBwb3N0SWQpXG4gICAgc3RhdGljIGFzeW5jIGZpbmRMaWtlQnlSZWZlcmVuY2VLZXkoa2V5LCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgW2tleV06IHZhbHVlIH0gfSk7XG4gICAgfVxuICAgIC8vIGNyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gZmluZCBhbGwgbGlrZXMgYnkgcmVmZXJlbmNlIGtleSAodXNlcklkIG9yIHBvc3RJZClcbiAgICBzdGF0aWMgYXN5bmMgZmluZEFsbExpa2VzQnlSZWZlcmVuY2VLZXkoa2V5LCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQWxsKHsgd2hlcmU6IHsgW2tleV06IHZhbHVlIH0gfSk7XG4gICAgfVxuICAgIC8vIGNyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gZmluZCBhbGwgbGlrZXMgYnkgcmVmZXJlbmNlIGtleSAodXNlcklkIG9yIHBvc3RJZClcbiAgICBzdGF0aWMgYXN5bmMgZGVsZXRlTGlrZUJ5UmVmZXJlbmNlS2V5KGtleSwgdmFsdWUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZXN0cm95KHsgd2hlcmU6IHsgW2tleV06IHZhbHVlIH0gfSk7XG4gICAgfVxufVxuLy8gRGVmaW5lIHRoZSBVc2VyIG1vZGVsXG5MaWtlcy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnVXNlcnMnLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgcG9zdF9pZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdQb3N0cycsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBjcmVhdGVkX0F0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbn0sIHtcbiAgICBzZXF1ZWxpemUsXG4gICAgbW9kZWxOYW1lOiAnTGlrZXMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGZyZWV6ZVRhYmxlTmFtZTogdHJ1ZSxcbn0pO1xuLy8gRGVmaW5lIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBVc2VyIGFuZCBMaWtlXG5Vc2VyLmhhc01hbnkoTGlrZXMsIHtcbiAgICBmb3JlaWduS2V5OiAndXNlcl9pZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbn0pO1xuTGlrZXMuYmVsb25nc1RvKFVzZXIsIHtcbiAgICBmb3JlaWduS2V5OiAndXNlcl9pZCcsXG59KTtcbi8vIERlZmluZSB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gUG9zdCBhbmQgTGlrZVxuUG9zdC5oYXNNYW55KExpa2VzLCB7XG4gICAgZm9yZWlnbktleTogJ3Bvc3RfaWQnLFxuICAgIG9uRGVsZXRlOiAnQ0FTQ0FERScsXG59KTtcbkxpa2VzLmJlbG9uZ3NUbyhQb3N0LCB7XG4gICAgZm9yZWlnbktleTogJ3Bvc3RfaWQnLFxufSk7XG4vLyBTeW5jIHRoZSBMaWtlIG1vZGVsIHdpdGggdGhlIGRhdGFiYXNlXG5MaWtlcy5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdMaWtlIHN5bmNlZCBzdWNjZXNzZnVsbHknKTtcbn0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2luZyBsaWtlOicsIGVycik7XG59KTtcbmV4cG9ydCBkZWZhdWx0IExpa2VzO1xuIiwiaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24nO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4vdXNlci5tb2RlbC5qcyc7XG4vLyBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuY2xhc3MgUG9zdHMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gY3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBjcmVhdGUgYSBuZXcgcG9zdFxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGVQb3N0KGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlKGF0dHJpYnV0ZXMpO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgdXBkYXRlUG9zdChpZCwgYXR0cmlidXRlcykge1xuICAgICAgICBjb25zdCBbYWZmZWN0ZWRDb3VudCwgdXBkYXRlZFBvc3RzXSA9IGF3YWl0IHRoaXMudXBkYXRlKGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgICAgICByZXR1cm5pbmc6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW2FmZmVjdGVkQ291bnQsIHVwZGF0ZWRQb3N0c107XG4gICAgfVxuICAgIC8vIGRlY2xhcmUgc3RhdGljIG1ldGhvZHMgdG8gZGVsZXRlIGEgUG9zdCBieSBJRFxuICAgIHN0YXRpYyBhc3luYyBkZWxldGVQb3N0KGlkKSB7XG4gICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBpZCB9IH0pO1xuICAgICAgICBpZiAocG9zdCkge1xuICAgICAgICAgICAgYXdhaXQgcG9zdC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBnZXQgYWxsIHBvc3RzXG4gICAgc3RhdGljIGFzeW5jIGdldEFsbFBvc3RzKCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQWxsKCk7XG4gICAgfVxuICAgIC8vIGRlY2xhcmUgc3RhdGljIG1ldGhvZHMgdG8gZ2V0IGluZmluaXRlIHBvc3RzXG4gICAgc3RhdGljIGFzeW5jIGdldEluZmluaXRlUG9zdHMob2Zmc2V0LCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQWxsKHsgb2Zmc2V0LCBsaW1pdCB9KTtcbiAgICB9XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBnZXQgcG9zdCBieSBJRFxuICAgIHN0YXRpYyBhc3luYyBnZXRQb3N0QnlJRChwb3N0X2lkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogcG9zdF9pZCB9IH0pO1xuICAgIH1cbiAgICAvLyBkZWNsYXJlIHN0YXRpYyBtZXRob2RzIHRvIGdldCB1c2VyJ3MgcG9zdHNcbiAgICBzdGF0aWMgYXN5bmMgZ2V0VXNlclBvc3RzKHVzZXJfaWQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZEFsbCh7IHdoZXJlOiB7IGNyZWF0b3JfSWQ6IHVzZXJfaWQgfSB9KTtcbiAgICB9XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBnZXQgU2F2ZWQgcG9zdCBieSBwb3N0IElEXG4gICAgc3RhdGljIGFzeW5jIGdldFNhdmVkUG9zdChwb3N0X2lkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBpZDogcG9zdF9pZCB9IH0pO1xuICAgIH1cbiAgICAvLyBkZWNsYXJlIHN0YXRpYyBtZXRob2RzIHRvIGdldCBwb3N0IGJ5IHJlZmVyZW5jZSBJRCAoY3JlYXRvcl9JZClcbiAgICBzdGF0aWMgYXN5bmMgZ2V0UG9zdEJ5UmVmZXJlbmNlSUQoY3JlYXRvcl9JZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgY3JlYXRvcl9JZCB9IH0pO1xuICAgIH1cbn1cbi8vIFN5bmMgdGhlIG1vZGVsIHdpdGggdGhlIGRhdGFiYXNlXG5Qb3N0cy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICB9LFxuICAgIGNhcHRpb246IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGltYWdlVVJMOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxuICAgIGxvY2F0aW9uOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxuICAgIHRhZ3M6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGxpa2VzX0NvdW50OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbiAgICBjcmVhdGVkX0F0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgfSxcbiAgICBjcmVhdG9yX0lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1VzZXJzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxufSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdQb3N0cycsXG4gICAgdGltZXN0YW1wczogZmFsc2UsXG59KTtcbi8vIENyZWF0ZSBuZXcgcG9zdFxuUG9zdHMuY3JlYXRlUG9zdCA9IGFzeW5jIGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbmV3UG9zdCA9IGF3YWl0IHRoaXMuY3JlYXRlKGF0dHJpYnV0ZXMpO1xuICAgICAgICByZXR1cm4gbmV3UG9zdDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG5ldyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcbi8vIFVwZGF0ZSBwb3N0IGJ5IElEXG5Qb3N0cy51cGRhdGVQb3N0ID0gYXN5bmMgZnVuY3Rpb24gKGlkLCBhdHRyaWJ1dGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2FmZmVjdGVkQ291bnQsIHVwZGF0ZWRQb3N0c10gPSBhd2FpdCB0aGlzLnVwZGF0ZShhdHRyaWJ1dGVzLCB7XG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICAgICAgcmV0dXJuaW5nOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFthZmZlY3RlZENvdW50LCB1cGRhdGVkUG9zdHNdO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn07XG4vLyBpbmZpbml0ZSBwb3N0c1xuUG9zdHMuZ2V0SW5maW5pdGVQb3N0cyA9IGFzeW5jIGZ1bmN0aW9uIChvZmZzZXQsIGxpbWl0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcG9zdHMgPSBhd2FpdCB0aGlzLmZpbmRBbGwoeyBvZmZzZXQsIGxpbWl0IH0pO1xuICAgICAgICByZXR1cm4gcG9zdHM7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGluZmluaXRlIHBvc3RzOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcbi8vIEdldCBzZWFyY2ggcmVzdWx0cyAtIHBvc3RzXG5Qb3N0cy5nZXRQb3N0QnlJRCA9IGFzeW5jIGZ1bmN0aW9uIChpZCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBpZCB9IH0pO1xuICAgICAgICByZXR1cm4gcG9zdDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcG9zdCBieSBJRDonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn07XG4vLyBHZXQgdXNlcidzIHBvc3RzXG5Qb3N0cy5nZXRVc2VyUG9zdHMgPSBhc3luYyBmdW5jdGlvbiAodXNlcl9pZCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgdGhpcy5maW5kQWxsKHsgd2hlcmU6IHsgY3JlYXRvcl9JZDogdXNlcl9pZCB9IH0pO1xuICAgICAgICByZXR1cm4gcG9zdHM7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgcG9zdHM6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59O1xuLy8gRGVmaW5lIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgVXNlciBhbmQgUG9zdCBtb2RlbHNcblVzZXJzLmhhc01hbnkoUG9zdHMsIHtcbiAgICBmb3JlaWduS2V5OiAnY3JlYXRvcl9JZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG5Qb3N0cy5iZWxvbmdzVG8oVXNlcnMsIHtcbiAgICBmb3JlaWduS2V5OiAnY3JlYXRvcl9JZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG5hd2FpdCBzZXF1ZWxpemVcbiAgICAuc3luYyh7IGZvcmNlOiBmYWxzZSB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnUG9zdCBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgUG9zdDonLCBlcnIpO1xufSk7XG5leHBvcnQgZGVmYXVsdCBQb3N0cztcbiIsImltcG9ydCB7IERhdGFUeXBlcywgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfSBmcm9tICcuLi9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uJztcbmltcG9ydCBVc2VycyBmcm9tICcuL3VzZXIubW9kZWwuanMnO1xuaW1wb3J0IFBvc3RzIGZyb20gJy4vcG9zdC5tb2RlbC5qcyc7XG4vLyBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuY2xhc3MgU2F2ZXMgZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gQ3JlYXRlIGN1c3RvbSBjbGFzcyBtZXRob2RzIHRvIGNyZWF0ZSBhIG5ldyBwb3N0XG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZVNhdmUoYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGUoYXR0cmlidXRlcyk7XG4gICAgfVxuICAgIC8vIGNyZWF0ZSBjdXN0b20gbWV0aG9kIHRvIGNoZWNrIGlmIHBvc3QgaXMgc2F2ZWRcbiAgICBzdGF0aWMgYXN5bmMgY2hlY2tJZlNhdmVkKHVzZXJfaWQsIHBvc3RfaWQpIHtcbiAgICAgICAgY29uc3Qgc2F2ZSA9IGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IHVzZXJfaWQsIHBvc3RfaWQgfSB9KTtcbiAgICAgICAgcmV0dXJuICEhc2F2ZTtcbiAgICB9XG4gICAgLy8gY3JlYXRlIGN1c3RvbSBtZXRob2QgdG8gZGVsZXRlIGEgc2F2ZWQgcG9zdFxuICAgIHN0YXRpYyBhc3luYyBkZWxldGVTYXZlZFBvc3QocG9zdF9pZCkge1xuICAgICAgICBjb25zdCBzYXZlID0gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgcG9zdF9pZCB9IH0pO1xuICAgICAgICBpZiAoc2F2ZSkge1xuICAgICAgICAgICAgYXdhaXQgc2F2ZS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gY3JlYXRlIGN1c3RvbSBtZXRob2QgdG8gZ2V0IGFsbCBzYXZlZCBwb3N0c1xuICAgIHN0YXRpYyBhc3luYyBnZXRTYXZlZFBvc3RzKHVzZXJfaWQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZEFsbCh7XG4gICAgICAgICAgICB3aGVyZTogeyB1c2VyX2lkIH0sXG4gICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbDogUG9zdHMsXG4gICAgICAgICAgICAgICAgICAgIGFzOiAnUG9zdCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIERlZmluZSB0aGUgU2F2ZXMgbW9kZWxcblNhdmVzLmluaXQoe1xuICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgdXNlcl9pZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdVc2VycycsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBwb3N0X2lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1Bvc3RzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHNhdmVEYXRlOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICB9LFxufSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICB0YWJsZU5hbWU6ICdTYXZlcycsXG4gICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgZnJlZXplVGFibGVOYW1lOiB0cnVlLFxufSk7XG4vLyBDcmVhdGUgYSBmdW5jdGlvbiB0byBkZWxldGUgc2F2ZWQgUG9zdCB1c2luZyB0aGUgc3RhdGljIG1ldGhvZFxuU2F2ZXMuZGVsZXRlU2F2ZWRQb3N0ID0gYXN5bmMgZnVuY3Rpb24gKHBvc3RfaWQpIHtcbiAgICBjb25zdCBzYXZlID0gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgcG9zdF9pZCB9IH0pO1xuICAgIGlmIChzYXZlKSB7XG4gICAgICAgIGF3YWl0IHNhdmUuZGVzdHJveSgpO1xuICAgIH1cbn07XG4vLyBDcmVhdGUgcmVsYXRpb25zaGlwIGJldHdlZW4gU2F2ZXMgYW5kIFVzZXJzXG5TYXZlcy5iZWxvbmdzVG8oVXNlcnMsIHtcbiAgICBmb3JlaWduS2V5OiAndXNlcl9pZCcsXG4gICAgdGFyZ2V0S2V5OiAnaWQnLFxufSk7XG4vLyBDcmVhdGUgcmVsYXRpb25zaGlwIGJldHdlZW4gU2F2ZXMgYW5kIFBvc3RzXG5TYXZlcy5iZWxvbmdzVG8oUG9zdHMsIHtcbiAgICBmb3JlaWduS2V5OiAncG9zdF9pZCcsXG4gICAgdGFyZ2V0S2V5OiAnaWQnLFxufSk7XG5TYXZlcy5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdTYXZlIFBvc3Qgc3luY2VkIHN1Y2Nlc3NmdWxseScpO1xufSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIFNhdmUgcG9zdDonLCBlcnIpO1xufSk7XG5leHBvcnQgZGVmYXVsdCBTYXZlcztcbiIsImltcG9ydCB7IERhdGFUeXBlcywgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfSBmcm9tICcuLi9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uJztcbi8vIERlZmluZSBJbnN0YW5jZSBvZiBTZXF1ZWxpemVcbmNvbnN0IHNlcXVlbGl6ZSA9IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCk7XG5jbGFzcyBVc2VycyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBkZWNsYXJlIHN0YXRpYyBtZXRob2RzIHRvIGdldCB1c2VyIGJ5IElEXG4gICAgc3RhdGljIGFzeW5jIGdldFVzZXJCeUlEKHVzZXJfaWQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IGlkOiB1c2VyX2lkIH0gfSk7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBnZXRBbGxVc2VycyhsaW1pdCwgYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQWxsKHtcbiAgICAgICAgICAgIGxpbWl0LFxuICAgICAgICAgICAgYXR0cmlidXRlcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGRlY2xhcmUgc3RhdGljIG1ldGhvZHMgdG8gdXBkYXRlIGEgdXNlciBieSBJRFxuICAgIHN0YXRpYyBhc3luYyB1cGRhdGVVc2VyKGlkLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGNvbnN0IFthZmZlY3RlZENvdW50LCB1cGRhdGVkVXNlcnNdID0gYXdhaXQgdGhpcy51cGRhdGUoYXR0cmlidXRlcywge1xuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgICAgIHJldHVybmluZzogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbYWZmZWN0ZWRDb3VudCwgdXBkYXRlZFVzZXJzXTtcbiAgICB9XG59XG4vLyBTeW5jIHRoZSBtb2RlbCB3aXRoIHRoZSBkYXRhYmFzZVxuVXNlcnMuaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgfSxcbiAgICBmaXJzdE5hbWU6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIG5vdEVtcHR5OiB0cnVlLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgbGFzdE5hbWU6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIG5vdEVtcHR5OiB0cnVlLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgdXNlcm5hbWU6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXM6IC9eW2EtekEtWjAtOV9dKiQvLFxuICAgICAgICAgICAgbGVuOiBbMywgMjBdLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgaXNFbWFpbDogdHJ1ZSxcbiAgICAgICAgICAgIGxlbjogWzUsIDUwXSxcbiAgICAgICAgICAgIG5vdEVtcHR5OiB0cnVlLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgaGFzaGVkcGFzc3dvcmQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyg2NCksXG4gICAgfSxcbiAgICBzdGF0dXM6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiAndW52ZXJpZmllZCcsXG4gICAgfSxcbiAgICBiaW86IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiAnVGhpcyBpcyBhIG5ldyB1c2VyLicsXG4gICAgfSxcbiAgICBqb2luOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5OT1csXG4gICAgfSxcbiAgICBhdmF0YXJVcmw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICB9LFxuICAgIGltYWdlVVJMOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgfSxcbiAgICBwcm9maWxlUGljOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgfSxcbiAgICBsYWJlbDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBkZWZhdWx0VmFsdWU6ICdOZXcgVXNlcicsXG4gICAgfSxcbiAgICBsYXN0X2FjdGl2aXR5OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5OT1csXG4gICAgfSxcbiAgICB1cGRhdGVkX2F0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5OT1csXG4gICAgfSxcbiAgICBVc2VyUmVnaXN0cmF0aW9uSUQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlVVSUQsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdVc2VyUmVnaXN0cmF0aW9uJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxufSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdVc2VycycsXG4gICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgdXBkYXRlZEF0OiAndXBkYXRlZF9hdCcsXG59KTtcbi8vIFN5bmMgVXNlciBtb2RlbCB3aXRoIHRoZSBkYXRhYmFzZVxuYXdhaXQgc2VxdWVsaXplXG4gICAgLnN5bmMoeyBmb3JjZTogZmFsc2UgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ05ldyBVc2VyIHN5bmNlZCBzdWNjZXNzZnVsbHknKTtcbn0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2luZyBuZXcgdXNlcjonLCBlcnIpO1xufSk7XG5leHBvcnQgZGVmYXVsdCBVc2VycztcbiIsImltcG9ydCB7IERhdGFUeXBlcywgTW9kZWwgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfSBmcm9tICcuLi9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0JztcbmltcG9ydCB7IGdlbmVyYXRlQXZhdGFyVXJsIH0gZnJvbSAnLi4vdXRpbHMvYXZhdGFyJztcbmltcG9ydCBVc2VycyBmcm9tICcuL3VzZXIubW9kZWwnO1xuLy8gRGVmaW5lIEluc3RhbmNlIG9mIFNlcXVlbGl6ZVxuY29uc3Qgc2VxdWVsaXplID0gY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UoKTtcbmNsYXNzIFVzZXJSZWdpc3RyYXRpb24gZXh0ZW5kcyBNb2RlbCB7XG4gICAgLy8gQ3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBsb2cgaW4gdXNlciB1cG9uIHN1Y2Nlc3NmdWwgcmVnaXN0cmF0aW9uXG4gICAgc3RhdGljIGFzeW5jIGxvZ2luVXNlcihlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogZW1haWwsIGhhc2hlZHBhc3N3b3JkOiBwYXNzd29yZCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gQ3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBsb2cgb3V0IHVzZXJcbiAgICBzdGF0aWMgYXN5bmMgbG9nb3V0VXNlcihlbWFpbCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kT25lKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGVtYWlsOiBlbWFpbCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gQ3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byByZXNldCB0aGUgcGFzc3dvcmQsIGNvbXBhcmUgdGhlIGhhc2hlZCBwYXNzd29yZFxuICAgIHN0YXRpYyBhc3luYyByZXNldFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kT25lKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGVtYWlsOiBlbWFpbCwgaGFzaGVkcGFzc3dvcmQ6IHBhc3N3b3JkIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblVzZXJSZWdpc3RyYXRpb24uaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgfSxcbiAgICBuZXdVc2VyOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICB1c2VybmFtZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGhhc2hlZHBhc3N3b3JkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICB9LFxufSwge1xuICAgIHNlcXVlbGl6ZTogc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ1VzZXJSZWdpc3RyYXRpb24nLFxuICAgIGNyZWF0ZWRBdDogJ2NyZWF0ZWRBdCcsXG4gICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgZnJlZXplVGFibGVOYW1lOiB0cnVlLFxufSk7XG4vLyBIYXNoIHRoZSBwYXNzd29yZCBiZWZvcmUgc2F2aW5nXG5Vc2VyUmVnaXN0cmF0aW9uLmJlZm9yZUNyZWF0ZShhc3luYyAodXNlcikgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICBjb25zdCBzYWx0ID0gYmNyeXB0LmdlblNhbHRTeW5jKDEwKTtcbiAgICAgICAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2goU3RyaW5nKHVzZXIuaGFzaGVkcGFzc3dvcmQpLCBzYWx0KTtcbiAgICAgICAgICAgIHVzZXIuaGFzaGVkcGFzc3dvcmQgPSBoYXNoZWRQYXNzd29yZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaGFzaGluZyBwYXNzd29yZDonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgaGFzaGluZyBwYXNzd29yZCcpO1xuICAgIH1cbn0pO1xuVXNlclJlZ2lzdHJhdGlvbi5hZnRlckNyZWF0ZShhc3luYyAodXNlcikgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICBjb25zdCBzcGFjZUluZGV4ID0gdXNlci5uZXdVc2VyPy5sYXN0SW5kZXhPZignICcpO1xuICAgICAgICAgICAgLy8gRXh0cmFjdCB0aGUgZmlyc3QgbmFtZSBhbmQgbGFzdCBuYW1lIGJhc2VkIG9uIHRoZSBsYXN0IHNwYWNlXG4gICAgICAgICAgICBjb25zdCBmaXJzdF9OYW1lID0gc3BhY2VJbmRleCAhPT0gLTEgPyB1c2VyLm5ld1VzZXI/LnNsaWNlKDAsIHNwYWNlSW5kZXgpIDogdXNlci5uZXdVc2VyO1xuICAgICAgICAgICAgY29uc3QgbGFzdE5hbWUgPSBzcGFjZUluZGV4ICE9PSAtMSA/IHVzZXIubmV3VXNlcj8uc2xpY2Uoc3BhY2VJbmRleCA/PyArMSkgOiBudWxsID8/ICcnO1xuICAgICAgICAgICAgY29uc3QgYXZhdGFyID0gZ2VuZXJhdGVBdmF0YXJVcmwodXNlci51c2VybmFtZSk7XG4gICAgICAgICAgICAvLyBDcmVhdGUgb3IgdXBkYXRlIHRoZSB1c2VyIHJlY29yZCBpbiB0aGUgVXNlcnMgdGFibGVcbiAgICAgICAgICAgIGF3YWl0IFVzZXJzLnVwc2VydCh7XG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBmaXJzdF9OYW1lLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBsYXN0TmFtZSxcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICBoYXNoZWRwYXNzd29yZDogdXNlci5oYXNoZWRwYXNzd29yZCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICd1bnZlcmlmaWVkJyxcbiAgICAgICAgICAgICAgICBiaW86ICdJIGFtIGEgbmV3IHVzZXIuJyxcbiAgICAgICAgICAgICAgICBqb2luOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIGF2YXRhclVybDogYXZhdGFyLFxuICAgICAgICAgICAgICAgIGltYWdlVVJMOiBudWxsLFxuICAgICAgICAgICAgICAgIHByb2ZpbGVQaWM6IG51bGwsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdOZXcgVXNlcicsXG4gICAgICAgICAgICAgICAgbGFzdF9hY3Rpdml0eTogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIFVzZXJSZWdpc3RyYXRpb25JRDogdXNlci5pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWdpc3RlcmluZyBuZXcgdXNlcjonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgcmVnaXN0ZXJpbmcgbmV3IHVzZXInKTtcbiAgICB9XG59KTtcbi8vIERlZmluZSBhIGN1c3RvbSBtZXRob2QgdG8gbG9naW4gdXNlciB3aXRoIGVtYWlsIGFuZCBwYXNzd29yZCBhbmQgY29tcGFyZSB0aGUgaGFzaGVkIHBhc3N3b3JkXG5Vc2VyUmVnaXN0cmF0aW9uLmxvZ2luVXNlciA9IGFzeW5jIGZ1bmN0aW9uIChlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgZW1haWw6IGVtYWlsIH0gfSk7XG4gICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICBjb25zdCBhdXRoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIuaGFzaGVkcGFzc3dvcmQpO1xuICAgICAgICAgICAgaWYgKGF1dGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5jb3JyZWN0IHBhc3N3b3JkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29ycmVjdCBlbWFpbCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2dnaW5nIGluIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgfVxufTtcbi8vIERlZmluZSBhIGN1c3RvbSBtZXRob2QgdG8gbG9nb3V0IHVzZXJcblVzZXJSZWdpc3RyYXRpb24ubG9nb3V0VXNlciA9IGFzeW5jIGZ1bmN0aW9uIChlbWFpbCkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbDogZW1haWwgfSB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvZ2dpbmcgb3V0IHVzZXI6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgfVxufTtcbmF3YWl0IHNlcXVlbGl6ZVxuICAgIC5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdOZXcgVXNlciBSZWdpc3RlcmVkIHN5bmNlZCBzdWNjZXNzZnVsbHknKTtcbn0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2luZyBuZXcgdXNlcjonLCBlcnIpO1xufSk7XG5leHBvcnQgZGVmYXVsdCBVc2VyUmVnaXN0cmF0aW9uO1xuIiwiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCB7IGNvck9wdGlvbnMgfSBmcm9tICcuLi9jb25maWcvY29yT3B0aW9ucyc7XG5pbXBvcnQgKiBhcyBhdXRoQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlcic7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbnJvdXRlci51c2UoY29ycyhjb3JPcHRpb25zKSk7XG5yb3V0ZXIudXNlKChfcmVxLCByZXMsIG5leHQpID0+IHtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnaHR0cDovL2xvY2FsaG9zdDo4MDgwJyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdPcmlnaW4sIFgtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQWNjZXB0Jyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xuICAgIG5leHQoKTtcbn0pO1xuLy8gYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xucm91dGVyLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG5yb3V0ZXIudXNlKGNvb2tpZVBhcnNlcigpKTtcbnJvdXRlci51c2UoZXhwcmVzcy5qc29uKCkpO1xucm91dGVyLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5yb3V0ZXIucG9zdCgnL2FwaS9yZWdpc3RlcicsIGF1dGhDb250cm9sbGVyLnVzZXJSZWdpc3Rlcik7XG5yb3V0ZXIucG9zdCgnL2FwaS9sb2dpbicsIGF1dGhDb250cm9sbGVyLnVzZXJMb2dpbik7XG5yb3V0ZXIuZ2V0KCcvYXBpL2xvZ291dCcsIGF1dGhDb250cm9sbGVyLnVzZXJMb2dvdXQpO1xucm91dGVyLnBvc3QoJy9hcGkvcmVmcmVzaC10b2tlbicsIGF1dGhDb250cm9sbGVyLnJlZnJlc2hUb2tlbik7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iLCJpbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4uL21vZGVscy91c2VyLm1vZGVsJztcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgeyB2ZXJpZnlVc2VyIH0gZnJvbSAnLi4vbG9hZGVycy9hdXRoL3VzZXJBdXRoJztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbmRvdGVudi5jb25maWcoKTtcbnJvdXRlci51c2UoY29ycygpKTtcbnJvdXRlci51c2UoKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgbmV4dCgpO1xufSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbnJvdXRlci5nZXQoJy9hcGkvZ2V0VXNlcicsIHZlcmlmeVVzZXIsIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKV1QgdmVyaWZpY2F0aW9uIGVycm9yJywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkIEludmFsaWQgVG9rZW4nIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsoZGVjb2RlZFRva2VuLmlkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQgUyByb3V0ZXMnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlciB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgY3VycmVudCB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGdldHRpbmcgY3VycmVudCB1c2VyJyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgIH0pO1xufSk7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iLCJpbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IHsgY29yT3B0aW9ucyB9IGZyb20gJy4uL2NvbmZpZy9jb3JPcHRpb25zJztcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgdXBsb2FkIGZyb20gJy4uL3NlcnZpY2VzL211bHRlci5jb25maWcnO1xuaW1wb3J0IGdldEltYWdlUHJldmlld1VybCBmcm9tICcuLi9jb250cm9sbGVycy9pbWFnZUNvbnRyb2xsZXInO1xuaW1wb3J0IEltYWdlU3RvcmFnZXMgZnJvbSAnLi4vbW9kZWxzL2ltYWdlLm1vZGVsJztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBVc2VycyBmcm9tICcuLi9tb2RlbHMvdXNlci5tb2RlbCc7XG5pbXBvcnQgeyBqd3RFTlYgfSBmcm9tICcuLi9jb25maWcvand0RU5WJztcbmRvdGVudi5jb25maWcoKTtcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG4vLyBFbmFibGUgQ09SUyBmb3IgYWxsIHJvdXRlc1xucm91dGVyLnVzZShjb3JzKGNvck9wdGlvbnMpKTtcbnJvdXRlci51c2UoKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgcmVzLmhlYWRlcignZW5jb2RpbmcnLCAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScpO1xuICAgIG5leHQoKTtcbn0pO1xucm91dGVyLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG5yb3V0ZXIudXNlKGNvb2tpZVBhcnNlcigpKTtcbnJvdXRlci51c2UoZXhwcmVzcy5qc29uKCkpO1xucm91dGVyLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5yb3V0ZXIucG9zdCgnL2FwaS91cGxvYWRJbWFnZScsIHVwbG9hZC5zaW5nbGUoJ2ltYWdlJyksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGaWxlIHVwbG9hZGVkOicsIHJlcS5maWxlKTtcbiAgICAgICAgLy8gTW9kaWZ5IHRoZSBmaWxlIHBhdGggdG8gdGhlIHJlcXVpcmVkIGZvcm1hdFxuICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBgYXNzZXRzL2ltYWdlcy8ke3JlcS5maWxlPy5maWxlbmFtZX1gO1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgY29uc3QgcG9zdF9pZCA9IHBhcnNlSW50KHJlcS5ib2R5LnBvc3RJZCwgMTApO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW1hZ2VSZWNvcmQgPSBhd2FpdCBJbWFnZVN0b3JhZ2VzLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgaW1hZ2VVcmw6IHJlbGF0aXZlUGF0aCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VyX2lkIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgcG9zdF9pZDogcG9zdF9pZCB8fCBudWxsLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghaW1hZ2VSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IGVycm9yOiAnRXJyb3IgY3JlYXRpbmcgaW1hZ2UgcmVjb3JkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ltYWdlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgICAgICAgICAgaW1hZ2VVcmw6IHJlbGF0aXZlUGF0aCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwbG9hZGluZyBpbWFnZTonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufSk7XG5yb3V0ZXIuZ2V0KCcvYXBpL3NlbmRJbWFnZVVybCcsIGdldEltYWdlUHJldmlld1VybCk7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iLCJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCB7IGNyZWF0ZVBvc3QsIGRlbGV0ZUxpa2VkUG9zdCwgZGVsZXRlUG9zdCwgZGVsZXRlU2F2ZWRQb3N0LCBnZXRBbGxQb3N0cywgZ2V0UG9zdEJ5SWQsIGxpa2VQb3N0LCBzYXZlUG9zdCwgdXBkYXRlUG9zdCwgZ2V0SW5maW5pdGVQb3N0cywgc2VhcmNoUG9zdHMsIGdldFVzZXJQb3N0cywgZ2V0UG9wdWxhclBvc3RzLCBnZXRTYXZlZFBvc3RzLCB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL1Bvc3RDb250cm9sbGVyJztcbmltcG9ydCB7IHZlcmlmeVVzZXIgfSBmcm9tICcuLi9sb2FkZXJzL2F1dGgvdXNlckF1dGgnO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbnJvdXRlci51c2UoY29ycygpKTtcbnJvdXRlci51c2UoKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgbmV4dCgpO1xufSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbi8vIENyZWF0ZSBhIG5ldyBwb3N0XG5yb3V0ZXIucG9zdCgnL2FwaS9jcmVhdGVQb3N0JywgY3JlYXRlUG9zdCk7XG4vLyBVcGRhdGUgYSBwb3N0XG5yb3V0ZXIucHV0KCcvYXBpL3VwZGF0ZVBvc3QnLCB1cGRhdGVQb3N0KTtcbi8vIGRlbGV0ZSBhIHBvc3RcbnJvdXRlci5kZWxldGUoJy9hcGkvZGVsZXRlUG9zdCcsIGRlbGV0ZVBvc3QpO1xuLy8gR2V0IFJlY2VudCBQb3N0c1xucm91dGVyLmdldCgnL2FwaS9nZXRBbGxQb3N0cycsIGdldEFsbFBvc3RzKTtcbi8vIEdldCBwb3N0IGJ5IElEXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFBvc3RCeUlkJywgdmVyaWZ5VXNlciwgZ2V0UG9zdEJ5SWQpO1xuLy8gTGlrZSBhIFBvc3RcbnJvdXRlci5wb3N0KCcvYXBpL2xpa2VQb3N0JywgbGlrZVBvc3QpO1xuLy8gU2F2ZSBhIFBvc3RcbnJvdXRlci5wb3N0KCcvYXBpL3NhdmVQb3N0JywgdmVyaWZ5VXNlciwgc2F2ZVBvc3QpO1xuLy8gZ2V0IHNhdmVkIHBvc3RzXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFNhdmVkUG9zdHMnLCB2ZXJpZnlVc2VyLCBnZXRTYXZlZFBvc3RzKTtcbi8vIERlbGV0ZSBhIFBvc3RcbnJvdXRlci5kZWxldGUoJy9hcGkvZGVsZXRlU2F2ZWRQb3N0JywgZGVsZXRlU2F2ZWRQb3N0KTtcbi8vIERlbGV0ZSBhIGxpa2VcbnJvdXRlci5kZWxldGUoJy9hcGkvZGVsZXRlTGlrZVBvc3QnLCBkZWxldGVMaWtlZFBvc3QpO1xuLy8gR2V0IEluZmluaXRlIFBvc3RzXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldEluZmluaXRlUG9zdHMnLCBnZXRJbmZpbml0ZVBvc3RzKTtcbi8vIFNlYXJjaCBQb3N0c1xucm91dGVyLnBvc3QoJy9hcGkvc2VhcmNoUG9zdHMnLCBzZWFyY2hQb3N0cyk7XG4vLyBHZXQgdXNlcidzIHNhdmVkIHBvc3RzXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFVzZXJQb3N0cycsIGdldFVzZXJQb3N0cyk7XG4vLyBHZXQgcG9wdWxhciBwb3N0c1xucm91dGVyLmdldCgnL2FwaS9nZXRQb3B1bGFyUG9zdHMnLCBnZXRQb3B1bGFyUG9zdHMpO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIiwiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBlbnYgfSBmcm9tICcuLi9jb25maWcvaW5kZXgnO1xuaW1wb3J0IGF1dGhSb3V0ZXMgZnJvbSAnLi9hdXRoUm91dGVzJztcbmltcG9ydCBjdXJyZW50VXNlclJvdXRlIGZyb20gJy4vY3VycmVudFVzZXJSb3V0ZSc7XG5pbXBvcnQgdXNlclJvdXRlcyBmcm9tICcuL3VzZXJSb3V0ZXMnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCBwb3N0Um91dGVzIGZyb20gJy4vcG9zdFJvdXRlcyc7XG5pbXBvcnQgaW1hZ2VSb3V0ZXMgZnJvbSAnLi9pbWFnZVJvdXRlcyc7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xucm91dGVyLnVzZSgoX3JlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICBuZXh0KCk7XG59KTtcbi8vIGFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xucm91dGVyLnVzZShjb29raWVQYXJzZXIoKSk7XG5yb3V0ZXIudXNlKGV4cHJlc3MuanNvbigpKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci5qc29uKCkpO1xucm91dGVyLmdldCgnLycsIChfcmVxLCByZXMpID0+IHtcbiAgICByZXMuc2VuZCh7XG4gICAgICAgIHN0YXR1czogYCR7ZW52Lk5PREVfRU5WfWAsXG4gICAgICAgIG1lc3NhZ2U6IGAke2Vudi5SRVNQT05TRV9TVEFUVVN9YCxcbiAgICAgICAgbmFtZTogYCR7ZW52LkFQUF9OQU1FfWAsXG4gICAgfSk7XG59KTtcbnJvdXRlci51c2UoYXV0aFJvdXRlcyk7XG5yb3V0ZXIudXNlKHBvc3RSb3V0ZXMpO1xucm91dGVyLnVzZShpbWFnZVJvdXRlcyk7XG5yb3V0ZXIudXNlKHVzZXJSb3V0ZXMpO1xucm91dGVyLnVzZShjdXJyZW50VXNlclJvdXRlKTtcbmV4cG9ydCB7IHJvdXRlciB9O1xuIiwiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgeyBnZXRBbGxVc2VycywgZ2V0VXNlckJ5SUQsIHVwZGF0ZVVzZXIsIH0gZnJvbSAnLi4vY29udHJvbGxlcnMvdXNlckNvbnRyb2xsZXInO1xuaW1wb3J0IHsgdmVyaWZ5VXNlciB9IGZyb20gJy4uL2xvYWRlcnMvYXV0aC91c2VyQXV0aCc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBqd3RFTlYgfSBmcm9tICcuLi9jb25maWcvand0RU5WJztcbmltcG9ydCBVc2VycyBmcm9tICcuLi9tb2RlbHMvdXNlci5tb2RlbCc7XG5pbXBvcnQgTGlrZXMgZnJvbSAnLi4vbW9kZWxzL2xpa2VQb3N0Lm1vZGVsJztcbmltcG9ydCBQb3N0cyBmcm9tICcuLi9tb2RlbHMvcG9zdC5tb2RlbCc7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xucm91dGVyLnVzZShjb3JzKCkpO1xucm91dGVyLnVzZSgoX3JlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICBuZXh0KCk7XG59KTtcbnJvdXRlci51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xucm91dGVyLnVzZShjb29raWVQYXJzZXIoKSk7XG5yb3V0ZXIudXNlKGV4cHJlc3MuanNvbigpKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuLy8gVXNlciBBdXRoZW50aWNhdGlvbiBNaWRkbGV3YXJlXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldEN1cnJlbnRVc2VyJywgdmVyaWZ5VXNlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKV1QgdmVyaWZpY2F0aW9uIGVycm9yJywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBJbnZhbGlkIFRva2VuJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQgUyByb3V0ZXMnIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0cy5nZXRQb3N0QnlSZWZlcmVuY2VJRCh1c2VyX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlckxpa2VzID0gYXdhaXQgTGlrZXMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKCF1c2VyTGlrZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCBTIHJvdXRlcycgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VyLCBwb3N0LCB1c2VyTGlrZXMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgIH1cbn0pO1xuLy8gR2V0IGFsbCB1c2Vyc1xucm91dGVyLmdldCgnL2FwaS9nZXRBbGxVc2VycycsIGdldEFsbFVzZXJzKTtcbi8vIEdldCB1c2VyIGJ5IElEXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFVzZXJCeUlEJywgZ2V0VXNlckJ5SUQpO1xuLy8gVXBkYXRlIHVzZXIgYnkgSURcbnJvdXRlci5nZXQoJy9hcGkvdXBkYXRlVXNlcicsIHVwZGF0ZVVzZXIpO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIiwiaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyB2YWxpZGF0ZU1JTUVUeXBlIH0gZnJvbSAndmFsaWRhdGUtaW1hZ2UtdHlwZSc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuLy8gRGVmaW5lIGN1c3RvbSBkZXN0aW5hdGlvbiBkaXJlY3RvcnlcbmNvbnN0IHVwbG9hZERpciA9ICcvaG9tZS9iYWJzZGV2c3lzL2FwcFYtMS9wdWJsaWMvYXNzZXRzL2ltYWdlcyc7XG4vLyBFbnN1cmUgdGhlIGRpcmVjdG9yeSBleGlzdHNcbmlmICghZnMuZXhpc3RzU3luYyh1cGxvYWREaXIpKSB7XG4gICAgZnMubWtkaXJTeW5jKHVwbG9hZERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG59XG5jb25zdCBzdG9yYWdlID0gbXVsdGVyLmRpc2tTdG9yYWdlKHtcbiAgICBkZXN0aW5hdGlvbjogZnVuY3Rpb24gKF9yZXEsIF9maWxlLCBjYikge1xuICAgICAgICBjYihudWxsLCB1cGxvYWREaXIpO1xuICAgIH0sXG4gICAgZmlsZW5hbWU6IGZ1bmN0aW9uIChfcmVxLCBmaWxlLCBjYikge1xuICAgICAgICBjb25zdCB1bmlxdWVTdWZmaXggPSBEYXRlLm5vdygpICsgJy0nICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMWU5KTtcbiAgICAgICAgY2IobnVsbCwgZmlsZS5maWVsZG5hbWUgKyAnLScgKyB1bmlxdWVTdWZmaXggKyBwYXRoLmV4dG5hbWUoZmlsZS5vcmlnaW5hbG5hbWUpKTtcbiAgICB9LFxufSk7XG4vLyBDaGVjayBmaWxlIHR5cGVcbmNvbnN0IHZhbGlkYXRlTWltZVR5cGUgPSBhc3luYyAoZmlsZSwgY2IpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gYXdhaXQgdmFsaWRhdGVNSU1FVHlwZShmaWxlLnBhdGgsIHtcbiAgICAgICAgICAgIG9yaWdpbmFsRmlsZW5hbWU6IGZpbGUub3JpZ2luYWxuYW1lLFxuICAgICAgICAgICAgYWxsb3dNaW1lVHlwZXM6IFsnaW1hZ2UvanBlZycsICdpbWFnZS9wbmcnLCAnaW1hZ2Uvc3ZnK3htbCddLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCF2YWxpZGF0aW9uUmVzdWx0Lm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gY2IobmV3IEVycm9yKCdJbnZhbGlkIGZpbGUgdHlwZScpKTtcbiAgICAgICAgfVxuICAgICAgICBjYihudWxsLCB0cnVlKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZhbGlkYXRpbmcgZmlsZSB0eXBlOicsIGVycm9yKTtcbiAgICAgICAgY2IobmV3IEVycm9yKCdFcnJvciB2YWxpZGF0aW5nIGZpbGUgdHlwZScpKTtcbiAgICB9XG59O1xuY29uc3QgdXBsb2FkID0gbXVsdGVyKHtcbiAgICBzdG9yYWdlOiBzdG9yYWdlLFxuICAgIGxpbWl0czogeyBmaWxlU2l6ZTogMTAwMDAwMDAgfSxcbiAgICBmaWxlRmlsdGVyOiBmdW5jdGlvbiAoX3JlcSwgZmlsZSwgY2IpIHtcbiAgICAgICAgY29uc3QgZmlsZXR5cGVzID0gL2pwZWd8anBnfHBuZ3xzdmcvO1xuICAgICAgICBjb25zdCBtaW1ldHlwZSA9IGZpbGV0eXBlcy50ZXN0KGZpbGUubWltZXR5cGUpO1xuICAgICAgICBjb25zdCBleHRuYW1lID0gZmlsZXR5cGVzLnRlc3QocGF0aC5leHRuYW1lKGZpbGUub3JpZ2luYWxuYW1lKS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgaWYgKG1pbWV0eXBlICYmIGV4dG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBjYihudWxsLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB2YWxpZGF0ZU1pbWVUeXBlKGZpbGUucGF0aCwgY2IpO1xuICAgIH0sXG59KTtcbmV4cG9ydCBkZWZhdWx0IHVwbG9hZDtcbiIsImltcG9ydCB7IFBlcmZvcm1hbmNlT2JzZXJ2ZXIsIHBlcmZvcm1hbmNlIH0gZnJvbSAnbm9kZTpwZXJmX2hvb2tzJztcbi8vIFNldCB1cCB0aGUgUGVyZm9ybWFuY2VPYnNlcnZlclxuY29uc3Qgb2JzID0gbmV3IFBlcmZvcm1hbmNlT2JzZXJ2ZXIoaXRlbXMgPT4ge1xuICAgIGl0ZW1zLmdldEVudHJpZXMoKS5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYCR7ZW50cnkubmFtZX06ICR7ZW50cnkuZHVyYXRpb259bXNgKTtcbiAgICB9KTtcbiAgICBwZXJmb3JtYW5jZS5jbGVhck1hcmtzKCk7XG59KTtcbm9icy5vYnNlcnZlKHsgdHlwZTogJ21lYXN1cmUnIH0pO1xuLy8gU2ltdWxhdGUgdGhlIGxvYWRlciBmdW5jdGlvblxuYXN5bmMgZnVuY3Rpb24gbG9hZGVyKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIE1hcmsgdGhlIHN0YXJ0IG9mIHRoZSBsb2FkZXJcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnTG9hZGVyIFN0YXJ0Jywge1xuICAgICAgICAgICAgZGV0YWlsOiAnTG9hZGVyIHN0YXJ0ZWQnLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUGVyZm9ybSBUYXNrIDFcbiAgICAgICAgYXdhaXQgZG9Tb21lTG9uZ1J1bm5pbmdQcm9jZXNzKCk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ1Rhc2sgMSBFbmQnLCB7XG4gICAgICAgICAgICBkZXRhaWw6ICdUYXNrIDEgY29tcGxldGVkJyxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFBlcmZvcm0gVGFzayAyXG4gICAgICAgIGF3YWl0IGRvU29tZUxvbmdSdW5uaW5nUHJvY2VzcygpO1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdUYXNrIDIgRW5kJywge1xuICAgICAgICAgICAgZGV0YWlsOiAnVGFzayAyIGNvbXBsZXRlZCcsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBsb2dpbk1lYXN1cmUgPSBwZXJmb3JtYW5jZS5tZWFzdXJlKCdUYXNrIDIgRHVyYXRpb24nLCAnVGFzayAxIEVuZCcsICdUYXNrIDIgRW5kJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGxvZ2luTWVhc3VyZS5kdXJhdGlvbik7XG4gICAgICAgIC8vIEVuZCBvZiB0aGUgbG9hZGVyXG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ0xvYWRlciBFbmQnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZSgnVG90YWwgTG9hZGVyIER1cmF0aW9uJywgJ0xvYWRlciBTdGFydCcsICdMb2FkZXIgRW5kJyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBsb2FkZXI6JywgZXJyb3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRvU29tZUxvbmdSdW5uaW5nUHJvY2VzcygpIHtcbiAgICAvLyBSZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgYSB0aW1lb3V0IHRvIHNpbXVsYXRlIGEgbG9uZy1ydW5uaW5nIHByb2Nlc3NcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9LCAxMDAwKTsgLy8gMSBzZWNvbmQgdGltZW91dCB0byBzaW11bGF0ZSB0aGUgcHJvY2VzcyBkdXJhdGlvblxuICAgIH0pO1xufVxuZXhwb3J0IGRlZmF1bHQgbG9hZGVyO1xuIiwiaW1wb3J0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfSBmcm9tICcuLi9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uLmpzJztcbmltcG9ydCBJbWFnZVN0b3JhZ2VzIGZyb20gJy4uL21vZGVscy9pbWFnZS5tb2RlbC5qcyc7XG4vLyBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRydW5jYXRlVGFibGVzKCkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgc2VxdWVsaXplLnRyYW5zYWN0aW9uKCk7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gYXdhaXQgVXNlcnMuZGVzdHJveSh7IHdoZXJlOiB7fSwgdHJ1bmNhdGU6IHRydWUgfSk7XG4gICAgICAgIC8vIGF3YWl0IFVzZXJSZWdpc3RyYXRpb24uZGVzdHJveSh7IHdoZXJlOiB7fSwgdHJ1bmNhdGU6IHRydWUgfSk7XG4gICAgICAgIGF3YWl0IEltYWdlU3RvcmFnZXMudHJ1bmNhdGUoeyB0cmFuc2FjdGlvbiB9KTtcbiAgICAgICAgLy8gSWYgZXZlcnl0aGluZyBpcyBzdWNjZXNzZnVsLCBjb21taXQgdGhlIHRyYW5zYWN0aW9uXG4gICAgICAgIGF3YWl0IHRyYW5zYWN0aW9uLmNvbW1pdCgpO1xuICAgICAgICBjb25zb2xlLmxvZygnVGFibGVzIGhhdmUgYmVlbiB0cnVuY2F0ZWQuLi4nKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYW4gZXJyb3IsIHJvbGwgYmFjayB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgYXdhaXQgdHJhbnNhY3Rpb24ucm9sbGJhY2soKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHJ1bmNhdGluZyB0YWJsZXM6JywgZXJyb3IpO1xuICAgIH1cbn1cbiIsIi8vIEltcG9ydCBuZWNlc3NhcnkgbW9kdWxlc1xuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuLy8gRnVuY3Rpb24gdG8gZ2VuZXJhdGUgYSBoYXNoIGZyb20gYSBzdHJpbmdcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUhhc2goc3RyKSB7XG4gICAgcmV0dXJuIGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKS51cGRhdGUoc3RyKS5kaWdlc3QoJ2hleCcpO1xufVxuLy8gRnVuY3Rpb24gdG8gZ2VuZXJhdGUgYW4gYXZhdGFyIFVSTCBiYXNlZCBvbiB1c2VyIGluaXRpYWxzXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVBdmF0YXJVcmwobmFtZSkge1xuICAgIC8vIEV4dHJhY3QgdGhlIGluaXRpYWxzIGZyb20gdGhlIHVzZXIncyBuYW1lXG4gICAgY29uc3QgaW5pdGlhbHMgPSBuYW1lXG4gICAgICAgIC5zcGxpdCgnICcpXG4gICAgICAgIC5tYXAocGFydCA9PiBwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpKVxuICAgICAgICAuam9pbignJyk7XG4gICAgLy8gVXNlIGEgc2VydmljZSB0aGF0IGdlbmVyYXRlcyBhdmF0YXJzIHdpdGggaW5pdGlhbHNcbiAgICBjb25zdCBzaXplID0gMjAwOyAvLyBTcGVjaWZ5IHRoZSBkZXNpcmVkIHNpemUgb2YgdGhlIGF2YXRhclxuICAgIGNvbnN0IGJhY2tncm91bmRDb2xvciA9ICdyYW5kb20nOyAvLyBVc2UgYSByYW5kb20gYmFja2dyb3VuZCBjb2xvclxuICAgIGNvbnN0IHRleHRDb2xvciA9ICdmZmYnOyAvLyBVc2Ugd2hpdGUgdGV4dCBjb2xvclxuICAgIGNvbnN0IGJhc2VVcmwgPSBgaHR0cHM6Ly91aS1hdmF0YXJzLmNvbS9hcGkvP25hbWU9JHtlbmNvZGVVUklDb21wb25lbnQoaW5pdGlhbHMpfSZzaXplPSR7c2l6ZX0mYmFja2dyb3VuZD0ke2JhY2tncm91bmRDb2xvcn0mY29sb3I9JHt0ZXh0Q29sb3J9YDtcbiAgICByZXR1cm4gYmFzZVVybDtcbn1cbiIsIi8vIHNyYy9lcnJvckhhbmRsZXIudHNcbmltcG9ydCBwcm9jZXNzIGZyb20gJ25vZGU6cHJvY2Vzcyc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vY29uZmlnL2luZGV4JztcbmV4cG9ydCBjb25zdCBoYW5kbGVFcnJvciA9IChlcnIsIHJlcykgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgIC8vIEluaXRpYWxpemUgZXJyb3JzIG9iamVjdFxuICAgIGxldCBlcnJvcnMgPSB7fTtcbiAgICAvLyBIYW5kbGUgc3BlY2lmaWMgZXJyb3JzIGNhc2VzXG4gICAgaWYgKGVyci5tZXNzYWdlLmluY2x1ZGVzKCdOZXcgVXNlciB2YWxpZGF0aW9uIGVycm9yJykpIHtcbiAgICAgICAgZXJyb3JzID0ge1xuICAgICAgICAgICAgbmFtZTogJ05hbWUgaXMgcmVxdWlyZWQnLFxuICAgICAgICAgICAgdXNlcm5hbWU6ICd1c2VybmFtZSBpcyByZXF1aXJlZCcsXG4gICAgICAgICAgICBlbWFpbDogJ2VtYWlsIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQgaXMgcmVxdWlyZWQnLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ1VzZXJSZWdpc3RyYXRpb25zLmVtYWlsJykpIHtcbiAgICAgICAgZXJyb3JzLmVtYWlsID0gJ0VtYWlsIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCc7XG4gICAgfVxuICAgIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygnaW5jb3JyZWN0IGVtYWlsJykpIHtcbiAgICAgICAgZXJyb3JzLmVtYWlsID0gJ2VtYWlsIGlzIG5vdCByZWdpc3RlcmVkJztcbiAgICB9XG4gICAgaWYgKGVyci5tZXNzYWdlLmluY2x1ZGVzKCdJbmNvcnJlY3QgcGFzc3dvcmQnKSkge1xuICAgICAgICBlcnJvcnMucGFzc3dvcmQgPSAncGFzc3dvcmQgaXMgaW5jb3JyZWN0JztcbiAgICB9XG4gICAgLy8gSGFuZGxlIFNlcXVlbGl6ZSB2YWxpZGF0aW9uIGVycm9yc1xuICAgIGlmIChlcnIubmFtZSA9PT0gJ1NlcXVlbGl6ZVZhbGlkYXRpb25FcnJvcicgJiYgZXJyLmVycm9yKSB7XG4gICAgICAgIGVycm9ycyA9IGVyci5lcnJvci5yZWR1Y2UoKGFjYywgZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGFjY1tlcnJvci5wYXRoXSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgfVxuICAgIHJlcy5zdGF0dXMoZXJyLmNvZGUgfHwgNTAwKS5qc29uKHsgZXJyb3JzIH0pO1xufTtcbi8vIEZ1bmN0aW9uIHRvIGxvZyBlcnJvcnMgdG8gYSBmaWxlXG5mdW5jdGlvbiBsb2dFcnJvclRvRmlsZShlcnIpIHtcbiAgICBjb25zdCBsb2cgPSBgJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9IC0gJHtlcnIubWVzc2FnZX1cXG4ke2Vyci5zdGFja31cXG5gO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKCdlcnJvci5sb2cnLCBsb2cpO1xufVxuY29uc3QgdW5oYW5kbGVkUmVqZWN0aW9ucyA9IG5ldyBNYXAoKTtcbnByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIChyZWFzb24sIHByb21pc2UpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgUmVqZWN0aW9uIGF0OicsIHByb21pc2UsICdyZWFzb246JywgcmVhc29uKTtcbiAgICB1bmhhbmRsZWRSZWplY3Rpb25zLnNldChwcm9taXNlLCByZWFzb24pO1xufSk7XG5wcm9jZXNzLm9uKCdyZWplY3Rpb25IYW5kbGVkJywgcHJvbWlzZSA9PiB7XG4gICAgdW5oYW5kbGVkUmVqZWN0aW9ucy5kZWxldGUocHJvbWlzZSk7XG59KTtcbi8vIEdsb2JhbCBlcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlIGZvciBFeHByZXNzXG5leHBvcnQgZnVuY3Rpb24gZ2xvYmFsRXJyb3JIYW5kbGVyKGVyciwgX3JlcSwgcmVzLCBuZXh0KSB7XG4gICAgbG9nRXJyb3JUb0ZpbGUoZXJyKTtcbiAgICAvLyBTZW5kIGdlbmVyaWMgZXJyb3IgcmVzcG9uc2VcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJyxcbiAgICB9KTtcbiAgICBuZXh0KGVycik7XG59XG4vLyBDYXRjaCB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25zXG5wcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gICAgbG9nRXJyb3JUb0ZpbGUocmVhc29uKTtcbiAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgUmVqZWN0aW9uIGF0OicsIHByb21pc2UsICdyZWFzb246JywgcmVhc29uKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG59KTtcbi8vIENhdGNoIHVuY2F1Z2h0IGV4Y2VwdGlvbnNcbnByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uJywgKGVycikgPT4ge1xuICAgIGxvZ0Vycm9yVG9GaWxlKGVycik7XG4gICAgY29uc29sZS5lcnJvcignVW5jYXVnaHQgRXhjZXB0aW9uOicsIGVycik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xufSk7XG5wcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIChlcnIpID0+IHtcbiAgICBmcy53cml0ZVN5bmMocHJvY2Vzcy5zdGRlcnIuZmQsIGBDYXVnaHQgZXhjZXB0aW9uOiAke2Vycn1cXG5gICsgYEV4Y2VwdGlvbiBPcmlnaW46ICR7b3JpZ2lufVxcbmApO1xufSk7XG5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnVGhpcyB3aWxsIHN0aWxsIHJ1bi4nKTtcbn0sIGVudi5FUlJPUl9USU1FT1VUKTtcbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBnbG9iYWxFcnJvckhhbmRsZXIsXG4gICAgaGFuZGxlRXJyb3IsXG59O1xuIl0sIm5hbWVzIjpbImNvcnNTY2hlbWFFTlYiLCJsb2FkIiwiQ09SU19PUklHSU4iLCJTdHJpbmciLCJDT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVMiLCJOdW1iZXIiLCJDT1JTX0NSRURFTlRJQUxTIiwiQm9vbGVhbiIsIkNPUlNfTUVUSE9EUyIsIm9rIiwiY29yc0VOViIsImNvck9wdGlvbnMiLCJvcmlnaW4iLCJtZXRob2RzIiwiY3JlZGVudGlhbHMiLCJvcHRpb25zU3VjY2Vzc1N0YXR1cyIsImRhdGFTY2hlbWFFTlYiLCJEQl9IT1NUIiwiREJfUE9SVCIsIkRCX1VTRVIiLCJEQl9QQVNTIiwiREJfTkFNRSIsIkRCX1NPQ0tFVF9QQVRIIiwiREJfU09DS0VUX1RJTUVPVVQiLCJEQl9DT01QUkVTUyIsIkRCX0RFQlVHIiwiREJfUEVSTUlUX0xPQ0FMX0lORklMRSIsIkRCX1RSQUNFIiwiREJfQ0hFQ0tfRFVQTElDQVRFIiwiREJfU1NMIiwiREJfU1NMX0NBIiwiREJfU1NMX0tFWSIsIkRCX1NTTF9DRVJUIiwiREJfQ09OTkVDVElPTl9BVFRSSUJVVEVTIiwiREJfQ09OTkVDVElPTl9USU1FT1VUIiwiZGF0YWJhc2VFTlYiLCJqd3RTY2hlbWFFTlYiLCJKV1RfU0VDUkVUIiwiSldUX0VYUElSRVNfSU4iLCJKV1RfUkVGUkVTSF9TRUNSRVQiLCJKV1RfUkVGUkVTSF9FWFBJUkVTX0lOIiwiSldUX1JFRlJFU0hfTUFYX0FHRSIsIkpXVF9BTEdPUklUSE0iLCJKV1RfSVNTVUVSIiwiSldUX01BWF9BR0UiLCJKV1RfSFRUUF9PTkxZIiwiSldUX1NBTUVfU0lURSIsIkpXVF9DT09LSUVfTkFNRSIsIkpXVF9TRUNVUkUiLCJqd3RFTlYiLCJjcmVhdGVQb3N0IiwiYXN5bmMiLCJyZXEiLCJyZXMiLCJjYXB0aW9uIiwibG9jYXRpb24iLCJ0YWdzIiwiYm9keSIsInRva2VuIiwiY29va2llcyIsImp3dCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZXJyIiwiZGVjb2RlZFRva2VuIiwiY29uc29sZSIsImxvZyIsInVzZXJfaWQiLCJpZCIsInVzZXIiLCJmaW5kQnlQayIsImltYWdlUmVjb3JkIiwiZmluZEltYWdlQnlSZWZlcmVuY2VLZXkiLCJuZXdQb3N0IiwiY3JlYXRlIiwiaW1hZ2VVUkwiLCJpbWFnZVVybCIsImNyZWF0ZWRfQXQiLCJEYXRlIiwiY3JlYXRvcl9JZCIsImVycm9yIiwiZGVsZXRlRmlsZSIsIl9yZXEiLCJpbWFnZSIsImZpbmRPbmUiLCJ3aGVyZSIsImRlc3Ryb3kiLCJ1cGRhdGVQb3N0IiwibmV3SW1hZ2VVcmwiLCJwb3N0X2lkIiwicGFyc2VJbnQiLCJxdWVyeSIsInBvc3QiLCJwcmV2aWV3SW1hZ2VVcmwiLCJ1cGRhdGVkUG9zdCIsInVwZGF0ZSIsImdldEFsbFBvc3RzIiwicG9zdHMiLCJmaW5kQWxsIiwiaW5jbHVkZSIsIm1vZGVsIiwiYXMiLCJhdHRyaWJ1dGVzIiwibGlrZVBvc3QiLCJpc05hTiIsIm5ld0xpa2UiLCJjcmVhdGVMaWtlIiwibGlrZXNfQ291bnQiLCJsaWtlc0NvdW50IiwibGlrZSIsImdldFBvc3RCeUlkIiwicmVxdWVzdGVkVXNlcklkIiwicmVxdWVzdGVkVXNlciIsImRlbGV0ZUxpa2VkUG9zdCIsImV4aXN0aW5nTGlrZSIsImN1cnJlbnRMaWtlcyIsInNhdmUiLCJzYXZlUG9zdCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3BsaXQiLCJuZXdTYXZlIiwiY3JlYXRlU2F2ZSIsInNhdmVEYXRlIiwiZGVsZXRlU2F2ZWRQb3N0IiwiZXhpc3RpbmdTYXZlIiwiZ2V0U2F2ZWRQb3N0cyIsInNhdmVkUG9zdHMiLCJkZWxldGVQb3N0IiwiZ2V0SW5maW5pdGVQb3N0cyIsInBhZ2UiLCJsaW1pdCIsIm9mZnNldCIsImZpbmRBbmRDb3VudEFsbCIsIm9yZGVyIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwiY291bnQiLCJ0b3RhbENvdW50Iiwic2VhcmNoUG9zdHMiLCJzZWFyY2hWYWx1ZSIsIk9wIiwib3IiLCJnZXRVc2VyUG9zdHMiLCJnZXRQb3B1bGFyUG9zdHMiLCJwb3B1bGFyUG9zdHMiLCJ1c2VyUmVnaXN0ZXIiLCJuYW1lIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiRXJyb3IiLCJuZXdVc2VyIiwiaGFzaGVkcGFzc3dvcmQiLCJjcmVhdGVkQXQiLCJjb29raWUiLCJodHRwT25seSIsIm1heEFnZSIsInNlY3VyZSIsInNhbWVTaXRlIiwidXNlckxvZ2luIiwibG9naW5Vc2VyIiwicmVmcmVzaFRva2VuIiwic2V0SGVhZGVyIiwibG9jYWxzIiwidXNlckxvZ291dCIsImFjY2Vzc1Rva2VuIiwidXNlcklkIiwibmV3VG9rZW4iLCJleHBpcmVzSW4iLCJhbGdvcml0aG0iLCJpc3N1ZXIiLCJwcm9jZXNzIiwiZW52IiwiZ2V0QWxsVXNlcnMiLCJ1c2VycyIsImdldFVzZXJCeUlEIiwiZ2V0UG9zdEJ5UmVmZXJlbmNlSUQiLCJ1c2VyTGlrZXMiLCJ1cGRhdGVVc2VyIiwicGFyYW1zIiwiYWZmZWN0ZWRDb3VudCIsInVwZGF0ZWRVc2VycyIsImxpbWl0ZXIiLCJ3aW5kb3dNcyIsIlJBUkVfTElNSVRfV0lORE9XX01TIiwibWF4IiwiTUFYIiwiUkFSRV9MSU1JVF9NRVNTQUdFIiwic3RhdHVzQ29kZSIsIlJBUkVfTElNSVRfQ09ERSIsImhhbmRsZXIiLCJrZXlHZW5lcmF0b3IiLCJpcCIsInJlcGxhY2UiLCJzZW5kIiwic29ja2V0IiwicmVtb3RlQWRkcmVzcyIsImp3dEdlbmVyYXRvciIsInBheWxvYWQiLCJqd3RSZWZyZXNoIiwidmVyaWZ5VXNlciIsIm5leHQiLCJ3YWl0Rm9yREIiLCJzZXF1ZWxpemUiLCJhdHRlbXB0cyIsImF1dGhlbnRpY2F0ZSIsInN5bmMiLCJmb3JjZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImRiQ29uZmlnIiwiRGlhbGVjdCIsImhvc3QiLCJkYXRhYmFzZSIsInNvY2tldFBhdGgiLCJzb2NrZXRUaW1lb3V0IiwiY29tcHJlc3MiLCJkZWJ1ZyIsInBlcm1pdExvY2FsSW5maWxlIiwidHJhY2UiLCJjaGVja0R1cGxpY2F0ZSIsImNvbm5lY3RBdHRyaWJ1dGVzIiwiSlNPTiIsInBhcnNlIiwiY29ubmVjdGlvblRpbWVvdXQiLCJwb3J0Iiwic3NsIiwiZGlhbGVjdE9wdGlvbnMiLCJjYSIsInRvU3RyaW5nIiwia2V5IiwiY2VydCIsImNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIiwiU2VxdWVsaXplIiwiZGlhbGVjdCIsIl9fZGlybmFtZSIsImRpcm5hbWUiLCJmaWxlVVJMVG9QYXRoIiwiTWFyaWFEYkRpYWxlY3QiLCJtb2RlbHMiLCJpbXBvcnRNb2RlbHMiLCJhcHAiLCJnZXQiLCJzZW5kU3RhdHVzIiwiZW5kIiwidXNlIiwiaGVhZGVyIiwibWV0aG9kIiwiZXh0ZW5kZWQiLCJUcnVzdF9Qcm94eSIsIlRSVVNUX1BST1hZIiwibnVtYmVyT2ZQcm94aWVzIiwiTlVNQkVSX09GX1BST1hJRVMiLCJzZXQiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJjb250ZW50U2VjdXJpdHlQb2xpY3kiLCJNT1JHQU4iLCJJbWFnZVN0b3JhZ2VzIiwiTW9kZWwiLCJmaW5kSW1hZ2VCeUlkIiwidGhpcyIsInZhbHVlIiwiaW5pdCIsInR5cGUiLCJEYXRhVHlwZXMiLCJJTlRFR0VSIiwicHJpbWFyeUtleSIsImF1dG9JbmNyZW1lbnQiLCJhbGxvd051bGwiLCJTVFJJTkciLCJyZWZlcmVuY2VzIiwiREFURSIsImRlZmF1bHRWYWx1ZSIsIk5PVyIsIm1vZGVsTmFtZSIsInRpbWVzdGFtcHMiLCJhZnRlckNyZWF0ZSIsImhhc01hbnkiLCJmb3JlaWduS2V5Iiwib25EZWxldGUiLCJvblVwZGF0ZSIsImJlbG9uZ3NUbyIsInRoZW4iLCJjYXRjaCIsIkxpa2VzIiwiZmluZExpa2VCeUlkIiwiZmluZExpa2VCeVJlZmVyZW5jZUtleSIsImZpbmRBbGxMaWtlc0J5UmVmZXJlbmNlS2V5IiwiZGVsZXRlTGlrZUJ5UmVmZXJlbmNlS2V5IiwiZnJlZXplVGFibGVOYW1lIiwiUG9zdHMiLCJ1cGRhdGVkUG9zdHMiLCJyZXR1cm5pbmciLCJnZXRQb3N0QnlJRCIsImdldFNhdmVkUG9zdCIsIlNhdmVzIiwiY2hlY2tJZlNhdmVkIiwidGFibGVOYW1lIiwidGFyZ2V0S2V5IiwiVXNlcnMiLCJmaXJzdE5hbWUiLCJ2YWxpZGF0ZSIsIm5vdEVtcHR5IiwibGFzdE5hbWUiLCJ1bmlxdWUiLCJpcyIsImxlbiIsImlzRW1haWwiLCJiaW8iLCJqb2luIiwiYXZhdGFyVXJsIiwicHJvZmlsZVBpYyIsImxhYmVsIiwibGFzdF9hY3Rpdml0eSIsInVwZGF0ZWRfYXQiLCJVc2VyUmVnaXN0cmF0aW9uSUQiLCJVVUlEIiwidXBkYXRlZEF0IiwiVXNlclJlZ2lzdHJhdGlvbiIsImxvZ291dFVzZXIiLCJyZXNldFBhc3N3b3JkIiwiYmVmb3JlQ3JlYXRlIiwic2FsdCIsImhhc2hlZFBhc3N3b3JkIiwic3BhY2VJbmRleCIsImxhc3RJbmRleE9mIiwiZmlyc3RfTmFtZSIsInNsaWNlIiwiYXZhdGFyIiwidXBzZXJ0Iiwicm91dGVyIiwic2luZ2xlIiwiZmlsZSIsInJlbGF0aXZlUGF0aCIsImZpbGVuYW1lIiwicG9zdElkIiwicHV0IiwiZGVsZXRlIiwiTk9ERV9FTlYiLCJSRVNQT05TRV9TVEFUVVMiLCJBUFBfTkFNRSIsInVwbG9hZERpciIsInJlY3Vyc2l2ZSIsInN0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsIl9maWxlIiwiY2IiLCJ1bmlxdWVTdWZmaXgiLCJub3ciLCJyb3VuZCIsInJhbmRvbSIsImZpZWxkbmFtZSIsIm9yaWdpbmFsbmFtZSIsImxpbWl0cyIsImZpbGVTaXplIiwiZmlsZUZpbHRlciIsImZpbGV0eXBlcyIsIm1pbWV0eXBlIiwidGVzdCIsImV4dG5hbWUiLCJ0b0xvd2VyQ2FzZSIsInZhbGlkYXRlTUlNRVR5cGUiLCJwYXRoIiwib3JpZ2luYWxGaWxlbmFtZSIsImFsbG93TWltZVR5cGVzIiwidmFsaWRhdGVNaW1lVHlwZSIsImRvU29tZUxvbmdSdW5uaW5nUHJvY2VzcyIsIlBlcmZvcm1hbmNlT2JzZXJ2ZXIiLCJpdGVtcyIsImdldEVudHJpZXMiLCJmb3JFYWNoIiwiZW50cnkiLCJkdXJhdGlvbiIsInBlcmZvcm1hbmNlIiwiY2xlYXJNYXJrcyIsIm9ic2VydmUiLCJtYXJrIiwiZGV0YWlsIiwibG9naW5NZWFzdXJlIiwibWVhc3VyZSIsInRydW5jYXRlVGFibGVzIiwidHJhbnNhY3Rpb24iLCJ0cnVuY2F0ZSIsImNvbW1pdCIsInJvbGxiYWNrIiwiZ2VuZXJhdGVBdmF0YXJVcmwiLCJpbml0aWFscyIsIm1hcCIsInBhcnQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImhhbmRsZUVycm9yIiwiZXJyb3JzIiwiaW5jbHVkZXMiLCJyZWR1Y2UiLCJhY2MiLCJjb2RlIiwibG9nRXJyb3JUb0ZpbGUiLCJ0b0lTT1N0cmluZyIsInN0YWNrIiwidW5oYW5kbGVkUmVqZWN0aW9ucyIsIk1hcCIsImdsb2JhbEVycm9ySGFuZGxlciIsInJlYXNvbiIsInByb21pc2UiLCJmZCIsIkVSUk9SX1RJTUVPVVQiXSwic291cmNlUm9vdCI6IiJ9