"use strict";exports.id=545,exports.ids=[545],exports.modules={1976:(e,s,t)=>{t.d(s,{v:()=>l});var r=t(2613);const a=(0,t(7546).load)({CORS_ORIGIN:String,CORS_OPTIONS_SUCCESS_STATUS:Number,CORS_CREDENTIALS:Boolean,CORS_METHODS:String}),{CORS_ORIGIN:o,CORS_OPTIONS_SUCCESS_STATUS:n,CORS_CREDENTIALS:i,CORS_METHODS:c}=a;r.strict.ok(o,"CORS origin should be present"),r.strict.ok(n,"CORS options success status should be present"),r.strict.ok(i,"CORS credentials should be present"),r.strict.ok(c,"CORS methods should be present");const d={CORS_ORIGIN:o,CORS_OPTIONS_SUCCESS_STATUS:n,CORS_CREDENTIALS:i,CORS_METHODS:c};t(818).config();const l={origin:d.CORS_ORIGIN,methods:d.CORS_METHODS,credentials:d.CORS_CREDENTIALS,optionsSuccessStatus:d.CORS_OPTIONS_SUCCESS_STATUS}},3085:(e,s,t)=>{t.d(s,{L:()=>A});var r=t(2613);const a=(0,t(7546).load)({DB_HOST:String,DB_PORT:Number,DB_USER:String,DB_PASS:String,DB_NAME:String,DB_SOCKET_PATH:String,DB_SOCKET_TIMEOUT:Number,DB_COMPRESS:Boolean,DB_DEBUG:Boolean,DB_PERMIT_LOCAL_INFILE:Boolean,DB_TRACE:Boolean,DB_CHECK_DUPLICATE:Boolean,DB_SSL:Boolean,DB_SSL_CA:String,DB_SSL_KEY:String,DB_SSL_CERT:String,DB_CONNECTION_ATTRIBUTES:String,DB_CONNECTION_TIMEOUT:Number}),{DB_HOST:o,DB_PORT:n,DB_USER:i,DB_PASS:c,DB_NAME:d,DB_SOCKET_PATH:l,DB_SOCKET_TIMEOUT:u,DB_COMPRESS:y,DB_DEBUG:g,DB_PERMIT_LOCAL_INFILE:p,DB_TRACE:m,DB_CHECK_DUPLICATE:f,DB_SSL:h,DB_SSL_CA:E,DB_SSL_KEY:T,DB_SSL_CERT:_,DB_CONNECTION_ATTRIBUTES:w,DB_CONNECTION_TIMEOUT:S}=a;r.strict.ok(o,"Database host should be present"),r.strict.ok(n,"Database port should be present"),r.strict.ok(i,"Database user should be present"),r.strict.ok(c,"Database password should be present"),r.strict.ok(d,"Database name should be present");const A={DB_HOST:o,DB_PORT:n,DB_USER:i,DB_PASS:c,DB_NAME:d,DB_SOCKET_PATH:l,DB_SOCKET_TIMEOUT:u,DB_COMPRESS:y,DB_DEBUG:g,DB_PERMIT_LOCAL_INFILE:p,DB_TRACE:m,DB_CHECK_DUPLICATE:f,DB_CONNECTION_ATTRIBUTES:w,DB_CONNECTION_TIMEOUT:S,DB_SSL:h,DB_SSL_CA:E,DB_SSL_KEY:T,DB_SSL_CERT:_}},3101:(e,s,t)=>{t.d(s,{n:()=>h});var r=t(2613);const a=(0,t(7546).load)({JWT_SECRET:String,JWT_EXPIRES_IN:String,JWT_REFRESH_SECRET:String,JWT_REFRESH_EXPIRES_IN:String,JWT_REFRESH_MAX_AGE:Number,JWT_ALGORITHM:String,JWT_ISSUER:String,JWT_MAX_AGE:Number,JWT_HTTP_ONLY:Boolean,JWT_SAME_SITE:String,JWT_COOKIE_NAME:String,JWT_SECURE:Boolean}),{JWT_SECRET:o,JWT_EXPIRES_IN:n,JWT_REFRESH_SECRET:i,JWT_REFRESH_EXPIRES_IN:c,JWT_REFRESH_MAX_AGE:d,JWT_ALGORITHM:l,JWT_ISSUER:u,JWT_MAX_AGE:y,JWT_HTTP_ONLY:g,JWT_SAME_SITE:p,JWT_COOKIE_NAME:m,JWT_SECURE:f}=a;r.strict.ok(o,"JWT secret should be present"),r.strict.ok(n,"JWT expires in should be present"),r.strict.ok(i,"JWT refresh secret should be present"),r.strict.ok(c,"JWT refresh expires in should be present"),r.strict.ok(l,"JWT algorithm should be present"),r.strict.ok(u,"JWT issuer should be present"),r.strict.ok(y,"JWT max age should be present"),r.strict.ok(g,"JWT http only should be present"),r.strict.ok(p,"JWT same site should be present"),r.strict.ok(m,"JWT cookie name should be present"),r.strict.ok(f,"JWT secure should be present"),r.strict.ok(d,"JWT refresh max age should be present");const h={JWT_SECRET:o,JWT_EXPIRES_IN:n,JWT_REFRESH_SECRET:i,JWT_REFRESH_EXPIRES_IN:c,JWT_REFRESH_MAX_AGE:d,JWT_ALGORITHM:l,JWT_ISSUER:u,JWT_MAX_AGE:y,JWT_HTTP_ONLY:g,JWT_SAME_SITE:p,JWT_COOKIE_NAME:m,JWT_SECURE:f}},6184:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{CI:()=>v,E0:()=>_,Eu:()=>I,Zv:()=>w,bI:()=>R,gg:()=>m,hv:()=>D,kL:()=>h,lM:()=>S,pD:()=>g,tY:()=>E,ys:()=>A,zX:()=>f,zh:()=>T});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(9031),d=t(3101),l=t(6030),u=t(2993),y=e([l,u]);[l,u]=y.then?(await y)():y,o().config();const g=async(e,s)=>{try{const{caption:t,location:r,tags:a}=e.body,o=e.cookies.jwt;if(!o)return void s.status(401).json({message:"Unauthorized"});i().verify(o,d.n.JWT_SECRET,(async(e,o)=>{if(e)return console.log(e.message),void s.status(401).json({message:"Unauthorized"});const n=o.id,i=await l.zW.findByPk(n);if(!i)return void s.status(404).json({message:"User not found"});const c=await l.my.findImageByReferenceKey("user_id",n);if(!c)return s.status(404).json({message:"Image not found"});const d=await l.AF.create({caption:t,imageURL:c.imageUrl,location:r,tags:a||"",created_At:new Date,creator_Id:i.id});if(d)return s.status(201).json({message:"Post created successfully",newPost:d}),d;s.status(400).json({message:"Error creating new post."})}))}catch(e){console.error("Error creating post:",e),s.status(500).json({message:"Internal server error"})}},p=async(e,s,t)=>{try{const e=await l.my.findOne({where:{imageUrl:t}});if(!e)return void s.status(404).json({message:"Image not found"});await e.destroy(),s.status(200).json({message:"Image deleted successfully"})}catch(e){console.error("Error deleting image:",e),s.status(500).json({message:"Internal server error"})}},m=async(e,s)=>{try{const{caption:t,location:r,tags:a,imageUrl:o}=e.body,n=parseInt(e.query.post_id,10);if(!n)return void s.status(400).json({message:"Post ID is required"});const c=e.cookies.jwt;if(!c)return void s.status(401).json({message:"Unauthorized"});i().verify(c,d.n.JWT_SECRET,(async(i,c)=>{if(i)return console.log(i.message),void s.status(401).json({message:"Unauthorized"});const d=c.id,y=await l.zW.findByPk(d);if(!y)return void s.status(404).json({message:"User not found"});const g=await l.AF.findOne({where:{id:n,creator_Id:d}});if(!g)return void s.status(404).json({message:"Post not found"});if(g.creator_Id!==y.id)return void s.status(403).json({message:"Unauthorized attempt!"});let m=g?.imageURL;if(o)try{const t=await(0,u.r3)(e,s);if(!t)return void s.status(404).json({message:"Image not found"});m=t}catch(e){return void s.status(401).json({message:"Unauthorized"})}const f=await g.update({id:g.id,caption:t,imageURL:m,location:r,tags:a,created_At:new Date});return f?(s.status(200).json({message:"Post updated successfully",post:f}),f):(o&&await p(e,s,o),void s.status(400).json({message:"Error updating post"}))}))}catch(e){console.error("Error updating post:",e),s.status(500).json({message:"Internal server error"})}},f=async(e,s)=>{try{const e=await l.AF.findAll({include:[{model:l.zW,as:"User",attributes:["id","username","email","profilePic","bio","firstName","lastName","imageURL","avatarUrl"]}]});s.status(200).json({posts:e})}catch(e){console.error("Error getting posts:",e),s.status(500).json({message:"Internal server error"})}},h=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id,o=parseInt(e.body.post_id,10);if(isNaN(o))return void s.status(400).json({message:"Invalid post ID"});if(!await l.zW.findByPk(a))return void s.status(404).json({message:"User not found"});const n=await l.AF.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});if(await l.Po.findOne({where:{post_id:o,user_id:a}}))return void s.status(400).json({message:"Post already liked"});const i=await l.Po.createLike({user_id:a,post_id:o,created_At:new Date});n.likes_Count||(n.likes_Count=0);const c=n.likes_Count+1;await n.update({likes_Count:c})?s.status(201).json({message:"Post liked successfully",like:i}):s.status(400).json({message:"Error liking post."})}))}catch(e){console.error("Error liking post:",e),s.status(500).json({message:"Internal server error"})}},E=async(e,s)=>{try{const t=parseInt(e.query.user_id,10);if(!t)return void s.status(400).json({message:"post User ID is required"});const r=e.cookies.jwt;if(!r)return void s.status(401).json({message:"Unauthorized"});i().verify(r,d.n.JWT_SECRET,(async(r,a)=>{if(r)return console.log(r.message),void s.status(401).json({message:"Unauthorized"});const o=a.id;if(!o)return void s.status(400).json({message:"User ID is required"});if(!await l.zW.findByPk(o))return void s.status(404).json({message:"User not found"});const n=await l.zW.findByPk(t);if(!n)return void s.status(404).json({message:"User not found"});const i=parseInt(e.query.post_id,10);if(!i)return void s.status(400).json({message:"Post ID is required"});const c=await l.AF.findByPk(i);c?s.status(200).json({post:c,requestedUser:n,requestedUserId:t,post_id:i}):s.status(404).json({message:"Post not found here"})}))}catch(e){console.error("Error getting post:",e),s.status(500).json({message:"Internal server error"})}},T=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.body.post_id,10);if(!await l.zW.findByPk(a))return void s.status(404).json({message:"User not found"});const n=await l.AF.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});const i=await l.Po.findOne({where:{post_id:o,user_id:a}});i&&await i.destroy();let c=n.likes_Count||0;c>0&&(c-=1),await n.update({likes_Count:c}),await n.save(),s.status(200).json({message:i?"Like removed successfully":"Post liked successfully",post:n})}))}catch(e){console.error("Error toggling like:",e),s.status(500).json({message:"Internal server error"})}},_=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log("JWT verification error",t.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.body.post_id,10);if(!o)return void s.status(400).json({message:"Post ID is required"});if(!await l.zW.findByPk(a))return void s.status(404).json({message:"User not found"});if(!await l.AF.findByPk(o))return void s.status(404).json({message:"Post not found"});if(await l.xY.findOne({where:{post_id:o,user_id:a}}))return void s.status(400).json({message:"Post already saved"});const n=await l.xY.createSave({id:a,user_id:a,post_id:o,saveDate:new Date});n?s.status(201).json({message:"Post saved successfully",save:n}):s.status(400).json({message:"Error saving post."})}))}catch(e){console.error("Error saving post:",e),s.status(500).json({message:"Internal server error"})}},w=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log("JWT verification error",t.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});const o=parseInt(e.body.post_id,10);if(!o)return void s.status(400).json({message:"Post ID is required"});if(!await l.zW.findByPk(a))return void s.status(404).json({message:"User not found"});if(!await l.AF.findByPk(o))return void s.status(404).json({message:"Post not found"});const n=await l.xY.findOne({where:{post_id:o,user_id:a}});n&&await n.destroy(),s.status(200).json({message:n?"Post unsaved successfully":"Post not saved"})}))}catch(e){console.error("Error deleting saved post:",e),s.status(500).json({message:"Internal server error"})}},S=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const r=t.id;if(!r)return void s.status(400).json({message:"User ID is required"});if(!await l.zW.findByPk(r))return void s.status(404).json({message:"User not found"});const a=await l.xY.getSavedPosts(r);s.status(200).json({savedPosts:a})}))}catch(e){console.error("Error getting saved posts:",e),s.status(500).json({message:"Internal server error"})}},A=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID is required"});if(!await l.zW.findByPk(a))return void s.status(404).json({message:"User not found"});const o=parseInt(e.body.post_id,10);if(!o)return void s.status(400).json({message:"Post ID is required from server"});const n=await l.AF.findByPk(o);if(!n)return void s.status(404).json({message:"Post not found"});const i=await l.xY.findOne({where:{post_id:o,user_id:a}});if(i&&await i.destroy(),n.imageURL){const e=await l.my.findOne({where:{imageUrl:n.imageURL}});e&&await e.destroy()}await n.destroy(),s.status(200).json({message:"Post deleted successfully"})}))}catch(e){console.error("Error deleting post:",e),s.status(500).json({message:"Internal server error"})}},I=async(e,s)=>{try{const{page:t=0,limit:r=10}=e.query,a=t?parseInt(t,10)*parseInt(r,10):0,o=await l.AF.findAndCountAll({limit:parseInt(r,10),offset:a,order:[["created_At","DESC"]]});s.status(200).json({posts:o,page:parseInt(t,10),totalPages:Math.ceil(o.count/parseInt(r,10)),totalCount:o.count})}catch(e){console.error("Error getting posts:",e),s.status(500).json({message:"Internal server error"})}},v=async(e,s)=>{try{const{searchValue:t}=e.body;if(!t)return void s.status(400).json({message:"Search value is required"});const r=await l.AF.findAll({where:{[c.Op.or]:[{caption:{[c.Op.like]:`%${t}%`}},{tags:{[c.Op.like]:`%${t}%`}},{location:{[c.Op.like]:`%${t}%`}}]}});s.status(200).json({posts:r})}catch(e){console.error("Error searching posts:",e),s.status(500).json({message:"Internal server error"})}},D=async(e,s)=>{try{const t=e.cookies.jwt||e.headers.authorization?.split(" ")[1];if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,d.n.JWT_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const r=t.id;if(!r)return void s.status(400).json({message:"User ID is required"});const a=await l.AF.findAll({where:{creator_Id:r}});s.status(200).json({posts:a})}))}catch(e){console.error("Error getting user posts:",e),s.status(500).json({message:"Internal server error"})}},R=async(e,s)=>{try{const e=await l.AF.findAll({order:[["likes_Count","DESC"]]});s.status(200).json({popularPosts:e})}catch(e){console.error("Error getting popular posts:",e),s.status(500).json({message:"Internal server error"})}};r()}catch(e){r(e)}}))},9024:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{Be:()=>f,TU:()=>g,Ub:()=>m,pH:()=>p});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(3101),d=t(16),l=t(6030),u=t(2300),y=e([l]);l=(y.then?(await y)():y)[0],o().config();const g=async(e,s)=>{try{const{name:t,username:r,email:a,password:o}=e.body;if(!(t&&r&&a&&o))return(0,u.H4)(new Error("New User validation error"),s);if(await l.hV.findOne({where:{email:a}}))return(0,u.H4)(new Error("UserRegistrations.email: User already exists "),s);const n=await l.hV.create({newUser:t,username:r,email:a,hashedpassword:o,createdAt:new Date}),i=(0,d.Jj)({id:n.id});s.cookie("jwt",i,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.status(201).json({id:n.id,name:n.newUser,username:n.username,email:n.email,token:i})}catch(e){(0,u.H4)(e,s)}},p=async(e,s)=>{try{const{email:t,password:r}=e.body;if(!t||!r)return(0,u.H4)(new Error("Login Validation Error!"),s);const a=await l.hV.loginUser(t,r);if(!a)throw new Error("User not found");const o=(0,d.Jj)({id:a.id}),n=(0,d.v3)({id:a.id});s.cookie("jwt",o,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.cookie("refreshToken",n,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_REFRESH_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.setHeader("Authorization",`Bearer ${o}`),s.locals.user=a,s.json({token:o,refreshToken:n,user:a.id})}catch(e){(0,u.H4)(e,s)}},m=async(e,s)=>{try{const t=e.cookies.jwt,r=e.cookies.refreshToken;if(!t&&!r)return void s.status(400).json({message:"No tokens provided!"});s.cookie("jwt","",{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:1}),s.cookie("refreshToken","",{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:1}),s.status(200).json({message:"User logged out"})}catch(e){(0,u.H4)(e,s)}},f=async(e,s)=>{const t=e.cookies.refreshToken;t?i().verify(t,c.n.JWT_REFRESH_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token"});try{const e=t.id;if(!e)return void s.status(400).json({message:"User ID is required"});const r=await l.hV.findByPk(e);if(!r)return s.status(404).json({message:"User not found"});const a=i().sign({id:r.id},c.n.JWT_SECRET,{expiresIn:c.n.JWT_EXPIRES_IN,algorithm:c.n.JWT_ALGORITHM,issuer:c.n.JWT_ISSUER});s.cookie("jwt",a,{httpOnly:c.n.JWT_HTTP_ONLY,maxAge:1e3*c.n.JWT_REFRESH_MAX_AGE,secure:c.n.JWT_SECURE,sameSite:"lax"}),s.status(200).json({token:a,user:r.id})}catch(e){console.error("Error getting current user:",e),s.status(500).json({message:"Error getting current user"})}})):s.status(401).json({message:"Unauthorized"})};r()}catch(e){r(e)}}))},2993:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{pK:()=>l,r3:()=>d}),t(4469);var a=t(829),o=t.n(a),n=t(3101),i=t(6030),c=e([i]);i=(c.then?(await c)():c)[0];const d=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});o().verify(t,process.env.JWT_SECRET,(async(e,t)=>{if(e)return void s.status(401).json({message:"Unauthorized"});const r=t.id;if(!r)return void s.status(401).json({message:"Unauthorized"});if(!await i.zW.findByPk(r))return void s.status(401).json({message:"Unauthorized"});const a=await i.my.findImageByReferenceKey("user_id",r);a?s.status(200).json({imageUrl:a.imageUrl}):s.status(200).json({message:"No image found"})}))}catch(e){throw console.error("Error getting image preview:",e),new Error("Failed to get image preview")}},l=async e=>{try{const s=e.cookies.jwt;if(!s)throw new Error("Unauthorized");o().verify(s,n.n.JWT_SECRET,(async(e,s)=>{if(e)throw new Error("Unauthorized");const t=s.id;if(!t)throw new Error("Unauthorized");if(!await i.zW.findByPk(t))throw console.log("No user found"),new Error("Unauthorized");const r=await i.V.findProfilePicByReferenceKey("user_id",t);return r?(console.log("Profile Pic:",r),r):(console.log("No profile pic found"),null)}))}catch(e){throw console.error("Error getting profile pic preview:",e),new Error("Failed to get profile pic preview")}};r()}catch(e){r(e)}}))},4361:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{CF:()=>u,TK:()=>g,_q:()=>p,k7:()=>y});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(3101),d=t(6030),l=(t(2502),e([d]));d=(l.then?(await l)():l)[0],o().config();const u=async(e,s)=>{const t=e.cookies.jwt;if(t)try{i().verify(t,c.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!await d.zW.findByPk(a))return void s.status(404).json({message:"User not found"});const o=parseInt(e.query.limit,10)||10,n=await d.zW.getAllUsers(o,["id","firstName","lastName","username","imageURL","avatarUrl","profilePic","bio"]);s.status(200).json({users:n})}))}catch(e){console.error("Error getting all users:",e),s.status(500).json({message:"Internal server error!"})}else s.status(401).json({message:"Unauthorized"})},y=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,c.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(400).json({message:"User ID (decodedToken) is required"});const o=parseInt(e.query.user_id,10);if(!o)return void s.status(400).json({message:"Requested ID is required"});const n=parseInt(e.query.post_id,10);if(!n)return void s.status(400).json({message:"Post ID is required (getUser post_id variables)"});const i=await d.zW.findByPk(a);if(!i)return void s.status(404).json({message:"User not found"});if(i.id!==a)return void s.status(403).json({message:"Unauthorized attempt!"});const c=await d.zW.findOne({where:{id:o}});if(!c)return void s.status(404).json({message:"Requested User not found"});const l=await d.AF.getPostByReferenceID(o);if(!l)return void s.status(400).json({message:"Post ID is required in post (getUserByID)"});const u=await d.Po.findByPk(a);u?s.status(200).json({user:c,post:l||[],userLikes:u||[],user_id:a,requestedUserId:o,post_id:n}):s.status(400).json({message:"User ID is required likes routes"})}))}catch(e){console.error("Error getting user by ID:",e),s.status(500).json({message:"Internal server error"})}},g=async(e,s)=>{try{const{profilePic:t,newUser:r,...a}=e.body,o=e.cookies.jwt;if(!o)return console.log("Unauthorized - No token"),s.status(401).json({message:"Unauthorized!"});i().verify(o,c.n.JWT_SECRET,(async(e,o)=>{if(e)return console.log("Unauthorized - Invalid token"),console.log(e.message),s.status(401).json({message:"Unauthorized"});const n=o.id;if(!n)return console.log("Unauthorized - No user ID"),s.status(401).json({message:"Unauthorized"});const i=await d.zW.findByPk(n);if(!i)return console.log("User not found"),s.status(404).json({message:"User not found"});if(i.id!==n)return console.log("Unauthorized attempt"),s.status(403).json({message:"Unauthorized attempt!"});if(0===Object.keys(a).length&&!t)return console.log("No fields to update"),s.status(400).json({message:"No fields to update"});if(r){const e=r?.lastIndexOf(" "),s=-1!==e?r.slice(0,e):r,t=-1!==e?r.slice(e+1):"";a.firstName=s,a.lastName=t}let c=i?.profilePic;if(c&&t){if(!await d.V.findProfilePicByReferenceKey("user_id",n))return console.log("No image found"),s.status(404).json({message:"No image found"});c=t}const l={...a,profilePic:c},[u,y]=await d.zW.updateUser(n,l);return 0===u?(console.log("Error updating user:",y),s.status(500).json({message:"Error updating user"})):s.status(200).json({updatedUsers:y,profilePic:c})}))}catch(e){return console.error("Error updating user:",e),s.status(500).json({message:"Internal server error"})}return g},p=async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});i().verify(t,c.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log(t.message),void s.status(401).json({message:"Unauthorized"});const a=r.id,o=parseInt(e.query.post_id,10),n=parseInt(e.query.likes_id,10);if(console.log("likes_id",n),!await d.zW.findByPk(a))return void s.status(404).json({message:"User not found"});const i=await d.AF.findByPk(o);if(!i)return void s.status(404).json({message:"Post not found"});const c=i.creator_Id,l=await d.zW.findByPk(c);if(!l)return void s.status(404).json({message:"Requested User not found"});const u=await d.Po.findByPk(c);u?s.status(200).json({user:l,post:i,userLikes:u,creator:c}):s.status(400).json({message:"User ID is required S routes"})}))}catch(e){console.error("Error getting user by ID:",e),s.status(500).json({message:"Internal server error"})}};r()}catch(e){r(e)}}))},2785:(e,s,t)=>{t.d(s,{TA:()=>n});var r=t(1763),a=t.n(r),o=t(9469);const n=a()({windowMs:o._.RARE_LIMIT_WINDOW_MS,max:o._.MAX,message:o._.RARE_LIMIT_MESSAGE,statusCode:o._.RARE_LIMIT_CODE,handler:(e,s)=>{s.status(o._.RARE_LIMIT_CODE).json({message:o._.RARE_LIMIT_MESSAGE})},keyGenerator:async(e,s)=>e.ip?e.ip.replace(/:\d+[^:]*$/,""):(s.status(500).send({message:"Warning: request.ip is missing!"}),e.socket.remoteAddress)})},16:(e,s,t)=>{t.d(s,{Jj:()=>c,v3:()=>d});var r=t(818),a=t.n(r),o=t(829),n=t.n(o),i=t(3101);a().config();const c=e=>{try{return n().sign(e,i.n.JWT_SECRET,{algorithm:i.n.JWT_ALGORITHM,expiresIn:i.n.JWT_EXPIRES_IN,issuer:i.n.JWT_ISSUER})}catch(e){throw new Error("Error generating JWT")}},d=e=>{try{return n().sign(e,i.n.JWT_REFRESH_SECRET,{algorithm:i.n.JWT_ALGORITHM,expiresIn:i.n.JWT_REFRESH_EXPIRES_IN,issuer:i.n.JWT_ISSUER})}catch(e){throw new Error("Error generating JWT")}}},2051:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{FH:()=>u});var a=t(818),o=t.n(a),n=t(829),i=t.n(n),c=t(3101),d=t(6030),l=e([d]);d=(l.then?(await l)():l)[0],o().config();const u=async(e,s,t)=>{try{const r=e.cookies.jwt;if(!r)return s.locals.user=null,t();i().verify(r,c.n.JWT_SECRET,(async(e,r)=>{if(e)return console.error("JWT verification error:",e.message),s.locals.user=null,t();try{const e=await d.zW.findByPk(r.id);console.log("decodedToken:",r),s.locals.user=e||null}catch(e){console.error("Error retrieving user:",e),s.locals.user=null}t()}))}catch(e){console.error("Error verifying user:",e),s.locals.user=null}};r()}catch(e){r(e)}}))},1125:(e,s,t)=>{t.d(s,{r:()=>a});var r=t(128);async function a(){const e=(0,r.J)();let s=0;for(;s<10;)try{return await e.authenticate(),console.log("Database connection established, Starting Server....."),await e.sync({force:!0}),console.log("Drop and re-sync db."),e}catch(e){console.error("Database connection failed:",e),s++,await new Promise((e=>setTimeout(e,1e3)))}throw console.error("Max attempts reached, database connection failed"),new Error("Database connection failed")}},128:(e,s,t)=>{t.d(s,{J:()=>c});var r=t(3024),a=t.n(r),o=t(9031),n=t(3085);const i={Dialect:"mariadb",host:n.L.DB_HOST||"localhost",username:n.L.DB_USER||"metalbrain",password:n.L.DB_PASS||"password",database:n.L.DB_NAME||"FindSomeOne",socketPath:n.L.DB_SOCKET_PATH||"/var/run/mysqld/mysqld.sock",socketTimeout:n.L.DB_SOCKET_TIMEOUT||1e3,compress:n.L.DB_COMPRESS||!1,debug:n.L.DB_DEBUG||!1,permitLocalInfile:n.L.DB_PERMIT_LOCAL_INFILE||!1,trace:n.L.DB_TRACE||!0,checkDuplicate:n.L.DB_CHECK_DUPLICATE||!1,connectAttributes:JSON.parse(n.L.DB_CONNECTION_ATTRIBUTES||"{}"),connectionTimeout:n.L.DB_CONNECTION_TIMEOUT||1e3,port:n.L.DB_PORT||3306,ssl:n.L.DB_SSL||!1,dialectOptions:{ssl:{ca:n.L.DB_SSL_CA?a().readFileSync(n.L.DB_SSL_CA).toString():"",key:n.L.DB_SSL_KEY?a().readFileSync(n.L.DB_SSL_KEY).toString():"",cert:n.L.DB_SSL_CERT?a().readFileSync(n.L.DB_SSL_CERT).toString():""}}};function c(){return new o.Sequelize(i.database,i.username,i.password,{host:i.host,dialect:i.Dialect,port:i.port,ssl:i.ssl,dialectOptions:i.dialectOptions})}},3121:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>d});var a=t(423),o=t(5520),n=t(3136),i=t(6760),c=t(3085);const e=(0,i.dirname)((0,n.fileURLToPath)("file:///home/babsdevsys/appV-1/src/server/loaders/dataLoader/sequlize.ts")),d=new a.Sequelize({dialect:o.MariaDbDialect,host:c.L.DB_HOST,user:c.L.DB_USER,password:c.L.DB_PASS,database:c.L.DB_NAME,port:c.L.DB_PORT,ssl:c.L.DB_SSL,models:await(0,a.importModels)(e+"/src/server/models/**/*.model.{ts,js}")});r()}catch(e){r(e)}}),1)},6633:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>R});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(7252),d=t.n(c),l=t(2525),u=t.n(l),y=t(829),g=t.n(y),p=t(2096),m=t.n(p),f=t(6928),h=t.n(f),E=t(9469),T=t(3101),_=t(6030),w=t(4388),S=t(2300),A=t(2502),I=t(2785),v=t(2051),D=e([_,w,v]);async function R({app:e}){e.use(((e,s,t)=>(s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),"OPTIONS"===e.method?s.sendStatus(204):t()))),e.use(o().urlencoded({extended:!0})),e.use(d().json()),e.use(d().urlencoded({extended:!0})),e.use(i()()),e.use(o().json()),e.use(d().static(h().join(__dirname,"dist"))),e.use("/assets",d().static(h().join(__dirname,"assets")));const s=E._.TRUST_PROXY||"false",t=E._.NUMBER_OF_PROXIES||1;return s?e.set("trust proxy",!0):"false"===s?e.set("trust proxy",!1):(e.set("trust proxy",s),e.set("trust proxy",t)),e.set("trust proxy",t),e.get("/ip",((e,s)=>s.send(e.ip))),e.use(u()({contentSecurityPolicy:!1})),e.use(m()(E._.MORGAN)),e.use(I.TA),e.use(w.Q),e.use(S.sh),e.get("/api/getCurrentUser",v.FH,(async(e,s)=>{try{const t=e.cookies.jwt;if(!t)return void s.status(401).json({message:"Unauthorized"});g().verify(t,T.n.JWT_SECRET,(async(t,r)=>{if(t)return console.log("JWT verification error",t.message),void s.status(401).json({message:"Unauthorized Invalid Token"});const a=r.id;if(a)try{const t=await _.zW.findOne({where:{id:a},include:[{model:_.AF,attributes:["id","caption","imageURL","location","tags","likes_count","created_At"]},{model:_.Po,attributes:["id","user_id","post_id","created_At"]}]});if(!t)return void s.status(400).json({message:"User ID is required user routes"});if(a!=a)return void s.status(401).json({message:"Unauthorized"});let r,o,n;try{({post_id:r,likes_id:o,creator_id:n}=(0,A.V)(e))}catch(e){return void s.status(400).json({message:e.message})}const i=void 0!==n?await _.AF.findOne({where:{creator_Id:n},include:[{model:_.zW,attributes:["id","firstName","lastName","username","email","bio","status","join","avatarUrl","imageURL","profilePic","label","last_activity","updated_at","UserRegistrationID"]}]}):null;if(!i)return void s.status(400).json({message:"Post ID is required in posts"});const c=await _.Po.findByPk(a);if(!c)return void s.status(400).json({message:"User ID is required likes routes"});s.status(200).json({user:t,post:i,userLikes:c,userId:a,creator_Id:n,post_id:r,likes_id:o||c.id})}catch(e){throw new Error(e)}else s.status(400).json({message:"User ID is required"})}))}catch(e){s.status(400).json({message:"User ID is required"})}})),e}[_,w,v]=D.then?(await D)():D,r()}catch(U){r(U)}}))},1545:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.r(s),t.d(s,{default:()=>l});var a=t(2273),o=t(2541),n=t(1125),i=t(3121),c=t(6633),d=e([o,i,c]);async function l({app:e}){await(0,o.K)(),await(0,n.r)(),i.A,await(0,c.A)({app:e}),(0,a.A)(),console.log("Express Server Intialized!")}[o,i,c]=d.then?(await d)():d,r()}catch(u){r(u)}}))},5595:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>u});var a=t(9031),o=t(128),n=t(452),i=t(6153),c=e([n,i]);[n,i]=c.then?(await c)():c;const d=(0,o.J)();class l extends a.Model{static async findImageById(e){return await this.findByPk(e)}static async findImageByReferenceKey(e,s){try{return await this.findOne({where:{[e]:s},order:[["created_At","DESC"]]})}catch(t){throw console.error(`Error finding image by reference key: ${e}, value: ${s}`,t),t}}}l.init({id:{type:a.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},imageUrl:{type:a.DataTypes.STRING,allowNull:!0},user_id:{type:a.DataTypes.INTEGER,references:{model:"Users",key:"id"}},post_id:{type:a.DataTypes.INTEGER,references:{model:"Posts",key:"id"}},created_At:{type:a.DataTypes.DATE,allowNull:!1,defaultValue:a.DataTypes.NOW}},{sequelize:d,modelName:"ImageStorages",timestamps:!1}),l.init({id:{type:a.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},imageUrl:{type:a.DataTypes.STRING,allowNull:!0},user_id:{type:a.DataTypes.INTEGER,references:{model:"Users",key:"id"}},post_id:{type:a.DataTypes.INTEGER,references:{model:"Posts",key:"id"},allowNull:!0},created_At:{type:a.DataTypes.DATE,allowNull:!1,defaultValue:a.DataTypes.NOW}},{sequelize:d,modelName:"ImageStorages",timestamps:!1}),l.afterCreate((async e=>{const s=await i.A.findByPk(e.user_id);s&&(s.imageURL=e.imageUrl,await s.save())})),i.A.hasMany(l,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),n.A.hasMany(l,{foreignKey:"post_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),l.belongsTo(i.A,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),l.belongsTo(n.A,{foreignKey:"post_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),await d.sync({force:!1}).then((()=>{console.log("New Image synced successfully")})).catch((e=>{console.error("Error syncing new image:",e)}));const u=l;r()}catch(e){r(e)}}),1)},6030:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{AF:()=>n.A,Po:()=>o.A,V:()=>i.A,hV:()=>l.A,my:()=>a.A,xY:()=>c.A,zW:()=>d.A});var a=t(5595),o=t(8995),n=t(452),i=t(9609),c=t(581),d=t(6153),l=t(80),u=e([a,o,n,i,c,d,l]);[a,o,n,i,c,d,l]=u.then?(await u)():u,d.A,n.A,o.A,c.A,i.A,a.A,l.A,r()}catch(e){r(e)}}))},8995:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>u});var a=t(9031),o=t(128),n=t(452),i=t(6153),c=e([n,i]);[n,i]=c.then?(await c)():c;const d=(0,o.J)();class l extends a.Model{static async createLike(e){return await this.create(e)}static async findLikeById(e){return await this.findByPk(e)}static async findLikeByReferenceKey(e,s){return await this.findOne({where:{[e]:s}})}static async findAllLikesByReferenceKey(e,s){return await this.findAll({where:{[e]:s}})}static async deleteLikeByReferenceKey(e,s){await this.destroy({where:{[e]:s}})}}l.init({id:{type:a.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},user_id:{type:a.DataTypes.INTEGER,allowNull:!1,references:{model:"Users",key:"id"}},post_id:{type:a.DataTypes.INTEGER,allowNull:!1,references:{model:"Posts",key:"id"}},created_At:{type:a.DataTypes.DATE,allowNull:!0}},{sequelize:d,modelName:"Likes",timestamps:!1,freezeTableName:!0}),i.A.hasMany(l,{foreignKey:"user_id",onDelete:"CASCADE"}),l.belongsTo(i.A,{foreignKey:"user_id"}),n.A.hasMany(l,{foreignKey:"post_id",onDelete:"CASCADE"}),l.belongsTo(n.A,{foreignKey:"post_id"}),l.sync({force:!1}).then((()=>{console.log("Like synced successfully")})).catch((e=>{console.error("Error syncing like:",e)}));const u=l;r()}catch(e){r(e)}}))},452:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>l});var a=t(9031),o=t(128),n=t(6153),i=e([n]);n=(i.then?(await i)():i)[0];const c=(0,o.J)();class d extends a.Model{static async createPost(e){return await this.create(e)}static async updatePost(e,s){const[t,r]=await this.update(s,{where:{id:e},returning:!0});return[t,r]}static async deletePost(e){const s=await this.findOne({where:{id:e}});s&&await s.destroy()}static async getAllPosts(){return await this.findAll()}static async getInfinitePosts(e,s){return await this.findAll({offset:e,limit:s})}static async getPostByID(e){return await this.findOne({where:{id:e}})}static async getUserPosts(e){return await this.findAll({where:{creator_Id:e}})}static async getSavedPost(e){return await this.findOne({where:{id:e}})}static async getPostByReferenceID(e){return await this.findOne({where:{creator_Id:e}})}}d.init({id:{type:a.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},caption:{type:a.DataTypes.STRING,allowNull:!1},imageURL:{type:a.DataTypes.STRING,allowNull:!0},location:{type:a.DataTypes.STRING,allowNull:!0},tags:{type:a.DataTypes.STRING,allowNull:!1},likes_Count:{type:a.DataTypes.INTEGER,allowNull:!0},created_At:{type:a.DataTypes.DATE,allowNull:!0},creator_Id:{type:a.DataTypes.INTEGER,allowNull:!1,references:{model:"Users",key:"id"}}},{sequelize:c,modelName:"Posts",timestamps:!1}),d.createPost=async function(e){try{return await this.create(e)}catch(e){throw console.error("Error creating new post:",e),e}},d.updatePost=async function(e,s){try{const[t,r]=await this.update(s,{where:{id:e},returning:!0});return[t,r]}catch(e){throw console.error("Error updating post:",e),e}},d.getInfinitePosts=async function(e,s){try{return await this.findAll({offset:e,limit:s})}catch(e){throw console.error("Error getting infinite posts:",e),e}},d.getPostByID=async function(e){try{return await this.findOne({where:{id:e}})}catch(e){throw console.error("Error getting post by ID:",e),e}},d.getUserPosts=async function(e){try{return await this.findAll({where:{creator_Id:e}})}catch(e){throw console.error("Error getting user posts:",e),e}},n.A.hasMany(d,{foreignKey:"creator_Id",onDelete:"CASCADE",onUpdate:"CASCADE"}),d.belongsTo(n.A,{foreignKey:"creator_Id",onDelete:"CASCADE",onUpdate:"CASCADE"}),await c.sync({force:!1}).then((()=>{console.log("Post synced successfully")})).catch((e=>{console.error("Error syncing Post:",e)}));const l=d;r()}catch(e){r(e)}}),1)},9609:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>l});var a=t(9031),o=t(128),n=t(6153),i=e([n]);n=(i.then?(await i)():i)[0];const c=(0,o.J)();class d extends a.Model{static async findProfilePictureById(e){return await this.findByPk(e)}static async getProfilePicByReferenceID(e){return await this.findOne({where:{user_id:e}})}static async findProfilePicByReferenceKey(e,s){try{return await this.findOne({where:{[e]:s},order:[["created_At","DESC"]]})}catch(t){throw console.error(`Error finding profile image by reference key: ${e}, value: ${s}`,t),t}}}d.init({id:{type:a.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},user_id:{type:a.DataTypes.INTEGER,allowNull:!1,references:{model:"Users",key:"id"},onUpdate:"CASCADE",onDelete:"CASCADE"},profilePic:{type:a.DataTypes.STRING,allowNull:!1},created_At:{type:a.DataTypes.DATE,allowNull:!1,defaultValue:a.DataTypes.NOW},updated_At:{type:a.DataTypes.DATE,allowNull:!1,defaultValue:a.DataTypes.NOW}},{sequelize:c,modelName:"ProfilePictures",timestamps:!1,updatedAt:"updatedAt",createdAt:"createdAt"}),n.A.hasOne(d,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),d.belongsTo(n.A,{foreignKey:"user_id",onDelete:"CASCADE",onUpdate:"CASCADE"}),d.sync({force:!1}).then((()=>{console.log("Profile Pic synced successfully")})).catch((e=>{console.error("Error syncing creating profile pic table:",e)}));const l=d;r()}catch(e){r(e)}}))},581:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>u});var a=t(9031),o=t(128),n=t(452),i=t(6153),c=e([n,i]);[n,i]=c.then?(await c)():c;const d=(0,o.J)();class l extends a.Model{static async createSave(e){return await this.create(e)}static async checkIfSaved(e,s){return!!await this.findOne({where:{user_id:e,post_id:s}})}static async deleteSavedPost(e){const s=await this.findOne({where:{post_id:e}});s&&await s.destroy()}static async getSavedPosts(e){return await this.findAll({where:{user_id:e},include:[{model:n.A,as:"Post"}]})}}l.init({id:{type:a.DataTypes.INTEGER,primaryKey:!0,autoIncrement:!0,allowNull:!1},user_id:{type:a.DataTypes.INTEGER,references:{model:"Users",key:"id"}},post_id:{type:a.DataTypes.INTEGER,references:{model:"Posts",key:"id"}},saveDate:{type:a.DataTypes.DATE,allowNull:!0,defaultValue:a.DataTypes.NOW}},{sequelize:d,tableName:"Saves",timestamps:!1,freezeTableName:!0}),l.deleteSavedPost=async function(e){const s=await this.findOne({where:{post_id:e}});s&&await s.destroy()},l.belongsTo(i.A,{foreignKey:"user_id",targetKey:"id"}),l.belongsTo(n.A,{foreignKey:"post_id",targetKey:"id"}),l.sync({force:!1}).then((()=>{console.log("Save Post synced successfully")})).catch((e=>{console.error("Error syncing Save post:",e)}));const u=l;r()}catch(e){r(e)}}))},6153:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>n});var a=t(9031);const e=(0,t(128).J)();class o extends a.Model{static async getUserByID(e){return await this.findOne({where:{id:e}})}static async getAllUsers(e,s){return await this.findAll({limit:e,attributes:s})}static async updateUser(e,s){const[t,r]=await this.update(s,{where:{id:e},returning:!0});return[t,r]}}o.init({id:{type:a.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},firstName:{type:a.DataTypes.STRING,allowNull:!1,validate:{notEmpty:!0}},lastName:{type:a.DataTypes.STRING,allowNull:!1,validate:{notEmpty:!0}},username:{type:a.DataTypes.STRING,allowNull:!1,unique:!0,validate:{is:/^[a-zA-Z0-9_]*$/,len:[3,20]}},email:{type:a.DataTypes.STRING,unique:!0,allowNull:!1,validate:{isEmail:!0,len:[5,50],notEmpty:!0}},hashedpassword:{type:a.DataTypes.STRING(64)},status:{type:a.DataTypes.STRING,allowNull:!1,defaultValue:"unverified"},bio:{type:a.DataTypes.STRING,defaultValue:"This is a new user."},join:{type:a.DataTypes.DATE,defaultValue:a.DataTypes.NOW},avatarUrl:{type:a.DataTypes.STRING},imageURL:{type:a.DataTypes.STRING},profilePic:{type:a.DataTypes.STRING},label:{type:a.DataTypes.STRING,defaultValue:"New User"},last_activity:{type:a.DataTypes.DATE,defaultValue:a.DataTypes.NOW},updated_at:{type:a.DataTypes.DATE,defaultValue:a.DataTypes.NOW},UserRegistrationID:{type:a.DataTypes.UUID,allowNull:!0,references:{model:"UserRegistration",key:"id"}}},{sequelize:e,modelName:"Users",timestamps:!1,updatedAt:"updated_at"}),await e.sync({force:!1}).then((()=>{console.log("New User synced successfully")})).catch((e=>{console.error("Error syncing new user:",e)}));const n=o;r()}catch(e){r(e)}}),1)},80:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>g});var a=t(5486),o=t.n(a),n=t(9031),i=t(128),c=t(8635),d=t(6153),l=e([d]);d=(l.then?(await l)():l)[0];const u=(0,i.J)();class y extends n.Model{static async loginUser(e,s){return await this.findOne({where:{email:e,hashedpassword:s}})}static async logoutUser(e){return await this.findOne({where:{email:e}})}static async resetPassword(e,s){return await this.findOne({where:{email:e,hashedpassword:s}})}}y.init({id:{type:n.DataTypes.INTEGER,autoIncrement:!0,primaryKey:!0},newUser:{type:n.DataTypes.STRING,allowNull:!1},username:{type:n.DataTypes.STRING,allowNull:!1},email:{type:n.DataTypes.STRING,allowNull:!1},hashedpassword:{type:n.DataTypes.STRING,allowNull:!1},createdAt:{type:n.DataTypes.DATE,allowNull:!1,defaultValue:n.DataTypes.NOW}},{sequelize:u,modelName:"UserRegistration",createdAt:"createdAt",timestamps:!1,freezeTableName:!0}),y.beforeCreate((async e=>{try{if(e){const s=o().genSaltSync(10),t=await o().hash(String(e.hashedpassword),s);e.hashedpassword=t}}catch(e){throw console.error("Error hashing password:",e),new Error("Error hashing password")}})),y.afterCreate((async e=>{try{if(e){const s=e.newUser?.lastIndexOf(" "),t=-1!==s?e.newUser?.slice(0,s):e.newUser,r=-1!==s?e.newUser?.slice(s??1):"",a=(0,c.q)(e.username);await d.A.upsert({firstName:t,lastName:r,username:e.username,email:e.email,hashedpassword:e.hashedpassword,status:"unverified",bio:"I am a new user.",join:new Date,avatarUrl:a,imageURL:null,profilePic:null,label:"New User",last_activity:new Date,updated_at:new Date,UserRegistrationID:e.id})}}catch(e){throw console.error("Error registering new user:",e),new Error("Error registering new user")}})),y.loginUser=async function(e,s){try{const t=await this.findOne({where:{email:e}});if(t){if(await o().compare(s,t.hashedpassword))return t;throw new Error("Incorrect password")}throw new Error("Incorrect email")}catch(e){throw console.error("Error logging in user:",e),new Error("User not found")}},y.logoutUser=async function(e){try{return await this.findOne({where:{email:e}})}catch(e){throw console.error("Error logging out user:",e),new Error("User not found")}},await u.sync({force:!1}).then((()=>{console.log("New User Registered synced successfully")})).catch((e=>{console.error("Error syncing new user:",e)}));const g=y;r()}catch(e){r(e)}}),1)},2317:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>f});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(7252),u=t.n(l),y=t(1976),g=t(9024),p=e([g]);g=(p.then?(await p)():p)[0];const m=u().Router();m.use(d()(y.v)),m.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),m.use(o().urlencoded({extended:!0})),m.use(i()()),m.use(u().json()),m.use(o().json()),m.post("/api/register",g.TU),m.post("/api/login",g.pH),m.get("/api/logout",g.Ub),m.post("/api/refresh-token",g.Be);const f=m;r()}catch(e){r(e)}}))},1809:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>w});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(818),u=t.n(l),y=t(7252),g=t.n(y),p=t(829),m=t.n(p),f=t(3101),h=t(2051),E=t(6030),T=e([h,E]);[h,E]=T.then?(await T)():T;const _=g().Router();u().config(),_.use(d()()),_.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),_.use(o().urlencoded({extended:!0})),_.use(i()()),_.use(g().json()),_.use(o().json()),_.get("/api/getUser",h.FH,(async(e,s)=>{const t=e.cookies.jwt;if(!t)return console.log("No token found: send 401 Unauthorized in auth routes"),void s.status(401).json({message:"Unauthorized"});m().verify(t,f.n.JWT_SECRET,(async(e,t)=>{if(e)return console.log("JWT verification error",e.message),void s.status(401).json({message:"Unauthorized Invalid Token in auth routes"});try{const e=await E.zW.findByPk(t.id);if(!e)return s.status(400).json({message:"User ID is required in Auth route"});s.status(200).json({user:e})}catch(e){return console.error("Error getting user:",e),void s.status(500).json({message:"Error getting current user"})}}))}));const w=_;r()}catch(e){r(e)}}))},8358:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>A});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(818),u=t.n(l),y=t(7252),g=t.n(y),p=t(829),m=t.n(p),f=t(1976),h=t(3101),E=t(2993),T=t(6030),_=t(6020),w=e([E,T]);[E,T]=w.then?(await w)():w,u().config();const S=g().Router();S.use(d()(f.v)),S.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),s.header("encoding","multipart/form-data"),t()})),S.use(o().urlencoded({extended:!0})),S.use(i()()),S.use(g().json()),S.use(o().json()),S.post("/api/uploadImage",_.A.single("image"),(async(e,s)=>{try{console.log("File uploaded:",e.file);const t=`assets/images/${e.file?.filename}`,r=e.cookies.jwt,a=parseInt(e.body.postId,10);if(!r)return void s.status(401).json({message:"Unauthorized"});m().verify(r,h.n.JWT_SECRET,(async(e,r)=>{if(e)return void s.status(401).json({message:"Unauthorized"});const o=r.id;o&&await T.zW.findByPk(o)?await T.my.create({imageUrl:t,user_id:o||null,post_id:a||null,created_At:new Date})?s.status(200).json({message:"Image uploaded successfully",imageUrl:t}):s.status(500).send({error:"Error creating image record"}):s.status(401).json({message:"Unauthorized"})}))}catch(e){console.error("Error uploading image:",e),s.status(500).json({message:"Internal server error"})}})),S.post("/api/uploadProfilePic",_.A.single("file"),(async(e,s)=>{try{console.log("File uploaded:",e.file);const t=`assets/images/${e.file?.filename}`,r=e.cookies.jwt;if(!r)return void s.status(401).json({message:"Unauthorized"});m().verify(r,h.n.JWT_SECRET,(async(e,r)=>{if(e)return void s.status(401).json({message:"Unauthorized"});const a=r.id;if(!a)return void s.status(401).json({message:"Unauthorized"});const o=await T.zW.findByPk(a);o?await T.V.create({profilePic:t,user_id:a||null,created_At:new Date,updated_At:new Date})?(await o.update({profilePic:t}),s.status(200).json({message:"Image uploaded successfully",profilePic:t})):s.status(500).send({error:"Error creating image record"}):s.status(401).json({message:"Unauthorized"})}))}catch(e){console.error("Error uploading image:",e),s.status(500).json({message:"Internal server error"})}})),S.get("/api/sendImageUrl",E.r3),S.get("/api/sendProfilePicUrl",E.pK);const A=S;r()}catch(e){r(e)}}))},9785:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>f});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(7252),u=t.n(l),y=t(6184),g=t(2051),p=e([y,g]);[y,g]=p.then?(await p)():p;const m=u().Router();m.use(d()()),m.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),m.use(o().urlencoded({extended:!0})),m.use(i()()),m.use(u().json()),m.use(o().json()),m.post("/api/createPost",y.pD),m.put("/api/updatePost",y.gg),m.delete("/api/deletePost",y.ys),m.get("/api/getAllPosts",y.zX),m.get("/api/getPostById",g.FH,y.tY),m.post("/api/likePost",y.kL),m.post("/api/savePost",g.FH,y.E0),m.get("/api/getSavedPosts",g.FH,y.lM),m.delete("/api/deleteSavedPost",y.Zv),m.delete("/api/deleteLikePost",y.zh),m.get("/api/getInfinitePosts",y.Eu),m.post("/api/searchPosts",y.CI),m.get("/api/getUserPosts",y.hv),m.get("/api/getPopularPosts",y.bI);const f=m;r()}catch(e){r(e)}}))},4388:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{Q:()=>E});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(7252),d=t.n(c),l=t(9469),u=t(2317),y=t(1809),g=t(8358),p=t(9785),m=t(7128),f=t(4704),h=e([u,y,g,p,m,f]);[u,y,g,p,m,f]=h.then?(await h)():h;const E=d().Router();E.use(((e,s,t)=>(s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),"OPTIONS"===e.method?s.sendStatus(200):t()))),E.use(o().urlencoded({extended:!0})),E.use(i()()),E.use(d().json()),E.use(o().json()),E.get("/",((e,s)=>{s.send({status:`${l._.NODE_ENV}`,message:`${l._.RESPONSE_STATUS}`,name:`${l._.APP_NAME}`})})),E.use(u.A),E.use(f.A),E.use(y.A),E.use(m.A),E.use(p.A),E.use(g.A),r()}catch(e){r(e)}}))},7128:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>m});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(7252),u=t.n(l),y=t(4361),g=e([y]);y=(g.then?(await g)():g)[0];const p=u().Router();p.use(d()()),p.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),p.use(o().urlencoded({extended:!0})),p.use(i()()),p.use(u().json()),p.use(o().json()),p.get("/api/getUserData",y._q);const m=p;r()}catch(e){r(e)}}))},4704:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{A:()=>m});var a=t(3268),o=t.n(a),n=t(6898),i=t.n(n),c=t(8577),d=t.n(c),l=t(7252),u=t.n(l),y=t(4361),g=e([y]);y=(g.then?(await g)():g)[0];const p=u().Router();p.use(d()()),p.use(((e,s,t)=>{s.header("Access-Control-Allow-Origin","http://localhost:8080"),s.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),s.header("Access-Control-Allow-Credentials","true"),t()})),p.use(o().urlencoded({extended:!0})),p.use(i()()),p.use(u().json()),p.use(o().json()),p.get("/api/getAllUsers",y.CF),p.get("/api/getUserByID",y.k7),p.put("/api/updateUser",y.TK);const m=p;r()}catch(e){r(e)}}))},6020:(e,s,t)=>{t.d(s,{A:()=>y});var r=t(8461),a=t.n(r),o=t(6928),n=t.n(o),i=t(7189),c=t(9896),d=t.n(c);const l="/home/babsdevsys/appV-1/public/assets/images";d().existsSync(l)||d().mkdirSync(l,{recursive:!0});const u=a().diskStorage({destination:function(e,s,t){t(null,l)},filename:function(e,s,t){const r=Date.now()+"-"+Math.round(1e9*Math.random());t(null,s.fieldname+"-"+r+n().extname(s.originalname))}}),y=a()({storage:u,limits:{fileSize:1e7},fileFilter:function(e,s,t){const r=/jpeg|jpg|png|svg/,a=r.test(s.mimetype),o=r.test(n().extname(s.originalname).toLowerCase());if(a&&o)return t(null,!0);(async(e,s)=>{try{if(!(await(0,i.validateMIMEType)(e.path,{originalFilename:e.originalname,allowMimeTypes:["image/jpeg","image/png","image/svg+xml"]})).ok)return s(new Error("Invalid file type"));s(null,!0)}catch(e){console.error("Error validating file type:",e),s(new Error("Error validating file type"))}})(s.path,t)}})},2273:(e,s,t)=>{t.d(s,{A:()=>o});var r=t(643);function a(){return new Promise((e=>{setTimeout((()=>{e()}),1e3)}))}new r.PerformanceObserver((e=>{e.getEntries().forEach((e=>{console.log(`${e.name}: ${e.duration}ms`)})),r.performance.clearMarks()})).observe({type:"measure"});const o=async function(){try{r.performance.mark("Loader Start",{detail:"Loader started"}),await a(),r.performance.mark("Task 1 End",{detail:"Task 1 completed"}),await a(),r.performance.mark("Task 2 End",{detail:"Task 2 completed"});const e=r.performance.measure("Task 2 Duration","Task 1 End","Task 2 End");console.log(e.duration),r.performance.mark("Loader End"),r.performance.measure("Total Loader Duration","Loader Start","Loader End")}catch(e){console.error("Error in loader:",e)}}},2541:(e,s,t)=>{t.a(e,(async(e,r)=>{try{t.d(s,{K:()=>d});var a=t(128),o=t(5595),n=t(9609),i=e([o,n]);[o,n]=i.then?(await i)():i;const c=(0,a.J)();async function d(){const e=await c.transaction();try{await o.A.truncate({transaction:e}),await n.A.truncate({transaction:e}),await e.commit(),console.log("Tables have been truncated...")}catch(s){await e.rollback(),console.error("Error truncating tables:",s)}}r()}catch(l){r(l)}}))},8635:(e,s,t)=>{function r(e){const s=e.split(" ").map((e=>e.charAt(0).toUpperCase())).join("");return`https://ui-avatars.com/api/?name=${encodeURIComponent(s)}&size=200&background=random&color=fff`}t.d(s,{q:()=>r}),t(6982)},2300:(e,s,t)=>{t.d(s,{H4:()=>c,sh:()=>u});var r=t(1708),a=t.n(r),o=t(9896),n=t.n(o),i=t(9469);const c=(e,s)=>{console.error(e.message);let t={};e.message.includes("New User validation error")&&(t={name:"Name is required",username:"username is required",email:"email is required",password:"password is required"}),e.message.includes("UserRegistrations.email")&&(t.email="Email is already registered"),e.message.includes("incorrect email")&&(t.email="email is not registered"),e.message.includes("Incorrect password")&&(t.password="password is incorrect"),"SequelizeValidationError"===e.name&&e.error&&(t=e.error.reduce(((e,s)=>(e[s.path]=s.message,e)),{})),s.status(e.code||500).json({errors:t})};function d(e){const s=`${(new Date).toISOString()} - ${e.message}\n${e.stack}\n`;n().appendFileSync("error.log",s)}const l=new Map;function u(e,s,t,r){d(e),t.status(500).json({message:"An unexpected error occurred"}),r(e)}a().on("unhandledRejection",((e,s)=>{console.error("Unhandled Rejection at:",s,"reason:",e),l.set(s,e)})),a().on("rejectionHandled",(e=>{l.delete(e)})),a().on("unhandledRejection",((e,s)=>{d(e),console.error("Unhandled Rejection at:",s,"reason:",e),a().exit(1)})),a().on("uncaughtException",(e=>{d(e),console.error("Uncaught Exception:",e),a().exit(1)})),a().on("uncaughtException",(e=>{n().writeSync(a().stderr.fd,`Caught exception: ${e}\nException Origin: ${origin}\n`)})),setTimeout((()=>{console.log("This will still run.")}),i._.ERROR_TIMEOUT)},2502:(e,s,t)=>{function r(e){const{post_id:s,likes_id:t,creator_id:r}=e.query,a=void 0!==s?parseInt(s,10):void 0,o=void 0!==t?parseInt(t,10):void 0,n=void 0!==r?parseInt(r,10):void 0;if(console.log("Received parameters:",{post_id:s,likes_id:t,creator_id:r}),console.log("Parsed parameters:",{parsedPostId:a,parsedLikesId:o,parsedCreatorId:n}),void 0!==s&&void 0!==a&&isNaN(a)||void 0!==t&&void 0!==o&&isNaN(o)||void 0!==r&&void 0!==n&&isNaN(n))throw new Error("Invalid query parameters: post_id, likes_id, and creator_id must be numbers");if(void 0!==a&&a<0||void 0!==o&&o<0||void 0!==n&&n<0)throw new Error("Invalid query parameters: post_id, likes_id, and creator_id must be non-negative");return{post_id:a,likes_id:o,creator_id:n}}t.d(s,{V:()=>r})}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OEJBLEVBQWUsUUFDM0J6SixJQUFsQjBKLEdBQStCQSxFQUFnQixRQUMzQjFKLElBQXBCMkosR0FBaUNBLEVBQWtCLEVBQ3BELE1BQU0sSUFBSXRSLE1BQU0sb0ZBRXBCLE1BQU8sQ0FDSC9ELFFBQVNtVixFQUNUeE8sU0FBVXlPLEVBQ1YzSixXQUFZNEosRUFFcEIsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvY29uZmlnL2NvcnNFVk4udHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9jb25maWcvY29yT3B0aW9ucy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbmZpZy9kYXRhYmFzZUVOVi50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbmZpZy9qd3RFTlYudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9jb250cm9sbGVycy9Qb3N0Q29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL2NvbnRyb2xsZXJzL2F1dGhDb250cm9sbGVyLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvY29udHJvbGxlcnMvaW1hZ2VDb250cm9sbGVyLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvY29udHJvbGxlcnMvdXNlckNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9sb2FkZXJzL2F1dGgvaXBDb25maWcudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9sb2FkZXJzL2F1dGgvand0R2VuZXJhdG9yLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9hdXRoL3VzZXJBdXRoLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9kYXRhTG9hZGVyL21hcmlhZGIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9sb2FkZXJzL2RhdGFMb2FkZXIvc2VxdWlsaXplQ29uLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVsaXplLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9leHByZXNzLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbG9hZGVycy9pbmRleC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy9pbWFnZS5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy9pbmRleC5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy9saWtlUG9zdC5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy9wb3N0Lm1vZGVsLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvbW9kZWxzL3Byb2ZpbGVQaWMubW9kZWwudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9tb2RlbHMvc2F2ZVBvc3QubW9kZWwudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9tb2RlbHMvdXNlci5tb2RlbC50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL21vZGVscy91c2VyUmVnaXN0ZXIubW9kZWwudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci9yb3V0ZXMvYXV0aFJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy9jdXJyZW50VXNlclJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy9pbWFnZVJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy9wb3N0Um91dGVzLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvcm91dGVzL3JvdXRlci50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy91c2VyRGF0YVJvdXRlcy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3JvdXRlcy91c2VyUm91dGVzLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvc2VydmljZXMvbXVsdGVyLmNvbmZpZy50cyIsIndlYnBhY2s6Ly9hcHB2LTEvLi9zcmMvc2VydmVyL3NlcnZpY2VzL3BlcmZvcm1hbmNlLnRzIiwid2VicGFjazovL2FwcHYtMS8uL3NyYy9zZXJ2ZXIvc2VydmljZXMvdHJ1bmNhdGUudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci91dGlscy9hdmF0YXIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci91dGlscy9lcnJvckhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vYXBwdi0xLy4vc3JjL3NlcnZlci91dGlscy92YWxpZGF0ZUFuZFBhcnNlUGFyYW1zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0cmljdCBhcyBhc3NlcnQgfSBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHsgbG9hZCB9IGZyb20gJ3RzLWRvdGVudic7XG5jb25zdCBjb3JzU2NoZW1hRU5WID0gbG9hZCh7XG4gICAgLyogTG9hZCBDT1JTICovXG4gICAgQ09SU19PUklHSU46IFN0cmluZyxcbiAgICBDT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVM6IE51bWJlcixcbiAgICBDT1JTX0NSRURFTlRJQUxTOiBCb29sZWFuLFxuICAgIENPUlNfTUVUSE9EUzogU3RyaW5nLFxufSk7XG4vLyBkZXN0cnVjdHVyZSB0aGUgQ09SUyBzY2hlbWFcbmNvbnN0IHsgQ09SU19PUklHSU4sIENPUlNfT1BUSU9OU19TVUNDRVNTX1NUQVRVUywgQ09SU19DUkVERU5USUFMUywgQ09SU19NRVRIT0RTLCB9ID0gY29yc1NjaGVtYUVOVjtcbi8vIGFzc2VydCB0aGF0IHRoZSBDT1JTIHNjaGVtYSBpcyBwcmVzZW50XG5hc3NlcnQub2soQ09SU19PUklHSU4sICdDT1JTIG9yaWdpbiBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKENPUlNfT1BUSU9OU19TVUNDRVNTX1NUQVRVUywgJ0NPUlMgb3B0aW9ucyBzdWNjZXNzIHN0YXR1cyBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKENPUlNfQ1JFREVOVElBTFMsICdDT1JTIGNyZWRlbnRpYWxzIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soQ09SU19NRVRIT0RTLCAnQ09SUyBtZXRob2RzIHNob3VsZCBiZSBwcmVzZW50Jyk7XG4vLyBleHBvcnQgdGhlIENPUlMgc2NoZW1hXG5leHBvcnQgY29uc3QgY29yc0VOViA9IHtcbiAgICBDT1JTX09SSUdJTixcbiAgICBDT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVMsXG4gICAgQ09SU19DUkVERU5USUFMUyxcbiAgICBDT1JTX01FVEhPRFMsXG59O1xuLy8gZXhwb3J0IHRoZSBDT1JTIHNjaGVtYVxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNvcnNFTlYsXG59O1xuIiwiLy8gRXhwb3J0IGNvck9wdGlvbnMgb2JqZWN0IHdpdGggb3JpZ2luIGFuZCBvcHRpb25zU3VjY2Vzc1N0YXR1cyBwcm9wZXJ0aWVzXG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcbmltcG9ydCB7IGNvcnNFTlYgfSBmcm9tICcuL2NvcnNFVk4nO1xuY29uc3QgY29yT3B0aW9ucyA9IHtcbiAgICBvcmlnaW46IGNvcnNFTlYuQ09SU19PUklHSU4sXG4gICAgbWV0aG9kczogY29yc0VOVi5DT1JTX01FVEhPRFMsXG4gICAgY3JlZGVudGlhbHM6IGNvcnNFTlYuQ09SU19DUkVERU5USUFMUyxcbiAgICBvcHRpb25zU3VjY2Vzc1N0YXR1czogY29yc0VOVi5DT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVMsXG59O1xuZXhwb3J0IHsgY29yT3B0aW9ucyB9O1xuIiwiaW1wb3J0IHsgc3RyaWN0IGFzIGFzc2VydCB9IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgeyBsb2FkIH0gZnJvbSAndHMtZG90ZW52JztcbmNvbnN0IGRhdGFTY2hlbWFFTlYgPSBsb2FkKHtcbiAgICAvKiBMb2FkIERhdGFiYXNlICovXG4gICAgREJfSE9TVDogU3RyaW5nLFxuICAgIERCX1BPUlQ6IE51bWJlcixcbiAgICBEQl9VU0VSOiBTdHJpbmcsXG4gICAgREJfUEFTUzogU3RyaW5nLFxuICAgIERCX05BTUU6IFN0cmluZyxcbiAgICBEQl9TT0NLRVRfUEFUSDogU3RyaW5nLFxuICAgIERCX1NPQ0tFVF9USU1FT1VUOiBOdW1iZXIsXG4gICAgREJfQ09NUFJFU1M6IEJvb2xlYW4sXG4gICAgREJfREVCVUc6IEJvb2xlYW4sXG4gICAgREJfUEVSTUlUX0xPQ0FMX0lORklMRTogQm9vbGVhbixcbiAgICBEQl9UUkFDRTogQm9vbGVhbixcbiAgICBEQl9DSEVDS19EVVBMSUNBVEU6IEJvb2xlYW4sXG4gICAgREJfU1NMOiBCb29sZWFuLFxuICAgIERCX1NTTF9DQTogU3RyaW5nLFxuICAgIERCX1NTTF9LRVk6IFN0cmluZyxcbiAgICBEQl9TU0xfQ0VSVDogU3RyaW5nLFxuICAgIERCX0NPTk5FQ1RJT05fQVRUUklCVVRFUzogU3RyaW5nLFxuICAgIERCX0NPTk5FQ1RJT05fVElNRU9VVDogTnVtYmVyLFxufSk7XG5jb25zdCB7IERCX0hPU1QsIERCX1BPUlQsIERCX1VTRVIsIERCX1BBU1MsIERCX05BTUUsIERCX1NPQ0tFVF9QQVRILCBEQl9TT0NLRVRfVElNRU9VVCwgREJfQ09NUFJFU1MsIERCX0RFQlVHLCBEQl9QRVJNSVRfTE9DQUxfSU5GSUxFLCBEQl9UUkFDRSwgREJfQ0hFQ0tfRFVQTElDQVRFLCBEQl9TU0wsIERCX1NTTF9DQSwgREJfU1NMX0tFWSwgREJfU1NMX0NFUlQsIERCX0NPTk5FQ1RJT05fQVRUUklCVVRFUywgREJfQ09OTkVDVElPTl9USU1FT1VULCB9ID0gZGF0YVNjaGVtYUVOVjtcbmFzc2VydC5vayhEQl9IT1NULCAnRGF0YWJhc2UgaG9zdCBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKERCX1BPUlQsICdEYXRhYmFzZSBwb3J0IHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soREJfVVNFUiwgJ0RhdGFiYXNlIHVzZXIgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhEQl9QQVNTLCAnRGF0YWJhc2UgcGFzc3dvcmQgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhEQl9OQU1FLCAnRGF0YWJhc2UgbmFtZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuZXhwb3J0IGNvbnN0IGRhdGFiYXNlRU5WID0ge1xuICAgIERCX0hPU1QsXG4gICAgREJfUE9SVCxcbiAgICBEQl9VU0VSLFxuICAgIERCX1BBU1MsXG4gICAgREJfTkFNRSxcbiAgICBEQl9TT0NLRVRfUEFUSCxcbiAgICBEQl9TT0NLRVRfVElNRU9VVCxcbiAgICBEQl9DT01QUkVTUyxcbiAgICBEQl9ERUJVRyxcbiAgICBEQl9QRVJNSVRfTE9DQUxfSU5GSUxFLFxuICAgIERCX1RSQUNFLFxuICAgIERCX0NIRUNLX0RVUExJQ0FURSxcbiAgICBEQl9DT05ORUNUSU9OX0FUVFJJQlVURVMsXG4gICAgREJfQ09OTkVDVElPTl9USU1FT1VULFxuICAgIERCX1NTTCxcbiAgICBEQl9TU0xfQ0EsXG4gICAgREJfU1NMX0tFWSxcbiAgICBEQl9TU0xfQ0VSVCxcbn07XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgZGF0YWJhc2VFTlYsXG4gICAgbWFyaWFkYjoge1xuICAgICAgICBzc2w6IERCX1NTTCxcbiAgICAgICAgc3NsT3B0aW9uczoge1xuICAgICAgICAgICAgY2E6IERCX1NTTF9DQSxcbiAgICAgICAgICAgIGtleTogREJfU1NMX0tFWSxcbiAgICAgICAgICAgIGNlcnQ6IERCX1NTTF9DRVJULFxuICAgICAgICB9LFxuICAgIH0sXG59O1xuIiwiaW1wb3J0IHsgc3RyaWN0IGFzIGFzc2VydCB9IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgeyBsb2FkIH0gZnJvbSAndHMtZG90ZW52JztcbmNvbnN0IGp3dFNjaGVtYUVOViA9IGxvYWQoe1xuICAgIC8qIExvYWQgSldUICovXG4gICAgSldUX1NFQ1JFVDogU3RyaW5nLFxuICAgIEpXVF9FWFBJUkVTX0lOOiBTdHJpbmcsXG4gICAgSldUX1JFRlJFU0hfU0VDUkVUOiBTdHJpbmcsXG4gICAgSldUX1JFRlJFU0hfRVhQSVJFU19JTjogU3RyaW5nLFxuICAgIEpXVF9SRUZSRVNIX01BWF9BR0U6IE51bWJlcixcbiAgICBKV1RfQUxHT1JJVEhNOiBTdHJpbmcsXG4gICAgSldUX0lTU1VFUjogU3RyaW5nLFxuICAgIEpXVF9NQVhfQUdFOiBOdW1iZXIsXG4gICAgSldUX0hUVFBfT05MWTogQm9vbGVhbixcbiAgICBKV1RfU0FNRV9TSVRFOiBTdHJpbmcsXG4gICAgSldUX0NPT0tJRV9OQU1FOiBTdHJpbmcsXG4gICAgSldUX1NFQ1VSRTogQm9vbGVhbixcbn0pO1xuLy8gZGVzdHJ1Y3R1cmUgdGhlIEpXVCBzY2hlbWFcbmNvbnN0IHsgSldUX1NFQ1JFVCwgSldUX0VYUElSRVNfSU4sIEpXVF9SRUZSRVNIX1NFQ1JFVCwgSldUX1JFRlJFU0hfRVhQSVJFU19JTiwgSldUX1JFRlJFU0hfTUFYX0FHRSwgSldUX0FMR09SSVRITSwgSldUX0lTU1VFUiwgSldUX01BWF9BR0UsIEpXVF9IVFRQX09OTFksIEpXVF9TQU1FX1NJVEUsIEpXVF9DT09LSUVfTkFNRSwgSldUX1NFQ1VSRSwgfSA9IGp3dFNjaGVtYUVOVjtcbi8vIGFzc2VydCB0aGF0IHRoZSBKV1Qgc2NoZW1hIGlzIHByZXNlbnRcbmFzc2VydC5vayhKV1RfU0VDUkVULCAnSldUIHNlY3JldCBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9FWFBJUkVTX0lOLCAnSldUIGV4cGlyZXMgaW4gc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfUkVGUkVTSF9TRUNSRVQsICdKV1QgcmVmcmVzaCBzZWNyZXQgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfUkVGUkVTSF9FWFBJUkVTX0lOLCAnSldUIHJlZnJlc2ggZXhwaXJlcyBpbiBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9BTEdPUklUSE0sICdKV1QgYWxnb3JpdGhtIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX0lTU1VFUiwgJ0pXVCBpc3N1ZXIgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfTUFYX0FHRSwgJ0pXVCBtYXggYWdlIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX0hUVFBfT05MWSwgJ0pXVCBodHRwIG9ubHkgc2hvdWxkIGJlIHByZXNlbnQnKTtcbmFzc2VydC5vayhKV1RfU0FNRV9TSVRFLCAnSldUIHNhbWUgc2l0ZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9DT09LSUVfTkFNRSwgJ0pXVCBjb29raWUgbmFtZSBzaG91bGQgYmUgcHJlc2VudCcpO1xuYXNzZXJ0Lm9rKEpXVF9TRUNVUkUsICdKV1Qgc2VjdXJlIHNob3VsZCBiZSBwcmVzZW50Jyk7XG5hc3NlcnQub2soSldUX1JFRlJFU0hfTUFYX0FHRSwgJ0pXVCByZWZyZXNoIG1heCBhZ2Ugc2hvdWxkIGJlIHByZXNlbnQnKTtcbi8vIGV4cG9ydCB0aGUgSldUIHNjaGVtYVxuZXhwb3J0IGNvbnN0IGp3dEVOViA9IHtcbiAgICBKV1RfU0VDUkVULFxuICAgIEpXVF9FWFBJUkVTX0lOLFxuICAgIEpXVF9SRUZSRVNIX1NFQ1JFVCxcbiAgICBKV1RfUkVGUkVTSF9FWFBJUkVTX0lOLFxuICAgIEpXVF9SRUZSRVNIX01BWF9BR0UsXG4gICAgSldUX0FMR09SSVRITSxcbiAgICBKV1RfSVNTVUVSLFxuICAgIEpXVF9NQVhfQUdFLFxuICAgIEpXVF9IVFRQX09OTFksXG4gICAgSldUX1NBTUVfU0lURSxcbiAgICBKV1RfQ09PS0lFX05BTUUsXG4gICAgSldUX1NFQ1VSRSxcbn07XG4vLyBleHBvcnQgdGhlIEpXVCBzY2hlbWFcbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBqd3RFTlYsXG59O1xuIiwiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgT3AgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgand0RU5WIH0gZnJvbSAnLi4vY29uZmlnL2p3dEVOVic7XG5pbXBvcnQgeyBJbWFnZVN0b3JhZ2VzLCBMaWtlcywgUG9zdHMsIFNhdmVzLCBVc2VycywgfSBmcm9tICcuLi9tb2RlbHMvaW5kZXgubW9kZWwnO1xuaW1wb3J0IHsgZ2V0SW1hZ2VQcmV2aWV3VXJsIH0gZnJvbSAnLi9pbWFnZUNvbnRyb2xsZXInO1xuZG90ZW52LmNvbmZpZygpO1xuLy8gQ3JlYXRlIFBvc3QgTWV0aG9kIC0gQ3JlYXRlIGEgbmV3IHBvc3RcbmV4cG9ydCBjb25zdCBjcmVhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBjYXB0aW9uLCBsb2NhdGlvbiwgdGFncyB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkOyAvLyBFbnN1cmUgdGhhdCB0aGUgdG9rZW4gY29udGFpbnMgdGhlIHVzZXIgSURcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgaW1hZ2UgVVJMIGZyb20gdGhlIEltYWdlU3RvcmFnZSB0YWJsZSB1c2luZyB0aGUgc3RhdGljIG1ldGhvZFxuICAgICAgICAgICAgY29uc3QgaW1hZ2VSZWNvcmQgPSBhd2FpdCBJbWFnZVN0b3JhZ2VzLmZpbmRJbWFnZUJ5UmVmZXJlbmNlS2V5KCd1c2VyX2lkJywgdXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIWltYWdlUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0ltYWdlIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXdQb3N0ID0gYXdhaXQgUG9zdHMuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBjYXB0aW9uOiBjYXB0aW9uLFxuICAgICAgICAgICAgICAgIGltYWdlVVJMOiBpbWFnZVJlY29yZC5pbWFnZVVybCxcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgdGFnczogdGFncyB8fCAnJyxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX0F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIGNyZWF0b3JfSWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghbmV3UG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGNyZWF0aW5nIG5ldyBwb3N0LicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzXG4gICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoMjAxKVxuICAgICAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdQb3N0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgbmV3UG9zdCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdQb3N0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHBvc3Q6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgZGVsZXRlRmlsZSA9IGFzeW5jIChfcmVxLCByZXMsIGltYWdlVXJsKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBJbWFnZVN0b3JhZ2VzLmZpbmRPbmUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgaW1hZ2VVcmw6IGltYWdlVXJsIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdJbWFnZSBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGltYWdlLmRlc3Ryb3koKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSW1hZ2UgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgaW1hZ2U6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBVcGRhdGUgUG9zdCBNZXRob2QgLSBVcGRhdGUgYSBwb3N0XG5leHBvcnQgY29uc3QgdXBkYXRlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgY2FwdGlvbiwgbG9jYXRpb24sIHRhZ3MsIGltYWdlVXJsOiBuZXdJbWFnZVVybCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IHBvc3RfaWQgPSBwYXJzZUludChyZXEucXVlcnkucG9zdF9pZCwgMTApO1xuICAgICAgICBpZiAoIXBvc3RfaWQpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkOyAvLyBFbnN1cmUgdGhhdCB0aGUgdG9rZW4gY29udGFpbnMgdGhlIHVzZXIgSURcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHBvc3RfaWQsIGNyZWF0b3JfSWQ6IHVzZXJfaWQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwb3N0LmNyZWF0b3JfSWQgIT09IHVzZXIuaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgYXR0ZW1wdCEnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpbWFnZVVybCA9IHBvc3Q/LmltYWdlVVJMO1xuICAgICAgICAgICAgaWYgKG5ld0ltYWdlVXJsKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlld0ltYWdlVXJsID0gYXdhaXQgZ2V0SW1hZ2VQcmV2aWV3VXJsKHJlcSwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2aWV3SW1hZ2VVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0ltYWdlIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBwcmV2aWV3SW1hZ2VVcmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBvc3QgPSBhd2FpdCBwb3N0LnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgaWQ6IHBvc3QuaWQsXG4gICAgICAgICAgICAgICAgY2FwdGlvbjogY2FwdGlvbixcbiAgICAgICAgICAgICAgICBpbWFnZVVSTDogaW1hZ2VVcmwsXG4gICAgICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgIHRhZ3M6IHRhZ3MsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9BdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF1cGRhdGVkUG9zdCkge1xuICAgICAgICAgICAgICAgIGlmIChuZXdJbWFnZVVybCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBkZWxldGVGaWxlKHJlcSwgcmVzLCBuZXdJbWFnZVVybCk7IC8vIEVuc3VyZSBkZWxldGVGaWxlIGlzIGRlZmluZWQgZWxzZXdoZXJlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIHVwZGF0aW5nIHBvc3QnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgdXBkYXRlZCBzdWNjZXNzZnVsbHknLCBwb3N0OiB1cGRhdGVkUG9zdCB9KTtcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkUG9zdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gR2V0IGFsbCBwb3N0c1xuZXhwb3J0IGNvbnN0IGdldEFsbFBvc3RzID0gYXN5bmMgKF9yZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdHMuZmluZEFsbCh7XG4gICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbDogVXNlcnMsXG4gICAgICAgICAgICAgICAgICAgIGFzOiAnVXNlcicsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAndXNlcm5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2VtYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdwcm9maWxlUGljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdiaW8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpcnN0TmFtZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbGFzdE5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ltYWdlVVJMJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdhdmF0YXJVcmwnLFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBwb3N0czogcG9zdHMgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHBvc3RzOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gRnVuY3Rpb24gdG8gbGlrZSBhIHBvc3QgYnkgdXNlclxuZXhwb3J0IGNvbnN0IGxpa2VQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBjb25zdCBwb3N0X2lkID0gcGFyc2VJbnQocmVxLmJvZHkucG9zdF9pZCwgMTApO1xuICAgICAgICAgICAgaWYgKGlzTmFOKHBvc3RfaWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBwb3N0IElEJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmZpbmRCeVBrKHBvc3RfaWQpO1xuICAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTGlrZSA9IGF3YWl0IExpa2VzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHBvc3RfaWQsIHVzZXJfaWQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nTGlrZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgYWxyZWFkeSBsaWtlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV3TGlrZSA9IGF3YWl0IExpa2VzLmNyZWF0ZUxpa2Uoe1xuICAgICAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICAgICAgcG9zdF9pZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX0F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXBvc3QubGlrZXNfQ291bnQpIHtcbiAgICAgICAgICAgICAgICBwb3N0Lmxpa2VzX0NvdW50ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxpa2VzQ291bnQgPSBwb3N0Lmxpa2VzX0NvdW50ICsgMTtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRQb3N0ID0gYXdhaXQgcG9zdC51cGRhdGUoeyBsaWtlc19Db3VudDogbGlrZXNDb3VudCB9KTtcbiAgICAgICAgICAgIGlmICghdXBkYXRlZFBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBsaWtpbmcgcG9zdC4nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoMjAxKVxuICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgbGlrZWQgc3VjY2Vzc2Z1bGx5JywgbGlrZTogbmV3TGlrZSB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsaWtpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIEdldCBwb3N0IGJ5IElEXG5leHBvcnQgY29uc3QgZ2V0UG9zdEJ5SWQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXF1ZXN0ZWRVc2VySWQgPSBwYXJzZUludChyZXEucXVlcnkudXNlcl9pZCwgMTApO1xuICAgICAgICBpZiAoIXJlcXVlc3RlZFVzZXJJZCkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAncG9zdCBVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRVc2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsocmVxdWVzdGVkVXNlcklkKTtcbiAgICAgICAgICAgIGlmICghcmVxdWVzdGVkVXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0X2lkID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnBvc3RfaWQsIDEwKTtcbiAgICAgICAgICAgIGlmICghcG9zdF9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0cy5maW5kQnlQayhwb3N0X2lkKTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgbm90IGZvdW5kIGhlcmUnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcG9zdCwgcmVxdWVzdGVkVXNlciwgcmVxdWVzdGVkVXNlcklkLCBwb3N0X2lkIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIHRvZ2dsZSBsaWtlc1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUxpa2VkUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdF9pZCA9IHBhcnNlSW50KHJlcS5ib2R5LnBvc3RfaWQsIDEwKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZEJ5UGsocG9zdF9pZCk7XG4gICAgICAgICAgICBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdMaWtlID0gYXdhaXQgTGlrZXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgcG9zdF9pZDogcG9zdF9pZCwgdXNlcl9pZDogdXNlcl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdMaWtlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZXhpc3RpbmdMaWtlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjdXJyZW50TGlrZXMgPSBwb3N0Lmxpa2VzX0NvdW50IHx8IDA7XG4gICAgICAgICAgICBpZiAoY3VycmVudExpa2VzID4gMCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMaWtlcyAtPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgcG9zdC51cGRhdGUoeyBsaWtlc19Db3VudDogY3VycmVudExpa2VzIH0pO1xuICAgICAgICAgICAgYXdhaXQgcG9zdC5zYXZlKCk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXhpc3RpbmdMaWtlXG4gICAgICAgICAgICAgICAgICAgID8gJ0xpa2UgcmVtb3ZlZCBzdWNjZXNzZnVsbHknXG4gICAgICAgICAgICAgICAgICAgIDogJ1Bvc3QgbGlrZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgICAgICBwb3N0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdG9nZ2xpbmcgbGlrZTonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIEZ1bmN0aW9uIHRvIHNhdmUgYSBwb3N0IGJ5IHVzZXJcbmV4cG9ydCBjb25zdCBzYXZlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0IHx8IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnNwbGl0KCcgJylbMV07XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKV1QgdmVyaWZpY2F0aW9uIGVycm9yJywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBJbnZhbGlkIFRva2VuJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdF9pZCA9IHBhcnNlSW50KHJlcS5ib2R5LnBvc3RfaWQsIDEwKTtcbiAgICAgICAgICAgIGlmICghcG9zdF9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZEJ5UGsocG9zdF9pZCk7XG4gICAgICAgICAgICBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTYXZlID0gYXdhaXQgU2F2ZXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgcG9zdF9pZCwgdXNlcl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTYXZlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBhbHJlYWR5IHNhdmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXdTYXZlID0gYXdhaXQgU2F2ZXMuY3JlYXRlU2F2ZSh7XG4gICAgICAgICAgICAgICAgaWQ6IHVzZXJfaWQsXG4gICAgICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgICAgICBwb3N0X2lkLFxuICAgICAgICAgICAgICAgIHNhdmVEYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIW5ld1NhdmUpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBzYXZpbmcgcG9zdC4nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoMjAxKVxuICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgc2F2ZWQgc3VjY2Vzc2Z1bGx5Jywgc2F2ZTogbmV3U2F2ZSB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIEZ1bmN0aW9uIHRvIGRlbGV0ZSBhIHNhdmVkIHBvc3QgYnkgdXNlclxuZXhwb3J0IGNvbnN0IGRlbGV0ZVNhdmVkUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0IHx8IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnNwbGl0KCcgJylbMV07XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKV1QgdmVyaWZpY2F0aW9uIGVycm9yJywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBJbnZhbGlkIFRva2VuJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdF9pZCA9IHBhcnNlSW50KHJlcS5ib2R5LnBvc3RfaWQsIDEwKTtcbiAgICAgICAgICAgIGlmICghcG9zdF9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3QgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZEJ5UGsocG9zdF9pZCk7XG4gICAgICAgICAgICBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTYXZlID0gYXdhaXQgU2F2ZXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgcG9zdF9pZCwgdXNlcl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTYXZlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZXhpc3RpbmdTYXZlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBleGlzdGluZ1NhdmVcbiAgICAgICAgICAgICAgICAgICAgPyAnUG9zdCB1bnNhdmVkIHN1Y2Nlc3NmdWxseSdcbiAgICAgICAgICAgICAgICAgICAgOiAnUG9zdCBub3Qgc2F2ZWQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgc2F2ZWQgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIEdldCBhbGwgc2F2ZWQgcG9zdHMgYnkgdXNlclxuZXhwb3J0IGNvbnN0IGdldFNhdmVkUG9zdHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dCB8fCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5zcGxpdCgnICcpWzFdO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSldUIHZlcmlmaWNhdGlvbiBlcnJvcicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzYXZlZFBvc3RzID0gYXdhaXQgU2F2ZXMuZ2V0U2F2ZWRQb3N0cyh1c2VyX2lkKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICBzYXZlZFBvc3RzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBzYXZlZCBwb3N0czonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIERlbGV0ZSBhIHBvc3QgLVxuZXhwb3J0IGNvbnN0IGRlbGV0ZVBvc3QgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dCB8fCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5zcGxpdCgnICcpWzFdO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3RfaWQgPSBwYXJzZUludChyZXEuYm9keS5wb3N0X2lkLCAxMCk7XG4gICAgICAgICAgICBpZiAoIXBvc3RfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IElEIGlzIHJlcXVpcmVkIGZyb20gc2VydmVyJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZmluZEJ5UGsocG9zdF9pZCk7XG4gICAgICAgICAgICBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTYXZlID0gYXdhaXQgU2F2ZXMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgcG9zdF9pZCwgdXNlcl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTYXZlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZXhpc3RpbmdTYXZlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZpbmQgYXNzb2NpYXRlZCBpbWFnZXMgYW5kIGRlbGV0ZSB0aGVtXG4gICAgICAgICAgICBpZiAocG9zdC5pbWFnZVVSTCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlID0gYXdhaXQgSW1hZ2VTdG9yYWdlcy5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaW1hZ2VVcmw6IHBvc3QuaW1hZ2VVUkwgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaW1hZ2UuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHBvc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBkZWxldGVkIHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgcG9zdDonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIEdldCBhbGwgaW5maW5pdGUgcG9zdHNcbmV4cG9ydCBjb25zdCBnZXRJbmZpbml0ZVBvc3RzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBwYWdlID0gMCwgbGltaXQgPSAxMCB9ID0gcmVxLnF1ZXJ5O1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBwYWdlXG4gICAgICAgICAgICA/IHBhcnNlSW50KHBhZ2UsIDEwKSAqIHBhcnNlSW50KGxpbWl0LCAxMClcbiAgICAgICAgICAgIDogMDtcbiAgICAgICAgY29uc3QgcG9zdHMgPSBhd2FpdCBQb3N0cy5maW5kQW5kQ291bnRBbGwoe1xuICAgICAgICAgICAgbGltaXQ6IHBhcnNlSW50KGxpbWl0LCAxMCksXG4gICAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgICBvcmRlcjogW1snY3JlYXRlZF9BdCcsICdERVNDJ11dLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgcG9zdHMsXG4gICAgICAgICAgICBwYWdlOiBwYXJzZUludChwYWdlLCAxMCksXG4gICAgICAgICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwocG9zdHMuY291bnQgLyBwYXJzZUludChsaW1pdCwgMTApKSxcbiAgICAgICAgICAgIHRvdGFsQ291bnQ6IHBvc3RzLmNvdW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcG9zdHM6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBTZWFyY2ggcG9zdHNcbmV4cG9ydCBjb25zdCBzZWFyY2hQb3N0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgc2VhcmNoVmFsdWUgfSA9IHJlcS5ib2R5O1xuICAgICAgICBpZiAoIXNlYXJjaFZhbHVlKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdTZWFyY2ggdmFsdWUgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdHMuZmluZEFsbCh7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgIFtPcC5vcl06IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtPcC5saWtlXTogYCUke3NlYXJjaFZhbHVlfSVgLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtPcC5saWtlXTogYCUke3NlYXJjaFZhbHVlfSVgLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbT3AubGlrZV06IGAlJHtzZWFyY2hWYWx1ZX0lYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICBwb3N0cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWFyY2hpbmcgcG9zdHM6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICAgIH1cbn07XG4vLyBHZXQgYWxsIHBvc3RzIGJ5IHVzZXJcbmV4cG9ydCBjb25zdCBnZXRVc2VyUG9zdHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dCB8fCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5zcGxpdCgnICcpWzFdO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSldUIHZlcmlmaWNhdGlvbiBlcnJvcicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdHMuZmluZEFsbCh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgY3JlYXRvcl9JZDogdXNlcl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHBvc3RzIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBwb3N0czonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbi8vIEdldCBQb3B1bGFyIFBvc3RzXG5leHBvcnQgY29uc3QgZ2V0UG9wdWxhclBvc3RzID0gYXN5bmMgKF9yZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvcHVsYXJQb3N0cyA9IGF3YWl0IFBvc3RzLmZpbmRBbGwoe1xuICAgICAgICAgICAgb3JkZXI6IFtbJ2xpa2VzX0NvdW50JywgJ0RFU0MnXV0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHBvcHVsYXJQb3N0cyB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcG9wdWxhciBwb3N0czonLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gICAgfVxufTtcbiIsImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IHsgand0R2VuZXJhdG9yLCBqd3RSZWZyZXNoIH0gZnJvbSAnLi4vbG9hZGVycy9hdXRoL2p3dEdlbmVyYXRvcic7XG5pbXBvcnQgeyBVc2VyUmVnaXN0cmF0aW9uIH0gZnJvbSAnLi4vbW9kZWxzL2luZGV4Lm1vZGVsJztcbmltcG9ydCB7IGhhbmRsZUVycm9yIH0gZnJvbSAnLi4vdXRpbHMvZXJyb3JIYW5kbGVyJztcbmRvdGVudi5jb25maWcoKTtcbmV4cG9ydCBjb25zdCB1c2VyUmVnaXN0ZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IG5hbWUsIHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgICAgICBpZiAoIW5hbWUgfHwgIXVzZXJuYW1lIHx8ICFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVFcnJvcihuZXcgRXJyb3IoJ05ldyBVc2VyIHZhbGlkYXRpb24gZXJyb3InKSwgcmVzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGNvbnN0IHVzZXJFeGlzdHMgPSBhd2FpdCBVc2VyUmVnaXN0cmF0aW9uLmZpbmRPbmUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGVtYWlsIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodXNlckV4aXN0cykge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUVycm9yKG5ldyBFcnJvcignVXNlclJlZ2lzdHJhdGlvbnMuZW1haWw6IFVzZXIgYWxyZWFkeSBleGlzdHMgJyksIHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJSZWdpc3RyYXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgIG5ld1VzZXI6IG5hbWUsXG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgICBoYXNoZWRwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0b2tlbiA9IGp3dEdlbmVyYXRvcih7IGlkOiB1c2VyLmlkIH0pO1xuICAgICAgICByZXMuY29va2llKCdqd3QnLCB0b2tlbiwge1xuICAgICAgICAgICAgaHR0cE9ubHk6IGp3dEVOVi5KV1RfSFRUUF9PTkxZLFxuICAgICAgICAgICAgbWF4QWdlOiBqd3RFTlYuSldUX01BWF9BR0UgKiAxMDAwLFxuICAgICAgICAgICAgc2VjdXJlOiBqd3RFTlYuSldUX1NFQ1VSRSxcbiAgICAgICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uZXdVc2VyLFxuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgIHRva2VuOiB0b2tlbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBoYW5kbGVFcnJvcihlcnJvciwgcmVzKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHVzZXJMb2dpbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcbiAgICAgICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVFcnJvcihuZXcgRXJyb3IoJ0xvZ2luIFZhbGlkYXRpb24gRXJyb3IhJyksIHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJSZWdpc3RyYXRpb24ubG9naW5Vc2VyKGVtYWlsLCBwYXNzd29yZCk7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRva2VuID0gand0R2VuZXJhdG9yKHsgaWQ6IHVzZXIuaWQgfSk7XG4gICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IGp3dFJlZnJlc2goeyBpZDogdXNlci5pZCB9KTtcbiAgICAgICAgLy8gU2V0dGluZyB0aGUgYWNjZXNzIHRva2VuIGNvb2tpZVxuICAgICAgICByZXMuY29va2llKCdqd3QnLCB0b2tlbiwge1xuICAgICAgICAgICAgaHR0cE9ubHk6IGp3dEVOVi5KV1RfSFRUUF9PTkxZLFxuICAgICAgICAgICAgbWF4QWdlOiBqd3RFTlYuSldUX01BWF9BR0UgKiAxMDAwLCAvLyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgIHNlY3VyZTogand0RU5WLkpXVF9TRUNVUkUsXG4gICAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTZXR0aW5nIHRoZSByZWZyZXNoIHRva2VuIGNvb2tpZVxuICAgICAgICByZXMuY29va2llKCdyZWZyZXNoVG9rZW4nLCByZWZyZXNoVG9rZW4sIHtcbiAgICAgICAgICAgIGh0dHBPbmx5OiBqd3RFTlYuSldUX0hUVFBfT05MWSxcbiAgICAgICAgICAgIG1heEFnZTogand0RU5WLkpXVF9SRUZSRVNIX01BWF9BR0UgKiAxMDAwLCAvLyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgIHNlY3VyZTogand0RU5WLkpXVF9TRUNVUkUsXG4gICAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc2V0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3Rva2VufWApO1xuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSB1c2VyO1xuICAgICAgICByZXMuanNvbih7IHRva2VuLCByZWZyZXNoVG9rZW4sIHVzZXI6IHVzZXIuaWQgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBoYW5kbGVFcnJvcihlcnJvciwgcmVzKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHVzZXJMb2dvdXQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gcmVxLmNvb2tpZXMucmVmcmVzaFRva2VuO1xuICAgICAgICBpZiAoIWFjY2Vzc1Rva2VuICYmICFyZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ05vIHRva2VucyBwcm92aWRlZCEnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFyIHRoZSBhY2Nlc3MgdG9rZW5cbiAgICAgICAgcmVzLmNvb2tpZSgnand0JywgJycsIHtcbiAgICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgICAgICAgbWF4QWdlOiAxLCAvLyAxIG1pbGxpc2Vjb25kIHRvIGVmZmVjdGl2ZWx5IGV4cGlyZSB0aGUgY29va2llXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDbGVhciB0aGUgcmVmcmVzaCB0b2tlblxuICAgICAgICByZXMuY29va2llKCdyZWZyZXNoVG9rZW4nLCAnJywge1xuICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgICBtYXhBZ2U6IDEsIC8vIDEgbWlsbGlzZWNvbmQgdG8gZWZmZWN0aXZlbHkgZXhwaXJlIHRoZSBjb29raWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbG9nZ2VkIG91dCcgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBoYW5kbGVFcnJvcihlcnJvciwgcmVzKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHJlZnJlc2hUb2tlbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IHJlcS5jb29raWVzLnJlZnJlc2hUb2tlbjtcbiAgICBpZiAoIXJlZnJlc2hUb2tlbikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGp3dC52ZXJpZnkocmVmcmVzaFRva2VuLCBqd3RFTlYuSldUX1JFRlJFU0hfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3InLCBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlclJlZ2lzdHJhdGlvbi5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyB0b2tlblxuICAgICAgICAgICAgY29uc3QgbmV3VG9rZW4gPSBqd3Quc2lnbih7IGlkOiB1c2VyLmlkIH0sIGp3dEVOVi5KV1RfU0VDUkVULCB7XG4gICAgICAgICAgICAgICAgZXhwaXJlc0luOiBqd3RFTlYuSldUX0VYUElSRVNfSU4sXG4gICAgICAgICAgICAgICAgYWxnb3JpdGhtOiBqd3RFTlYuSldUX0FMR09SSVRITSxcbiAgICAgICAgICAgICAgICBpc3N1ZXI6IGp3dEVOVi5KV1RfSVNTVUVSLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXMuY29va2llKCdqd3QnLCBuZXdUb2tlbiwge1xuICAgICAgICAgICAgICAgIGh0dHBPbmx5OiBqd3RFTlYuSldUX0hUVFBfT05MWSxcbiAgICAgICAgICAgICAgICBtYXhBZ2U6IGp3dEVOVi5KV1RfUkVGUkVTSF9NQVhfQUdFICogMTAwMCxcbiAgICAgICAgICAgICAgICBzZWN1cmU6IGp3dEVOVi5KV1RfU0VDVVJFLFxuICAgICAgICAgICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB0b2tlbjogbmV3VG9rZW4sIHVzZXI6IHVzZXIuaWQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGN1cnJlbnQgdXNlcjonLCBlcnJvcik7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBnZXR0aW5nIGN1cnJlbnQgdXNlcicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH0pO1xufTtcbiIsImltcG9ydCAnZG90ZW52L2NvbmZpZyc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBqd3RFTlYgfSBmcm9tICcuLi9jb25maWcvand0RU5WJztcbmltcG9ydCB7IEltYWdlU3RvcmFnZXMsIFByb2ZpbGVQaWN0dXJlcywgVXNlcnMgfSBmcm9tICcuLi9tb2RlbHMvaW5kZXgubW9kZWwnO1xuLy8gKiogUmVmYWN0b3JlZCBmdW5jdGlvbiB0byByZXR1cm4gaW1hZ2UgVVJMXG5leHBvcnQgY29uc3QgZ2V0SW1hZ2VQcmV2aWV3VXJsID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGltYWdlID0gYXdhaXQgSW1hZ2VTdG9yYWdlcy5maW5kSW1hZ2VCeVJlZmVyZW5jZUtleSgndXNlcl9pZCcsIHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCFpbWFnZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ05vIGltYWdlIGZvdW5kJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgaW1hZ2VVcmw6IGltYWdlLmltYWdlVXJsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgaW1hZ2UgcHJldmlldzonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGdldCBpbWFnZSBwcmV2aWV3Jyk7XG4gICAgfVxufTtcbi8vICoqIFJldHVybiBQcm9maWxlIHBpY3R1cmUgdXJsIGZvciBwcmV2aWV3XG5leHBvcnQgY29uc3QgZ2V0UHJvZmlsZVBpY1ByZXZpZXdVcmwgPSBhc3luYyAocmVxKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hdXRob3JpemVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hdXRob3JpemVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB1c2VyIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHByb2ZpbGVQaWMgPSBhd2FpdCBQcm9maWxlUGljdHVyZXMuZmluZFByb2ZpbGVQaWNCeVJlZmVyZW5jZUtleSgndXNlcl9pZCcsIHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCFwcm9maWxlUGljKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHByb2ZpbGUgcGljIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUHJvZmlsZSBQaWM6JywgcHJvZmlsZVBpYyk7XG4gICAgICAgICAgICByZXR1cm4gcHJvZmlsZVBpYztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHByb2ZpbGUgcGljIHByZXZpZXc6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZXQgcHJvZmlsZSBwaWMgcHJldmlldycpO1xuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCB7IGdldEltYWdlUHJldmlld1VybCwgZ2V0UHJvZmlsZVBpY1ByZXZpZXdVcmwgfTtcbiIsImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IHsgTGlrZXMsIFBvc3RzLCBQcm9maWxlUGljdHVyZXMsIFVzZXJzIH0gZnJvbSAnLi4vbW9kZWxzL2luZGV4Lm1vZGVsJztcbmltcG9ydCB7IHZhbGlkYXRlQW5kUGFyc2VQYXJhbXMgfSBmcm9tICcuLi91dGlscy92YWxpZGF0ZUFuZFBhcnNlUGFyYW1zJztcbmRvdGVudi5jb25maWcoKTtcbi8vIEdldCBhbGwgVXNlcnMgZnJvbSBkYXRhYmFzZSB3aXRoIGxpbWl0IGFuZCBvZmZzZXRcbmV4cG9ydCBjb25zdCBnZXRBbGxVc2VycyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPcHRpb25hbGx5LCB5b3UgY291bGQgYWRkIHJvbGUtYmFzZWQgY2hlY2tzIGhlcmVcbiAgICAgICAgICAgIC8vIGlmICh1c2VyLnJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgICAgICAgIC8vICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnRm9yYmlkZGVuJyB9KTtcbiAgICAgICAgICAgIC8vICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgY29uc3QgbGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQsIDEwKSB8fCAxMDsgLy8gRGVmYXVsdCBsaW1pdCB0byAxMFxuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IFtcbiAgICAgICAgICAgICAgICAnaWQnLFxuICAgICAgICAgICAgICAgICdmaXJzdE5hbWUnLFxuICAgICAgICAgICAgICAgICdsYXN0TmFtZScsXG4gICAgICAgICAgICAgICAgJ3VzZXJuYW1lJyxcbiAgICAgICAgICAgICAgICAnaW1hZ2VVUkwnLFxuICAgICAgICAgICAgICAgICdhdmF0YXJVcmwnLFxuICAgICAgICAgICAgICAgICdwcm9maWxlUGljJyxcbiAgICAgICAgICAgICAgICAnYmlvJyxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXJzLmdldEFsbFVzZXJzKGxpbWl0LCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlcnMgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBhbGwgdXNlcnM6JywgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IhJyB9KTtcbiAgICB9XG59O1xuLy8gR2V0IHVzZXIgYnkgSURcbi8vIGV4cG9ydCBjb25zdCBnZXRVc2VyQnlJRCA9IGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbi8vICAgdHJ5IHtcbi8vICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbi8vICAgICBpZiAoIXRva2VuKSB7XG4vLyAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuLy8gICAgICAgcmV0dXJuO1xuLy8gICAgIH1cbi8vICAgICBqd3QudmVyaWZ5KFxuLy8gICAgICAgdG9rZW4sXG4vLyAgICAgICBqd3RFTlYuSldUX1NFQ1JFVCxcbi8vICAgICAgIGFzeW5jIChlcnI6IGFueSwgZGVjb2RlZFRva2VuOiBhbnkpID0+IHtcbi8vICAgICAgICAgaWYgKGVycikge1xuLy8gICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbi8vICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuLy8gICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuLy8gICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4vLyAgICAgICAgIGlmICghdXNlcikge1xuLy8gICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbi8vICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgaWYgKHVzZXIuaWQgIT09IHVzZXJfaWQpIHtcbi8vICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgYXR0ZW1wdCEnIH0pO1xuLy8gICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBjb25zdCByZXF1ZXN0ZWRVc2VyID0gYXdhaXQgVXNlcnMuZmluZEFsbCh7XG4vLyAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJfaWQgfSxcbi8vICAgICAgICAgICBpbmNsdWRlOiBbXG4vLyAgICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICAgIG1vZGVsOiBQb3N0cyxcbi8vICAgICAgICAgICAgICAgYXR0cmlidXRlczogW1xuLy8gICAgICAgICAgICAgICAgICdpZCcsXG4vLyAgICAgICAgICAgICAgICAgJ2NhcHRpb24nLFxuLy8gICAgICAgICAgICAgICAgICdpbWFnZVVSTCcsXG4vLyAgICAgICAgICAgICAgICAgJ2xvY2F0aW9uJyxcbi8vICAgICAgICAgICAgICAgICAndGFncycsXG4vLyAgICAgICAgICAgICAgICAgJ2xpa2VzX0NvdW50Jyxcbi8vICAgICAgICAgICAgICAgICAnY3JlYXRlZF9BdCcsXG4vLyAgICAgICAgICAgICAgICAgJ2NyZWF0b3JfSWQnLFxuLy8gICAgICAgICAgICAgICBdLFxuLy8gICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICBdLFxuLy8gICAgICAgICB9KTtcbi8vICAgICAgICAgaWYgKCFyZXF1ZXN0ZWRVc2VyKSB7XG4vLyAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xuLy8gICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICByZXNcbi8vICAgICAgICAgICAuc3RhdHVzKDIwMClcbi8vICAgICAgICAgICAuanNvbih7IHJlcXVlc3RlZFVzZXI6IHJlcXVlc3RlZFVzZXIsIHVzZXJfaWQ6IHVzZXJfaWQgfSk7XG4vLyAgICAgICB9LFxuLy8gICAgICk7XG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XG4vLyAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IElEOicsIGVycm9yKTtcbi8vICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuLy8gICB9XG4vLyB9O1xuLy8gVXBkYXRlIHVzZXIgYnkgSURcbmV4cG9ydCBjb25zdCBnZXRVc2VyQnlJRCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzXG4gICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoNDAwKVxuICAgICAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIChkZWNvZGVkVG9rZW4pIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRVc2VySWQgPSBwYXJzZUludChyZXEucXVlcnkudXNlcl9pZCwgMTApO1xuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0ZWRVc2VySWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdSZXF1ZXN0ZWQgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3RfaWQgPSBwYXJzZUludChyZXEucXVlcnkucG9zdF9pZCwgMTApO1xuICAgICAgICAgICAgaWYgKCFwb3N0X2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUG9zdCBJRCBpcyByZXF1aXJlZCAoZ2V0VXNlciBwb3N0X2lkIHZhcmlhYmxlcyknLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXJzKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1c2Vycy5pZCAhPT0gdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBhdHRlbXB0IScgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiByZXF1ZXN0ZWRVc2VySWQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUmVxdWVzdGVkIFVzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZ2V0UG9zdEJ5UmVmZXJlbmNlSUQocmVxdWVzdGVkVXNlcklkKTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgICAgICAuc3RhdHVzKDQwMClcbiAgICAgICAgICAgICAgICAgICAgLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBJRCBpcyByZXF1aXJlZCBpbiBwb3N0IChnZXRVc2VyQnlJRCknIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJMaWtlcyA9IGF3YWl0IExpa2VzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyTGlrZXMpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkIGxpa2VzIHJvdXRlcycgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICAgICAgcG9zdDogcG9zdCB8fCBbXSxcbiAgICAgICAgICAgICAgICB1c2VyTGlrZXM6IHVzZXJMaWtlcyB8fCBbXSxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VyX2lkLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZFVzZXJJZCxcbiAgICAgICAgICAgICAgICBwb3N0X2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IElEOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuLy8gVXBkYXRlIHVzZXIgYnkgSURcbi8vIGV4cG9ydCBjb25zdCB1cGRhdGVVc2VyID0gYXN5bmMgKFxuLy8gICByZXE6IFJlcXVlc3QsXG4vLyAgIHJlczogUmVzcG9uc2UsXG4vLyAgIG5leHQ6IE5leHRGdW5jdGlvblxuLy8gKSA9PiB7XG4vLyAgIHRyeSB7XG4vLyAgICAgY29uc3QgeyBwcm9maWxlUGljOiBuZXdJbWFnZVVybCB9ID0gcmVxLmJvZHk7XG4vLyAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4vLyAgICAgaWYgKCF0b2tlbikge1xuLy8gICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbi8vICAgICAgIHJldHVybjtcbi8vICAgICB9XG4vLyAgICAgand0LnZlcmlmeShcbi8vICAgICAgIHRva2VuLFxuLy8gICAgICAgand0RU5WLkpXVF9TRUNSRVQsXG4vLyAgICAgICBhc3luYyAoZXJyOiBhbnksIGRlY29kZWRUb2tlbjogYW55KSA9PiB7XG4vLyAgICAgICAgIGlmIChlcnIpIHtcbi8vICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4vLyAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbi8vICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4vLyAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuLy8gICAgICAgICBpZiAoIXVzZXIpIHtcbi8vICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGlmICh1c2VyLmlkICE9PSB1c2VyX2lkKSB7XG4vLyAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBhdHRlbXB0IScgfSk7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgY29uc3QgeyBuZXdVc2VyLCAuLi5yZXN0IH0gPSByZXEuYm9keTtcbi8vICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc3QpLmxlbmd0aCA9PT0gMCkge1xuLy8gICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdObyBmaWVsZHMgdG8gdXBkYXRlJyB9KTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBpZiAobmV3VXNlcikge1xuLy8gICAgICAgICAgIGNvbnN0IHNwYWNlSW5kZXggPSBuZXdVc2VyPy5sYXN0SW5kZXhPZignICcpO1xuLy8gICAgICAgICAgIGNvbnN0IGZpcnN0TmFtZSA9XG4vLyAgICAgICAgICAgICBzcGFjZUluZGV4ICE9PSAtMSA/IG5ld1VzZXIuc2xpY2UoMCwgc3BhY2VJbmRleCkgOiBuZXdVc2VyO1xuLy8gICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID1cbi8vICAgICAgICAgICAgIHNwYWNlSW5kZXggIT09IC0xID8gbmV3VXNlci5zbGljZShzcGFjZUluZGV4ICsgMSkgOiAnJztcbi8vICAgICAgICAgICByZXN0LmZpcnN0TmFtZSA9IGZpcnN0TmFtZTtcbi8vICAgICAgICAgICByZXN0Lmxhc3ROYW1lID0gbGFzdE5hbWU7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgbGV0IHByb2ZpbGVQaWMgPSB1c2VyPy5wcm9maWxlUGljO1xuLy8gICAgICAgICBpZiAobmV3SW1hZ2VVcmwpIHtcbi8vICAgICAgICAgICB0cnkge1xuLy8gICAgICAgICAgICAgY29uc3QgcHJldmlld0ltYWdlVXJsID0gYXdhaXQgZ2V0UHJvZmlsZVBpY1ByZXZpZXdVcmwocmVxLCByZXMpO1xuLy8gICAgICAgICAgICAgaWYgKCFwcmV2aWV3SW1hZ2VVcmwpIHtcbi8vICAgICAgICAgICAgICAgcmV0dXJuIHJlc1xuLy8gICAgICAgICAgICAgICAgIC5zdGF0dXMoNDA0KVxuLy8gICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ3ByZXZpZXcgSW1hZ2Ugbm90IGZvdW5kJyB9KTtcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIHByb2ZpbGVQaWMgPSBwcmV2aWV3SW1hZ2VVcmw7XG4vLyAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbi8vICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGltYWdlIHByZXZpZXcgVVJMOicsIGVycm9yKTtcbi8vICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuLy8gICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0geyAuLi5yZXN0LCBwcm9maWxlUGljIH07XG4vLyAgICAgICAgIGNvbnN0IFthZmZlY3RlZENvdW50LCB1cGRhdGVkVXNlcnNdID0gYXdhaXQgVXNlcnMudXBkYXRlVXNlcihcbi8vICAgICAgICAgICB1c2VyX2lkLFxuLy8gICAgICAgICAgIGF0dHJpYnV0ZXNcbi8vICAgICAgICAgKTtcbi8vICAgICAgICAgaWYgKGFmZmVjdGVkQ291bnQgPT09IDApIHtcbi8vICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgdXBkYXRpbmcgdXNlcjonLCB1cGRhdGVkVXNlcnMpO1xuLy8gICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciB1cGRhdGluZyB1c2VyJyB9KTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVwZGF0ZWRVc2VycyB9KTtcbi8vICAgICAgIH1cbi8vICAgICApO1xuLy8gICB9IGNhdGNoIChlcnJvcikge1xuLy8gICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHVzZXI6JywgZXJyb3IpO1xuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuLy8gICB9XG4vLyB9O1xuLy8gR2V0IHVzZXIgZm9yIHBvc3QgdmlldyBieSBJRFxuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHByb2ZpbGVQaWM6IG5ld0ltYWdlVXJsLCBuZXdVc2VyLCAuLi5yZXN0IH0gPSByZXEuYm9keTtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVbmF1dGhvcml6ZWQgLSBObyB0b2tlbicpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCEnIH0pO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVW5hdXRob3JpemVkIC0gSW52YWxpZCB0b2tlbicpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVW5hdXRob3JpemVkIC0gTm8gdXNlciBJRCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1c2VyLmlkICE9PSB1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VuYXV0aG9yaXplZCBhdHRlbXB0Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBhdHRlbXB0IScgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzdCkubGVuZ3RoID09PSAwICYmICFuZXdJbWFnZVVybCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBmaWVsZHMgdG8gdXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ05vIGZpZWxkcyB0byB1cGRhdGUnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5ld1VzZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzcGFjZUluZGV4ID0gbmV3VXNlcj8ubGFzdEluZGV4T2YoJyAnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdE5hbWUgPSBzcGFjZUluZGV4ICE9PSAtMSA/IG5ld1VzZXIuc2xpY2UoMCwgc3BhY2VJbmRleCkgOiBuZXdVc2VyO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID0gc3BhY2VJbmRleCAhPT0gLTEgPyBuZXdVc2VyLnNsaWNlKHNwYWNlSW5kZXggKyAxKSA6ICcnO1xuICAgICAgICAgICAgICAgIHJlc3QuZmlyc3ROYW1lID0gZmlyc3ROYW1lO1xuICAgICAgICAgICAgICAgIHJlc3QubGFzdE5hbWUgPSBsYXN0TmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwcm9maWxlUGljID0gdXNlcj8ucHJvZmlsZVBpYztcbiAgICAgICAgICAgIGlmIChwcm9maWxlUGljICYmIG5ld0ltYWdlVXJsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBQcm9maWxlUGljdHVyZXMuZmluZFByb2ZpbGVQaWNCeVJlZmVyZW5jZUtleSgndXNlcl9pZCcsIHVzZXJfaWQpO1xuICAgICAgICAgICAgICAgIGlmICghaW1hZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIGltYWdlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdObyBpbWFnZSBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb2ZpbGVQaWMgPSBuZXdJbWFnZVVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7IC4uLnJlc3QsIHByb2ZpbGVQaWMgfTtcbiAgICAgICAgICAgIC8vICoqIFVwZGF0ZSB1c2VyXG4gICAgICAgICAgICBjb25zdCBbYWZmZWN0ZWRDb3VudCwgdXBkYXRlZFVzZXJzXSA9IGF3YWl0IFVzZXJzLnVwZGF0ZVVzZXIodXNlcl9pZCwgYXR0cmlidXRlcyk7XG4gICAgICAgICAgICBpZiAoYWZmZWN0ZWRDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciB1cGRhdGluZyB1c2VyOicsIHVwZGF0ZWRVc2Vycyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIHVwZGF0aW5nIHVzZXInIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXBkYXRlZFVzZXJzLCBwcm9maWxlUGljIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZVVzZXI7XG59O1xuZXhwb3J0IGNvbnN0IGdldFVzZXJGb3JQb3N0Vmlld0J5SUQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlci5pZCAhPT0gdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBhdHRlbXB0IScgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVkVXNlciA9IGF3YWl0IFVzZXJzLmZpbmRBbGwoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiB1c2VyX2lkIH0sXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogUG9zdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2FwdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ltYWdlVVJMJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbG9jYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YWdzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGlrZXNfQ291bnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjcmVhdGVkX0F0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY3JlYXRvcl9JZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghcmVxdWVzdGVkVXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNcbiAgICAgICAgICAgICAgICAuc3RhdHVzKDIwMClcbiAgICAgICAgICAgICAgICAuanNvbih7IHJlcXVlc3RlZFVzZXI6IHJlcXVlc3RlZFVzZXIsIHVzZXJfaWQ6IHVzZXJfaWQgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IElEOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGdldFVzZXJEYXRhQnlJRCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgY29uc3QgcG9zdF9pZCA9IHBhcnNlSW50KHJlcS5xdWVyeS5wb3N0X2lkLCAxMCk7XG4gICAgICAgICAgICBjb25zdCBsaWtlc19pZCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saWtlc19pZCwgMTApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xpa2VzX2lkJywgbGlrZXNfaWQpO1xuICAgICAgICAgICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2Vycy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlcnMpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmZpbmRCeVBrKHBvc3RfaWQpO1xuICAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNyZWF0b3IgPSBwb3N0LmNyZWF0b3JfSWQ7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsoY3JlYXRvcik7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdSZXF1ZXN0ZWQgVXNlciBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJMaWtlcyA9IGF3YWl0IExpa2VzLmZpbmRCeVBrKGNyZWF0b3IpO1xuICAgICAgICAgICAgaWYgKCF1c2VyTGlrZXMpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkIFMgcm91dGVzJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgICAgICBwb3N0LFxuICAgICAgICAgICAgICAgIHVzZXJMaWtlcyxcbiAgICAgICAgICAgICAgICBjcmVhdG9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IElEOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRVc2VyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXJfaWQgPSBkZWNvZGVkVG9rZW4uaWQ7XG4gICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBhbmQgcGFyc2UgcGFyYW1ldGVyc1xuICAgICAgICAgICAgbGV0IHBvc3RfaWQsIGxpa2VzX2lkO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAoeyBwb3N0X2lkLCBsaWtlc19pZCB9ID0gdmFsaWRhdGVBbmRQYXJzZVBhcmFtcyhyZXEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVzZXIuaWQgIT09IHVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgYXR0ZW1wdCEnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0cy5nZXRQb3N0QnlSZWZlcmVuY2VJRCh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1Bvc3Qgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyTGlrZXMgPSBhd2FpdCBMaWtlcy5maW5kQnlQayh1c2VyX2lkKTtcbiAgICAgICAgICAgIGlmICghdXNlckxpa2VzKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBsaWtlcyBub3QgZm91bmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VyOicsIHVzZXIsICdQb3N0OicsIHBvc3QsICdVc2VyTGlrZXM6JywgdXNlckxpa2VzKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgICAgIHBvc3QsXG4gICAgICAgICAgICAgICAgdXNlckxpa2VzLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICAgICAgcG9zdF9pZCxcbiAgICAgICAgICAgICAgICBsaWtlc19pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldEN1cnJlbnRVc2VyOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxufTtcbiIsImltcG9ydCByYXRlTGltaXQgZnJvbSAnZXhwcmVzcy1yYXRlLWxpbWl0JztcbmltcG9ydCB7IGVudiB9IGZyb20gJy4uLy4uL2NvbmZpZy9pbmRleCc7XG5leHBvcnQgY29uc3Qga2V5R2VuZXJhdG9yID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgaWYgKCFyZXEuaXApIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiAnV2FybmluZzogcmVxdWVzdC5pcCBpcyBtaXNzaW5nIScgfSk7XG4gICAgICAgIHJldHVybiByZXEuc29ja2V0LnJlbW90ZUFkZHJlc3M7XG4gICAgfVxuICAgIHJldHVybiByZXEuaXAucmVwbGFjZSgvOlxcZCtbXjpdKiQvLCAnJyk7XG59O1xuZXhwb3J0IGNvbnN0IGxpbWl0ZXIgPSByYXRlTGltaXQoe1xuICAgIHdpbmRvd01zOiBlbnYuUkFSRV9MSU1JVF9XSU5ET1dfTVMsXG4gICAgbWF4OiBlbnYuTUFYLFxuICAgIG1lc3NhZ2U6IGVudi5SQVJFX0xJTUlUX01FU1NBR0UsXG4gICAgc3RhdHVzQ29kZTogZW52LlJBUkVfTElNSVRfQ09ERSxcbiAgICBoYW5kbGVyOiAoX3JlcSwgcmVzKSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMoZW52LlJBUkVfTElNSVRfQ09ERSkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBlbnYuUkFSRV9MSU1JVF9NRVNTQUdFLFxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGtleUdlbmVyYXRvcixcbn0pO1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIGxpbWl0ZXIsXG4gICAga2V5R2VuZXJhdG9yLFxufTtcbiIsImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uLy4uL2NvbmZpZy9qd3RFTlYnO1xuZG90ZW52LmNvbmZpZygpO1xuZXhwb3J0IGNvbnN0IGp3dEdlbmVyYXRvciA9IChwYXlsb2FkKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIGp3dEVOVi5KV1RfU0VDUkVULCB7XG4gICAgICAgICAgICBhbGdvcml0aG06IGp3dEVOVi5KV1RfQUxHT1JJVEhNLFxuICAgICAgICAgICAgZXhwaXJlc0luOiBqd3RFTlYuSldUX0VYUElSRVNfSU4sXG4gICAgICAgICAgICBpc3N1ZXI6IGp3dEVOVi5KV1RfSVNTVUVSLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgZ2VuZXJhdGluZyBKV1QnKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGp3dFZlcmlmaWVyID0gKHRva2VuKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVUKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgdmVyaWZ5aW5nIEpXVCcpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3Qgand0UmVmcmVzaCA9IChwYXlsb2FkKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIGp3dEVOVi5KV1RfUkVGUkVTSF9TRUNSRVQsIHtcbiAgICAgICAgICAgIGFsZ29yaXRobTogand0RU5WLkpXVF9BTEdPUklUSE0sXG4gICAgICAgICAgICBleHBpcmVzSW46IGp3dEVOVi5KV1RfUkVGUkVTSF9FWFBJUkVTX0lOLFxuICAgICAgICAgICAgaXNzdWVyOiBqd3RFTlYuSldUX0lTU1VFUixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgSldUJyk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBqd3RHZW5lcmF0b3IsXG4gICAgand0VmVyaWZpZXIsXG4gICAgand0UmVmcmVzaCxcbn07XG4iLCJpbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBqd3RFTlYgfSBmcm9tICcuLi8uLi9jb25maWcvand0RU5WJztcbmltcG9ydCB7IFVzZXJzIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2luZGV4Lm1vZGVsJztcbmRvdGVudi5jb25maWcoKTtcbmV4cG9ydCBjb25zdCByZXF1aXJlQXV0aCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsoZGVjb2RlZFRva2VuLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IHVzZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXRyaWV2aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICBuZXh0KCk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB2ZXJpZnlVc2VyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdKV1QgdmVyaWZpY2F0aW9uIGVycm9yOicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlQayhkZWNvZGVkVG9rZW4uaWQpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWNvZGVkVG9rZW46JywgZGVjb2RlZFRva2VuKTtcbiAgICAgICAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgICAgICAgICByZXMubG9jYWxzLnVzZXIgPSB1c2VyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXRyaWV2aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdmVyaWZ5aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCB7IHZlcmlmeVVzZXIsIHJlcXVpcmVBdXRoIH07XG4iLCJpbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4vc2VxdWlsaXplQ29uJztcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3YWl0Rm9yREIoKSB7XG4gICAgY29uc3Qgc2VxdWVsaXplID0gY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UoKTtcbiAgICBjb25zdCBtYXhBdHRlbXB0cyA9IDEwOyAvLyAxMCBhdHRlbXB0c1xuICAgIGNvbnN0IGRlbGF5ID0gMTAwMDsgLy8gMSBzZWNvbmRcbiAgICBsZXQgYXR0ZW1wdHMgPSAwO1xuICAgIHdoaWxlIChhdHRlbXB0cyA8IG1heEF0dGVtcHRzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUZXN0IHRoZSBjb25uZWN0aW9uXG4gICAgICAgICAgICBhd2FpdCBzZXF1ZWxpemUuYXV0aGVudGljYXRlKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgY29ubmVjdGlvbiBlc3RhYmxpc2hlZCwgU3RhcnRpbmcgU2VydmVyLi4uLi4nKTtcbiAgICAgICAgICAgIC8vIFN5bmMgdGhlIGRhdGFiYXNlXG4gICAgICAgICAgICBhd2FpdCBzZXF1ZWxpemUuc3luYyh7IGZvcmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Ryb3AgYW5kIHJlLXN5bmMgZGIuJyk7XG4gICAgICAgICAgICByZXR1cm4gc2VxdWVsaXplOyAvLyBSZXR1cm4gdGhlIFNlcXVlbGl6ZSBpbnN0YW5jZVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgYXR0ZW1wdHMrKztcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUuZXJyb3IoJ01heCBhdHRlbXB0cyByZWFjaGVkLCBkYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbn1cbmV4cG9ydCBkZWZhdWx0IHsgd2FpdEZvckRCIH07XG4iLCJpbXBvcnQgZnMgZnJvbSAnbm9kZTpmcyc7XG5pbXBvcnQgeyBTZXF1ZWxpemUgfSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgZGF0YWJhc2VFTlYgfSBmcm9tICcuLi8uLi9jb25maWcvZGF0YWJhc2VFTlYnO1xuY29uc3QgZGJDb25maWcgPSB7XG4gICAgRGlhbGVjdDogJ21hcmlhZGInLFxuICAgIGhvc3Q6IGRhdGFiYXNlRU5WLkRCX0hPU1QgfHwgJ2xvY2FsaG9zdCcsXG4gICAgdXNlcm5hbWU6IGRhdGFiYXNlRU5WLkRCX1VTRVIgfHwgJ21ldGFsYnJhaW4nLFxuICAgIHBhc3N3b3JkOiBkYXRhYmFzZUVOVi5EQl9QQVNTIHx8ICdwYXNzd29yZCcsXG4gICAgZGF0YWJhc2U6IGRhdGFiYXNlRU5WLkRCX05BTUUgfHwgJ0ZpbmRTb21lT25lJyxcbiAgICBzb2NrZXRQYXRoOiBkYXRhYmFzZUVOVi5EQl9TT0NLRVRfUEFUSCB8fCAnL3Zhci9ydW4vbXlzcWxkL215c3FsZC5zb2NrJyxcbiAgICBzb2NrZXRUaW1lb3V0OiBkYXRhYmFzZUVOVi5EQl9TT0NLRVRfVElNRU9VVCB8fCAxMDAwLFxuICAgIGNvbXByZXNzOiBkYXRhYmFzZUVOVi5EQl9DT01QUkVTUyB8fCBmYWxzZSxcbiAgICBkZWJ1ZzogZGF0YWJhc2VFTlYuREJfREVCVUcgfHwgZmFsc2UsXG4gICAgcGVybWl0TG9jYWxJbmZpbGU6IGRhdGFiYXNlRU5WLkRCX1BFUk1JVF9MT0NBTF9JTkZJTEUgfHwgZmFsc2UsXG4gICAgdHJhY2U6IGRhdGFiYXNlRU5WLkRCX1RSQUNFIHx8IHRydWUsXG4gICAgY2hlY2tEdXBsaWNhdGU6IGRhdGFiYXNlRU5WLkRCX0NIRUNLX0RVUExJQ0FURSB8fCBmYWxzZSxcbiAgICBjb25uZWN0QXR0cmlidXRlczogSlNPTi5wYXJzZShkYXRhYmFzZUVOVi5EQl9DT05ORUNUSU9OX0FUVFJJQlVURVMgfHwgJ3t9JyksXG4gICAgY29ubmVjdGlvblRpbWVvdXQ6IGRhdGFiYXNlRU5WLkRCX0NPTk5FQ1RJT05fVElNRU9VVCB8fCAxMDAwLFxuICAgIHBvcnQ6IGRhdGFiYXNlRU5WLkRCX1BPUlQgfHwgMzMwNixcbiAgICBzc2w6IGRhdGFiYXNlRU5WLkRCX1NTTCB8fCBmYWxzZSxcbiAgICBkaWFsZWN0T3B0aW9uczoge1xuICAgICAgICBzc2w6IHtcbiAgICAgICAgICAgIGNhOiBkYXRhYmFzZUVOVi5EQl9TU0xfQ0FcbiAgICAgICAgICAgICAgICA/IGZzLnJlYWRGaWxlU3luYyhkYXRhYmFzZUVOVi5EQl9TU0xfQ0EpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICA6ICcnLFxuICAgICAgICAgICAga2V5OiBkYXRhYmFzZUVOVi5EQl9TU0xfS0VZXG4gICAgICAgICAgICAgICAgPyBmcy5yZWFkRmlsZVN5bmMoZGF0YWJhc2VFTlYuREJfU1NMX0tFWSkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIDogJycsXG4gICAgICAgICAgICBjZXJ0OiBkYXRhYmFzZUVOVi5EQl9TU0xfQ0VSVFxuICAgICAgICAgICAgICAgID8gZnMucmVhZEZpbGVTeW5jKGRhdGFiYXNlRU5WLkRCX1NTTF9DRVJUKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgOiAnJyxcbiAgICAgICAgfSxcbiAgICB9LFxufTtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpIHtcbiAgICAvLyBDcmVhdGUgYSBuZXcgU2VxdWVsaXplIGluc3RhbmNlXG4gICAgY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZShkYkNvbmZpZy5kYXRhYmFzZSwgZGJDb25maWcudXNlcm5hbWUsIGRiQ29uZmlnLnBhc3N3b3JkLCB7XG4gICAgICAgIGhvc3Q6IGRiQ29uZmlnLmhvc3QsXG4gICAgICAgIGRpYWxlY3Q6IGRiQ29uZmlnLkRpYWxlY3QsXG4gICAgICAgIHBvcnQ6IGRiQ29uZmlnLnBvcnQsXG4gICAgICAgIHNzbDogZGJDb25maWcuc3NsLFxuICAgICAgICBkaWFsZWN0T3B0aW9uczogZGJDb25maWcuZGlhbGVjdE9wdGlvbnMsXG4gICAgfSk7XG4gICAgcmV0dXJuIHNlcXVlbGl6ZTtcbn1cbmV4cG9ydCBkZWZhdWx0IHsgY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UgfTtcbiIsIi8vIHRoaXMgd2lsbCBsb2FkIGFsbCBtb2RlbCBjbGFzc2VzIGZvdW5kIGluIGZpbGVzIG1hdGNoaW5nIHRoaXMgZ2xvYiBwYXR0ZXJuLlxuaW1wb3J0IHsgU2VxdWVsaXplLCBpbXBvcnRNb2RlbHMgfSBmcm9tICdAc2VxdWVsaXplL2NvcmUnO1xuaW1wb3J0IHsgTWFyaWFEYkRpYWxlY3QgfSBmcm9tICdAc2VxdWVsaXplL21hcmlhZGInO1xuaW1wb3J0IHsgZmlsZVVSTFRvUGF0aCB9IGZyb20gJ25vZGU6dXJsJztcbmltcG9ydCB7IGRpcm5hbWUgfSBmcm9tICdub2RlOnBhdGgnO1xuaW1wb3J0IHsgZGF0YWJhc2VFTlYgfSBmcm9tICcuLi8uLi9jb25maWcvZGF0YWJhc2VFTlYnO1xuY29uc3QgX19kaXJuYW1lID0gZGlybmFtZShmaWxlVVJMVG9QYXRoKGltcG9ydC5tZXRhLnVybCkpO1xuZXhwb3J0IGNvbnN0IHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoe1xuICAgIGRpYWxlY3Q6IE1hcmlhRGJEaWFsZWN0LFxuICAgIGhvc3Q6IGRhdGFiYXNlRU5WLkRCX0hPU1QsXG4gICAgdXNlcjogZGF0YWJhc2VFTlYuREJfVVNFUixcbiAgICBwYXNzd29yZDogZGF0YWJhc2VFTlYuREJfUEFTUyxcbiAgICBkYXRhYmFzZTogZGF0YWJhc2VFTlYuREJfTkFNRSxcbiAgICBwb3J0OiBkYXRhYmFzZUVOVi5EQl9QT1JULFxuICAgIHNzbDogZGF0YWJhc2VFTlYuREJfU1NMLFxuICAgIG1vZGVsczogYXdhaXQgaW1wb3J0TW9kZWxzKF9fZGlybmFtZSArICcvc3JjL3NlcnZlci9tb2RlbHMvKiovKi5tb2RlbC57dHMsanN9JyksXG59KTtcbmV4cG9ydCBkZWZhdWx0IHNlcXVlbGl6ZTtcbiIsImltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBoZWxtZXQgZnJvbSAnaGVsbWV0JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBtb3JnYW4gZnJvbSAnbW9yZ2FuJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vY29uZmlnL2luZGV4JztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IHsgTGlrZXMsIFBvc3RzLCBVc2VycyB9IGZyb20gJy4uL21vZGVscy9pbmRleC5tb2RlbCc7XG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXMvcm91dGVyJztcbmltcG9ydCB7IGdsb2JhbEVycm9ySGFuZGxlciB9IGZyb20gJy4uL3V0aWxzL2Vycm9ySGFuZGxlcic7XG5pbXBvcnQgeyB2YWxpZGF0ZUFuZFBhcnNlUGFyYW1zIH0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGVBbmRQYXJzZVBhcmFtcyc7XG5pbXBvcnQgeyBsaW1pdGVyIH0gZnJvbSAnLi9hdXRoL2lwQ29uZmlnJztcbmltcG9ydCB7IHZlcmlmeVVzZXIgfSBmcm9tICcuL2F1dGgvdXNlckF1dGgnO1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gKHsgYXBwIH0pIHtcbiAgICBhcHAudXNlKChfcmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgICAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICAgICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gICAgICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICAgICAgaWYgKF9yZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfSk7XG4gICAgYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG4gICAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gICAgYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG4gICAgYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG4gICAgYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG4gICAgLy8gU2VydmUgc3RhdGljIGZpbGVzIGZyb20gJ2Rpc3QnIGRpcmVjdG9yeVxuICAgIGFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJ2Rpc3QnKSkpO1xuICAgIGFwcC51c2UoJy9hc3NldHMnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnYXNzZXRzJykpKTtcbiAgICBjb25zdCBUcnVzdF9Qcm94eSA9IGVudi5UUlVTVF9QUk9YWSB8fCAnZmFsc2UnO1xuICAgIGNvbnN0IG51bWJlck9mUHJveGllcyA9IGVudi5OVU1CRVJfT0ZfUFJPWElFUyB8fCAxO1xuICAgIGlmIChUcnVzdF9Qcm94eSkge1xuICAgICAgICBhcHAuc2V0KCd0cnVzdCBwcm94eScsIHRydWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChUcnVzdF9Qcm94eSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICBhcHAuc2V0KCd0cnVzdCBwcm94eScsIGZhbHNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFwcC5zZXQoJ3RydXN0IHByb3h5JywgVHJ1c3RfUHJveHkpO1xuICAgICAgICBhcHAuc2V0KCd0cnVzdCBwcm94eScsIG51bWJlck9mUHJveGllcyk7XG4gICAgfVxuICAgIGFwcC5zZXQoJ3RydXN0IHByb3h5JywgbnVtYmVyT2ZQcm94aWVzKTtcbiAgICBhcHAuZ2V0KCcvaXAnLCAocmVxdWVzdCwgcmVzcG9uc2UpID0+IHJlc3BvbnNlLnNlbmQocmVxdWVzdC5pcCkpO1xuICAgIGFwcC51c2UoaGVsbWV0KHtcbiAgICAgICAgY29udGVudFNlY3VyaXR5UG9saWN5OiBmYWxzZSxcbiAgICB9KSk7XG4gICAgYXBwLnVzZShtb3JnYW4oZW52Lk1PUkdBTikpO1xuICAgIGFwcC51c2UobGltaXRlcik7XG4gICAgYXBwLnVzZShyb3V0ZXIpO1xuICAgIGFwcC51c2UoZ2xvYmFsRXJyb3JIYW5kbGVyKTtcbiAgICBhcHAuZ2V0KCcvYXBpL2dldEN1cnJlbnRVc2VyJywgdmVyaWZ5VXNlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIGp3dEVOVi5KV1RfU0VDUkVULCBhc3luYyAoZXJyLCBkZWNvZGVkVG9rZW4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKV1QgdmVyaWZpY2F0aW9uIGVycm9yJywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgSW52YWxpZCBUb2tlbicgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJfaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBQb3N0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjYXB0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpbWFnZVVSTCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbG9jYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhZ3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xpa2VzX2NvdW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjcmVhdGVkX0F0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IExpa2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbJ2lkJywgJ3VzZXJfaWQnLCAncG9zdF9pZCcsICdjcmVhdGVkX0F0J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoNDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQgdXNlciByb3V0ZXMnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyX2lkICE9PSB1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIGFuZCBwYXJzZSBwYXJhbWV0ZXJzXG4gICAgICAgICAgICAgICAgICAgIGxldCBwb3N0X2lkLCBsaWtlc19pZCwgY3JlYXRvcl9pZDtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICh7IHBvc3RfaWQsIGxpa2VzX2lkLCBjcmVhdG9yX2lkIH0gPSB2YWxpZGF0ZUFuZFBhcnNlUGFyYW1zKHJlcSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvc3QgPSBjcmVhdG9yX2lkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYXdhaXQgUG9zdHMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgY3JlYXRvcl9JZDogY3JlYXRvcl9pZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IFVzZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpcnN0TmFtZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xhc3ROYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXNlcm5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JpbycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXR1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2pvaW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhdmF0YXJVcmwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpbWFnZVVSTCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Byb2ZpbGVQaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xhc3RfYWN0aXZpdHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1cGRhdGVkX2F0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVXNlclJlZ2lzdHJhdGlvbklEJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcG9zdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBJRCBpcyByZXF1aXJlZCBpbiBwb3N0cycgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmdldFBvc3RCeVJlZmVyZW5jZUlEKHVzZXJfaWQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoIXBvc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IElEIGlzIHJlcXVpcmVkIGluIHBvc3RzJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlckxpa2VzID0gYXdhaXQgTGlrZXMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdXNlckxpa2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RhdHVzKDQwMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkIGxpa2VzIHJvdXRlcycgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyTGlrZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdG9yX0lkOiBjcmVhdG9yX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdF9pZDogcG9zdF9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpa2VzX2lkOiBsaWtlc19pZCB8fCB1c2VyTGlrZXMuaWQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGFwcDtcbn1cbiIsImltcG9ydCBsb2FkZXIgZnJvbSAnLi4vc2VydmljZXMvcGVyZm9ybWFuY2UnO1xuaW1wb3J0IHsgdHJ1bmNhdGVUYWJsZXMgfSBmcm9tICcuLi9zZXJ2aWNlcy90cnVuY2F0ZSc7XG5pbXBvcnQgeyB3YWl0Rm9yREIgfSBmcm9tICcuL2RhdGFMb2FkZXIvbWFyaWFkYic7XG5pbXBvcnQgc2VxdWlsaXplTG9hZGVyIGZyb20gJy4vZGF0YUxvYWRlci9zZXF1bGl6ZSc7XG5pbXBvcnQgZXhwcmVzc0xvYWRlciBmcm9tICcuL2V4cHJlc3MnO1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gKHsgYXBwIH0pIHtcbiAgICBhd2FpdCB0cnVuY2F0ZVRhYmxlcygpO1xuICAgIGF3YWl0IHdhaXRGb3JEQigpO1xuICAgIHNlcXVpbGl6ZUxvYWRlcjtcbiAgICBhd2FpdCBleHByZXNzTG9hZGVyKHsgYXBwIH0pO1xuICAgIGxvYWRlcigpO1xuICAgIGNvbnNvbGUubG9nKCdFeHByZXNzIFNlcnZlciBJbnRpYWxpemVkIScpO1xufVxuIiwiaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24uanMnO1xuaW1wb3J0IFBvc3RzIGZyb20gJy4vcG9zdC5tb2RlbC5qcyc7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi91c2VyLm1vZGVsLmpzJztcbi8vIERlZmluZSBJbnN0YW5jZSBvZiBTZXF1ZWxpemVcbmNvbnN0IHNlcXVlbGl6ZSA9IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCk7XG5jbGFzcyBJbWFnZVN0b3JhZ2VzIGV4dGVuZHMgTW9kZWwge1xuICAgIC8vIGNyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gZmluZCBhbiBpbWFnZSBieSBJRFxuICAgIHN0YXRpYyBhc3luYyBmaW5kSW1hZ2VCeUlkKGlkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRCeVBrKGlkKTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGZpbmRJbWFnZUJ5UmVmZXJlbmNlS2V5KGtleSwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlID0gYXdhaXQgdGhpcy5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBba2V5XTogdmFsdWUgfSxcbiAgICAgICAgICAgICAgICBvcmRlcjogW1snY3JlYXRlZF9BdCcsICdERVNDJ11dLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW1hZ2U7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmaW5kaW5nIGltYWdlIGJ5IHJlZmVyZW5jZSBrZXk6ICR7a2V5fSwgdmFsdWU6ICR7dmFsdWV9YCwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7IC8vIFJlLXRocm93IHRoZSBlcnJvciBhZnRlciBsb2dnaW5nIGl0XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBEZWZpbmUgdGhlIEltYWdlU3RvcmFnZSBtb2RlbFxuSW1hZ2VTdG9yYWdlcy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGltYWdlVXJsOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnVXNlcnMnLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgcG9zdF9pZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdQb3N0cycsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBjcmVhdGVkX0F0OiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5EQVRFLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IERhdGFUeXBlcy5OT1csXG4gICAgfSxcbn0sIHtcbiAgICBzZXF1ZWxpemUsXG4gICAgbW9kZWxOYW1lOiAnSW1hZ2VTdG9yYWdlcycsXG4gICAgdGltZXN0YW1wczogZmFsc2UsXG59KTtcbi8vIERlZmluZSB0aGUgVXNlciBtb2RlbFxuSW1hZ2VTdG9yYWdlcy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGltYWdlVXJsOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnVXNlcnMnLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgcG9zdF9pZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgbW9kZWw6ICdQb3N0cycsXG4gICAgICAgICAgICBrZXk6ICdpZCcsXG4gICAgICAgIH0sXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxuICAgIGNyZWF0ZWRfQXQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICB9LFxufSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdJbWFnZVN0b3JhZ2VzJyxcbiAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbn0pO1xuLy8gY3JlYXRlIGEgaG9vayB0aGF0IHNhdmVzIHVwbG9hZGVkIGltYWdlIHRvIHRoZSB1c2VyJ3MgY29sdW1ucyBpbiB0aGUgZGF0YWJhc2VcbkltYWdlU3RvcmFnZXMuYWZ0ZXJDcmVhdGUoYXN5bmMgKGltYWdlKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKGltYWdlLnVzZXJfaWQpO1xuICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHVzZXIuaW1hZ2VVUkwgPSBpbWFnZS5pbWFnZVVybDtcbiAgICAgICAgYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgfVxufSk7XG4vLyBBZnRlciBVcGxvYWRpbmcgYW4gaW1hZ2UsIHNhdmUgdG8gdXNlcidzIHRhYmxlXG5Vc2Vycy5oYXNNYW55KEltYWdlU3RvcmFnZXMsIHtcbiAgICBmb3JlaWduS2V5OiAndXNlcl9pZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG5Qb3N0cy5oYXNNYW55KEltYWdlU3RvcmFnZXMsIHtcbiAgICBmb3JlaWduS2V5OiAncG9zdF9pZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG4vLyBEZWZpbmUgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSBVc2VyLCBOZXdQb3N0LCBhbmQgSW1hZ2VTdG9yYWdlIG1vZGVsc1xuSW1hZ2VTdG9yYWdlcy5iZWxvbmdzVG8oVXNlcnMsIHtcbiAgICBmb3JlaWduS2V5OiAndXNlcl9pZCcsXG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICBvblVwZGF0ZTogJ0NBU0NBREUnLFxufSk7XG5JbWFnZVN0b3JhZ2VzLmJlbG9uZ3NUbyhQb3N0cywge1xuICAgIGZvcmVpZ25LZXk6ICdwb3N0X2lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxuICAgIG9uVXBkYXRlOiAnQ0FTQ0FERScsXG59KTtcbi8vIHN5bmMgdGhlIEltYWdlU3RvcmFnZSBtb2RlbCB3aXRoIHRoZSBkYXRhYmFzZVxuYXdhaXQgc2VxdWVsaXplXG4gICAgLnN5bmMoeyBmb3JjZTogZmFsc2UgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ05ldyBJbWFnZSBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgbmV3IGltYWdlOicsIGVycik7XG59KTtcbi8vIEltYWdlU3RvcmFnZS5zeW5jKHsgZm9yY2U6IHRydWUgfSlcbi8vICAgLnRoZW4oKCkgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKCdJbWFnZVN0b3JhZ2Ugc3luY2VkIHN1Y2Nlc3NmdWxseScpO1xuLy8gICB9KVxuLy8gICAuY2F0Y2goZXJyID0+IHtcbi8vICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIEltYWdlU3RvcmFnZTonLCBlcnIpO1xuLy8gICB9KTtcbmV4cG9ydCBkZWZhdWx0IEltYWdlU3RvcmFnZXM7XG4iLCJpbXBvcnQgSW1hZ2VTdG9yYWdlcyBmcm9tICcuL2ltYWdlLm1vZGVsJztcbmltcG9ydCBMaWtlcyBmcm9tICcuL2xpa2VQb3N0Lm1vZGVsJztcbmltcG9ydCBQb3N0cyBmcm9tICcuL3Bvc3QubW9kZWwnO1xuaW1wb3J0IFByb2ZpbGVQaWN0dXJlcyBmcm9tICcuL3Byb2ZpbGVQaWMubW9kZWwnO1xuaW1wb3J0IFNhdmVzIGZyb20gJy4vc2F2ZVBvc3QubW9kZWwnO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4vdXNlci5tb2RlbCc7XG5pbXBvcnQgVXNlclJlZ2lzdHJhdGlvbiBmcm9tICcuL3VzZXJSZWdpc3Rlci5tb2RlbCc7XG5leHBvcnQgeyBJbWFnZVN0b3JhZ2VzLCBMaWtlcywgUG9zdHMsIFByb2ZpbGVQaWN0dXJlcywgU2F2ZXMsIFVzZXJSZWdpc3RyYXRpb24sIFVzZXJzLCB9O1xuY29uc3QgbW9kZWxzID0ge1xuICAgIFVzZXJzLFxuICAgIFBvc3RzLFxuICAgIExpa2VzLFxuICAgIFNhdmVzLFxuICAgIFByb2ZpbGVQaWN0dXJlcyxcbiAgICBJbWFnZVN0b3JhZ2VzLFxuICAgIFVzZXJSZWdpc3RyYXRpb24sXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9kZWxzO1xuIiwiaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24nO1xuaW1wb3J0IFBvc3RzIGZyb20gJy4vcG9zdC5tb2RlbCc7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi91c2VyLm1vZGVsJztcbi8vIERlZmluZSBJbnN0YW5jZSBvZiBTZXF1ZWxpemVcbmNvbnN0IHNlcXVlbGl6ZSA9IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCk7XG5jbGFzcyBMaWtlcyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGNyZWF0ZSBhIG5ldyBsaWtlXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZUxpa2UoYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGUoYXR0cmlidXRlcyk7XG4gICAgfVxuICAgIC8vIGNyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gZmluZCBhIGxpa2UgYnkgSURcbiAgICBzdGF0aWMgYXN5bmMgZmluZExpa2VCeUlkKGlkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRCeVBrKGlkKTtcbiAgICB9XG4gICAgLy8gY3JlYXRlIGEgc3RhdGljIG1ldGhvZCB0byBmaW5kIGEgbGlrZSBieSByZWZlcmVuY2Uga2V5ICh1c2VySWQgb3IgcG9zdElkKVxuICAgIHN0YXRpYyBhc3luYyBmaW5kTGlrZUJ5UmVmZXJlbmNlS2V5KGtleSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IFtrZXldOiB2YWx1ZSB9IH0pO1xuICAgIH1cbiAgICAvLyBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGZpbmQgYWxsIGxpa2VzIGJ5IHJlZmVyZW5jZSBrZXkgKHVzZXJJZCBvciBwb3N0SWQpXG4gICAgc3RhdGljIGFzeW5jIGZpbmRBbGxMaWtlc0J5UmVmZXJlbmNlS2V5KGtleSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZEFsbCh7IHdoZXJlOiB7IFtrZXldOiB2YWx1ZSB9IH0pO1xuICAgIH1cbiAgICAvLyBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGZpbmQgYWxsIGxpa2VzIGJ5IHJlZmVyZW5jZSBrZXkgKHVzZXJJZCBvciBwb3N0SWQpXG4gICAgc3RhdGljIGFzeW5jIGRlbGV0ZUxpa2VCeVJlZmVyZW5jZUtleShrZXksIHZhbHVlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVzdHJveSh7IHdoZXJlOiB7IFtrZXldOiB2YWx1ZSB9IH0pO1xuICAgIH1cbn1cbi8vIERlZmluZSB0aGUgVXNlciBtb2RlbFxuTGlrZXMuaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICB1c2VyX2lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1VzZXJzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHBvc3RfaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnUG9zdHMnLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgY3JlYXRlZF9BdDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgIH0sXG59LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ0xpa2VzJyxcbiAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICBmcmVlemVUYWJsZU5hbWU6IHRydWUsXG59KTtcbi8vIERlZmluZSB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gVXNlciBhbmQgTGlrZVxuVXNlcnMuaGFzTWFueShMaWtlcywge1xuICAgIGZvcmVpZ25LZXk6ICd1c2VyX2lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxufSk7XG5MaWtlcy5iZWxvbmdzVG8oVXNlcnMsIHtcbiAgICBmb3JlaWduS2V5OiAndXNlcl9pZCcsXG59KTtcbi8vIERlZmluZSB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gUG9zdCBhbmQgTGlrZVxuUG9zdHMuaGFzTWFueShMaWtlcywge1xuICAgIGZvcmVpZ25LZXk6ICdwb3N0X2lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxufSk7XG5MaWtlcy5iZWxvbmdzVG8oUG9zdHMsIHtcbiAgICBmb3JlaWduS2V5OiAncG9zdF9pZCcsXG59KTtcbi8vIFN5bmMgdGhlIExpa2UgbW9kZWwgd2l0aCB0aGUgZGF0YWJhc2Vcbkxpa2VzLnN5bmMoeyBmb3JjZTogZmFsc2UgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0xpa2Ugc3luY2VkIHN1Y2Nlc3NmdWxseScpO1xufSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIGxpa2U6JywgZXJyKTtcbn0pO1xuZXhwb3J0IGRlZmF1bHQgTGlrZXM7XG4iLCJpbXBvcnQgeyBEYXRhVHlwZXMsIE1vZGVsIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCB7IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIH0gZnJvbSAnLi4vbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVpbGl6ZUNvbic7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi91c2VyLm1vZGVsJztcbi8vIERlZmluZSBJbnN0YW5jZSBvZiBTZXF1ZWxpemVcbmNvbnN0IHNlcXVlbGl6ZSA9IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCk7XG5jbGFzcyBQb3N0cyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBjcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGNyZWF0ZSBhIG5ldyBwb3N0XG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZVBvc3QoYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGUoYXR0cmlidXRlcyk7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyB1cGRhdGVQb3N0KGlkLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGNvbnN0IFthZmZlY3RlZENvdW50LCB1cGRhdGVkUG9zdHNdID0gYXdhaXQgdGhpcy51cGRhdGUoYXR0cmlidXRlcywge1xuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgICAgIHJldHVybmluZzogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbYWZmZWN0ZWRDb3VudCwgdXBkYXRlZFBvc3RzXTtcbiAgICB9XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBkZWxldGUgYSBQb3N0IGJ5IElEXG4gICAgc3RhdGljIGFzeW5jIGRlbGV0ZVBvc3QoaWQpIHtcbiAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IGlkIH0gfSk7XG4gICAgICAgIGlmIChwb3N0KSB7XG4gICAgICAgICAgICBhd2FpdCBwb3N0LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBkZWNsYXJlIHN0YXRpYyBtZXRob2RzIHRvIGdldCBhbGwgcG9zdHNcbiAgICBzdGF0aWMgYXN5bmMgZ2V0QWxsUG9zdHMoKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcbiAgICB9XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byBnZXQgaW5maW5pdGUgcG9zdHNcbiAgICBzdGF0aWMgYXN5bmMgZ2V0SW5maW5pdGVQb3N0cyhvZmZzZXQsIGxpbWl0KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRBbGwoeyBvZmZzZXQsIGxpbWl0IH0pO1xuICAgIH1cbiAgICAvLyBkZWNsYXJlIHN0YXRpYyBtZXRob2RzIHRvIGdldCBwb3N0IGJ5IElEXG4gICAgc3RhdGljIGFzeW5jIGdldFBvc3RCeUlEKHBvc3RfaWQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IGlkOiBwb3N0X2lkIH0gfSk7XG4gICAgfVxuICAgIC8vIGRlY2xhcmUgc3RhdGljIG1ldGhvZHMgdG8gZ2V0IHVzZXIncyBwb3N0c1xuICAgIHN0YXRpYyBhc3luYyBnZXRVc2VyUG9zdHModXNlcl9pZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQWxsKHsgd2hlcmU6IHsgY3JlYXRvcl9JZDogdXNlcl9pZCB9IH0pO1xuICAgIH1cbiAgICAvLyBkZWNsYXJlIHN0YXRpYyBtZXRob2RzIHRvIGdldCBTYXZlZCBwb3N0IGJ5IHBvc3QgSURcbiAgICBzdGF0aWMgYXN5bmMgZ2V0U2F2ZWRQb3N0KHBvc3RfaWQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IGlkOiBwb3N0X2lkIH0gfSk7XG4gICAgfVxuICAgIC8vIGRlY2xhcmUgc3RhdGljIG1ldGhvZHMgdG8gZ2V0IHBvc3QgYnkgcmVmZXJlbmNlIElEIChjcmVhdG9yX0lkKVxuICAgIHN0YXRpYyBhc3luYyBnZXRQb3N0QnlSZWZlcmVuY2VJRChjcmVhdG9yX0lkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBjcmVhdG9yX0lkIH0gfSk7XG4gICAgfVxufVxuLy8gU3luYyB0aGUgbW9kZWwgd2l0aCB0aGUgZGF0YWJhc2VcblBvc3RzLmluaXQoe1xuICAgIGlkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgIH0sXG4gICAgY2FwdGlvbjoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgaW1hZ2VVUkw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgIH0sXG4gICAgbG9jYXRpb246IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgIH0sXG4gICAgdGFnczoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgbGlrZXNfQ291bnQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxuICAgIGNyZWF0ZWRfQXQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICB9LFxuICAgIGNyZWF0b3JfSWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnVXNlcnMnLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgIH0sXG59LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ1Bvc3RzJyxcbiAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbn0pO1xuLy8gQ3JlYXRlIG5ldyBwb3N0XG5Qb3N0cy5jcmVhdGVQb3N0ID0gYXN5bmMgZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBuZXdQb3N0ID0gYXdhaXQgdGhpcy5jcmVhdGUoYXR0cmlidXRlcyk7XG4gICAgICAgIHJldHVybiBuZXdQb3N0O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgbmV3IHBvc3Q6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59O1xuLy8gVXBkYXRlIHBvc3QgYnkgSURcblBvc3RzLnVwZGF0ZVBvc3QgPSBhc3luYyBmdW5jdGlvbiAoaWQsIGF0dHJpYnV0ZXMpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBbYWZmZWN0ZWRDb3VudCwgdXBkYXRlZFBvc3RzXSA9IGF3YWl0IHRoaXMudXBkYXRlKGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgICAgICByZXR1cm5pbmc6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW2FmZmVjdGVkQ291bnQsIHVwZGF0ZWRQb3N0c107XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcbi8vIGluZmluaXRlIHBvc3RzXG5Qb3N0cy5nZXRJbmZpbml0ZVBvc3RzID0gYXN5bmMgZnVuY3Rpb24gKG9mZnNldCwgbGltaXQpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwb3N0cyA9IGF3YWl0IHRoaXMuZmluZEFsbCh7IG9mZnNldCwgbGltaXQgfSk7XG4gICAgICAgIHJldHVybiBwb3N0cztcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgaW5maW5pdGUgcG9zdHM6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59O1xuLy8gR2V0IHNlYXJjaCByZXN1bHRzIC0gcG9zdHNcblBvc3RzLmdldFBvc3RCeUlEID0gYXN5bmMgZnVuY3Rpb24gKGlkKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IGlkIH0gfSk7XG4gICAgICAgIHJldHVybiBwb3N0O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBwb3N0IGJ5IElEOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcbi8vIEdldCB1c2VyJ3MgcG9zdHNcblBvc3RzLmdldFVzZXJQb3N0cyA9IGFzeW5jIGZ1bmN0aW9uICh1c2VyX2lkKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcG9zdHMgPSBhd2FpdCB0aGlzLmZpbmRBbGwoeyB3aGVyZTogeyBjcmVhdG9yX0lkOiB1c2VyX2lkIH0gfSk7XG4gICAgICAgIHJldHVybiBwb3N0cztcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBwb3N0czonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn07XG4vLyBEZWZpbmUgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSBVc2VyIGFuZCBQb3N0IG1vZGVsc1xuVXNlcnMuaGFzTWFueShQb3N0cywge1xuICAgIGZvcmVpZ25LZXk6ICdjcmVhdG9yX0lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxuICAgIG9uVXBkYXRlOiAnQ0FTQ0FERScsXG59KTtcblBvc3RzLmJlbG9uZ3NUbyhVc2Vycywge1xuICAgIGZvcmVpZ25LZXk6ICdjcmVhdG9yX0lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxuICAgIG9uVXBkYXRlOiAnQ0FTQ0FERScsXG59KTtcbmF3YWl0IHNlcXVlbGl6ZVxuICAgIC5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdQb3N0IHN5bmNlZCBzdWNjZXNzZnVsbHknKTtcbn0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2luZyBQb3N0OicsIGVycik7XG59KTtcbmV4cG9ydCBkZWZhdWx0IFBvc3RzO1xuIiwiaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24nO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4vdXNlci5tb2RlbCc7XG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuY2xhc3MgUHJvZmlsZVBpY3R1cmVzIGV4dGVuZHMgTW9kZWwge1xuICAgIC8vIGNyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gZmluZCBhIHByb2ZpbGUgcGljdHVyZSBieSBJRFxuICAgIHN0YXRpYyBhc3luYyBmaW5kUHJvZmlsZVBpY3R1cmVCeUlkKHVzZXJfaWQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgfVxuICAgIC8vICoqIGNyZWF0ZSBhIHN0YXRpYyBtZXRob2QgdG8gcmV0aXJldmUgYSBwcm9maWxlIHBpY3R1cmUgYnkgcmVmZXJlbmNlIElEKHVzZXJfaWQpXG4gICAgc3RhdGljIGFzeW5jIGdldFByb2ZpbGVQaWNCeVJlZmVyZW5jZUlEKHVzZXJfaWQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IHVzZXJfaWQgfSB9KTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGZpbmRQcm9maWxlUGljQnlSZWZlcmVuY2VLZXkoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvZmlsZUltYWdlID0gYXdhaXQgdGhpcy5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBba2V5XTogdmFsdWUgfSxcbiAgICAgICAgICAgICAgICBvcmRlcjogW1snY3JlYXRlZF9BdCcsICdERVNDJ11dLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcHJvZmlsZUltYWdlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmluZGluZyBwcm9maWxlIGltYWdlIGJ5IHJlZmVyZW5jZSBrZXk6ICR7a2V5fSwgdmFsdWU6ICR7dmFsdWV9YCwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7IC8vIFJlLXRocm93IHRoZSBlcnJvciBhZnRlciBsb2dnaW5nIGl0XG4gICAgICAgIH1cbiAgICB9XG59XG5Qcm9maWxlUGljdHVyZXMuaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgfSxcbiAgICB1c2VyX2lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1VzZXJzJywgLy8gTmFtZSBvZiB0aGUgdXNlcnMgdGFibGVcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICAgICAgb25VcGRhdGU6ICdDQVNDQURFJyxcbiAgICAgICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgICB9LFxuICAgIHByb2ZpbGVQaWM6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGNyZWF0ZWRfQXQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICB9LFxuICAgIHVwZGF0ZWRfQXQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICB9LFxufSwge1xuICAgIHNlcXVlbGl6ZSxcbiAgICBtb2RlbE5hbWU6ICdQcm9maWxlUGljdHVyZXMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIHVwZGF0ZWRBdDogJ3VwZGF0ZWRBdCcsXG4gICAgY3JlYXRlZEF0OiAnY3JlYXRlZEF0Jyxcbn0pO1xuLy8gRGVmaW5lIHRoZSBhc3NvY2lhdGlvbiBiZXR3ZWVuIFVzZXIgYW5kIFByb2ZpbGVQaWN0dXJlXG5Vc2Vycy5oYXNPbmUoUHJvZmlsZVBpY3R1cmVzLCB7XG4gICAgZm9yZWlnbktleTogJ3VzZXJfaWQnLFxuICAgIG9uRGVsZXRlOiAnQ0FTQ0FERScsXG4gICAgb25VcGRhdGU6ICdDQVNDQURFJyxcbn0pO1xuUHJvZmlsZVBpY3R1cmVzLmJlbG9uZ3NUbyhVc2Vycywge1xuICAgIGZvcmVpZ25LZXk6ICd1c2VyX2lkJyxcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxuICAgIG9uVXBkYXRlOiAnQ0FTQ0FERScsXG59KTtcblByb2ZpbGVQaWN0dXJlcy5zeW5jKHsgZm9yY2U6IGZhbHNlIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdQcm9maWxlIFBpYyBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgY3JlYXRpbmcgcHJvZmlsZSBwaWMgdGFibGU6JywgZXJyKTtcbn0pO1xuZXhwb3J0IGRlZmF1bHQgUHJvZmlsZVBpY3R1cmVzO1xuIiwiaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24nO1xuaW1wb3J0IFBvc3RzIGZyb20gJy4vcG9zdC5tb2RlbCc7XG5pbXBvcnQgVXNlcnMgZnJvbSAnLi91c2VyLm1vZGVsJztcbi8vIERlZmluZSBJbnN0YW5jZSBvZiBTZXF1ZWxpemVcbmNvbnN0IHNlcXVlbGl6ZSA9IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlKCk7XG5jbGFzcyBTYXZlcyBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBDcmVhdGUgY3VzdG9tIGNsYXNzIG1ldGhvZHMgdG8gY3JlYXRlIGEgbmV3IHBvc3RcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlU2F2ZShhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZShhdHRyaWJ1dGVzKTtcbiAgICB9XG4gICAgLy8gY3JlYXRlIGN1c3RvbSBtZXRob2QgdG8gY2hlY2sgaWYgcG9zdCBpcyBzYXZlZFxuICAgIHN0YXRpYyBhc3luYyBjaGVja0lmU2F2ZWQodXNlcl9pZCwgcG9zdF9pZCkge1xuICAgICAgICBjb25zdCBzYXZlID0gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgdXNlcl9pZCwgcG9zdF9pZCB9IH0pO1xuICAgICAgICByZXR1cm4gISFzYXZlO1xuICAgIH1cbiAgICAvLyBjcmVhdGUgY3VzdG9tIG1ldGhvZCB0byBkZWxldGUgYSBzYXZlZCBwb3N0XG4gICAgc3RhdGljIGFzeW5jIGRlbGV0ZVNhdmVkUG9zdChwb3N0X2lkKSB7XG4gICAgICAgIGNvbnN0IHNhdmUgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBwb3N0X2lkIH0gfSk7XG4gICAgICAgIGlmIChzYXZlKSB7XG4gICAgICAgICAgICBhd2FpdCBzYXZlLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjcmVhdGUgY3VzdG9tIG1ldGhvZCB0byBnZXQgYWxsIHNhdmVkIHBvc3RzXG4gICAgc3RhdGljIGFzeW5jIGdldFNhdmVkUG9zdHModXNlcl9pZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kQWxsKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IHVzZXJfaWQgfSxcbiAgICAgICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiBQb3N0cyxcbiAgICAgICAgICAgICAgICAgICAgYXM6ICdQb3N0JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8gRGVmaW5lIHRoZSBTYXZlcyBtb2RlbFxuU2F2ZXMuaW5pdCh7XG4gICAgaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICB1c2VyX2lkOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1VzZXJzJyxcbiAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHBvc3RfaWQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiAnUG9zdHMnLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgc2F2ZURhdGU6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG59LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIHRhYmxlTmFtZTogJ1NhdmVzJyxcbiAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICBmcmVlemVUYWJsZU5hbWU6IHRydWUsXG59KTtcbi8vIENyZWF0ZSBhIGZ1bmN0aW9uIHRvIGRlbGV0ZSBzYXZlZCBQb3N0IHVzaW5nIHRoZSBzdGF0aWMgbWV0aG9kXG5TYXZlcy5kZWxldGVTYXZlZFBvc3QgPSBhc3luYyBmdW5jdGlvbiAocG9zdF9pZCkge1xuICAgIGNvbnN0IHNhdmUgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBwb3N0X2lkIH0gfSk7XG4gICAgaWYgKHNhdmUpIHtcbiAgICAgICAgYXdhaXQgc2F2ZS5kZXN0cm95KCk7XG4gICAgfVxufTtcbi8vIENyZWF0ZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBTYXZlcyBhbmQgVXNlcnNcblNhdmVzLmJlbG9uZ3NUbyhVc2Vycywge1xuICAgIGZvcmVpZ25LZXk6ICd1c2VyX2lkJyxcbiAgICB0YXJnZXRLZXk6ICdpZCcsXG59KTtcbi8vIENyZWF0ZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBTYXZlcyBhbmQgUG9zdHNcblNhdmVzLmJlbG9uZ3NUbyhQb3N0cywge1xuICAgIGZvcmVpZ25LZXk6ICdwb3N0X2lkJyxcbiAgICB0YXJnZXRLZXk6ICdpZCcsXG59KTtcblNhdmVzLnN5bmMoeyBmb3JjZTogZmFsc2UgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1NhdmUgUG9zdCBzeW5jZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgU2F2ZSBwb3N0OicsIGVycik7XG59KTtcbmV4cG9ydCBkZWZhdWx0IFNhdmVzO1xuIiwiaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24nO1xuLy8gRGVmaW5lIEluc3RhbmNlIG9mIFNlcXVlbGl6ZVxuY29uc3Qgc2VxdWVsaXplID0gY3JlYXRlU2VxdWVsaXplSW5zdGFuY2UoKTtcbmNsYXNzIFVzZXJzIGV4dGVuZHMgTW9kZWwge1xuICAgIC8vIGRlY2xhcmUgc3RhdGljIG1ldGhvZHMgdG8gZ2V0IHVzZXIgYnkgSURcbiAgICBzdGF0aWMgYXN5bmMgZ2V0VXNlckJ5SUQodXNlcl9pZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IHVzZXJfaWQgfSB9KTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGdldEFsbFVzZXJzKGxpbWl0LCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRBbGwoe1xuICAgICAgICAgICAgbGltaXQsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gZGVjbGFyZSBzdGF0aWMgbWV0aG9kcyB0byB1cGRhdGUgYSB1c2VyIGJ5IElEXG4gICAgc3RhdGljIGFzeW5jIHVwZGF0ZVVzZXIoaWQsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgY29uc3QgW2FmZmVjdGVkQ291bnQsIHVwZGF0ZWRVc2Vyc10gPSBhd2FpdCB0aGlzLnVwZGF0ZShhdHRyaWJ1dGVzLCB7XG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICAgICAgcmV0dXJuaW5nOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFthZmZlY3RlZENvdW50LCB1cGRhdGVkVXNlcnNdO1xuICAgIH1cbn1cbi8vIFN5bmMgdGhlIG1vZGVsIHdpdGggdGhlIGRhdGFiYXNlXG5Vc2Vycy5pbml0KHtcbiAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICB9LFxuICAgIGZpcnN0TmFtZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbm90RW1wdHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBsYXN0TmFtZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbm90RW1wdHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB1c2VybmFtZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpczogL15bYS16QS1aMC05X10qJC8sXG4gICAgICAgICAgICBsZW46IFszLCAyMF0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBlbWFpbDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBpc0VtYWlsOiB0cnVlLFxuICAgICAgICAgICAgbGVuOiBbNSwgNTBdLFxuICAgICAgICAgICAgbm90RW1wdHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBoYXNoZWRwYXNzd29yZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDY0KSxcbiAgICB9LFxuICAgIHN0YXR1czoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6ICd1bnZlcmlmaWVkJyxcbiAgICB9LFxuICAgIGJpbzoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBkZWZhdWx0VmFsdWU6ICdUaGlzIGlzIGEgbmV3IHVzZXIuJyxcbiAgICB9LFxuICAgIGpvaW46IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICB9LFxuICAgIGF2YXRhclVybDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgIH0sXG4gICAgaW1hZ2VVUkw6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICB9LFxuICAgIHByb2ZpbGVQaWM6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogJ05ldyBVc2VyJyxcbiAgICB9LFxuICAgIGxhc3RfYWN0aXZpdHk6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICB9LFxuICAgIHVwZGF0ZWRfYXQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLk5PVyxcbiAgICB9LFxuICAgIFVzZXJSZWdpc3RyYXRpb25JRDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICBtb2RlbDogJ1VzZXJSZWdpc3RyYXRpb24nLFxuICAgICAgICAgICAga2V5OiAnaWQnLFxuICAgICAgICB9LFxuICAgIH0sXG59LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIG1vZGVsTmFtZTogJ1VzZXJzJyxcbiAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB1cGRhdGVkQXQ6ICd1cGRhdGVkX2F0Jyxcbn0pO1xuLy8gU3luYyBVc2VyIG1vZGVsIHdpdGggdGhlIGRhdGFiYXNlXG5hd2FpdCBzZXF1ZWxpemVcbiAgICAuc3luYyh7IGZvcmNlOiBmYWxzZSB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnTmV3IFVzZXIgc3luY2VkIHN1Y2Nlc3NmdWxseScpO1xufSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIG5ldyB1c2VyOicsIGVycik7XG59KTtcbmV4cG9ydCBkZWZhdWx0IFVzZXJzO1xuIiwiaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnO1xuaW1wb3J0IHsgRGF0YVR5cGVzLCBNb2RlbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSB9IGZyb20gJy4uL2xvYWRlcnMvZGF0YUxvYWRlci9zZXF1aWxpemVDb24nO1xuaW1wb3J0IHsgZ2VuZXJhdGVBdmF0YXJVcmwgfSBmcm9tICcuLi91dGlscy9hdmF0YXInO1xuaW1wb3J0IFVzZXJzIGZyb20gJy4vdXNlci5tb2RlbCc7XG4vLyBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuY2xhc3MgVXNlclJlZ2lzdHJhdGlvbiBleHRlbmRzIE1vZGVsIHtcbiAgICAvLyBDcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGxvZyBpbiB1c2VyIHVwb24gc3VjY2Vzc2Z1bCByZWdpc3RyYXRpb25cbiAgICBzdGF0aWMgYXN5bmMgbG9naW5Vc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kT25lKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGVtYWlsOiBlbWFpbCwgaGFzaGVkcGFzc3dvcmQ6IHBhc3N3b3JkIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIGxvZyBvdXQgdXNlclxuICAgIHN0YXRpYyBhc3luYyBsb2dvdXRVc2VyKGVtYWlsKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGVtYWlsIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDcmVhdGUgYSBzdGF0aWMgbWV0aG9kIHRvIHJlc2V0IHRoZSBwYXNzd29yZCwgY29tcGFyZSB0aGUgaGFzaGVkIHBhc3N3b3JkXG4gICAgc3RhdGljIGFzeW5jIHJlc2V0UGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGVtYWlsLCBoYXNoZWRwYXNzd29yZDogcGFzc3dvcmQgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuVXNlclJlZ2lzdHJhdGlvbi5pbml0KHtcbiAgICBpZDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICB9LFxuICAgIG5ld1VzZXI6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIHVzZXJuYW1lOiB7XG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICBlbWFpbDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgaGFzaGVkcGFzc3dvcmQ6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuREFURSxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XLFxuICAgIH0sXG59LCB7XG4gICAgc2VxdWVsaXplOiBzZXF1ZWxpemUsXG4gICAgbW9kZWxOYW1lOiAnVXNlclJlZ2lzdHJhdGlvbicsXG4gICAgY3JlYXRlZEF0OiAnY3JlYXRlZEF0JyxcbiAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICBmcmVlemVUYWJsZU5hbWU6IHRydWUsXG59KTtcbi8vIEhhc2ggdGhlIHBhc3N3b3JkIGJlZm9yZSBzYXZpbmdcblVzZXJSZWdpc3RyYXRpb24uYmVmb3JlQ3JlYXRlKGFzeW5jICh1c2VyKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNhbHQgPSBiY3J5cHQuZ2VuU2FsdFN5bmMoMTApO1xuICAgICAgICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChTdHJpbmcodXNlci5oYXNoZWRwYXNzd29yZCksIHNhbHQpO1xuICAgICAgICAgICAgdXNlci5oYXNoZWRwYXNzd29yZCA9IGhhc2hlZFBhc3N3b3JkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBoYXNoaW5nIHBhc3N3b3JkOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBoYXNoaW5nIHBhc3N3b3JkJyk7XG4gICAgfVxufSk7XG5Vc2VyUmVnaXN0cmF0aW9uLmFmdGVyQ3JlYXRlKGFzeW5jICh1c2VyKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNwYWNlSW5kZXggPSB1c2VyLm5ld1VzZXI/Lmxhc3RJbmRleE9mKCcgJyk7XG4gICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBmaXJzdCBuYW1lIGFuZCBsYXN0IG5hbWUgYmFzZWQgb24gdGhlIGxhc3Qgc3BhY2VcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0X05hbWUgPSBzcGFjZUluZGV4ICE9PSAtMSA/IHVzZXIubmV3VXNlcj8uc2xpY2UoMCwgc3BhY2VJbmRleCkgOiB1c2VyLm5ld1VzZXI7XG4gICAgICAgICAgICBjb25zdCBsYXN0TmFtZSA9IHNwYWNlSW5kZXggIT09IC0xID8gdXNlci5uZXdVc2VyPy5zbGljZShzcGFjZUluZGV4ID8/ICsxKSA6IG51bGwgPz8gJyc7XG4gICAgICAgICAgICBjb25zdCBhdmF0YXIgPSBnZW5lcmF0ZUF2YXRhclVybCh1c2VyLnVzZXJuYW1lKTtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBvciB1cGRhdGUgdGhlIHVzZXIgcmVjb3JkIGluIHRoZSBVc2VycyB0YWJsZVxuICAgICAgICAgICAgYXdhaXQgVXNlcnMudXBzZXJ0KHtcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IGZpcnN0X05hbWUsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6IGxhc3ROYW1lLFxuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgICAgIGhhc2hlZHBhc3N3b3JkOiB1c2VyLmhhc2hlZHBhc3N3b3JkLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ3VudmVyaWZpZWQnLFxuICAgICAgICAgICAgICAgIGJpbzogJ0kgYW0gYSBuZXcgdXNlci4nLFxuICAgICAgICAgICAgICAgIGpvaW46IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgYXZhdGFyVXJsOiBhdmF0YXIsXG4gICAgICAgICAgICAgICAgaW1hZ2VVUkw6IG51bGwsXG4gICAgICAgICAgICAgICAgcHJvZmlsZVBpYzogbnVsbCxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ05ldyBVc2VyJyxcbiAgICAgICAgICAgICAgICBsYXN0X2FjdGl2aXR5OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgVXNlclJlZ2lzdHJhdGlvbklEOiB1c2VyLmlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlZ2lzdGVyaW5nIG5ldyB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciByZWdpc3RlcmluZyBuZXcgdXNlcicpO1xuICAgIH1cbn0pO1xuLy8gRGVmaW5lIGEgY3VzdG9tIG1ldGhvZCB0byBsb2dpbiB1c2VyIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGFuZCBjb21wYXJlIHRoZSBoYXNoZWQgcGFzc3dvcmRcblVzZXJSZWdpc3RyYXRpb24ubG9naW5Vc2VyID0gYXN5bmMgZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbDogZW1haWwgfSB9KTtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGF1dGggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5oYXNoZWRwYXNzd29yZCk7XG4gICAgICAgICAgICBpZiAoYXV0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmNvcnJlY3QgcGFzc3dvcmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5jb3JyZWN0IGVtYWlsJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvZ2dpbmcgaW4gdXNlcjonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICB9XG59O1xuLy8gRGVmaW5lIGEgY3VzdG9tIG1ldGhvZCB0byBsb2dvdXQgdXNlclxuVXNlclJlZ2lzdHJhdGlvbi5sb2dvdXRVc2VyID0gYXN5bmMgZnVuY3Rpb24gKGVtYWlsKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsOiBlbWFpbCB9IH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBvdXQgdXNlcjonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICB9XG59O1xuYXdhaXQgc2VxdWVsaXplXG4gICAgLnN5bmMoeyBmb3JjZTogZmFsc2UgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ05ldyBVc2VyIFJlZ2lzdGVyZWQgc3luY2VkIHN1Y2Nlc3NmdWxseScpO1xufSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIG5ldyB1c2VyOicsIGVycik7XG59KTtcbmV4cG9ydCBkZWZhdWx0IFVzZXJSZWdpc3RyYXRpb247XG4iLCJpbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IGNvck9wdGlvbnMgfSBmcm9tICcuLi9jb25maWcvY29yT3B0aW9ucyc7XG5pbXBvcnQgKiBhcyBhdXRoQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlcic7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xucm91dGVyLnVzZShjb3JzKGNvck9wdGlvbnMpKTtcbnJvdXRlci51c2UoKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgbmV4dCgpO1xufSk7XG4vLyBhcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiBmYWxzZSB9KSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbnJvdXRlci5wb3N0KCcvYXBpL3JlZ2lzdGVyJywgYXV0aENvbnRyb2xsZXIudXNlclJlZ2lzdGVyKTtcbnJvdXRlci5wb3N0KCcvYXBpL2xvZ2luJywgYXV0aENvbnRyb2xsZXIudXNlckxvZ2luKTtcbnJvdXRlci5nZXQoJy9hcGkvbG9nb3V0JywgYXV0aENvbnRyb2xsZXIudXNlckxvZ291dCk7XG5yb3V0ZXIucG9zdCgnL2FwaS9yZWZyZXNoLXRva2VuJywgYXV0aENvbnRyb2xsZXIucmVmcmVzaFRva2VuKTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgand0RU5WIH0gZnJvbSAnLi4vY29uZmlnL2p3dEVOVic7XG5pbXBvcnQgeyB2ZXJpZnlVc2VyIH0gZnJvbSAnLi4vbG9hZGVycy9hdXRoL3VzZXJBdXRoJztcbmltcG9ydCB7IFVzZXJzIH0gZnJvbSAnLi4vbW9kZWxzL2luZGV4Lm1vZGVsJztcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5kb3RlbnYuY29uZmlnKCk7XG5yb3V0ZXIudXNlKGNvcnMoKSk7XG5yb3V0ZXIudXNlKChfcmVxLCByZXMsIG5leHQpID0+IHtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnaHR0cDovL2xvY2FsaG9zdDo4MDgwJyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdPcmlnaW4sIFgtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQWNjZXB0Jyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xuICAgIG5leHQoKTtcbn0pO1xucm91dGVyLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG5yb3V0ZXIudXNlKGNvb2tpZVBhcnNlcigpKTtcbnJvdXRlci51c2UoZXhwcmVzcy5qc29uKCkpO1xucm91dGVyLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFVzZXInLCB2ZXJpZnlVc2VyLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyB0b2tlbiBmb3VuZDogc2VuZCA0MDEgVW5hdXRob3JpemVkIGluIGF1dGggcm91dGVzJyk7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSldUIHZlcmlmaWNhdGlvbiBlcnJvcicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoNDAxKVxuICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCBJbnZhbGlkIFRva2VuIGluIGF1dGggcm91dGVzJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKGRlY29kZWRUb2tlbi5pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoNDAwKVxuICAgICAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkIGluIEF1dGggcm91dGUnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VyIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGdldHRpbmcgY3VycmVudCB1c2VyJyB9KTtcbiAgICAgICAgICAgIHJldHVybjsgLy8gQWRkIGEgcmV0dXJuIHN0YXRlbWVudCBoZXJlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuOyAvLyBBZGQgYSByZXR1cm4gc3RhdGVtZW50IGhlcmVcbiAgICB9IC8vIEFkZCBhIHJldHVybiBzdGF0ZW1lbnQgaGVyZVxuICAgICk7XG59KTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgY29yT3B0aW9ucyB9IGZyb20gJy4uL2NvbmZpZy9jb3JPcHRpb25zJztcbmltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IHsgZ2V0SW1hZ2VQcmV2aWV3VXJsLCBnZXRQcm9maWxlUGljUHJldmlld1VybCwgfSBmcm9tICcuLi9jb250cm9sbGVycy9pbWFnZUNvbnRyb2xsZXInO1xuaW1wb3J0IHsgSW1hZ2VTdG9yYWdlcywgUHJvZmlsZVBpY3R1cmVzLCBVc2VycyB9IGZyb20gJy4uL21vZGVscy9pbmRleC5tb2RlbCc7XG5pbXBvcnQgdXBsb2FkIGZyb20gJy4uL3NlcnZpY2VzL211bHRlci5jb25maWcnO1xuZG90ZW52LmNvbmZpZygpO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbi8vIEVuYWJsZSBDT1JTIGZvciBhbGwgcm91dGVzXG5yb3V0ZXIudXNlKGNvcnMoY29yT3B0aW9ucykpO1xucm91dGVyLnVzZSgoX3JlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICByZXMuaGVhZGVyKCdlbmNvZGluZycsICdtdWx0aXBhcnQvZm9ybS1kYXRhJyk7XG4gICAgbmV4dCgpO1xufSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbnJvdXRlci5wb3N0KCcvYXBpL3VwbG9hZEltYWdlJywgdXBsb2FkLnNpbmdsZSgnaW1hZ2UnKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgdXBsb2FkZWQ6JywgcmVxLmZpbGUpO1xuICAgICAgICAvLyBNb2RpZnkgdGhlIGZpbGUgcGF0aCB0byB0aGUgcmVxdWlyZWQgZm9ybWF0XG4gICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGBhc3NldHMvaW1hZ2VzLyR7cmVxLmZpbGU/LmZpbGVuYW1lfWA7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICAgICAgICBjb25zdCBwb3N0X2lkID0gcGFyc2VJbnQocmVxLmJvZHkucG9zdElkLCAxMCk7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgand0RU5WLkpXVF9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlcl9pZCA9IGRlY29kZWRUb2tlbi5pZDtcbiAgICAgICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeVBrKHVzZXJfaWQpO1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbWFnZVJlY29yZCA9IGF3YWl0IEltYWdlU3RvcmFnZXMuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBpbWFnZVVybDogcmVsYXRpdmVQYXRoLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJfaWQgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICBwb3N0X2lkOiBwb3N0X2lkIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9BdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFpbWFnZVJlY29yZCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgZXJyb3I6ICdFcnJvciBjcmVhdGluZyBpbWFnZSByZWNvcmQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW1hZ2UgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgICAgICBpbWFnZVVybDogcmVsYXRpdmVQYXRoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGltYWdlOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59KTtcbnJvdXRlci5wb3N0KCcvYXBpL3VwbG9hZFByb2ZpbGVQaWMnLCB1cGxvYWQuc2luZ2xlKCdmaWxlJyksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGaWxlIHVwbG9hZGVkOicsIHJlcS5maWxlKTtcbiAgICAgICAgLy8gTW9kaWZ5IHRoZSBmaWxlIHBhdGggdG8gdGhlIHJlcXVpcmVkIGZvcm1hdFxuICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBgYXNzZXRzL2ltYWdlcy8ke3JlcS5maWxlPy5maWxlbmFtZX1gO1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBqd3RFTlYuSldUX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuICAgICAgICAgICAgaWYgKCF1c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHByb2ZpbGVQaWNSZWNvcmQgPSBhd2FpdCBQcm9maWxlUGljdHVyZXMuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBwcm9maWxlUGljOiByZWxhdGl2ZVBhdGgsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdXNlcl9pZCB8fCBudWxsLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9BdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFwcm9maWxlUGljUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBlcnJvcjogJ0Vycm9yIGNyZWF0aW5nIGltYWdlIHJlY29yZCcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdXNlci51cGRhdGUoeyBwcm9maWxlUGljOiByZWxhdGl2ZVBhdGggfSk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ltYWdlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgICAgICAgICAgcHJvZmlsZVBpYzogcmVsYXRpdmVQYXRoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGltYWdlOicsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgICB9XG59KTtcbi8vICoqIFJldHVybiBwaWN0dXJlIHVybCBmb3IgcHJldmlld1xucm91dGVyLmdldCgnL2FwaS9zZW5kSW1hZ2VVcmwnLCBnZXRJbWFnZVByZXZpZXdVcmwpO1xuLy8gKiogUmV0dXJuIFByb2ZpbGUgcGljdHVyZSB1cmwgZm9yIHByZXZpZXdcbnJvdXRlci5nZXQoJy9hcGkvc2VuZFByb2ZpbGVQaWNVcmwnLCBnZXRQcm9maWxlUGljUHJldmlld1VybCk7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iLCJpbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IGNyZWF0ZVBvc3QsIGRlbGV0ZUxpa2VkUG9zdCwgZGVsZXRlUG9zdCwgZGVsZXRlU2F2ZWRQb3N0LCBnZXRBbGxQb3N0cywgZ2V0SW5maW5pdGVQb3N0cywgZ2V0UG9wdWxhclBvc3RzLCBnZXRQb3N0QnlJZCwgZ2V0U2F2ZWRQb3N0cywgZ2V0VXNlclBvc3RzLCBsaWtlUG9zdCwgc2F2ZVBvc3QsIHNlYXJjaFBvc3RzLCB1cGRhdGVQb3N0LCB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL1Bvc3RDb250cm9sbGVyJztcbmltcG9ydCB7IHZlcmlmeVVzZXIgfSBmcm9tICcuLi9sb2FkZXJzL2F1dGgvdXNlckF1dGgnO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbnJvdXRlci51c2UoY29ycygpKTtcbnJvdXRlci51c2UoKF9yZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgbmV4dCgpO1xufSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbnJvdXRlci51c2UoY29va2llUGFyc2VyKCkpO1xucm91dGVyLnVzZShleHByZXNzLmpzb24oKSk7XG5yb3V0ZXIudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbi8vIENyZWF0ZSBhIG5ldyBwb3N0XG5yb3V0ZXIucG9zdCgnL2FwaS9jcmVhdGVQb3N0JywgY3JlYXRlUG9zdCk7XG4vLyBVcGRhdGUgYSBwb3N0XG5yb3V0ZXIucHV0KCcvYXBpL3VwZGF0ZVBvc3QnLCB1cGRhdGVQb3N0KTtcbi8vIGRlbGV0ZSBhIHBvc3RcbnJvdXRlci5kZWxldGUoJy9hcGkvZGVsZXRlUG9zdCcsIGRlbGV0ZVBvc3QpO1xuLy8gR2V0IFJlY2VudCBQb3N0c1xucm91dGVyLmdldCgnL2FwaS9nZXRBbGxQb3N0cycsIGdldEFsbFBvc3RzKTtcbi8vIEdldCBwb3N0IGJ5IElEXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFBvc3RCeUlkJywgdmVyaWZ5VXNlciwgZ2V0UG9zdEJ5SWQpO1xuLy8gTGlrZSBhIFBvc3RcbnJvdXRlci5wb3N0KCcvYXBpL2xpa2VQb3N0JywgbGlrZVBvc3QpO1xuLy8gU2F2ZSBhIFBvc3RcbnJvdXRlci5wb3N0KCcvYXBpL3NhdmVQb3N0JywgdmVyaWZ5VXNlciwgc2F2ZVBvc3QpO1xuLy8gZ2V0IHNhdmVkIHBvc3RzXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFNhdmVkUG9zdHMnLCB2ZXJpZnlVc2VyLCBnZXRTYXZlZFBvc3RzKTtcbi8vIERlbGV0ZSBhIFBvc3RcbnJvdXRlci5kZWxldGUoJy9hcGkvZGVsZXRlU2F2ZWRQb3N0JywgZGVsZXRlU2F2ZWRQb3N0KTtcbi8vIERlbGV0ZSBhIGxpa2VcbnJvdXRlci5kZWxldGUoJy9hcGkvZGVsZXRlTGlrZVBvc3QnLCBkZWxldGVMaWtlZFBvc3QpO1xuLy8gR2V0IEluZmluaXRlIFBvc3RzXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldEluZmluaXRlUG9zdHMnLCBnZXRJbmZpbml0ZVBvc3RzKTtcbi8vIFNlYXJjaCBQb3N0c1xucm91dGVyLnBvc3QoJy9hcGkvc2VhcmNoUG9zdHMnLCBzZWFyY2hQb3N0cyk7XG4vLyBHZXQgdXNlcidzIHNhdmVkIHBvc3RzXG5yb3V0ZXIuZ2V0KCcvYXBpL2dldFVzZXJQb3N0cycsIGdldFVzZXJQb3N0cyk7XG4vLyBHZXQgcG9wdWxhciBwb3N0c1xucm91dGVyLmdldCgnL2FwaS9nZXRQb3B1bGFyUG9zdHMnLCBnZXRQb3B1bGFyUG9zdHMpO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIiwiaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vY29uZmlnL2luZGV4JztcbmltcG9ydCBhdXRoUm91dGVzIGZyb20gJy4vYXV0aFJvdXRlcyc7XG5pbXBvcnQgY3VycmVudFVzZXJSb3V0ZXMgZnJvbSAnLi9jdXJyZW50VXNlclJvdXRlcyc7XG5pbXBvcnQgaW1hZ2VSb3V0ZXMgZnJvbSAnLi9pbWFnZVJvdXRlcyc7XG5pbXBvcnQgcG9zdFJvdXRlcyBmcm9tICcuL3Bvc3RSb3V0ZXMnO1xuaW1wb3J0IHVzZXJEYXRhUm91dGVzIGZyb20gJy4vdXNlckRhdGFSb3V0ZXMnO1xuaW1wb3J0IHVzZXJSb3V0ZXMgZnJvbSAnLi91c2VyUm91dGVzJztcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5yb3V0ZXIudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdPUFRJT05TJykge1xuICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsgLy8gSGFuZGxlIHByZWZsaWdodCByZXF1ZXN0IGZvciBDT1JTXG4gICAgfVxuICAgIHJldHVybiBuZXh0KCk7XG59KTtcbi8vIGFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xucm91dGVyLnVzZShjb29raWVQYXJzZXIoKSk7XG5yb3V0ZXIudXNlKGV4cHJlc3MuanNvbigpKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci5qc29uKCkpO1xucm91dGVyLmdldCgnLycsIChfcmVxLCByZXMpID0+IHtcbiAgICByZXMuc2VuZCh7XG4gICAgICAgIHN0YXR1czogYCR7ZW52Lk5PREVfRU5WfWAsXG4gICAgICAgIG1lc3NhZ2U6IGAke2Vudi5SRVNQT05TRV9TVEFUVVN9YCxcbiAgICAgICAgbmFtZTogYCR7ZW52LkFQUF9OQU1FfWAsXG4gICAgfSk7XG59KTtcbnJvdXRlci51c2UoYXV0aFJvdXRlcyk7XG5yb3V0ZXIudXNlKHVzZXJSb3V0ZXMpO1xucm91dGVyLnVzZShjdXJyZW50VXNlclJvdXRlcyk7XG5yb3V0ZXIudXNlKHVzZXJEYXRhUm91dGVzKTtcbnJvdXRlci51c2UocG9zdFJvdXRlcyk7XG5yb3V0ZXIudXNlKGltYWdlUm91dGVzKTtcbmV4cG9ydCB7IHJvdXRlciB9O1xuIiwiaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBnZXRVc2VyRGF0YUJ5SUQgfSBmcm9tICcuLi9jb250cm9sbGVycy91c2VyQ29udHJvbGxlcic7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xucm91dGVyLnVzZShjb3JzKCkpO1xucm91dGVyLnVzZSgoX3JlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICBuZXh0KCk7XG59KTtcbnJvdXRlci51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xucm91dGVyLnVzZShjb29raWVQYXJzZXIoKSk7XG5yb3V0ZXIudXNlKGV4cHJlc3MuanNvbigpKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuLy8gKiogY3VycmVudCB1c2VyIGRhdGFzKHBvc3QsIGxpa2VzLCB1c2VyX2lkKVxucm91dGVyLmdldCgnL2FwaS9nZXRVc2VyRGF0YScsIGdldFVzZXJEYXRhQnlJRCk7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iLCJpbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbi8vIGltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbi8vIGltcG9ydCB7IGp3dEVOViB9IGZyb20gJy4uL2NvbmZpZy9qd3RFTlYnO1xuaW1wb3J0IHsgZ2V0QWxsVXNlcnMsIGdldFVzZXJCeUlELCB1cGRhdGVVc2VyLCB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL3VzZXJDb250cm9sbGVyJztcbi8vIGltcG9ydCB7IHZlcmlmeVVzZXIgfSBmcm9tICcuLi9sb2FkZXJzL2F1dGgvdXNlckF1dGgnO1xuLy8gaW1wb3J0IHsgTGlrZXMsIFBvc3RzLCBVc2VycyB9IGZyb20gJy4uL21vZGVscy9pbmRleC5tb2RlbCc7XG4vLyBpbXBvcnQgeyB2YWxpZGF0ZUFuZFBhcnNlUGFyYW1zIH0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGVBbmRQYXJzZVBhcmFtcyc7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xucm91dGVyLnVzZShjb3JzKCkpO1xucm91dGVyLnVzZSgoX3JlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdCcpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycpO1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICBuZXh0KCk7XG59KTtcbnJvdXRlci51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xucm91dGVyLnVzZShjb29raWVQYXJzZXIoKSk7XG5yb3V0ZXIudXNlKGV4cHJlc3MuanNvbigpKTtcbnJvdXRlci51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuLy8gVXNlciBBdXRoZW50aWNhdGlvbiBNaWRkbGV3YXJlXG4vLyByb3V0ZXIuZ2V0KCcvYXBpL2dldEN1cnJlbnRVc2VyJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4vLyAgIHRyeSB7XG4vLyAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4vLyAgICAgaWYgKCF0b2tlbikge1xuLy8gICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbi8vICAgICAgIHJldHVybjtcbi8vICAgICB9XG4vLyAgICAgand0LnZlcmlmeShcbi8vICAgICAgIHRva2VuLFxuLy8gICAgICAgand0RU5WLkpXVF9TRUNSRVQgYXMgc3RyaW5nLFxuLy8gICAgICAgYXN5bmMgKGVycjogYW55LCBkZWNvZGVkVG9rZW46IGFueSkgPT4ge1xuLy8gICAgICAgICBpZiAoZXJyKSB7XG4vLyAgICAgICAgICAgY29uc29sZS5sb2coJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3InLCBlcnIubWVzc2FnZSk7XG4vLyAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkIEludmFsaWQgVG9rZW4nIH0pO1xuLy8gICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuLy8gICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbi8vICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbi8vICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgdHJ5IHtcbi8vICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5UGsodXNlcl9pZCk7XG4vLyAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4vLyAgICAgICAgICAgICByZXNcbi8vICAgICAgICAgICAgICAgLnN0YXR1cyg0MDApXG4vLyAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQgdXNlciByb3V0ZXMnIH0pO1xuLy8gICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICAgIH1cbi8vICAgICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdHMuZ2V0UG9zdEJ5UmVmZXJlbmNlSUQodXNlcl9pZCk7XG4vLyAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4vLyAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IElEIGlzIHJlcXVpcmVkIGluIHBvc3RzJyB9KTtcbi8vICAgICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgICB9XG4vLyAgICAgICAgICAgY29uc3QgcG9zdF9pZCA9IHBhcnNlSW50KHJlcS5xdWVyeS5wb3N0X2lkIGFzIHN0cmluZywgMTApO1xuLy8gICAgICAgICAgIGlmICghcG9zdF9pZCkge1xuLy8gICAgICAgICAgICAgcmVzXG4vLyAgICAgICAgICAgICAgIC5zdGF0dXMoNDAwKVxuLy8gICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdQb3N0IElEIGlzIHJlcXVpcmVkIGluIHZhcmlhYmxlcycgfSk7XG4vLyAgICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgICAgfVxuLy8gICAgICAgICAgIGNvbnN0IHVzZXJMaWtlcyA9IGF3YWl0IExpa2VzLmZpbmRCeVBrKHVzZXJfaWQpO1xuLy8gICAgICAgICAgIGlmICghdXNlckxpa2VzKSB7XG4vLyAgICAgICAgICAgICByZXNcbi8vICAgICAgICAgICAgICAgLnN0YXR1cyg0MDApXG4vLyAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQgbGlrZXMgcm91dGVzJyB9KTtcbi8vICAgICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgICB9XG4vLyAgICAgICAgICAgY29uc3QgbGlrZXNfaWQgPSBwYXJzZUludChyZXEucXVlcnkubGlrZXNfaWQgYXMgc3RyaW5nLCAxMCk7XG4vLyAgICAgICAgICAgaWYgKCFsaWtlc19pZCkge1xuLy8gICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnTGlrZXMgSUQgaXMgcmVxdWlyZWQnIH0pO1xuLy8gICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICAgIH1cbi8vICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4vLyAgICAgICAgICAgICB1c2VyLFxuLy8gICAgICAgICAgICAgcG9zdCxcbi8vICAgICAgICAgICAgIHVzZXJMaWtlcyxcbi8vICAgICAgICAgICAgIHVzZXJfaWQsXG4vLyAgICAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4vLyAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4vLyAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yIGFzIHN0cmluZyk7XG4vLyAgICAgICAgIH1cbi8vICAgICAgIH1cbi8vICAgICApO1xuLy8gICB9IGNhdGNoIChlcnJvcikge1xuLy8gICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuLy8gICB9XG4vLyB9KTtcbi8vIEdldCBhbGwgdXNlcnNcbnJvdXRlci5nZXQoJy9hcGkvZ2V0QWxsVXNlcnMnLCBnZXRBbGxVc2Vycyk7XG4vLyBHZXQgdXNlciBieSBJRFxucm91dGVyLmdldCgnL2FwaS9nZXRVc2VyQnlJRCcsIGdldFVzZXJCeUlEKTtcbi8vIFVwZGF0ZSB1c2VyIGJ5IElEXG5yb3V0ZXIucHV0KCcvYXBpL3VwZGF0ZVVzZXInLCB1cGRhdGVVc2VyKTtcbi8vIHJvdXRlci5nZXQoJy9hcGkvZ2V0Q3VycmVudFVzZXInLCBnZXRDdXJyZW50VXNlcik7XG4vLyByb3V0ZXIuZ2V0KCcvYXBpL2dldEN1cnJlbnRVc2VyJywgdmVyaWZ5VXNlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4vLyAgIHRyeSB7XG4vLyAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4vLyAgICAgaWYgKCF0b2tlbikge1xuLy8gICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbi8vICAgICAgIHJldHVybjtcbi8vICAgICB9XG4vLyAgICAgand0LnZlcmlmeShcbi8vICAgICAgIHRva2VuLFxuLy8gICAgICAgand0RU5WLkpXVF9TRUNSRVQgYXMgc3RyaW5nLFxuLy8gICAgICAgYXN5bmMgKGVycjogYW55LCBkZWNvZGVkVG9rZW46IGFueSkgPT4ge1xuLy8gICAgICAgICBpZiAoZXJyKSB7XG4vLyAgICAgICAgICAgY29uc29sZS5sb2coJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3InLCBlcnIubWVzc2FnZSk7XG4vLyAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkIEludmFsaWQgVG9rZW4nIH0pO1xuLy8gICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBjb25zdCB1c2VyX2lkID0gZGVjb2RlZFRva2VuLmlkO1xuLy8gICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbi8vICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJyB9KTtcbi8vICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgdHJ5IHtcbi8vICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEFsbCh7XG4vLyAgICAgICAgICAgICB3aGVyZTogeyBpZDogdXNlcl9pZCB9LFxuLy8gICAgICAgICAgICAgaW5jbHVkZTogW1xuLy8gICAgICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICAgICAgbW9kZWw6IFBvc3RzLFxuLy8gICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcbi8vICAgICAgICAgICAgICAgICAgICdpZCcsXG4vLyAgICAgICAgICAgICAgICAgICAnY2FwdGlvbicsXG4vLyAgICAgICAgICAgICAgICAgICAnaW1hZ2VVUkwnLFxuLy8gICAgICAgICAgICAgICAgICAgJ2xvY2F0aW9uJyxcbi8vICAgICAgICAgICAgICAgICAgICd0YWdzJyxcbi8vICAgICAgICAgICAgICAgICAgICdsaWtlc19jb3VudCcsXG4vLyAgICAgICAgICAgICAgICAgICAnY3JlYXRlZF9BdCcsXG4vLyAgICAgICAgICAgICAgICAgXSxcbi8vICAgICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgICAgIG1vZGVsOiBMaWtlcyxcbi8vICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbJ2lkJywgJ3VzZXJfaWQnLCAncG9zdF9pZCcsICdjcmVhdGVkX0F0J10sXG4vLyAgICAgICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgICBdLFxuLy8gICAgICAgICAgIH0pO1xuLy8gICAgICAgICAgIGlmICghdXNlcikge1xuLy8gICAgICAgICAgICAgcmVzXG4vLyAgICAgICAgICAgICAgIC5zdGF0dXMoNDAwKVxuLy8gICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkIHVzZXIgcm91dGVzJyB9KTtcbi8vICAgICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgICB9XG4vLyAgICAgICAgICAgaWYgKHVzZXJfaWQgIT09IHVzZXJfaWQpIHtcbi8vICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4vLyAgICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgICAgfVxuLy8gICAgICAgICAgIC8vIFZhbGlkYXRlIGFuZCBwYXJzZSBwYXJhbWV0ZXJzXG4vLyAgICAgICAgICAgbGV0IHBvc3RfaWQsIGxpa2VzX2lkLCBjcmVhdG9yX2lkO1xuLy8gICAgICAgICAgIHRyeSB7XG4vLyAgICAgICAgICAgICAoeyBwb3N0X2lkLCBsaWtlc19pZCwgY3JlYXRvcl9pZCB9ID0gdmFsaWRhdGVBbmRQYXJzZVBhcmFtcyhyZXEpKTtcbi8vICAgICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4vLyAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4vLyAgICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgICAgfVxuLy8gICAgICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0cy5maW5kQWxsKHtcbi8vICAgICAgICAgICAgIHdoZXJlOiB7IGNyZWF0b3JfSWQ6IGNyZWF0b3JfaWQgfSxcbi8vICAgICAgICAgICAgIGluY2x1ZGU6IFtcbi8vICAgICAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgICAgIG1vZGVsOiBVc2Vycyxcbi8vICAgICAgICAgICAgICAgICBhczogJ2NyZWF0b3InLFxuLy8gICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFsnaWQnLCAndXNlcm5hbWUnXSxcbi8vICAgICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgaWYgKCFwb3N0KSB7XG4vLyAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdQb3N0IElEIGlzIHJlcXVpcmVkIGluIHBvc3RzJyB9KTtcbi8vICAgICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgICB9XG4vLyAgICAgICAgICAgLy8gY29uc3QgcG9zdCA9IGF3YWl0IFBvc3RzLmdldFBvc3RCeVJlZmVyZW5jZUlEKHVzZXJfaWQpO1xuLy8gICAgICAgICAgIC8vIGlmICghcG9zdCkge1xuLy8gICAgICAgICAgIC8vICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUG9zdCBJRCBpcyByZXF1aXJlZCBpbiBwb3N0cycgfSk7XG4vLyAgICAgICAgICAgLy8gICByZXR1cm47XG4vLyAgICAgICAgICAgLy8gfVxuLy8gICAgICAgICAgIGNvbnN0IHVzZXJMaWtlcyA9IGF3YWl0IExpa2VzLmZpbmRCeVBrKHVzZXJfaWQpO1xuLy8gICAgICAgICAgIGlmICghdXNlckxpa2VzKSB7XG4vLyAgICAgICAgICAgICByZXNcbi8vICAgICAgICAgICAgICAgLnN0YXR1cyg0MDApXG4vLyAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQgbGlrZXMgcm91dGVzJyB9KTtcbi8vICAgICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgICB9XG4vLyAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuLy8gICAgICAgICAgICAgdXNlcixcbi8vICAgICAgICAgICAgIHBvc3QsXG4vLyAgICAgICAgICAgICB1c2VyTGlrZXMsXG4vLyAgICAgICAgICAgICB1c2VyX2lkLFxuLy8gICAgICAgICAgICAgdXNlcklkOiB1c2VyX2lkLFxuLy8gICAgICAgICAgICAgY3JlYXRvcl9pZDogY3JlYXRvcl9pZCxcbi8vICAgICAgICAgICAgIHBvc3RfaWQ6IHBvc3RfaWQsXG4vLyAgICAgICAgICAgICBsaWtlc19pZDogbGlrZXNfaWQsXG4vLyAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4vLyAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yIGFzIHN0cmluZyk7XG4vLyAgICAgICAgIH1cbi8vICAgICAgIH1cbi8vICAgICApO1xuLy8gICB9IGNhdGNoIChlcnJvcikge1xuLy8gICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xuLy8gICB9XG4vLyB9KTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgdmFsaWRhdGVNSU1FVHlwZSB9IGZyb20gJ3ZhbGlkYXRlLWltYWdlLXR5cGUnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbi8vIERlZmluZSBjdXN0b20gZGVzdGluYXRpb24gZGlyZWN0b3J5XG5jb25zdCB1cGxvYWREaXIgPSAnL2hvbWUvYmFic2RldnN5cy9hcHBWLTEvcHVibGljL2Fzc2V0cy9pbWFnZXMnO1xuLy8gRW5zdXJlIHRoZSBkaXJlY3RvcnkgZXhpc3RzXG5pZiAoIWZzLmV4aXN0c1N5bmModXBsb2FkRGlyKSkge1xuICAgIGZzLm1rZGlyU3luYyh1cGxvYWREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xufVxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XG4gICAgZGVzdGluYXRpb246IGZ1bmN0aW9uIChfcmVxLCBfZmlsZSwgY2IpIHtcbiAgICAgICAgY2IobnVsbCwgdXBsb2FkRGlyKTtcbiAgICB9LFxuICAgIGZpbGVuYW1lOiBmdW5jdGlvbiAoX3JlcSwgZmlsZSwgY2IpIHtcbiAgICAgICAgY29uc3QgdW5pcXVlU3VmZml4ID0gRGF0ZS5ub3coKSArICctJyArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDFlOSk7XG4gICAgICAgIGNiKG51bGwsIGZpbGUuZmllbGRuYW1lICsgJy0nICsgdW5pcXVlU3VmZml4ICsgcGF0aC5leHRuYW1lKGZpbGUub3JpZ2luYWxuYW1lKSk7XG4gICAgfSxcbn0pO1xuLy8gQ2hlY2sgZmlsZSB0eXBlXG5jb25zdCB2YWxpZGF0ZU1pbWVUeXBlID0gYXN5bmMgKGZpbGUsIGNiKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IGF3YWl0IHZhbGlkYXRlTUlNRVR5cGUoZmlsZS5wYXRoLCB7XG4gICAgICAgICAgICBvcmlnaW5hbEZpbGVuYW1lOiBmaWxlLm9yaWdpbmFsbmFtZSxcbiAgICAgICAgICAgIGFsbG93TWltZVR5cGVzOiBbJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL3N2Zyt4bWwnXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC5vaykge1xuICAgICAgICAgICAgcmV0dXJuIGNiKG5ldyBFcnJvcignSW52YWxpZCBmaWxlIHR5cGUnKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2IobnVsbCwgdHJ1ZSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2YWxpZGF0aW5nIGZpbGUgdHlwZTonLCBlcnJvcik7XG4gICAgICAgIGNiKG5ldyBFcnJvcignRXJyb3IgdmFsaWRhdGluZyBmaWxlIHR5cGUnKSk7XG4gICAgfVxufTtcbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7XG4gICAgc3RvcmFnZTogc3RvcmFnZSxcbiAgICBsaW1pdHM6IHsgZmlsZVNpemU6IDEwMDAwMDAwIH0sXG4gICAgZmlsZUZpbHRlcjogZnVuY3Rpb24gKF9yZXEsIGZpbGUsIGNiKSB7XG4gICAgICAgIGNvbnN0IGZpbGV0eXBlcyA9IC9qcGVnfGpwZ3xwbmd8c3ZnLztcbiAgICAgICAgY29uc3QgbWltZXR5cGUgPSBmaWxldHlwZXMudGVzdChmaWxlLm1pbWV0eXBlKTtcbiAgICAgICAgY29uc3QgZXh0bmFtZSA9IGZpbGV0eXBlcy50ZXN0KHBhdGguZXh0bmFtZShmaWxlLm9yaWdpbmFsbmFtZSkudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGlmIChtaW1ldHlwZSAmJiBleHRuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsaWRhdGVNaW1lVHlwZShmaWxlLnBhdGgsIGNiKTtcbiAgICB9LFxufSk7XG5leHBvcnQgZGVmYXVsdCB1cGxvYWQ7XG4iLCJpbXBvcnQgeyBQZXJmb3JtYW5jZU9ic2VydmVyLCBwZXJmb3JtYW5jZSB9IGZyb20gJ25vZGU6cGVyZl9ob29rcyc7XG4vLyBTZXQgdXAgdGhlIFBlcmZvcm1hbmNlT2JzZXJ2ZXJcbmNvbnN0IG9icyA9IG5ldyBQZXJmb3JtYW5jZU9ic2VydmVyKGl0ZW1zID0+IHtcbiAgICBpdGVtcy5nZXRFbnRyaWVzKCkuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2VudHJ5Lm5hbWV9OiAke2VudHJ5LmR1cmF0aW9ufW1zYCk7XG4gICAgfSk7XG4gICAgcGVyZm9ybWFuY2UuY2xlYXJNYXJrcygpO1xufSk7XG5vYnMub2JzZXJ2ZSh7IHR5cGU6ICdtZWFzdXJlJyB9KTtcbi8vIFNpbXVsYXRlIHRoZSBsb2FkZXIgZnVuY3Rpb25cbmFzeW5jIGZ1bmN0aW9uIGxvYWRlcigpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBNYXJrIHRoZSBzdGFydCBvZiB0aGUgbG9hZGVyXG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ0xvYWRlciBTdGFydCcsIHtcbiAgICAgICAgICAgIGRldGFpbDogJ0xvYWRlciBzdGFydGVkJyxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFBlcmZvcm0gVGFzayAxXG4gICAgICAgIGF3YWl0IGRvU29tZUxvbmdSdW5uaW5nUHJvY2VzcygpO1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdUYXNrIDEgRW5kJywge1xuICAgICAgICAgICAgZGV0YWlsOiAnVGFzayAxIGNvbXBsZXRlZCcsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBQZXJmb3JtIFRhc2sgMlxuICAgICAgICBhd2FpdCBkb1NvbWVMb25nUnVubmluZ1Byb2Nlc3MoKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnVGFzayAyIEVuZCcsIHtcbiAgICAgICAgICAgIGRldGFpbDogJ1Rhc2sgMiBjb21wbGV0ZWQnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbG9naW5NZWFzdXJlID0gcGVyZm9ybWFuY2UubWVhc3VyZSgnVGFzayAyIER1cmF0aW9uJywgJ1Rhc2sgMSBFbmQnLCAnVGFzayAyIEVuZCcpO1xuICAgICAgICBjb25zb2xlLmxvZyhsb2dpbk1lYXN1cmUuZHVyYXRpb24pO1xuICAgICAgICAvLyBFbmQgb2YgdGhlIGxvYWRlclxuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdMb2FkZXIgRW5kJyk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoJ1RvdGFsIExvYWRlciBEdXJhdGlvbicsICdMb2FkZXIgU3RhcnQnLCAnTG9hZGVyIEVuZCcpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gbG9hZGVyOicsIGVycm9yKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkb1NvbWVMb25nUnVubmluZ1Byb2Nlc3MoKSB7XG4gICAgLy8gUmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGEgdGltZW91dCB0byBzaW11bGF0ZSBhIGxvbmctcnVubmluZyBwcm9jZXNzXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSwgMTAwMCk7IC8vIDEgc2Vjb25kIHRpbWVvdXQgdG8gc2ltdWxhdGUgdGhlIHByb2Nlc3MgZHVyYXRpb25cbiAgICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IGxvYWRlcjtcbiIsIi8vIERlc2M6IFRydW5jYXRlIHRhYmxlcyBpbiB0aGUgZGF0YWJhc2VcbmltcG9ydCB7IGNyZWF0ZVNlcXVlbGl6ZUluc3RhbmNlIH0gZnJvbSAnLi4vbG9hZGVycy9kYXRhTG9hZGVyL3NlcXVpbGl6ZUNvbi5qcyc7XG5pbXBvcnQgSW1hZ2VTdG9yYWdlcyBmcm9tICcuLi9tb2RlbHMvaW1hZ2UubW9kZWwuanMnO1xuaW1wb3J0IFByb2ZpbGVQaWN0dXJlcyBmcm9tICcuLi9tb2RlbHMvcHJvZmlsZVBpYy5tb2RlbC5qcyc7XG4vLyAqKiBEZWZpbmUgSW5zdGFuY2Ugb2YgU2VxdWVsaXplXG5jb25zdCBzZXF1ZWxpemUgPSBjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSgpO1xuLy8gKiogdHJ1bmNhdGVUYWJsZXMgZnVuY3Rpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0cnVuY2F0ZVRhYmxlcygpIHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHNlcXVlbGl6ZS50cmFuc2FjdGlvbigpO1xuICAgIHRyeSB7XG4gICAgICAgIC8vIGF3YWl0IFVzZXJzLmRlc3Ryb3koeyB3aGVyZToge30sIHRydW5jYXRlOiB0cnVlIH0pO1xuICAgICAgICAvLyBhd2FpdCBVc2VyUmVnaXN0cmF0aW9uLmRlc3Ryb3koeyB3aGVyZToge30sIHRydW5jYXRlOiB0cnVlIH0pO1xuICAgICAgICBhd2FpdCBJbWFnZVN0b3JhZ2VzLnRydW5jYXRlKHsgdHJhbnNhY3Rpb24gfSk7XG4gICAgICAgIGF3YWl0IFByb2ZpbGVQaWN0dXJlcy50cnVuY2F0ZSh7IHRyYW5zYWN0aW9uIH0pO1xuICAgICAgICAvLyBJZiBldmVyeXRoaW5nIGlzIHN1Y2Nlc3NmdWwsIGNvbW1pdCB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgYXdhaXQgdHJhbnNhY3Rpb24uY29tbWl0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdUYWJsZXMgaGF2ZSBiZWVuIHRydW5jYXRlZC4uLicpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhbiBlcnJvciwgcm9sbCBiYWNrIHRoZSB0cmFuc2FjdGlvblxuICAgICAgICBhd2FpdCB0cmFuc2FjdGlvbi5yb2xsYmFjaygpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB0cnVuY2F0aW5nIHRhYmxlczonLCBlcnJvcik7XG4gICAgfVxufVxuIiwiLy8gSW1wb3J0IG5lY2Vzc2FyeSBtb2R1bGVzXG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG4vLyBGdW5jdGlvbiB0byBnZW5lcmF0ZSBhIGhhc2ggZnJvbSBhIHN0cmluZ1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlSGFzaChzdHIpIHtcbiAgICByZXR1cm4gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpLnVwZGF0ZShzdHIpLmRpZ2VzdCgnaGV4Jyk7XG59XG4vLyBGdW5jdGlvbiB0byBnZW5lcmF0ZSBhbiBhdmF0YXIgVVJMIGJhc2VkIG9uIHVzZXIgaW5pdGlhbHNcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUF2YXRhclVybChuYW1lKSB7XG4gICAgLy8gRXh0cmFjdCB0aGUgaW5pdGlhbHMgZnJvbSB0aGUgdXNlcidzIG5hbWVcbiAgICBjb25zdCBpbml0aWFscyA9IG5hbWVcbiAgICAgICAgLnNwbGl0KCcgJylcbiAgICAgICAgLm1hcChwYXJ0ID0+IHBhcnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkpXG4gICAgICAgIC5qb2luKCcnKTtcbiAgICAvLyBVc2UgYSBzZXJ2aWNlIHRoYXQgZ2VuZXJhdGVzIGF2YXRhcnMgd2l0aCBpbml0aWFsc1xuICAgIGNvbnN0IHNpemUgPSAyMDA7IC8vIFNwZWNpZnkgdGhlIGRlc2lyZWQgc2l6ZSBvZiB0aGUgYXZhdGFyXG4gICAgY29uc3QgYmFja2dyb3VuZENvbG9yID0gJ3JhbmRvbSc7IC8vIFVzZSBhIHJhbmRvbSBiYWNrZ3JvdW5kIGNvbG9yXG4gICAgY29uc3QgdGV4dENvbG9yID0gJ2ZmZic7IC8vIFVzZSB3aGl0ZSB0ZXh0IGNvbG9yXG4gICAgY29uc3QgYmFzZVVybCA9IGBodHRwczovL3VpLWF2YXRhcnMuY29tL2FwaS8/bmFtZT0ke2VuY29kZVVSSUNvbXBvbmVudChpbml0aWFscyl9JnNpemU9JHtzaXplfSZiYWNrZ3JvdW5kPSR7YmFja2dyb3VuZENvbG9yfSZjb2xvcj0ke3RleHRDb2xvcn1gO1xuICAgIHJldHVybiBiYXNlVXJsO1xufVxuIiwiLy8gc3JjL2Vycm9ySGFuZGxlci50c1xuaW1wb3J0IHByb2Nlc3MgZnJvbSAnbm9kZTpwcm9jZXNzJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgeyBlbnYgfSBmcm9tICcuLi9jb25maWcvaW5kZXgnO1xuZXhwb3J0IGNvbnN0IGhhbmRsZUVycm9yID0gKGVyciwgcmVzKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgLy8gSW5pdGlhbGl6ZSBlcnJvcnMgb2JqZWN0XG4gICAgbGV0IGVycm9ycyA9IHt9O1xuICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBlcnJvcnMgY2FzZXNcbiAgICBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ05ldyBVc2VyIHZhbGlkYXRpb24gZXJyb3InKSkge1xuICAgICAgICBlcnJvcnMgPSB7XG4gICAgICAgICAgICBuYW1lOiAnTmFtZSBpcyByZXF1aXJlZCcsXG4gICAgICAgICAgICB1c2VybmFtZTogJ3VzZXJuYW1lIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgICAgIGVtYWlsOiAnZW1haWwgaXMgcmVxdWlyZWQnLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICdwYXNzd29yZCBpcyByZXF1aXJlZCcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygnVXNlclJlZ2lzdHJhdGlvbnMuZW1haWwnKSkge1xuICAgICAgICBlcnJvcnMuZW1haWwgPSAnRW1haWwgaXMgYWxyZWFkeSByZWdpc3RlcmVkJztcbiAgICB9XG4gICAgaWYgKGVyci5tZXNzYWdlLmluY2x1ZGVzKCdpbmNvcnJlY3QgZW1haWwnKSkge1xuICAgICAgICBlcnJvcnMuZW1haWwgPSAnZW1haWwgaXMgbm90IHJlZ2lzdGVyZWQnO1xuICAgIH1cbiAgICBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ0luY29ycmVjdCBwYXNzd29yZCcpKSB7XG4gICAgICAgIGVycm9ycy5wYXNzd29yZCA9ICdwYXNzd29yZCBpcyBpbmNvcnJlY3QnO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgU2VxdWVsaXplIHZhbGlkYXRpb24gZXJyb3JzXG4gICAgaWYgKGVyci5uYW1lID09PSAnU2VxdWVsaXplVmFsaWRhdGlvbkVycm9yJyAmJiBlcnIuZXJyb3IpIHtcbiAgICAgICAgZXJyb3JzID0gZXJyLmVycm9yLnJlZHVjZSgoYWNjLCBlcnJvcikgPT4ge1xuICAgICAgICAgICAgYWNjW2Vycm9yLnBhdGhdID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9XG4gICAgcmVzLnN0YXR1cyhlcnIuY29kZSB8fCA1MDApLmpzb24oeyBlcnJvcnMgfSk7XG59O1xuLy8gRnVuY3Rpb24gdG8gbG9nIGVycm9ycyB0byBhIGZpbGVcbmZ1bmN0aW9uIGxvZ0Vycm9yVG9GaWxlKGVycikge1xuICAgIGNvbnN0IGxvZyA9IGAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX0gLSAke2Vyci5tZXNzYWdlfVxcbiR7ZXJyLnN0YWNrfVxcbmA7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMoJ2Vycm9yLmxvZycsIGxvZyk7XG59XG5jb25zdCB1bmhhbmRsZWRSZWplY3Rpb25zID0gbmV3IE1hcCgpO1xucHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgKHJlYXNvbiwgcHJvbWlzZSkgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBSZWplY3Rpb24gYXQ6JywgcHJvbWlzZSwgJ3JlYXNvbjonLCByZWFzb24pO1xuICAgIHVuaGFuZGxlZFJlamVjdGlvbnMuc2V0KHByb21pc2UsIHJlYXNvbik7XG59KTtcbnByb2Nlc3Mub24oJ3JlamVjdGlvbkhhbmRsZWQnLCBwcm9taXNlID0+IHtcbiAgICB1bmhhbmRsZWRSZWplY3Rpb25zLmRlbGV0ZShwcm9taXNlKTtcbn0pO1xuLy8gR2xvYmFsIGVycm9yIGhhbmRsaW5nIG1pZGRsZXdhcmUgZm9yIEV4cHJlc3NcbmV4cG9ydCBmdW5jdGlvbiBnbG9iYWxFcnJvckhhbmRsZXIoZXJyLCBfcmVxLCByZXMsIG5leHQpIHtcbiAgICBsb2dFcnJvclRvRmlsZShlcnIpO1xuICAgIC8vIFNlbmQgZ2VuZXJpYyBlcnJvciByZXNwb25zZVxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnLFxuICAgIH0pO1xuICAgIG5leHQoZXJyKTtcbn1cbi8vIENhdGNoIHVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbnNcbnByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIChyZWFzb24sIHByb21pc2UpID0+IHtcbiAgICBsb2dFcnJvclRvRmlsZShyZWFzb24pO1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBSZWplY3Rpb24gYXQ6JywgcHJvbWlzZSwgJ3JlYXNvbjonLCByZWFzb24pO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbn0pO1xuLy8gQ2F0Y2ggdW5jYXVnaHQgZXhjZXB0aW9uc1xucHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCAoZXJyKSA9PiB7XG4gICAgbG9nRXJyb3JUb0ZpbGUoZXJyKTtcbiAgICBjb25zb2xlLmVycm9yKCdVbmNhdWdodCBFeGNlcHRpb246JywgZXJyKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG59KTtcbnByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uJywgKGVycikgPT4ge1xuICAgIGZzLndyaXRlU3luYyhwcm9jZXNzLnN0ZGVyci5mZCwgYENhdWdodCBleGNlcHRpb246ICR7ZXJyfVxcbmAgKyBgRXhjZXB0aW9uIE9yaWdpbjogJHtvcmlnaW59XFxuYCk7XG59KTtcbnNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdUaGlzIHdpbGwgc3RpbGwgcnVuLicpO1xufSwgZW52LkVSUk9SX1RJTUVPVVQpO1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIGdsb2JhbEVycm9ySGFuZGxlcixcbiAgICBoYW5kbGVFcnJvcixcbn07XG4iLCIvLyBIZWxwZXIgZnVuY3Rpb24gdG8gdmFsaWRhdGUgYW5kIHBhcnNlIHF1ZXJ5IHBhcmFtZXRlcnNcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFuZFBhcnNlUGFyYW1zKHJlcSkge1xuICAgIC8vIEV4dHJhY3QgcXVlcnkgcGFyYW1ldGVyc1xuICAgIGNvbnN0IHsgcG9zdF9pZCwgbGlrZXNfaWQsIGNyZWF0b3JfaWQgfSA9IHJlcS5xdWVyeTtcbiAgICAvLyBQYXJzZSBwYXJhbWV0ZXJzXG4gICAgY29uc3QgcGFyc2VkUG9zdElkID0gcG9zdF9pZCAhPT0gdW5kZWZpbmVkID8gcGFyc2VJbnQocG9zdF9pZCwgMTApIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHBhcnNlZExpa2VzSWQgPSBsaWtlc19pZCAhPT0gdW5kZWZpbmVkID8gcGFyc2VJbnQobGlrZXNfaWQsIDEwKSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBwYXJzZWRDcmVhdG9ySWQgPSBjcmVhdG9yX2lkICE9PSB1bmRlZmluZWQgPyBwYXJzZUludChjcmVhdG9yX2lkLCAxMCkgOiB1bmRlZmluZWQ7XG4gICAgLy8gRGVidWdnaW5nIGxvZ3NcbiAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgcGFyYW1ldGVyczonLCB7IHBvc3RfaWQsIGxpa2VzX2lkLCBjcmVhdG9yX2lkIH0pO1xuICAgIGNvbnNvbGUubG9nKCdQYXJzZWQgcGFyYW1ldGVyczonLCB7XG4gICAgICAgIHBhcnNlZFBvc3RJZCxcbiAgICAgICAgcGFyc2VkTGlrZXNJZCxcbiAgICAgICAgcGFyc2VkQ3JlYXRvcklkLFxuICAgIH0pO1xuICAgIC8vIFZhbGlkYXRlIHByZXNlbmNlIG9mIHBhcmFtZXRlcnNcbiAgICAvLyBWYWxpZGF0ZSBwYXJzZWQgdmFsdWVzXG4gICAgaWYgKChwb3N0X2lkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgcGFyc2VkUG9zdElkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgaXNOYU4ocGFyc2VkUG9zdElkKSkgfHxcbiAgICAgICAgKGxpa2VzX2lkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHBhcnNlZExpa2VzSWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgaXNOYU4ocGFyc2VkTGlrZXNJZCkpIHx8XG4gICAgICAgIChjcmVhdG9yX2lkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHBhcnNlZENyZWF0b3JJZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBpc05hTihwYXJzZWRDcmVhdG9ySWQpKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcXVlcnkgcGFyYW1ldGVyczogcG9zdF9pZCwgbGlrZXNfaWQsIGFuZCBjcmVhdG9yX2lkIG11c3QgYmUgbnVtYmVycycpO1xuICAgIH1cbiAgICAvLyBBZGRpdGlvbmFsIGNoZWNrcyBhbmQgZXJyb3IgaGFuZGxpbmdcbiAgICBpZiAoKHBhcnNlZFBvc3RJZCAhPT0gdW5kZWZpbmVkICYmIHBhcnNlZFBvc3RJZCA8IDApIHx8XG4gICAgICAgIChwYXJzZWRMaWtlc0lkICE9PSB1bmRlZmluZWQgJiYgcGFyc2VkTGlrZXNJZCA8IDApIHx8XG4gICAgICAgIChwYXJzZWRDcmVhdG9ySWQgIT09IHVuZGVmaW5lZCAmJiBwYXJzZWRDcmVhdG9ySWQgPCAwKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcXVlcnkgcGFyYW1ldGVyczogcG9zdF9pZCwgbGlrZXNfaWQsIGFuZCBjcmVhdG9yX2lkIG11c3QgYmUgbm9uLW5lZ2F0aXZlJyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHBvc3RfaWQ6IHBhcnNlZFBvc3RJZCxcbiAgICAgICAgbGlrZXNfaWQ6IHBhcnNlZExpa2VzSWQsXG4gICAgICAgIGNyZWF0b3JfaWQ6IHBhcnNlZENyZWF0b3JJZCxcbiAgICB9O1xufVxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHZhbGlkYXRlQW5kUGFyc2VQYXJhbXMsXG59O1xuIl0sIm5hbWVzIjpbImNvcnNTY2hlbWFFTlYiLCJsb2FkIiwiQ09SU19PUklHSU4iLCJTdHJpbmciLCJDT1JTX09QVElPTlNfU1VDQ0VTU19TVEFUVVMiLCJOdW1iZXIiLCJDT1JTX0NSRURFTlRJQUxTIiwiQm9vbGVhbiIsIkNPUlNfTUVUSE9EUyIsIm9rIiwiY29yc0VOViIsImNvck9wdGlvbnMiLCJvcmlnaW4iLCJtZXRob2RzIiwiY3JlZGVudGlhbHMiLCJvcHRpb25zU3VjY2Vzc1N0YXR1cyIsImRhdGFTY2hlbWFFTlYiLCJEQl9IT1NUIiwiREJfUE9SVCIsIkRCX1VTRVIiLCJEQl9QQVNTIiwiREJfTkFNRSIsIkRCX1NPQ0tFVF9QQVRIIiwiREJfU09DS0VUX1RJTUVPVVQiLCJEQl9DT01QUkVTUyIsIkRCX0RFQlVHIiwiREJfUEVSTUlUX0xPQ0FMX0lORklMRSIsIkRCX1RSQUNFIiwiREJfQ0hFQ0tfRFVQTElDQVRFIiwiREJfU1NMIiwiREJfU1NMX0NBIiwiREJfU1NMX0tFWSIsIkRCX1NTTF9DRVJUIiwiREJfQ09OTkVDVElPTl9BVFRSSUJVVEVTIiwiREJfQ09OTkVDVElPTl9USU1FT1VUIiwiZGF0YWJhc2VFTlYiLCJqd3RTY2hlbWFFTlYiLCJKV1RfU0VDUkVUIiwiSldUX0VYUElSRVNfSU4iLCJKV1RfUkVGUkVTSF9TRUNSRVQiLCJKV1RfUkVGUkVTSF9FWFBJUkVTX0lOIiwiSldUX1JFRlJFU0hfTUFYX0FHRSIsIkpXVF9BTEdPUklUSE0iLCJKV1RfSVNTVUVSIiwiSldUX01BWF9BR0UiLCJKV1RfSFRUUF9PTkxZIiwiSldUX1NBTUVfU0lURSIsIkpXVF9DT09LSUVfTkFNRSIsIkpXVF9TRUNVUkUiLCJqd3RFTlYiLCJjcmVhdGVQb3N0IiwiYXN5bmMiLCJyZXEiLCJyZXMiLCJjYXB0aW9uIiwibG9jYXRpb24iLCJ0YWdzIiwiYm9keSIsInRva2VuIiwiY29va2llcyIsImp3dCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZXJyIiwiZGVjb2RlZFRva2VuIiwiY29uc29sZSIsImxvZyIsInVzZXJfaWQiLCJpZCIsInVzZXIiLCJmaW5kQnlQayIsImltYWdlUmVjb3JkIiwiZmluZEltYWdlQnlSZWZlcmVuY2VLZXkiLCJuZXdQb3N0IiwiY3JlYXRlIiwiaW1hZ2VVUkwiLCJpbWFnZVVybCIsImNyZWF0ZWRfQXQiLCJEYXRlIiwiY3JlYXRvcl9JZCIsImVycm9yIiwiZGVsZXRlRmlsZSIsIl9yZXEiLCJpbWFnZSIsImZpbmRPbmUiLCJ3aGVyZSIsImRlc3Ryb3kiLCJ1cGRhdGVQb3N0IiwibmV3SW1hZ2VVcmwiLCJwb3N0X2lkIiwicGFyc2VJbnQiLCJxdWVyeSIsInBvc3QiLCJwcmV2aWV3SW1hZ2VVcmwiLCJ1cGRhdGVkUG9zdCIsInVwZGF0ZSIsImdldEFsbFBvc3RzIiwicG9zdHMiLCJmaW5kQWxsIiwiaW5jbHVkZSIsIm1vZGVsIiwiYXMiLCJhdHRyaWJ1dGVzIiwibGlrZVBvc3QiLCJpc05hTiIsIm5ld0xpa2UiLCJjcmVhdGVMaWtlIiwibGlrZXNfQ291bnQiLCJsaWtlc0NvdW50IiwibGlrZSIsImdldFBvc3RCeUlkIiwicmVxdWVzdGVkVXNlcklkIiwicmVxdWVzdGVkVXNlciIsImRlbGV0ZUxpa2VkUG9zdCIsImV4aXN0aW5nTGlrZSIsImN1cnJlbnRMaWtlcyIsInNhdmUiLCJzYXZlUG9zdCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3BsaXQiLCJuZXdTYXZlIiwiY3JlYXRlU2F2ZSIsInNhdmVEYXRlIiwiZGVsZXRlU2F2ZWRQb3N0IiwiZXhpc3RpbmdTYXZlIiwiZ2V0U2F2ZWRQb3N0cyIsInNhdmVkUG9zdHMiLCJkZWxldGVQb3N0IiwiZ2V0SW5maW5pdGVQb3N0cyIsInBhZ2UiLCJsaW1pdCIsIm9mZnNldCIsImZpbmRBbmRDb3VudEFsbCIsIm9yZGVyIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwiY291bnQiLCJ0b3RhbENvdW50Iiwic2VhcmNoUG9zdHMiLCJzZWFyY2hWYWx1ZSIsIk9wIiwib3IiLCJnZXRVc2VyUG9zdHMiLCJnZXRQb3B1bGFyUG9zdHMiLCJwb3B1bGFyUG9zdHMiLCJ1c2VyUmVnaXN0ZXIiLCJuYW1lIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiRXJyb3IiLCJuZXdVc2VyIiwiaGFzaGVkcGFzc3dvcmQiLCJjcmVhdGVkQXQiLCJjb29raWUiLCJodHRwT25seSIsIm1heEFnZSIsInNlY3VyZSIsInNhbWVTaXRlIiwidXNlckxvZ2luIiwibG9naW5Vc2VyIiwicmVmcmVzaFRva2VuIiwic2V0SGVhZGVyIiwibG9jYWxzIiwidXNlckxvZ291dCIsImFjY2Vzc1Rva2VuIiwibmV3VG9rZW4iLCJleHBpcmVzSW4iLCJhbGdvcml0aG0iLCJpc3N1ZXIiLCJnZXRJbWFnZVByZXZpZXdVcmwiLCJwcm9jZXNzIiwiZW52IiwiZ2V0UHJvZmlsZVBpY1ByZXZpZXdVcmwiLCJwcm9maWxlUGljIiwiZmluZFByb2ZpbGVQaWNCeVJlZmVyZW5jZUtleSIsImdldEFsbFVzZXJzIiwidXNlcnMiLCJnZXRVc2VyQnlJRCIsImdldFBvc3RCeVJlZmVyZW5jZUlEIiwidXNlckxpa2VzIiwidXBkYXRlVXNlciIsInJlc3QiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwic3BhY2VJbmRleCIsImxhc3RJbmRleE9mIiwiZmlyc3ROYW1lIiwic2xpY2UiLCJsYXN0TmFtZSIsImFmZmVjdGVkQ291bnQiLCJ1cGRhdGVkVXNlcnMiLCJnZXRVc2VyRGF0YUJ5SUQiLCJsaWtlc19pZCIsImNyZWF0b3IiLCJsaW1pdGVyIiwid2luZG93TXMiLCJSQVJFX0xJTUlUX1dJTkRPV19NUyIsIm1heCIsIk1BWCIsIlJBUkVfTElNSVRfTUVTU0FHRSIsInN0YXR1c0NvZGUiLCJSQVJFX0xJTUlUX0NPREUiLCJoYW5kbGVyIiwia2V5R2VuZXJhdG9yIiwiaXAiLCJyZXBsYWNlIiwic2VuZCIsInNvY2tldCIsInJlbW90ZUFkZHJlc3MiLCJqd3RHZW5lcmF0b3IiLCJwYXlsb2FkIiwiand0UmVmcmVzaCIsInZlcmlmeVVzZXIiLCJuZXh0Iiwid2FpdEZvckRCIiwic2VxdWVsaXplIiwiYXR0ZW1wdHMiLCJhdXRoZW50aWNhdGUiLCJzeW5jIiwiZm9yY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJkYkNvbmZpZyIsIkRpYWxlY3QiLCJob3N0IiwiZGF0YWJhc2UiLCJzb2NrZXRQYXRoIiwic29ja2V0VGltZW91dCIsImNvbXByZXNzIiwiZGVidWciLCJwZXJtaXRMb2NhbEluZmlsZSIsInRyYWNlIiwiY2hlY2tEdXBsaWNhdGUiLCJjb25uZWN0QXR0cmlidXRlcyIsIkpTT04iLCJwYXJzZSIsImNvbm5lY3Rpb25UaW1lb3V0IiwicG9ydCIsInNzbCIsImRpYWxlY3RPcHRpb25zIiwiY2EiLCJ0b1N0cmluZyIsImtleSIsImNlcnQiLCJjcmVhdGVTZXF1ZWxpemVJbnN0YW5jZSIsIlNlcXVlbGl6ZSIsImRpYWxlY3QiLCJfX2Rpcm5hbWUiLCJkaXJuYW1lIiwiZmlsZVVSTFRvUGF0aCIsIk1hcmlhRGJEaWFsZWN0IiwibW9kZWxzIiwiaW1wb3J0TW9kZWxzIiwiYXBwIiwidXNlIiwiaGVhZGVyIiwibWV0aG9kIiwic2VuZFN0YXR1cyIsImV4dGVuZGVkIiwiVHJ1c3RfUHJveHkiLCJUUlVTVF9QUk9YWSIsIm51bWJlck9mUHJveGllcyIsIk5VTUJFUl9PRl9QUk9YSUVTIiwic2V0IiwiZ2V0IiwicmVxdWVzdCIsInJlc3BvbnNlIiwiY29udGVudFNlY3VyaXR5UG9saWN5IiwiTU9SR0FOIiwiY3JlYXRvcl9pZCIsInVuZGVmaW5lZCIsInVzZXJJZCIsIkltYWdlU3RvcmFnZXMiLCJNb2RlbCIsImZpbmRJbWFnZUJ5SWQiLCJ0aGlzIiwidmFsdWUiLCJpbml0IiwidHlwZSIsIkRhdGFUeXBlcyIsIklOVEVHRVIiLCJwcmltYXJ5S2V5IiwiYXV0b0luY3JlbWVudCIsImFsbG93TnVsbCIsIlNUUklORyIsInJlZmVyZW5jZXMiLCJEQVRFIiwiZGVmYXVsdFZhbHVlIiwiTk9XIiwibW9kZWxOYW1lIiwidGltZXN0YW1wcyIsImFmdGVyQ3JlYXRlIiwiaGFzTWFueSIsImZvcmVpZ25LZXkiLCJvbkRlbGV0ZSIsIm9uVXBkYXRlIiwiYmVsb25nc1RvIiwidGhlbiIsImNhdGNoIiwiTGlrZXMiLCJmaW5kTGlrZUJ5SWQiLCJmaW5kTGlrZUJ5UmVmZXJlbmNlS2V5IiwiZmluZEFsbExpa2VzQnlSZWZlcmVuY2VLZXkiLCJkZWxldGVMaWtlQnlSZWZlcmVuY2VLZXkiLCJmcmVlemVUYWJsZU5hbWUiLCJQb3N0cyIsInVwZGF0ZWRQb3N0cyIsInJldHVybmluZyIsImdldFBvc3RCeUlEIiwiZ2V0U2F2ZWRQb3N0IiwiUHJvZmlsZVBpY3R1cmVzIiwiZmluZFByb2ZpbGVQaWN0dXJlQnlJZCIsImdldFByb2ZpbGVQaWNCeVJlZmVyZW5jZUlEIiwidXBkYXRlZF9BdCIsInVwZGF0ZWRBdCIsImhhc09uZSIsIlNhdmVzIiwiY2hlY2tJZlNhdmVkIiwidGFibGVOYW1lIiwidGFyZ2V0S2V5IiwiVXNlcnMiLCJ2YWxpZGF0ZSIsIm5vdEVtcHR5IiwidW5pcXVlIiwiaXMiLCJsZW4iLCJpc0VtYWlsIiwiYmlvIiwiam9pbiIsImF2YXRhclVybCIsImxhYmVsIiwibGFzdF9hY3Rpdml0eSIsInVwZGF0ZWRfYXQiLCJVc2VyUmVnaXN0cmF0aW9uSUQiLCJVVUlEIiwiVXNlclJlZ2lzdHJhdGlvbiIsImxvZ291dFVzZXIiLCJyZXNldFBhc3N3b3JkIiwiYmVmb3JlQ3JlYXRlIiwic2FsdCIsImhhc2hlZFBhc3N3b3JkIiwiZmlyc3RfTmFtZSIsImF2YXRhciIsInVwc2VydCIsInJvdXRlciIsInNpbmdsZSIsImZpbGUiLCJyZWxhdGl2ZVBhdGgiLCJmaWxlbmFtZSIsInBvc3RJZCIsInB1dCIsImRlbGV0ZSIsIk5PREVfRU5WIiwiUkVTUE9OU0VfU1RBVFVTIiwiQVBQX05BTUUiLCJ1cGxvYWREaXIiLCJyZWN1cnNpdmUiLCJzdG9yYWdlIiwiZGVzdGluYXRpb24iLCJfZmlsZSIsImNiIiwidW5pcXVlU3VmZml4Iiwibm93Iiwicm91bmQiLCJyYW5kb20iLCJmaWVsZG5hbWUiLCJvcmlnaW5hbG5hbWUiLCJsaW1pdHMiLCJmaWxlU2l6ZSIsImZpbGVGaWx0ZXIiLCJmaWxldHlwZXMiLCJtaW1ldHlwZSIsInRlc3QiLCJleHRuYW1lIiwidG9Mb3dlckNhc2UiLCJ2YWxpZGF0ZU1JTUVUeXBlIiwicGF0aCIsIm9yaWdpbmFsRmlsZW5hbWUiLCJhbGxvd01pbWVUeXBlcyIsInZhbGlkYXRlTWltZVR5cGUiLCJkb1NvbWVMb25nUnVubmluZ1Byb2Nlc3MiLCJQZXJmb3JtYW5jZU9ic2VydmVyIiwiaXRlbXMiLCJnZXRFbnRyaWVzIiwiZm9yRWFjaCIsImVudHJ5IiwiZHVyYXRpb24iLCJwZXJmb3JtYW5jZSIsImNsZWFyTWFya3MiLCJvYnNlcnZlIiwibWFyayIsImRldGFpbCIsImxvZ2luTWVhc3VyZSIsIm1lYXN1cmUiLCJ0cnVuY2F0ZVRhYmxlcyIsInRyYW5zYWN0aW9uIiwidHJ1bmNhdGUiLCJjb21taXQiLCJyb2xsYmFjayIsImdlbmVyYXRlQXZhdGFyVXJsIiwiaW5pdGlhbHMiLCJtYXAiLCJwYXJ0IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJlbmNvZGVVUklDb21wb25lbnQiLCJoYW5kbGVFcnJvciIsImVycm9ycyIsImluY2x1ZGVzIiwicmVkdWNlIiwiYWNjIiwiY29kZSIsImxvZ0Vycm9yVG9GaWxlIiwidG9JU09TdHJpbmciLCJzdGFjayIsInVuaGFuZGxlZFJlamVjdGlvbnMiLCJNYXAiLCJnbG9iYWxFcnJvckhhbmRsZXIiLCJyZWFzb24iLCJwcm9taXNlIiwiZmQiLCJFUlJPUl9USU1FT1VUIiwidmFsaWRhdGVBbmRQYXJzZVBhcmFtcyIsInBhcnNlZFBvc3RJZCIsInBhcnNlZExpa2VzSWQiLCJwYXJzZWRDcmVhdG9ySWQiXSwic291cmNlUm9vdCI6IiJ9